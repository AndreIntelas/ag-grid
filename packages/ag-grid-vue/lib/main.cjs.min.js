var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of __getOwnPropNames(t))!__hasOwnProp.call(e,n)&&n!==r&&__defProp(e,n,{get:()=>t[n],enumerable:!(o=__getOwnPropDesc(t,n))||o.enumerable});return e},__toESM=(e,t,r)=>(r=e!=null?__create(__getProtoOf(e)):{},__copyProps(t||!e||!e.__esModule?__defProp(r,"default",{value:e,enumerable:!0}):r,e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,r,o)=>{for(var n=o>1?void 0:o?__getOwnPropDesc(t,r):t,s=e.length-1,i;s>=0;s--)(i=e[s])&&(n=(o?i(t,r,n):i(n))||n);return o&&n&&__defProp(t,r,n),n},main_exports={};__export(main_exports,{AgGridVue:()=>AgGridVue}),module.exports=__toCommonJS(main_exports);var import_vue_property_decorator=require("vue-property-decorator"),import_ag_grid_community4=require("ag-grid-community"),import_ag_grid_community=require("ag-grid-community"),import_vue=__toESM(require("vue")),VueComponentFactory=class{static getComponentType(e,t){if(typeof t=="string"){const r=this.searchForComponentInstance(e,t);return r?import_vue.default.extend(r):(console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),null)}else return t}static createAndMountComponent(e,t,r){const o={data:{params:Object.freeze(e)},parent:r};r.componentDependencies&&r.componentDependencies.forEach(s=>o[s]=r[s]);const n=new t(o);return n.$mount(),n}static searchForComponentInstance(e,t,r=10,o=!1){let n=null,s=e.$parent,i=0;for(;!n&&s&&s.$options&&++i<r;)n=s.$options.components[t],s=s.$parent;return!n&&!o?(console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),null):n}},VueFrameworkComponentWrapper=class extends import_ag_grid_community.BaseComponentWrapper{constructor(e){super(),this.parent=e}createWrapper(e){const t=this;class r extends VueComponent{init(s){super.init(s)}hasMethod(s){return o.getFrameworkComponentInstance()[s]!=null}callMethod(s,i){const u=this.getFrameworkComponentInstance();return o.getFrameworkComponentInstance()[s].apply(u,i)}addMethod(s,i){o[s]=i}overrideProcessing(s){return t.parent.autoParamsRefresh&&s==="refresh"}processMethod(s,i){return s==="refresh"&&(this.getFrameworkComponentInstance().params=i[0]),this.hasMethod(s)?this.callMethod(s,i):s==="refresh"}createComponent(s){return t.createComponent(e,s)}}const o=new r;return o}createComponent(e,t){const r=VueComponentFactory.getComponentType(this.parent,e);if(r)return VueComponentFactory.createAndMountComponent(t,r,this.parent)}createMethodProxy(e,t,r){return function(){return e.overrideProcessing(t)?e.processMethod(t,arguments):e.hasMethod(t)?e.callMethod(t,arguments):(r&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}destroy(){this.parent=null}};VueFrameworkComponentWrapper=__decorateClass([(0,import_ag_grid_community.Bean)("frameworkComponentWrapper")],VueFrameworkComponentWrapper);var VueComponent=class{getGui(){return this.component.$el}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.component.$destroy()}getFrameworkComponentInstance(){return this.component}init(e){this.component=this.createComponent(e)}},import_ag_grid_community2=require("ag-grid-community"),getAgGridProperties=()=>{const e={gridOptions:{default(){return{}}},rowDataModel:void 0},t=["context","popupParent"],r=import_ag_grid_community2.ComponentUtil.ALL_PROPERTIES.filter(a=>!t.includes(a)),o=(a,c)=>{const p={};return a.forEach(d=>{c[d]!==import_ag_grid_community2.ComponentUtil.VUE_OMITTED_PROPERTY&&(p[d]=c[d])}),p},n=(a,c,p)=>{if(!p.gridCreated||!p.api)return;const d={};Object.entries(c).forEach(([l,h])=>{a[l]!==h&&(d[l]=h)}),import_ag_grid_community2.ComponentUtil.processOnChange(d,p.api)},s={props(){return o(r,this)},shallowProps(){return o(t,this)}},i={rowDataModel(a,c){!this.gridCreated||!this.api||a!==c&&(a&&c&&a.length===c.length&&a.every((p,d)=>p===c[d])||import_ag_grid_community2.ComponentUtil.processOnChange({rowData:a},this.api))},props:{handler(a,c){n(c,a,this)},deep:!0},shallowProps:{handler(a,c){n(c,a,this)},deep:!1}};return import_ag_grid_community2.ComponentUtil.ALL_PROPERTIES.forEach(a=>{e[a]={default:import_ag_grid_community2.ComponentUtil.VUE_OMITTED_PROPERTY}}),[e,s,i,{prop:"rowDataModel",event:"data-model-changed"}]},import_ag_grid_community3=require("ag-grid-community"),VueFrameworkOverrides=class extends import_ag_grid_community3.VanillaFrameworkOverrides{constructor(e){super("vue"),this.parent=e}frameworkComponent(e,t){let r=!!VueComponentFactory.searchForComponentInstance(this.parent,e,10,!0),o=r?e:null;if(!o&&t&&t[e]){const n=t[e];r=!!VueComponentFactory.searchForComponentInstance(this.parent,n,10,!0),o=r?n:null}return o}isFrameworkComponent(e){return typeof e=="object"}},[props,computed,watch,model]=getAgGridProperties(),AgGridVue=class extends import_vue_property_decorator.Vue{constructor(){super(...arguments),this.gridCreated=!1,this.isDestroyed=!1,this.gridReadyFired=!1,this.api=void 0,this.emitRowModel=null}static kebabProperty(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}render(e){return e("div")}globalEventListenerFactory(e){return(t,r)=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const o=import_ag_grid_community4.ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(o&&!e||!o&&e)return;this.updateModelIfUsed(t);const n=AgGridVue.kebabProperty(t);this.$listeners[n]?this.$emit(n,r):this.$listeners[t]&&this.$emit(t,r)}}mounted(){this.emitRowModel=this.debounce(()=>{this.$emit("data-model-changed",Object.freeze(this.getRowData()))},20);const e=new VueFrameworkComponentWrapper(this),t=import_ag_grid_community4.ComponentUtil.combineAttributesAndGridOptions(this.gridOptions,this);this.checkForBindingConflicts();const r=this.getRowDataBasedOnBindings();r!==import_ag_grid_community4.ComponentUtil.VUE_OMITTED_PROPERTY&&(t.rowData=r);const o={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new VueFrameworkOverrides(this),providedBeanInstances:{frameworkComponentWrapper:e},modules:this.modules};this.api=(0,import_ag_grid_community4.createGrid)(this.$el,t,o),this.gridCreated=!0}destroyed(){var e;this.gridCreated&&((e=this.api)==null||e.destroy(),this.isDestroyed=!0)}checkForBindingConflicts(){const e=this;(e.rowData||this.gridOptions.rowData)&&e.rowDataModel&&console.warn("AG Grid: Using both rowData and rowDataModel. rowData will be ignored.")}getRowData(){var e;const t=[];return(e=this.api)==null||e.forEachNode(r=>{t.push(r.data)}),t}updateModelIfUsed(e){this.gridReadyFired&&this.$listeners["data-model-changed"]&&AgGridVue.ROW_DATA_EVENTS.has(e)&&this.emitRowModel&&this.emitRowModel()}getRowDataBasedOnBindings(){const e=this,t=e.rowDataModel;return t||(e.rowData?e.rowData:e.gridOptions.rowData)}debounce(e,t){let r;return()=>{const o=function(){e()};window.clearTimeout(r),r=window.setTimeout(o,t)}}};AgGridVue.ROW_DATA_EVENTS=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),__decorateClass([(0,import_vue_property_decorator.Prop)(Boolean)],AgGridVue.prototype,"autoParamsRefresh",2),__decorateClass([(0,import_vue_property_decorator.Prop)({default:()=>[]})],AgGridVue.prototype,"componentDependencies",2),__decorateClass([(0,import_vue_property_decorator.Prop)({default:()=>[]})],AgGridVue.prototype,"modules",2),AgGridVue=__decorateClass([(0,import_ag_grid_community4.Bean)("agGridVue"),(0,import_vue_property_decorator.Component)({props,computed,watch,model})],AgGridVue);
