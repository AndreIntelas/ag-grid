/**
          * @ag-grid-enterprise/charts-enterprise - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/charts-enterprise - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@ag-grid-enterprise/core"),e=require("@ag-grid-enterprise/charts"),i=Object.defineProperty,s=Object.defineProperties,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,c=Reflect.get,d=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),u=Math.pow,p=(t,e,s)=>e in t?i(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,g=(t,e)=>{for(var i in e||(e={}))l.call(e,i)&&p(t,i,e[i]);if(o)for(var i of o(e))h.call(e,i)&&p(t,i,e[i]);return t},y=(t,e)=>s(t,a(e)),m=(t,e)=>{var i={};for(var s in t)l.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&h.call(t,s)&&(i[s]=t[s]);return i},f=(t,e)=>{for(var s in e)i(t,s,{get:e[s],enumerable:!0})},x=(t,e,s,a)=>{for(var o,r=a>1?void 0:a?n(e,s):e,l=t.length-1;l>=0;l--)(o=t[l])&&(r=(a?o(e,s,r):o(r))||r);return a&&r&&i(e,s,r),r},v=(t,e,i)=>c(r(t),i,e),b=(t,e,i)=>new Promise((s,n)=>{var a=t=>{try{r(i.next(t))}catch(t){n(t)}},o=t=>{try{r(i.throw(t))}catch(t){n(t)}},r=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,o);r((i=i.apply(t,e)).next())}),S=function(t,e){this[0]=t,this[1]=e},k=t=>{var e,i=t[d("asyncIterator")],s=!1,n={};return null==i?(i=t[d("iterator")](),e=t=>n[t]=e=>i[t](e)):(i=i.call(t),e=t=>n[t]=e=>{if(s){if(s=!1,"throw"===t)throw e;return e}return s=!0,{done:!1,value:new S(new Promise(s=>{var n=i[t](e);if(!(n instanceof Object))throw TypeError("Object expected");s(n)}),1)}}),n[d("iterator")]=()=>n,e("next"),"throw"in i?e("throw"):n.throw=t=>{throw t},"return"in i&&e("return"),n},D=["bar","line","scatter"],M=(t=>(t.POINTER="pointer",t.NODE="node",t))(M||{});f({},{day:()=>W,friday:()=>Z,hour:()=>K,millisecond:()=>E,minute:()=>B,monday:()=>H,month:()=>tt,saturday:()=>Q,second:()=>P,sunday:()=>j,thursday:()=>q,tuesday:()=>X,utcDay:()=>ot,utcHour:()=>at,utcMinute:()=>nt,utcMonth:()=>rt,utcYear:()=>lt,wednesday:()=>$,year:()=>it});var L=new Map;function A(t,e){L.has(e)||(L.set(e,!0),t())}function w(t){return t}function N(t,e=0,i){const{leading:s=!0,trailing:n=!0}=null!=i?i:{};let a,o,r=!1;function l(){n&&o?(a=setTimeout(l,e),t(...o)):r=!1,o=null}return Object.assign((function(...i){r?o=i:(r=!0,a=setTimeout(l,e),s?t(...i):o=i)}),{cancel(){clearTimeout(a),r=!1,o=null}})}A.clear=()=>L.clear();var C={log(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},table(...t){console.table(...t)},warnOnce(t,...e){A(()=>C.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){A(()=>C.error(t,...e),"Logger.error: "+t)}},I=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var s;const n=null==(s=this._rangeCallback)?void 0:s.call(this,t,e),a=this._encode(i?this.floor(t):this.ceil(t)),o=this._encode(i?this.ceil(e):this.floor(e));if(o<a)return[];const r=[];for(let t=a;t<=o;t++){const e=this._decode(t);r.push(e)}return null==n||n(),r}},T=class extends I{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,s=0;const n=t;n!==(t=Math.max(1,Math.round(t)))&&C.warnOnce(`interval step of [${n}] rounded to [${t}].`);const{snapTo:a="start"}=null!=e?e:{};if("string"==typeof a){const e=s;i=(i,n)=>{const o="start"===a?i:n;return s=this.getOffset(o,t),()=>s=e}}else"number"==typeof a?s=this.getOffset(new Date(a),t):a instanceof Date&&(s=this.getOffset(a,t));return new I(e=>{const i=this._encode(e);return Math.floor((i-s)/t)},e=>this._decode(e*t+s),i)}};var E=new T((function(t){return t.getTime()}),(function(t){return new Date(t)})),O=E;new Date(0).getFullYear();var R=6e4*(new Date).getTimezoneOffset();var P=new T((function(t){return Math.floor((t.getTime()-R)/1e3)}),(function(t){return new Date(R+1e3*t)})),_=P,F=6e4*(new Date).getTimezoneOffset();var B=new T((function(t){return Math.floor((t.getTime()-F)/6e4)}),(function(t){return new Date(F+6e4*t)})),z=B,G=6e4*(new Date).getTimezoneOffset();var K=new T((function(t){return Math.floor((t.getTime()-G)/36e5)}),(function(t){return new Date(G+36e5*t)})),V=K;var W=new T((function(t){const e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/864e5)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e})),Y=W;function U(t){const e=(7+t-4)%7;return new T((function(t){const i=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-i)/6048e5-e/7)}),(function(t){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*t+e),i}))}var j=U(0),H=U(1),X=U(2),$=U(3),q=U(4),Z=U(5),Q=U(6),J=j;var tt=new T((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)})),et=tt;var it=new T((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e})),st=it;var nt=new T((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)}));var at=new T((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)}));var ot=new T((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));var rt=new T((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));var lt=new T((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),ht={isEnterprise:!1},ct=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},dt=[];function ut(t){const e=dt.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=dt.indexOf(e);dt.splice(i,1,t)}}else dt.push(t)}function pt(){return dt.some(t=>"enterprise"===t.packageType)}var gt={};function yt(t,e){gt[t]=e}function mt(t,e){const i=gt[t];if(i)return new i(e);throw new Error("AG Charts - unknown axis type: "+t)}var ft={has:t=>Object.hasOwn(gt,t),get axesTypes(){return Object.keys(gt)}},xt={};function vt(t,e){xt[t]=e}function bt(t){var e;return null!=(e=xt[t])?e:{}}var St=Symbol("BREAK"),kt="__decorator_config";function Dt(t,e){null==Object.getOwnPropertyDescriptor(t,kt)&&Object.defineProperty(t,kt,{value:{}});const i=t[kt],s=e.toString();if(void 0!==i[s])return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const a=Object.getOwnPropertyDescriptor(t,e),o=null==a?void 0:a.set,r=null==a?void 0:a.get;return Object.defineProperty(t,e,{set:function(t){const{setters:a,observers:l}=i[s];let h;a.some(t=>t.length>2)&&(h=r?r.call(this):n.get(this));for(const i of a)if((t=i(this,e,t,h))===St)return;o?o.call(this,t):n.set(this,t);for(const e of l)e(this,t,h)},get:function(){let t=r?r.call(this):n.get(this);for(const n of i[s].getters)if(t=n(this,e,t),t===St)return;return t},enumerable:!0,configurable:!1}),i[s]}function Mt(t,e,i){return(s,n)=>{const a=Dt(s,n);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function Lt(t){return void 0!==t&&kt in t}function At(t){const e=new Set;for(;Lt(t);)e.add(null==t?void 0:t[kt]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(t=>Object.keys(t))}function wt(t){return At(t).reduce((e,i)=>{var s;return e[i]=null!=(s=t[i])?s:null,e},{})}function Nt(t){return null!=t}function Ct(t){return Array.isArray(t)}function It(t){return"boolean"==typeof t}function Tt(t){return t instanceof Date}function Et(t){return Tt(t)&&!isNaN(Number(t))}function Ot(t){return t instanceof RegExp}function Rt(t){return"function"==typeof t}function Pt(t){return"object"==typeof t&&null!==t&&!Ct(t)}function _t(t){return Ct(t)||Ft(t)}function Ft(t){return"object"==typeof t&&null!==t&&t.constructor===Object}function Bt(t){return"string"==typeof t}function zt(t){return"number"==typeof t}function Gt(t){return zt(t)&&Number.isFinite(t)}function Kt(t){return"undefined"!=typeof window&&t instanceof HTMLElement}function Vt(t,e){return Bt(e)&&Object.keys(t).includes(e)}function Wt(t,e){return Object.values(t).includes(e)}function Yt(t){return"symbol"==typeof t}function Ut(...t){return jt(...t.reverse())}function jt(...t){const e={};for(const i of t){if(!Pt(i))continue;const t=Lt(i)?At(i):Object.keys(i);for(const s of t)Ft(e[s])&&Ft(i[s])?e[s]=jt(e[s],i[s]):null!=e[s]||(e[s]=i[s])}return e}function Ht(t,...e){return e&&Ct(t)?t.map(t=>jt(t,...e)):t}function Xt(t,e){return Object.entries(t).reduce((i,[s,n])=>(i[s]=e(n,s,t),i),{})}function $t(t,e){return(Ct(e)?e:e.split(".")).reduce((t,e)=>t[e],t)}function qt(t,e,i){const s=Ct(e)?e.slice():e.split("."),n=s.pop();s.reduce((t,e)=>t[e],t)[n]=i}function Zt(t,e,i){if(void 0===i)return e;for(const s of t){const t=i[s];void 0!==t&&(e[s]=t)}return e}var Qt={},Jt={},te={has:t=>Object.hasOwn(Qt,t),isCartesian:t=>"cartesian"===Qt[t],isPolar:t=>"polar"===Qt[t],isHierarchy:t=>"hierarchy"===Qt[t],get seriesTypes(){return Object.keys(Qt)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function ee(t,e){Jt[t]=jt(e,Jt[t])}function ie(t){var e;return null!=(e=Jt[t])?e:{}}var se=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function ne(t){return se.some(e=>"series"===e.type&&e.identifier===t)}function ae(t){var e;return null==(e=se.find(e=>"series"===e.type&&e.identifier===t))?void 0:e.chartTypes}function oe(t){var e,i;return(null!=(i=null==(e=se.find(e=>"series"===e.type&&e.identifier===t))?void 0:e.useCount)?i:0)>0}function re(t){if(!function(t){return"enterprise"===t.packageType}(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=se.find(e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every(t=>e.chartTypes.includes(t)));return e&&(null!=e.useCount||(e.useCount=0),e.useCount++),null!=e}function le(t){var e,i,s;return null!=(s=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?s:"line"}function he(t){const e=le(t);return null==e||("cartesian"===e?(C.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):te.isCartesian(e)||function(t){var e;return"cartesian"===(null==(e=ae(t))?void 0:e.find(t=>"cartesian"===t))}(e))}function ce(t){const e=le(t);return null!=e&&("hierarchy"===e?(C.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):te.isHierarchy(e)||function(t){var e;return"hierarchy"===(null==(e=ae(t))?void 0:e.find(t=>"hierarchy"===t))}(e))}function de(t){const e=le(t);return null!=e&&("polar"===e?(C.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):te.isPolar(e)||function(t){var e;return"polar"===(null==(e=ae(t))?void 0:e.find(t=>"polar"===t))}(e))}function ue(t){var e,i,s,n;const a=[],o=function(t){var e;return null!=(e=Qt[t])?e:"unknown"}(le(t));for(const{type:r,chartTypes:l,optionsKey:h,optionsInnerKey:c,identifier:d}of se)if("unknown"===o||l.includes(o))if("root"===r||"legend"===r){const e=t[h];if(null==e)continue;c?e[c]&&(a.push(`${h}.${c}`),delete e[c]):(a.push(h),delete t[h])}else if("axis"===r){if(!("axes"in t)||!(null==(e=t.axes)?void 0:e.some(t=>t.type===d)))continue;a.push(`axis[type=${d}]`),t.axes=t.axes.filter(t=>t.type!==d)}else if("axis-option"===r){if(!("axes"in t)||!(null==(i=t.axes)?void 0:i.some(t=>t[h])))continue;a.push("axis."+h),t.axes.forEach(t=>{t[h]&&delete t[h]})}else if("series"===r){if(!(null==(s=t.series)?void 0:s.some(t=>t.type===d)))continue;a.push(`series[type=${d}]`),t.series=t.series.filter(t=>t.type!==d)}else if("series-option"===r){if(!(null==(n=t.series)?void 0:n.some(t=>t[h])))continue;a.push("series."+h),t.series.forEach(t=>{t[h]&&delete t[h]})}a.length&&C.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:\n","",...a,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}var pe=class{constructor(t){this.className=t}set(t){const e=new Set(Object.keys(t));for(const i of At(this))if(e.has(i)){const s=t[i],n=this;ye(n[i])?n[i]=n[i]instanceof ge?n[i].reset(s):n[i].set(s):n[i]=s,e.delete(i)}for(const t of e){const{className:e=this.constructor.name}=this.constructor;C.warn(`unable to set [${t}] in ${e} - property is unknown`)}return this}isValid(){return At(this).every(t=>{const{optional:e}=function(t,e){const i=e.toString();for(;Lt(t);){const e=t[kt];if(Object.hasOwn(e,i))return e[i];t=Object.getPrototypeOf(t)}}(this,t);return e||void 0!==this[t]})}toJson(){return At(this).reduce((t,e)=>{const i=this[e];return t[e]=ye(i)?i.toJson():i,t},{})}},ge=class t extends Array{constructor(t,...e){super(e.length),Object.defineProperty(this,"itemFactory",{value:t,enumerable:!1,configurable:!1}),this.set(e)}set(t){if(Ct(t)){this.length=t.length;for(let e=0;e<t.length;e++)this[e]=(new this.itemFactory).set(t[e])}return this}reset(e){return new t(this.itemFactory,...e)}toJson(){return this.slice()}};function ye(t){return t instanceof pe||t instanceof ge}function me(t,e){if(Ct(e)){if(!Ct(t)||t.length!==e.length||e.some((e,i)=>null!=me(t[i],e)))return e}else{if(Ft(e)){if(!Ft(t))return e;const i={},s=new Set([...Object.keys(t),...Object.keys(e)]);for(const n of s)if(t[n]!==e[n])if(typeof t[n]!=typeof e[n])i[n]=e[n];else{const s=me(t[n],e[n]);null!==s&&(i[n]=s)}return Object.keys(i).length?i:null}if(t!==e)return e}return null}function fe(t,e){return Ct(t)?t.map(t=>fe(t,e)):Ft(t)?Object.entries(t).reduce((t,[i,s])=>{var n;return t[i]=(null==(n=null==e?void 0:e.shallow)?void 0:n.includes(i))?xe(s):fe(s,e),t},{}):xe(t)}function xe(t){return Ct(t)?[...t]:Ft(t)?g({},t):Tt(t)?new Date(t):Ot(t)?new RegExp(t.source,t.flags):t}function ve(t,e,i,...s){var n;if(Ct(t))e(t,...s),t.forEach((t,n)=>{ve(t,e,i,...Se(s,n))});else if(Ft(t)){e(t,...s);for(const a of Object.keys(t)){if(null==(n=null==i?void 0:i.skip)?void 0:n.includes(a))continue;const o=t[a];(Ct(o)||Ft(o))&&ve(o,e,i,...Se(s,a))}}}function be(t,e,i={}){var s,n,a;const{path:o,matcherPath:r=(o?o.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:l=[],constructors:h={},constructedArrays:c=new WeakMap,allowedTypes:d={},idx:u}=i;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!=o?o:"<root>"));if(null==e)return t;if(ye(t))return t.set(e);const p=t;null!=u&&"_declarationOrder"in p&&(p._declarationOrder=u);const m=ke(t);for(const u in e){const f=`${r?r+".":""}${u}`;if(l.indexOf(f)>=0)continue;const x=e[u],v=`${o?o+".":""}${u}`,b=p.constructor,S=p[u];let k=null!=(s=h[f])?s:h[u];try{const e=ke(S),s=ke(x);if("class-instance"===m&&!(u in t)&&!Object.hasOwn(p,u)){C.warn(`unable to set [${v}] in ${null==b?void 0:b.name} - property is unknown`);continue}const o=null!=(n=d[f])?n:[e];if("class-instance"===e&&"object"===s);else if(null!=e&&null!=s&&!o.includes(s)){C.warn(`unable to set [${v}] in ${null==b?void 0:b.name} - can't apply type of [${s}], allowed types are: [${o}]`);continue}if("array"===s)if(k=null!=(a=null!=k?k:c.get(S))?a:h[f+"[]"],ye(p[u]))p[u].set(x);else if(null!=k){const t=x;p[u]=t.map((t,e)=>be(new k,t,y(g({},i),{path:v,matcherPath:f+"[]",idx:e})))}else p[u]=x;else if("class-instance"===s)p[u]=x;else if("object"===s)if(ye(S))p[u].set(x);else if(null!=S)be(S,x,y(g({},i),{path:v,matcherPath:f,idx:void 0}));else if(null!=k){const t=new k;ye(t)?p[u]=t.set(x):p[u]=be(t,x,y(g({},i),{path:v,matcherPath:f,idx:void 0}))}else p[u]=x;else ye(p[u])?p[u].set(x):p[u]=x}catch(t){C.warn(`unable to set [${v}] in [${null==b?void 0:b.name}]; nested error is: ${t.message}`)}}return t}function Se(t,e){return t.map(t=>null==t?void 0:t[e])}function ke(t){return null==t?null:Kt(t)||Tt(t)?"primitive":Ct(t)?"array":Pt(t)?Ft(t)?"object":"class-instance":Rt(t)?"function":"primitive"}var De={},Me={},Le={},Ae={},we={},Ne=new Set,Ce=new Set,Ie=new Set,Te=new Set,Ee={};function Oe({identifier:t,chartTypes:[e],instanceConstructor:i,seriesDefaults:s,themeTemplate:n,enterpriseThemeTemplate:a,paletteFactory:o,solo:r,stackable:l,groupable:h,stackedByDefault:c,swapDefaultAxesCondition:d}){De[t]=i,Me[t]=s,Re(t,n,a),o&&function(t,e){we[t]=e}(t,o),r&&function(t){Ne.add(t)}(t),l&&function(t){Ce.add(t)}(t),h&&function(t){Ie.add(t)}(t),c&&function(t){Te.add(t)}(t),d&&function(t,e){Ee[t]=e}(t,d),function(t,e){Qt[t]=e}(t,e)}function Re(t,e,i={}){const s=Le[t];Le[t]=jt(e,s),Ae[t]=jt(i,e,s)}function Pe(t,e){const i=De[t];if(i)return new i(e);throw new Error("AG Charts - unknown series type: "+t)}function _e(t){return ht.isEnterprise?Ae[t]:Le[t]}function Fe(t){return Ne.has(t)}var Be={};function ze(t,e,i,s){Be[t]=e,Ge[e]=s}var Ge={};var Ke=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(Ke||{}),Ve=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(Ve||{}),We=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(We||{}),Ye=(t=>(t.CATEGORY="category",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(Ye||{}),Ue=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(Ue||{}),je=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(je||{}),He={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Xe={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},$e=Symbol("is-dark-theme"),qe=Symbol("extends-chart-defaults"),Ze=Symbol("extends-legend-defaults"),Qe=Symbol("extends-legend-item-defaults"),Je=Symbol("extends-legend-item-marker-defaults"),ti=Symbol("extends-axes-defaults"),ei=Symbol("extends-axes-label-defaults"),ii=Symbol("extends-axes-line-defaults"),si=Symbol("extends-axes-tick-defaults"),ni=Symbol("extends-axes-grid-line-defaults"),ai=Symbol("extends-series-defaults"),oi=Symbol("extends-cartesian-marker-defaults"),ri=Symbol("override-series-label-defaults"),li=Symbol("default-font"),hi=Symbol("default-label-colour"),ci=Symbol("default-inverted-label-colour"),di=Symbol("default-inside-series-label-colour"),ui=Symbol("default-muted-label-colour"),pi=Symbol("default-axis-grid-colour"),gi=Symbol("default-axis-line-colour"),yi=Symbol("default-cross-lines-colour"),mi=Symbol("default-background-colour"),fi=Symbol("default-shadow-colour"),xi=Symbol("default-waterfall-series-positive-colors"),vi=Symbol("default-waterfall-series-negative-colors"),bi=Symbol("default-waterfall-series-total-colors"),Si=Symbol("default-waterfall-series-connector-line-stroke"),ki=Symbol("default-polar-series-stroke"),Di=Symbol("default-diverging-series-colour-range"),Mi=Symbol("default-hierarchy-fills"),Li=Symbol("default-hierarchy-strokes"),Ai={fills:Object.values(He),strokes:Object.values(Xe)},wi={get cartesian(){return{seriesTypes:te.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:te.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:te.hierarchyTypes,commonOptions:[]}}},Ni=Object.values(wi).reduce((t,{commonOptions:e})=>[...t,...e],[]);var Ci=class t{getPalette(){return Ai}static getAxisDefaults(t){return jt(t,{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:li,color:hi},label:{fontSize:12,fontFamily:li,padding:5,color:hi,avoidCollisions:!0},line:{enabled:!0,width:1,color:gi},tick:{enabled:!1,width:1,color:gi},gridLine:{enabled:!0,style:[{stroke:pi,lineDash:[]}]},crossLines:{enabled:!1,fill:yi,stroke:yi,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:li,padding:5,color:hi}}})}static getSeriesDefaults(){return{tooltip:{enabled:!0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getLegendItemMarkerDefaults(){return{size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:mi},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:li,color:hi,wrapping:t.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:li,color:ui,wrapping:t.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:li,color:"rgb(140, 140, 140)",wrapping:t.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:t.getLegendItemMarkerDefaults(),toggleSeriesVisible:!0,label:{color:hi,fontSize:12,fontFamily:li}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:hi},inactiveStyle:{fill:ui},highlightStyle:{fill:hi},label:{color:hi}}},tooltip:{enabled:!0,darkTheme:$e,range:"nearest",delay:0},overlays:{loading:{darkTheme:$e},noData:{darkTheme:$e},noVisibleSeries:{darkTheme:$e}},listeners:{}}}constructor(t){var e;t=fe(null!=t?t:{});const{overrides:i=null,palette:s=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(i){const{common:t}=i,e=(t,e)=>{if(e)for(const i of t){const t=i;n[t]=jt(e,n[t])}};for(const[,{seriesTypes:i,commonOptions:s}]of Object.entries(wi)){const n=g({},t);for(const t of Ni)s.includes(t)||delete n[t];e(i,n)}te.seriesTypes.forEach(t=>{const e=t;i[e]&&(n[e]=jt(i[e],n[e]))})}const a=this.getPalette();this.palette=null!=(e=function(t,e){var i,s;return null==t?null:{fills:null!=(i=t.fills)?i:e.fills,strokes:null!=(s=t.strokes)?s:e.strokes}}(s,a))?e:a,this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(wi).forEach(([e,{seriesTypes:i}])=>{const s=ie(e);i.forEach(e=>{const i=e;t[i]||(t[i]=fe(s))})}),t}getDefaults(){const e=e=>g(g(g({axes:{}},Ge),t.getChartDefaults()),ie(e)),i=(i,s)=>{var n;const a=e(i),o={};for(const e of s){o[e]=jt(_e(e),null!=(n=o[e])?n:fe(a));const{axes:s}=o[e];for(const e of ft.axesTypes)s[e]=jt(s[e],bt(e),"cartesian"===i&&t.cartesianAxisDefault[e])}return o};return jt(i("cartesian",te.cartesianTypes),i("polar",te.polarTypes),i("hierarchy",te.hierarchyTypes))}templateTheme(t){const e=fe(t),{extensions:i,properties:s}=this.getTemplateParameters();return ve(e,t=>{if(t.__extends__){const e=t.__extends__,s=i.get(e);if(null==s)throw new Error("AG Charts - no template variable provided for: "+e);Object.keys(s).forEach(e=>{e in t?Pt(t[e])&&(t[e]=jt(t[e],s[e])):t[e]=s[e]}),delete t.__extends__}if(t.__overrides__){const e=t.__overrides__,s=i.get(e);if(null==s)throw new Error("AG Charts - no template variable provided for: "+e);Object.assign(t,s),delete t.__overrides__}if(Ct(t))for(let e=0;e<t.length;e++){const i=t[e];s.has(i)&&(t[e]=s.get(i))}else for(const[e,i]of Object.entries(t))s.has(i)&&(t[e]=s.get(i))}),fe(e)}static getWaterfallSeriesDefaultPositiveColors(){return{fill:He.BLUE,stroke:Xe.BLUE,label:{color:hi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:He.ORANGE,stroke:Xe.ORANGE,label:{color:hi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:He.GRAY,stroke:Xe.GRAY,label:{color:hi}}}getTemplateParameters(){const e=new Map;e.set(qe,t.getChartDefaults()),e.set(ti,t.getAxisDefaults()),e.set(Ze,t.getChartDefaults().legend),e.set(Qe,t.getChartDefaults().legend.item),e.set(Je,t.getLegendItemMarkerDefaults()),e.set(ei,t.getAxisDefaults().label),e.set(ii,t.getAxisDefaults().line),e.set(si,t.getAxisDefaults().tick),e.set(ni,t.getAxisDefaults().gridLine),e.set(ai,t.getSeriesDefaults()),e.set(ri,{}),e.set(oi,t.getCartesianSeriesMarkerDefaults());const i=new Map;return i.set($e,!1),i.set(li,"Verdana, sans-serif"),i.set(hi,"rgb(70, 70, 70)"),i.set(ci,"white"),i.set(ui,"rgb(140, 140, 140)"),i.set(pi,"rgb(224,234,241)"),i.set(gi,"rgb(195, 195, 195)"),i.set(yi,"rgb(70, 70, 70)"),i.set(di,"white"),i.set(mi,"white"),i.set(fi,"rgba(0, 0, 0, 0.5)"),i.set(Di,[He.ORANGE,He.YELLOW,He.GREEN]),i.set(Mi,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(Li,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(ki,"white"),i.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),i.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),i.set(bi,t.getWaterfallSeriesDefaultTotalColors()),i.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:e,properties:i}}};Ci.cartesianAxisDefault={number:Ci.getAxisDefaults({line:{enabled:!1}}),log:Ci.getAxisDefaults({base:10,line:{enabled:!1}}),category:Ci.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:Ci.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":Ci.getAxisDefaults()};var Ii=Ci,Ti={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ei={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Oi={fills:Object.values(Ti),strokes:Object.values(Ei)},Ri=class t extends Ii{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ti.BLUE,stroke:Ei.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ti.ORANGE,stroke:Ei.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ti.GRAY,stroke:Ei.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set($e,!0),e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(ki,"#192232"),e.properties.set(hi,"white"),e.properties.set(ui,"#7D91A0"),e.properties.set(pi,"#545A6E"),e.properties.set(yi,"white"),e.properties.set(Di,[Ti.ORANGE,Ti.YELLOW,Ti.GREEN]),e.properties.set(Mi,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(Li,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(mi,"#192232"),e.properties.set(di,"#192232"),e}getPalette(){return Oi}constructor(t){super(t)}},Pi={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},_i={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Fi={fills:Object.values(Pi),strokes:Object.values(_i)},Bi=class t extends Ri{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Pi.BLUE,stroke:_i.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Pi.RED,stroke:_i.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Pi.GRAY,stroke:_i.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[Pi.ORANGE,Pi.YELLOW,Pi.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Fi}},zi={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Gi={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Ki={fills:Object.values(zi),strokes:Object.values(Gi)},Vi=class t extends Ii{static getWaterfallSeriesDefaultPositiveColors(){return{fill:zi.BLUE,stroke:Gi.BLUE,label:{color:hi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:zi.RED,stroke:Gi.RED,label:{color:hi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:zi.GRAY,stroke:Gi.GRAY,label:{color:hi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[zi.ORANGE,zi.YELLOW,zi.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Ki}},Wi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Yi={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},Ui={fills:Object.values(Wi),strokes:Object.values(Yi)},ji=class t extends Ri{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Wi.BLUE,stroke:Yi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Wi.RED,stroke:Yi.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee",label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[Wi.BLUE,Wi.RED]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Ui}},Hi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Xi={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},$i={fills:Object.values(Hi),strokes:Object.values(Xi)},qi=class t extends Ii{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Hi.BLUE,stroke:Xi.BLUE,label:{color:hi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Hi.RED,stroke:Xi.RED,label:{color:hi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888",label:{color:hi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[Hi.BLUE,Hi.RED]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return $i}},Zi={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Qi={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Ji={fills:Object.values(Zi),strokes:Object.values(Qi)},ts=class t extends Ri{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Zi.BLUE,stroke:Qi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Zi.ORANGE,stroke:Qi.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Zi.GRAY,stroke:Qi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[Zi.ORANGE,Zi.YELLOW,Zi.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Ji}},es={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},is={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},ss={fills:Object.values(es),strokes:Object.values(is)},ns=class t extends Ii{static getWaterfallSeriesDefaultPositiveColors(){return{fill:es.BLUE,stroke:is.BLUE,label:{color:hi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:es.ORANGE,stroke:is.ORANGE,label:{color:hi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:es.GRAY,stroke:is.GRAY,label:{color:hi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[es.ORANGE,es.YELLOW,es.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return ss}},as={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},os={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},rs={fills:Object.values(as),strokes:Object.values(os)},ls=class t extends Ri{static getWaterfallSeriesDefaultPositiveColors(){return{fill:as.BLUE,stroke:os.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:as.ORANGE,stroke:os.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:as.GRAY,stroke:os.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[as.ORANGE,as.YELLOW,as.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return rs}},hs={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},cs={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},ds={fills:Object.values(hs),strokes:Object.values(cs)},us=class t extends Ii{static getWaterfallSeriesDefaultPositiveColors(){return{fill:hs.BLUE,stroke:cs.BLUE,label:{color:hi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:hs.ORANGE,stroke:cs.ORANGE,label:{color:hi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:hs.GRAY,stroke:cs.GRAY,label:{color:hi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(xi,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(vi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(bi,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Di,[hs.ORANGE,hs.YELLOW,hs.GREEN]),e.properties.set(Si,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return ds}},ps=()=>new Ii,gs=()=>new Ri,ys={undefined:ps,null:ps,"ag-default":ps,"ag-sheets":()=>new ns,"ag-polychroma":()=>new qi,"ag-vivid":()=>new us,"ag-material":()=>new Vi},ms=g(g({},{undefined:gs,null:gs,"ag-default-dark":gs,"ag-sheets-dark":()=>new ts,"ag-polychroma-dark":()=>new ji,"ag-vivid-dark":()=>new ls,"ag-material-dark":()=>new Bi}),ys);function fs(t){return void 0===t||"string"==typeof t||t instanceof Ii?t:"object"==typeof t?function(t){if(null===t)return;let e=!0;const{baseTheme:i,palette:s,overrides:n}=t;if(void 0!==i&&"string"!=typeof i&&"object"!=typeof i&&(C.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),void 0!==n&&"object"!=typeof n&&(C.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),"object"==typeof s){if(null!==s){const{fills:t,strokes:i}=s;void 0===t||Array.isArray(t)||(C.warn("theme.overrides.fills must be undefined or an array"),e=!1),void 0===i||Array.isArray(i)||(C.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else void 0!==s&&(C.warn(`invalid theme.palette type ${typeof s}, expected object.`),e=!1);return e?t:void 0}(t):void C.warn(`invalid theme value type ${typeof t}, expected object or string.`)}function xs(t){let e=fs(t);if(e instanceof Ii)return e;if(void 0===e||"string"==typeof e){const t=ms[e];return t?t():(C.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),ps())}const i=[];let s;for(;"object"==typeof e;)i.push(e.overrides),null!=s||(s=e.palette),e=e.baseTheme;const n={baseTheme:e,overrides:jt(...i),palette:s};return new((n.baseTheme?xs(n.baseTheme):ps()).constructor)(n)}function vs(t){if(0===t.length)return;let e=1/0,i=-1/0;for(let s of t)s instanceof Date&&(s=s.getTime()),"number"==typeof s&&(s<e&&(e=s),s>i&&(i=s));const s=[e,i];return s.every(isFinite)?s:void 0}function bs(t,e,i){return Ss(t,e,i).extent}function Ss(t,e,i){var s;let n=!1;return t.length>2&&(t=null!=(s=vs(t))?s:[NaN,NaN]),isNaN(e)||(n||(n=e>t[0]),t=[e,t[1]]),isNaN(i)||(n||(n=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:n}}function ks(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!ks(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function Ds(t){return void 0===t?[]:Array.isArray(t)?t:[t]}function Ms(t){return Array.from(new Set(t))}function Ls(t,e){return t.reduce((t,i)=>{const s=e(i);return null!=t[s]||(t[s]=[]),t[s].push(i),t},{})}function As(t,e,i=0){if(0===t.length)return[];const s=[];for(let n=0;n<e;n++)s.push(t.at((n+i)%t.length));return s}function ws(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}var Ns=Date.now(),Cs={create:(...t)=>Object.assign((...e)=>{Cs.check(...t)&&("function"==typeof e[0]&&(e=Ds(e[0]())),(()=>{const t=Date.now()-Ns;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);C.log(`**** ${e}s since last log message ****`)}Ns=Date.now()})(),C.log(...e))},{check:()=>Cs.check(...t)}),check(...t){0===t.length&&t.push(!0);return Ds(ws("agChartsDebug")).some(e=>t.includes(e))}},Is=class{constructor(t,e){var i,s;const n={shallow:["data"]},a=fe(t,n),o=this.optionsType(a);this.sanityCheckAndCleanup(a),this.userOptions=a,this.activeTheme=xs(a.theme),this.seriesDefaults=this.getOptionsDefaults(a),this.specialOverrides=this.specialOverridesDefaults(g({},e));const r=this.getSeriesThemeConfig(o),{axes:l={},series:h}=r,c=m(r,["axes","series"]);this.processedOptions=fe(jt(this.userOptions,c,this.seriesDefaults),n),this.processAxesOptions(this.processedOptions,l),this.processSeriesOptions(this.processedOptions),(he(this.processedOptions)||function(t){const e=le(t);return de(t)&&"pie"!==e&&"donut"!==e}(this.processedOptions))&&null==(null==(i=this.processedOptions.legend)?void 0:i.enabled)&&(null!=(s=this.processedOptions).legend||(s.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),ht.isEnterprise||ue(this.processedOptions)}getOptions(){var t;return null!=(t=this.processedOptions)?t:{}}diffOptions(t){return me(t,this.processedOptions)}getSeriesThemeConfig(t){var e,i;return fe(null!=(i=null==(e=this.activeTheme)?void 0:e.config[t])?i:{})}getOptionsDefaults(t){const e=function(t){var e;return fe(null!=(e=Me[t])?e:{})}(this.optionsType(t));return function(t){var e,i;let s;for(const n of null!=(e=t.series)?e:[]){const{type:t="line"}=n,e=null==(i=Ee[t])?void 0:i.call(Ee,n);if(null!=e){if(null!=s&&s!=e)throw new Error("AG Charts - The provided series have incompatible directions");s=e}}return s}(t)&&this.swapAxesPosition(e),e}optionsType(t){var e,i,s;return null!=(s=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?s:"line"}sanityCheckAndCleanup(t){var e;this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),(null==(e=t.series)?void 0:e.some(t=>"bullet"===t.type))&&null!=t.sync&&!1!==t.sync.enabled&&(C.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){var e;if(he(t)){const[i,s]=null!=(e=t.axes)?e:[];t.axes=[y(g({},i),{position:s.position}),y(g({},s),{position:i.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map(t=>{var i,s,n,a;const o=jt(null==(i=this.seriesDefaults.axes)?void 0:i.find(({type:e})=>e===t.type),null==(s=e[t.type])?void 0:s[t.position],e[t.type]),{crossLines:r}=o,l=m(o,["crossLines"]);t.crossLines&&(t.crossLines=Ht(t.crossLines,r));const h=null==(n=l.gridLine)?void 0:n.style;(null==(a=t.gridLine)?void 0:a.style)&&(null==h?void 0:h.length)&&(t.gridLine.style=t.gridLine.style.map((t,e)=>null!=t.stroke||null!=t.lineDash?jt(t,h.at(e%h.length)):t));const c=jt(t,l);return m(c,["top","right","bottom","left"])}))}processSeriesOptions(t){const e=this.getDefaultSeriesType(t),i=this.getTooltipPositionDefaults(t),s={colourIndex:0,userPalette:Boolean(Pt(t.theme)&&t.theme.palette)},n=t.series.map(t=>{var n;null!=t.type||(t.type=e);const a=null!=(n=this.getSeriesThemeConfig(t.type).series)?n:{},{innerLabels:o}=a,r=m(a,["innerLabels"]),l=jt(this.getSeriesGroupingOptions(t),t,i,r,this.getSeriesPalette(t.type,s));return l.innerLabels&&(l.innerLabels=Ht(l.innerLabels,o)),this.activeTheme.templateTheme(l)});t.series=this.setSeriesGroupingOptions(n)}getSeriesPalette(t,e){const i=function(t){return we[t]}(t),{colourIndex:s,userPalette:n}=e,{fills:a=[],strokes:o=[]}=this.activeTheme.palette;return null==i?void 0:i({userPalette:n,colorsCount:Math.max(a.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors:t=>(e.colourIndex+=t,{fills:As(a,t,s),strokes:As(o,t,s)})})}getSeriesGroupingOptions(t){const e=(i=t.type,Ie.has(i));var i;const s=function(t){return Ce.has(t)}(t.type),n=function(t){return Te.has(t)}(t.type);t.grouped&&!e&&C.warnOnce(`unsupported grouping of series type "${t.type}".`),!t.stacked&&!t.stackGroup||s||C.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:a,stacked:o}=t;return null!=o||(o=(n||null!=t.stackGroup)&&!(e&&a)),null!=a||(a=!0),{stacked:s&&o,grouped:e&&a&&!(s&&o)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);Cs.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);const i={},s=e.reduce((t,e)=>{var i;return"default"===e.groupType||(null!=t[i=e.seriesType]||(t[i]=0),t[e.seriesType]+="stack"===e.groupType?1:e.series.length),t},{});return e.flatMap(t=>{var e;switch(null!=i[e=t.seriesType]||(i[e]=0),t.groupType){case"stack":const e=i[t.seriesType]++;return t.series.map((i,n)=>Object.assign(i,{seriesGrouping:{groupIndex:e,groupCount:s[t.seriesType],stackIndex:n,stackCount:t.series.length}}));case"group":return t.series.map(e=>Object.assign(e,{seriesGrouping:{groupIndex:i[t.seriesType]++,groupCount:s[t.seriesType],stackIndex:0,stackCount:0}}))}return t.series}).map(t=>m(t,["stacked","grouped"]))}getSeriesGroupId(t){var e;return t.stacked||t.grouped?[t.type,t.xKey,t.stacked?null!=(e=t.stackGroup)?e:"stacked":"grouped"].filter(Boolean).join("-"):"default-ag-charts-group"}getSeriesGrouping(t){const e=new Map;return t.reduce((t,i)=>{const s=i.type;if(i.stacked||i.grouped){const n=this.getSeriesGroupId(i);if(!e.has(n)){const a={groupType:i.stacked?"stack":"group",seriesType:s,series:[]};e.set(n,a),t.push(a)}e.get(n).series.push(i)}else t.push({groupType:"default",seriesType:s,series:[i]});return t},[])}getDefaultSeriesType(t){if(he(t))return"line";if(ce(t))return"treemap";if(de(t))return"pie";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var e;const i=null==(e=t.tooltip)?void 0:e.position;if(!Ft(i))return;const{type:s,xOffset:n,yOffset:a}=i,o={};return Bt(s)&&Wt(M,s)&&(o.type=s),Gt(n)&&(o.xOffset=n),Gt(a)&&(o.yOffset=a),{tooltip:{position:o}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var s;(null==(s=t.series)?void 0:s.some(t=>null!=t[e]))&&C.warnOnce(`Property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}axesTypeIntegrity(t){var e,i;if("axes"in t){const s=null!=(e=t.axes)?e:[];for(const{type:e}of s)null!=(i=e)&&ft.has(i)||(delete t.axes,C.warnOnce(`unknown axis type: ${e}; expected one of: ${ft.axesTypes.join(", ")}, ignoring.`))}}seriesTypeIntegrity(t){var e;const i=null!=(e=t.series)?e:[];t.series=i.filter(({type:t})=>{if(null==t||null!=(e=t)&&te.has(e)||ne(t))return!0;var e;C.warnOnce(`unknown series type: ${t}; expected one of: ${te.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some(t=>Fe(t.type))){const i=this.optionsType(t);if(Fe(i))C.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{const{solo:i,nonSolo:s}=Ls(e,t=>Fe(t.type)?"solo":"nonSolo"),n=Ms(i.map(t=>t.type)).join(", ");C.warn("Unable to mix these series types with the lead series type: "+n),t.series=s}}}enableConfiguredOptions(t){ve(this.userOptions,(t,e)=>{e&&"enabled"in e&&!e._enabledFromTheme&&null==t.enabled&&(e.enabled=!0)},{skip:["data","theme"]},t),ve(t,t=>{null!=t._enabledFromTheme&&delete t._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(t){ve(t,t=>{"enabled"in t&&!1===t.enabled&&Object.keys(t).forEach(e=>{"enabled"!==e&&delete t[e]})},{skip:["data","theme"]})}removeLeftoverSymbols(t){ve(t,t=>{if(t&&Pt(t))for(const[e,i]of Object.entries(t))Yt(i)&&delete t[e]},{skip:["data"]})}specialOverridesDefaults(t){if(null==t.window)if("undefined"!=typeof window)t.window=window;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global window");t.window=global.window}if(null==t.document)if("undefined"!=typeof document)t.document=document;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global document");t.document=global.document}return t}};function Ts(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");C.warnOnce(i)}}function Es(t,e){const i=Ts(),s=null==e?void 0:e.default;return Mt((e,n,a)=>(a!==s&&i(n.toString(),t),a))}function Os(t,e){const i=Ts();return Mt((s,n,a)=>(a!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),s[t]=e?e(a):a),St),(e,s)=>(i(s.toString(),`Use [${t}] instead.`),e[t]))}var Rs={};function Ps(t,e){const i={};if(Array.isArray(e))for(let s=0;s<t.length;s++)i[""+t[s]]=e[s];else for(let s=0;s<t.length;s++)i[""+t[s]]=e;return i}f(Rs,{NODE_UPDATE_PHASES:()=>On,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Rn,fromToMotion:()=>Pn,staticFromToMotion:()=>_n});var _s=new Map;function Fs(){_s.clear()}function Bs(t){var e;const i=t.constructor,s=Object.hasOwn(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const n=(null!=(e=_s.get(s))?e:0)+1;return _s.set(s,n),`${s}-${n}`}var zs=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(zs||{});var Gs=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function Ks(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(s,n){const a="__"+n;s[n]||(Gs&&null==e&&null==i?function(t,e,i,s){const{redraw:n=1,type:a="normal",checkDirtyOnAssignment:o=!1}=null!=s?s:{},r=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===a?`this.markDirty(this, ${n});`:""}\n            ${"transform"===a?`this.markDirtyTransform(${n});`:""}\n            ${"path"===a?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===a?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${o?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:r,get:l,enumerable:!0,configurable:!0})}(s,n,a,t):function(t,e,i,s){const{redraw:n=1,type:a="normal",changeCb:o,convertor:r,checkDirtyOnAssignment:l=!1}=null!=s?s:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=r?r(t):t)!==e&&(this[i]=t,"normal"===a&&this.markDirty(this,n),"transform"===a&&this.markDirtyTransform(n),"path"!==a||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),"font"!==a||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),o&&o(this)),l&&null!=t&&t._dirty>0&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(s,n,a,t))}}function Vs(t,e,i){return Math.min(i,Math.max(t,e))}function Ws(t,e){const[i,s]=Ys(e);return Vs(i,t,s)}function Ys(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Us(t){const[e,i]=Ys(t);return i-e}function js(t,e,i=1e-10){return Math.abs(t-e)<i}function Hs(t){return-1===Math.sign(t)||Object.is(t,-0)}function Xs(t,e=2){const i=u(10,e);return Math.round(t*i)/i}function $s(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function qs(t,e){return Math.floor(t%e+(t<0?e:0))}function Zs(t,e=10){const[,i=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return i.length}function Qs(t,e,i=1/0){const s={nearest:void 0,distanceSquared:i};for(const i of e){const e=i.distanceSquared(t);if(0===e)return{nearest:i,distanceSquared:0};e<s.distanceSquared&&(s.nearest=i,s.distanceSquared=e)}return s}function Js(t,e,i=1/0){const s=e.transformPoint(t.x,t.y),n={nearest:void 0,distanceSquared:i};for(const t of e.children){const{nearest:e,distanceSquared:i}=t.nearestSquared(s,n.distanceSquared);if(0===i)return{nearest:e,distanceSquared:i};i<n.distanceSquared&&(n.nearest=e,n.distanceSquared=i)}return n}var tn=class t{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s}clone(){const{x:e,y:i,width:s,height:n}=this;return new t(e,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Vs(this.x,t.x,this.x+this.width),i=t.y-Vs(this.y,t.y,this.y+this.height);return e*e+i*i}static nearestBox(t,e){return Qs(t,e)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):"object"==typeof t&&Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=g({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(e){let i=1/0,s=1/0,n=-1/0,a=-1/0;return e.forEach(t=>{t.x<i&&(i=t.x),t.y<s&&(s=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>a&&(a=t.y+t.height)}),new t(i,s,n-i,a-s)}};tn.zero=new tn(0,0,0,0);var en=tn,sn=class t{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const s=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],r=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=s,i[1]=n,i[2]=a,i[3]=o,i[4]=r,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(e){const i=new Array(6);return this.AxB(this.elements,e.elements,i),new t(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new t([a,-s,-n,i,n*r-a*o,s*o-i*r])}inverseTo(t){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,t.setElements([a,-s,-n,i,n*r-a*o,s*o-i*r]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],s=t[2],n=t[3];const a=t[4],o=t[5],r=1/(e*n-i*s);return e*=r,i*=r,s*=r,n*=r,t[0]=n,t[1]=-i,t[2]=-s,t[3]=e,t[4]=s*o-n*a,t[5]=i*a-e*o,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,s=i[0],n=i[1],a=i[2],o=i[3],r=.5*t.width,l=.5*t.height,h=t.x+r,c=t.y+l,d=Math.abs(r*s)+Math.abs(l*a),u=Math.abs(r*n)+Math.abs(l*o);return e||(e=new en(0,0,0,0)),e.x=h*s+c*a+i[4]-d,e.y=h*n+c*o+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(e){return t.instance.setElements(e.elements)}static updateTransformMatrix(t,e,i,s,n,a,o){const[r,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==o?void 0:o.scalingCenterX)?r:null==o?void 0:o.scalingCenterX,u=null==(null==o?void 0:o.scalingCenterY)?l:null==o?void 0:o.scalingCenterY);const p=s,g=Math.cos(p),y=Math.sin(p);let m,f;0===p?(m=0,f=0):(m=null==(null==o?void 0:o.rotationCenterX)?r:null==o?void 0:o.rotationCenterX,f=null==(null==o?void 0:o.rotationCenterY)?l:null==o?void 0:o.rotationCenterY);const x=n,v=a,b=d*(1-h)-m,S=u*(1-c)-f;return t.setElements([g*h,y*h,-y*c,g*c,g*b-y*S+m+x,y*b+g*S+f+v]),t}static fromContext(e){const i=e.getTransform();return new t([i.a,i.b,i.c,i.d,i.e,i.f])}};sn.instance=new sn;var nn=sn,an=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(an||{}),on=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()},rn=class t extends class{constructor(){this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}}{constructor({isVirtual:e,tag:i}={}){super(),this.serialNumber=t._nextSerialNumber++,this.id=Bs(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new nn,this.inverseMatrix=new nn,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=null!=e&&e,this.tag=null!=i?i:NaN}get datum(){var t,e;return null!=(e=this._datum)?e:null==(t=this._parent)?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!=e?e:Object.keys(t);for(const e of i)this[e]=t[e];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,3),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=nn.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||1===this.pointerEvents||!this.containsPoint(t,e))return;const s=this.children;if(s.length>1e3)for(let n=s.length-1;n>=0;n--){const a=s[n],o=(null==(i=a.computeTransformedBBox())?void 0:i.containsPoint(t,e))?a.pickNode(t,e):void 0;if(o)return o}else if(s.length)for(let i=s.length-1;i>=0;i--){const n=s[i].pickNode(t,e);if(n)return n}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const s=i.findNodes(t);s&&e.push(...s)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=nn.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:s,translationX:n,translationY:a,scalingCenterX:o,scalingCenterY:r,rotationCenterX:l,rotationCenterY:h}=this;nn.updateTransformMatrix(t,e,i,s,n,a,{scalingCenterX:o,scalingCenterY:r,rotationCenterX:l,rotationCenterY:h}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=0,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:s,width:n,height:a}=e,o=this.transformPoint(i,s),r=this.transformPoint(i+n,s+a);t.clearRect(o.x,o.y,r.x-o.x,r.y-o.y)}markDirty(t,e=1,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if(0!==this._dirty||e){if(this._dirty=0,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=0||this.dirtyTransform?1:0,i=this.visible?1:0;const s=s=>{const{count:n,visibleCount:a,dirtyCount:o}=s.nodeCount;t+=n,i+=a,e+=o};for(const t of this._children)s(t);for(const t of this._virtualChildren)s(t);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}};rn._nextSerialNumber=0,x([Ks({type:"transform"})],rn.prototype,"scalingX",2),x([Ks({type:"transform"})],rn.prototype,"scalingY",2),x([Ks({type:"transform"})],rn.prototype,"scalingCenterX",2),x([Ks({type:"transform"})],rn.prototype,"scalingCenterY",2),x([Ks({type:"transform"})],rn.prototype,"rotationCenterX",2),x([Ks({type:"transform"})],rn.prototype,"rotationCenterY",2),x([Ks({type:"transform"})],rn.prototype,"rotation",2),x([Ks({type:"transform"})],rn.prototype,"translationX",2),x([Ks({type:"transform"})],rn.prototype,"translationY",2),x([Ks({redraw:3,changeCb:t=>t.visibilityChanged()})],rn.prototype,"visible",2),x([Ks({redraw:1,changeCb:on})],rn.prototype,"zIndex",2),x([Ks({redraw:1,changeCb:on})],rn.prototype,"zIndexSubOrder",2);var ln=rn,hn=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*u((i+.055)/1.055,2.4)},cn=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*u(i,1/2.4)-.055):12.92*t},dn=class t{constructor(t,e,i,s=1){this.r=Vs(0,t||0,1),this.g=Vs(0,e||0,1),this.b=Vs(0,i||0,1),this.a=Vs(0,s||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return t.fromHexString(e);const i=t.nameToHex[e.toLowerCase()];if(i)return t.fromHexString(i);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return t.fromString(e)}catch(i){return C.warnOnce(`invalid color string: '${e}'.`),t.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(e){const i=t.parseHex(e);if(i){const[e,s,n,a]=i;return new t(e/255,s/255,n/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let s=0;s<t.length;s++){const n=t[s];if(e||"("!==n){if(")"===n){i=s;break}}else e=s}const s=e&&i&&t.substring(e+1,i);if(!s)return;const n=s.split(","),a=[];for(let t=0;t<n.length;t++){const e=n[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Vs(0,i,100),i/=100):3===t?i=Vs(0,i,1):(i=Vs(0,i,255),i/=255),a.push(i)}return a}static fromRgbaString(e){const i=t.stringToRgba(e);if(i){if(3===i.length)return new t(i[0],i[1],i[2]);if(4===i.length)return new t(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,n=1){const a=t.HSBtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromHSL(e,i,s,n=1){const a=t.HSLtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromOKLCH(e,i,s,n=1){const a=t.OKLCHtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return t.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,e,i){const s=hn(t),n=hn(e),a=hn(i),o=Math.cbrt(.4122214708*s+.5363325363*n+.0514459929*a),r=Math.cbrt(.2119034982*s+.6806995451*n+.1073969566*a),l=Math.cbrt(.0883024619*s+.2817188376*n+.6299787005*a),h=.2104542553*o+.793617785*r-.0040720468*l,c=1.9779984951*o-2.428592205*r+.4505937099*l,d=.0259040371*o+.7827717662*r-.808675766*l,u=180*Math.atan2(d,c)/Math.PI;return[h,Math.hypot(c,d),u>=0?u:u+360]}static OKLCHtoRGB(t,e,i){const s=t,n=e*Math.cos(i*Math.PI/180),a=e*Math.sin(i*Math.PI/180),o=u(s+.3963377774*n+.2158037573*a,3),r=u(s-.1055613458*n-.0638541728*a,3),l=u(s-.0894841775*n-1.291485548*a,3),h=-1.2684380046*o+2.6097574011*r-.3413193965*l,c=-.0041960863*o-.7034186147*r+1.707614701*l;return[cn(4.0767416621*o-3.3077115913*r+.2309699292*l),cn(h),cn(c)]}static RGBtoHSL(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i),a=(n+s)/2;let o,r;if(n===s)o=NaN,r=0;else{const l=n-s;r=a>.5?l/(2-n-s):l/(n+s),o=n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4,o*=60}return[o,r,a]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const s=i<.5?i*(1+e):i+e-i*e,n=2*i-s;function a(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(s-n)*t:t<.5?s:t<2/3?n+(s-n)*(2/3-t)*6:n}return[a(t/360+1/3),a(t/360),a(t/360-1/3)]}static RGBtoHSB(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i);let a=NaN;if(s!==n){const o=n-s,r=(n-t)/o,l=(n-e)/o,h=(n-i)/o;a=t===n?h-l:e===n?2+r-h:4+l-r,a/=6,a<0&&(a+=1)}return[360*a,0!==n?(n-s)/n:0,n]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let s=0,n=0,a=0;if(0===e)s=n=a=i;else{const o=6*(t-Math.floor(t)),r=o-Math.floor(o),l=i*(1-e),h=i*(1-e*r),c=i*(1-e*(1-r));switch(o>>0){case 0:s=i,n=c,a=l;break;case 1:s=h,n=i,a=l;break;case 2:s=l,n=i,a=c;break;case 3:s=l,n=h,a=i;break;case 4:s=c,n=l,a=i;break;case 5:s=i,n=l,a=h}}return[s,n,a]}derive(e,i,s,n){const a=t.RGBtoHSB(this.r,this.g,this.b);let o=a[2];0==o&&s>1&&(o=.05);const r=((a[0]+e)%360+360)%360,l=Vs(0,a[1]*i,1);o=Vs(0,o*s,1);const h=Vs(0,this.a*n,1),c=t.HSBtoRGB(r,l,o);return c.push(h),t.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,i){const s=t.tryParseFromString(e),n=t.tryParseFromString(i);return e=>{const i=(t,i)=>t*(1-e)+i*e;return new t(i(s.r,n.r),i(s.g,n.g),i(s.b,n.b),i(s.a,n.a)).toString()}}};dn.didDebug=!1,dn.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var un=dn;function pn(t,e){return i=>Number(t)*(1-i)+Number(e)*i}var gn={};f(gn,{easeIn:()=>mn,easeInOut:()=>xn,easeInOutQuad:()=>Sn,easeInQuad:()=>vn,easeOut:()=>fn,easeOutQuad:()=>bn,inverseEaseOut:()=>kn,linear:()=>yn});var yn=t=>t,mn=t=>1-Math.cos(t*Math.PI/2),fn=t=>Math.sin(t*Math.PI/2),xn=t=>-(Math.cos(t*Math.PI)-1)/2,vn=t=>t*t,bn=t=>1-u(1-t,2),Sn=t=>t<.5?2*t*t:1-u(-2*t+2,2)/2,kn=t=>2*Math.asin(t)/Math.PI,Dn={animationDuration:1,animationDelay:0},Mn={animationDuration:.25,animationDelay:0},Ln={animationDuration:.5,animationDelay:.25},An={animationDuration:.25,animationDelay:.75},wn={animationDuration:.2,animationDelay:1},Nn=["initial","remove","update","add","trailing","end"],Cn={initial:Dn,add:An,remove:Mn,update:Ln,trailing:wn,end:{animationDelay:1.2,animationDuration:0}},In=(t=>(t.Loop="loop",t.Reverse="reverse",t))(In||{});function Tn(t){return t.every(t=>t instanceof ln)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var En=class{constructor(t){var e,i,s,n,a,o,r,l;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null==(e=t.autoplay)||e,this.ease=null!=(i=t.ease)?i:yn,this.phase=t.phase;const h=null!=(s=t.duration)?s:Cn[this.phase].animationDuration;this.duration=h*t.defaultDuration,this.delay=(null!=(n=t.delay)?n:0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null==(a=this.onUpdate)||a.call(this,t.to,!1,this),null==(o=this.onStop)||o.call(this,this),null==(r=this.onComplete)||r.call(this,this),this.isComplete=!0):this.autoplay&&(this.play(),null==(l=this.onUpdate)||l.call(this,t.from,!0,this)),!1!==t.collapsable&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){let i=t.from===t.to;return i||(i="object"==typeof t.from&&null==me(t.from,t.to)),i?0:e}play(){var t;this.isPlaying||this.isComplete||(this.isPlaying=!0,null==(t=this.onPlay)||t.call(this,this))}pause(){this.isPlaying&&(this.isPlaying=!1)}stop(){var t;this.isPlaying&&(this.isPlaying=!1,this.isComplete=!0,null==(t=this.onStop)||t.call(this,this))}update(t){var e,i;const s=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null==(e=this.onUpdate)||e.call(this,n,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,null==(i=this.onComplete)||i.call(this,this),t-(a-s)):0}get delta(){return this.ease(Vs(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e)return this.interpolateValue(t,e);const i=[];for(const s in e){const n=this.interpolateValue(t[s],e[s]);null!=n&&i.push([s,n])}return t=>{const e={};for(const[s,n]of i)e[s]=n(t);return e}}interpolateValue(t,e){if(void 0!==t&&void 0!==e){try{switch(typeof t){case"number":return pn(t,e);case"string":return function(t,e){if("string"==typeof t)try{t=un.fromString(t)}catch(e){t=un.fromArray([0,0,0])}if("string"==typeof e)try{e=un.fromString(e)}catch(t){e=un.fromArray([0,0,0])}const i=pn(t.r,e.r),s=pn(t.g,e.g),n=pn(t.b,e.b),a=pn(t.a,e.a);return t=>un.fromArray([i(t),s(t),n(t),a(t)]).toRgbaString()}(t,e)}}catch(t){}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}},On=["removed","updated","added"],Rn={added:"add",updated:"update",removed:"remove",unknown:"initial"};function Pn(t,e,i,s,n,a,o){const{fromFn:r,toFn:l,intermediateFn:h}=n,{nodes:c,selections:d}=Tn(s),u={added:{},removed:{}};a&&o&&(u.added=Ps(o.added,!0),u.removed=Ps(o.removed,!0));const p=(s,n)=>{var c;let d,p=0,y=0;for(const f of n){const x=s[p]===f,v={last:y>=n.length-1,lastLive:p>=s.length-1,prev:n[y-1],prevFromProps:d,prevLive:s[p-1],next:n[y+1],nextLive:s[p+(x?1:0)]},b=`${t}_${e}_${f.id}`;i.stopByAnimationId(b);let S="unknown";x?a&&o&&(S=Fn(f,f.datum,a,u)):S="removed";const k=r(f,f.datum,S,v),{phase:D,start:M,finish:L,delay:A,duration:w}=k,N=m(k,["phase","start","finish","delay","duration"]),C=l(f,f.datum,S,v),{phase:I,start:T,finish:E,delay:O,duration:R}=C,P=m(C,["phase","start","finish","delay","duration"]),_=null==L&&null==E;i.animate({id:b,groupId:t,phase:null!=(c=null!=D?D:I)?c:"update",duration:null!=w?w:R,delay:null!=A?A:O,from:N,to:P,ease:fn,collapsable:_,onPlay:()=>{f.setProperties(g(g({},M),T))},onUpdate(t){f.setProperties(t),h&&f.setProperties(h(f,f.datum,S,v))},onStop:()=>{f.setProperties(g(g(g({},P),L),E))}}),x&&p++,y++,d=N}};let y=0;for(const s of d){const n=s.nodes();p(n.filter(t=>!s.isGarbage(t)),n),i.animate({id:`${t}_${e}_selection_${y}`,groupId:t,phase:"end",from:0,to:1,ease:fn,onStop(){s.cleanup()}}),y++}p(c,c)}function _n(t,e,i,s,n,a,o){const{nodes:r,selections:l}=Tn(s),{start:h={},finish:c,phase:d}=o,u=null==c;i.animate({id:`${t}_${e}`,groupId:t,phase:null!=d?d:"update",from:n,to:a,ease:fn,collapsable:u,onPlay:()=>{for(const t of r)t.setProperties(h);for(const t of l)for(const e of t.nodes())e.setProperties(h)},onUpdate(t){for(const e of r)e.setProperties(t);for(const e of l)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of r)t.setProperties(g(g({},a),c));for(const t of l)for(const e of t.nodes())e.setProperties(g(g({},a),c))}})}function Fn(t,e,i,s){const n=i(t,e);return s.added[n]?"added":"updated"}var Bn=2*Math.PI;function zn(t){return t%=Bn,t+=Bn,t%=Bn}function Gn(t){return t%=Bn,(t+=Bn)!==Bn&&(t%=Bn),t}function Kn(t){return(t%=Bn)<-Math.PI?t+=Bn:t>=Math.PI&&(t-=Bn),t}function Vn(t){return t/180*Math.PI}function Wn(t){return t/Math.PI*180}function Yn(t,e){return t=zn(t),(e=zn(e))-t+(t>e?2*Math.PI:0)}var Un=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(t){this[i]!==t&&(this[i]=t,this.invalid=!0)},enumerable:!0,configurable:!1})},jn=class{constructor(){this.type="band",this.invalid=!0,this.interval=1,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&C.warnOnce("Expected update to not invalidate scale"))}set domain(t){this.invalid=!0;const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Vs(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Vs(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Vs(0,t,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,s=this._paddingOuter,[n,a]=this.range,o=a-n,r=o/Math.max(1,t+2*s-i),l=e?Math.floor(r):r,h=n+(o-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=r*(1-i),g=[];for(let e=0;e<t;e++)g.push(c+l*e);this._bandwidth=u,this._rawBandwidth=p,this._step=l,this.ordinalRange=g}};function Hn(t,e={}){const{optional:i=!1}=e;return Mt((s,n,a)=>{var o;const r=y(g({},e),{target:s,property:n});if(i&&void 0===a||t(a,r))return ye(s[n])&&!ye(a)?(s[n].set(a),s[n]):a;const l=String(n).replace(/^_*/,""),h=null!=(o=s.constructor.className)?o:s.constructor.name.replace(/Properties$/,"");return C.warn(`Property [${l}] of [${h}] cannot be set to [${Ga(a)}]${t.message?"; expecting "+za(t,r):""}, ignoring.`),St},void 0,{optional:i})}x([Un],jn.prototype,"interval",2),x([Un],jn.prototype,"range",2),x([Un],jn.prototype,"round",2);var Xn,$n=(...t)=>{const e=[];return Ba((i,s)=>(e.length=0,t.every(t=>{const n=t(i,s);return n||e.push(za(t,s)),n})),()=>e.filter(Boolean).join(" AND "))},qn=(...t)=>Ba((e,i)=>t.some(t=>t(e,i)),e=>t.map(function(t){return e=>za(e,t)}(e)).filter(Boolean).join(" OR ")),Zn=(Xn=Ba((t,e)=>ye(t)||Pt(t)&&ye(e.target[e.property]),"an object"),Object.assign(Xn,{restrict(t){const e=e=>ye(e)&&e instanceof t;return Ba((t,i)=>e(t)||Pt(t)&&e(i.target[i.property]),t=>{var e;return null!=(e=za(Xn,t))?e:"an object"})}})),Qn=Ba(It,"a boolean"),Jn=Ba(Rt,"a function"),ta=Ba(Bt,"a string"),ea=function(t){return Object.assign(t,{restrict({min:t,max:e}={}){const i=["a number"],s=zt(t),n=zt(e);return s&&n?i.push(`between ${t} and ${e} inclusive`):s?i.push("greater than or equal to "+t):n&&i.push("less than or equal to "+e),Ba(i=>Gt(i)&&(!s||i>=t)&&(!n||i<=e),i.join(" "))}})}(Ba(Gt,"a number")),ia=Ba(t=>zt(t)&&isNaN(t),"NaN"),sa=ea.restrict({min:0}),na=ea.restrict({min:0,max:1}),aa=ea.restrict({min:-360,max:360}),oa=qn(ea,ia),ra=function(t){return Object.assign(t,{restrict:({length:t,minLength:e}={})=>Ba(i=>Ct(i)&&(!zt(t)||i.length===t)&&(!zt(e)||i.length>=e),zt(e)&&e>0?"a non-empty array":zt(t)?"an array of length "+t:"an array")})}(Ba(Ct,"an array")),la=(t,e)=>Ba((e,i)=>Ct(e)&&e.every(e=>t(e,i)),t=>{var i;const s=null!=(i=za(ra,t))?i:"";return e?`${s} of ${e}`:s}),ha=t=>Gt(t)||Et(t),ca=t=>Ba((e,i)=>!ha(e)||!ha(i.target[t])||e<i.target[t],"expected to be less than "+t),da=t=>Ba((e,i)=>!ha(e)||!ha(i.target[t])||e>i.target[t],"expected to be greater than "+t),ua=Ba(Et,"Date object"),pa=qn(ua,sa),ga="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",ya=Ba(t=>Bt(t)&&un.validColorString(t),"color String. "+ga),ma=Ba(la(ya),"color strings. "+ga),fa=la(Qn,"boolean values"),xa=la(ea,"numbers"),va=la(ta,"strings"),ba=Ba(la(ua),"Date objects"),Sa=Ba(la(Zn),"objects"),ka=Pa(["butt","round","square"],"a line cap"),Da=Pa(["round","bevel","miter"],"a line join"),Ma=Ba(la(sa),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),La=Pa(["top","right","bottom","left"],"a position"),Aa=Pa(["normal","italic","oblique"],"a font style"),wa=qn(Pa(["normal","bold","bolder","lighter"],"a font weight"),ea.restrict({min:1,max:1e3})),Na=Pa(["never","always","hyphenate","on-space"],"a text wrap strategy"),Ca=Pa(["left","center","right"],"a text align"),Ia=Pa(["top","middle","bottom"],"a vertical align"),Ta=Pa(["ellipsis","hide"],"an overflow strategy"),Ea=Pa(["horizontal","vertical"],"a direction"),Oa=Pa(["inside","outside"],"a placement"),Ra=qn(Pa(["exact","nearest"],"interaction range"),ea);function Pa(t,e="a"){return Ba(e=>t.includes(e),`${e} keyword such as ${function(t){const e=t.map(t=>`'${t}'`);if(1===e.length)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}(t)}`)}var _a=qn($n(ea.restrict({min:1}),ca("maxSpacing")),ia),Fa=qn($n(ea.restrict({min:1}),da("minSpacing")),ia);function Ba(t,e){return t.message=e,t}function za(t,e){return Rt(t.message)?t.message(e):t.message}function Ga(t){if("number"==typeof t){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var Ka=(t=>(t.X="x",t.Y="y",t))(Ka||{});function Va(){if("undefined"==typeof navigator)return!1;const t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(null==t)return!1;const e=t[1].split("_"),i=Number(e[0]);if(i>16)return!1;if(16===i){return Number(e[1])<6}return!0}var Wa=class t{constructor(e){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:i,window:s,width:n=600,height:a=300,domLayer:o=!1,zIndex:r=0,name:l,overrideDevicePixelRatio:h}=e;this.document=i,this.window=s,t.document=i,this.element=i.createElement("canvas"),this.element.width=n,this.element.height=a,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:c}=this.element;c.userSelect="none",c.display="block",o&&(c.position="absolute",c.zIndex=String(r),c.top="0",c.left="0",c.pointerEvents="none",c.opacity="1",l&&(this.element.id=l)),this.context=this.setPixelRatio(h),this.resize(n,a)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),s=this.document,n=s.createElement("a");n.href=i,n.download=t,n.style.display="none",s.body.appendChild(n),n.click(),s.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let i=null!=e?e:this.window.devicePixelRatio;return Va()&&(i=1),this._pixelRatio=i,t.overrideScale(this.realContext,i)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),i.style.width=t+"px",i.style.height=e+"px",s.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t="undefined"==typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,e="undefined"!=typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,s){const n=this.textMeasuringContext;return n.font=e,n.textBaseline=i,n.textAlign=s,n.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const s=i.measureText(t);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,s=i[e];if(s){const e=s[t];if(e)return e}else i[e]={};const n=this.svgText;n.style.font=e,n.textContent=t;const a=n.getBBox(),o={width:a.width,height:a.height};return i[e][t]=o,o}static overrideScale(t,e){let i=0;const s={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,s,n,a,o){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,s*e,n*e,a*e,o*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in s)Object.hasOwn(s,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=s[e]);return t}};Wa.document=globalThis.document,Wa.textSizeCache={};var Ya=Wa,Ua=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,ja=class t extends ln{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=t.defaultStyles.fill,this.stroke=t.defaultStyles.stroke,this.strokeWidth=t.defaultStyles.strokeWidth,this.lineDash=t.defaultStyles.lineDash,this.lineDashOffset=t.defaultStyles.lineDashOffset,this.lineCap=t.defaultStyles.lineCap,this.lineJoin=t.defaultStyles.lineJoin,this.opacity=t.defaultStyles.opacity,this.fillShadow=t.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,s=e.length;i<s;i++){const s=e[i];this[s]=t[s]}}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=Ua.exec(t))){const t=parseFloat(e[1]),i=[],s=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=n.exec(s);)i.push(a[0]);this.gradient=new class extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:s}=this,n=zn(Vn(s+90)),a=Math.cos(n),o=Math.sin(n),r=e.width,l=e.height,h=e.x+.5*r,c=e.y+.5*l;if(r>0&&l>0){const e=Math.sqrt(l*l+r*r)/2,s=Math.atan2(l,r);let d;d=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;const u=e*Math.abs(Math.cos(d-s)),p=t.createLinearGradient(h+a*u,c+o*u,h-a*u,c-o*u);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}},this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,s,n;const a=null!=(n=null==(s=null==(i=this.layerManager)?void 0:i.canvas)?void 0:s.pixelRatio)?n:1,o=Math.round(t*a)/a;return null==e?o:0===e?0:e<1?Math.ceil(e*a)/a:Math.round((e+t)*a)/a-o}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const s=null!=(i=null==(e=this.layerManager)?void 0:e.canvas.pixelRatio)?i:1,n=this.fillShadow;(null==n?void 0:n.enabled)&&(t.shadowColor=n.color,t.shadowOffsetX=n.xOffset*s,t.shadowOffsetY=n.yOffset*s,t.shadowBlur=n.blur*s)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}};ja.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),x([Ks({redraw:2})],ja.prototype,"fillOpacity",2),x([Ks({redraw:2})],ja.prototype,"strokeOpacity",2),x([Ks({redraw:2,changeCb:t=>t.updateGradient()})],ja.prototype,"fill",2),x([Ks({redraw:2})],ja.prototype,"stroke",2),x([Ks({redraw:2})],ja.prototype,"strokeWidth",2),x([Ks({redraw:2})],ja.prototype,"lineDash",2),x([Ks({redraw:2})],ja.prototype,"lineDashOffset",2),x([Ks({redraw:2})],ja.prototype,"lineCap",2),x([Ks({redraw:2})],ja.prototype,"lineJoin",2),x([Ks({redraw:2,convertor:t=>Vs(0,t,1)})],ja.prototype,"opacity",2),x([Ks({redraw:2,checkDirtyOnAssignment:!0})],ja.prototype,"fillShadow",2);var Ha=ja;function Xa(t){const{redraw:e=3,changeCb:i}=null!=t?t:{};return Ks({redraw:e,type:"font",changeCb:i})}var $a=class t extends Ha{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=t.defaultStyles.textAlign,this.textBaseline=t.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=io(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Za(this)),this._font}computeBBox(){return Ya.has.textMetrics?Ja(this.lines,this.x,this.y,this):to(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(Ya.has.textMetrics){const s=Ya.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!=(e=s.fontBoundingBoxAscent)?e:s.emHeightAscent)+(null!=(i=s.fontBoundingBoxDescent)?i:s.emHeightDescent)}return Ya.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return!!s&&s.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(0===this.dirty&&!i)return void(s&&(s.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:n,stroke:a,strokeWidth:o}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const r=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*r,e.shadowOffsetY=t.yOffset*r,e.shadowBlur=t.blur*r),this.renderLines((t,i,s)=>e.fillText(t,i,s))}if(a&&o){e.strokeStyle=a,e.lineWidth=o,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:s,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),s&&(e.lineCap=s),n&&(e.lineJoin=n),this.renderLines((t,i,s)=>e.strokeText(t,i,s))}super.render(t)}renderLines(t){const{lines:e,x:i,y:s}=this,n=this.lines.map(t=>this.getLineHeight(t));let a=-(n.reduce((t,e)=>t+e,0)-n[0])*eo(this.textBaseline);for(let o=0;o<e.length;o++)t(e[o],i,s+a),a+=n[o]}static wrapLines(e,i,s,n,a,o){const r="hide"!==o,l=function(t){const e=new Map,i=e=>Ya.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:s}=i(t);return e.set(t,s),s}}}(Za(n)),h=e.split(/\r?\n/g);if(0===h.length)return{lines:void 0,truncated:!1};if("never"===a){const{text:e,truncated:s}=t.truncateLine(h[0],i,l,r?"auto":"never");return{lines:null!=e?[e]:void 0,truncated:s}}const c=[];let d=0,u=!1;for(const e of h){const o=t.wrapLine(e,i,s,l,n,a,d,r);if(null==o)return{lines:void 0,truncated:!1};if(c.push(...o.result),d=o.cumulativeHeight,o.truncated){u=!0;break}}return{lines:c,truncated:u}}static wrap(e,i,s,n,a,o="ellipsis"){const{lines:r,truncated:l}=t.wrapLines(e,i,s,n,a,o);return{text:null!=r?r.join("\n").trim():"",truncated:l}}static wrapLine(e,i,s,n,a,o,r,l){if(!(e=e.trim()))return{result:[],truncated:!1,cumulativeHeight:r};const h=n.size(e);if(h.width<=i)return{result:[e],truncated:!1,cumulativeHeight:r+h.height};if(h.height>s||n.width("W")>i)return l?{result:[],truncated:!0,cumulativeHeight:r}:void 0;const c=e.split(/\s+/g),d=t.wrapLineSequentially(c,i,s,n,a,o,r,l);if(null==d)return;r=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const e=d.lines.length,s=t.wrapLineBalanced(c,i,n,e);s.length===u.length&&(u=s)}return{result:u.map(t=>t.join(" ")),truncated:d.linesTruncated,cumulativeHeight:r}}static breakWord(e,i,s,n,a){const o=i=>t.punctuationMarks.includes(e[i]),r=n?a.width("-"):0,l=[];let h=0,c=0;for(let t=0;t<e.length;t++){const n=e[t],o=a.width(n);h+o+r>(0===c?i:s)&&(l.push(t),h=0,c++),h+=o}const d=[];let u=0;for(const t of l){let i=e.substring(u,t);n&&i.length>0&&!o(t-1)&&!o(t)&&(i+="-"),d.push(i),u=t}return d.push(e.substring(u)),d}static truncateLine(t,e,i,s){t=t.trimEnd();const n=i.width(t);if(n>e&&"never"===s)return{text:void 0,truncated:!1};if(n<=e&&"force"!==s)return{text:t,truncated:!1};const a=i.width("\u2026");let o=t,r=n;for(;o.length>0&&r+a>e;)o=o.slice(0,-1).trimEnd(),r=i.width(o);return r+a<=e?{text:o+"\u2026",truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,i,s,n,a,o,r,l){const{fontSize:h=0,lineHeight:c=h*t.defaultLineHeightRatio}=a,d="always"===o||"hyphenate"===o,u="hyphenate"===o,p=n.width(" ");let g=!1,y=!1;const m=[];let f=[],x=0;const v=()=>({lines:m,linesTruncated:y,wordsBrokenOrTruncated:g,cumulativeHeight:r}),b=()=>{if(!l)return;const e=f.join(" "),{text:s}=t.truncateLine(e,i,n,"force");return null!=s?(f.splice(0,f.length,s),y=!0,v()):void 0},S=()=>{const t=r+c;return!(t>=s)&&(f=[],x=0,r=t,m.push(f),!0)};if(!S())return b();for(let s=0;s<e.length;s++){const a=e[s],o=n.width(a),r=0===f.length?0:p,h=x+r+o;if(h<=i)f.push(a),x=h;else if(o<=i){if(!S())return b();f.push(a),x=o}else{if(g=!0,!d){if(l){if(!S())return b();const{text:o}=t.truncateLine(a,i,n,"force");if(null==o)return;f.push(o),s<e.length-1&&(y=!0);break}return}{const e=i-x-r,s=t.breakWord(a,e,i,u,n);for(let t=0;t<s.length;t++){const e=s[t];if(e&&f.push(e),t===s.length-1)x=n.width(e);else if(!S())return b()}}}}return v()}static wrapLineBalanced(t,e,i,s){const n=t.reduce((t,e)=>t+i.width(e),0),a=i.width(" "),o=(n+a*(t.length-s-2))/s,r=[];let l=[],h=i.width(t[0]),c=!0;for(const s of t){const t=i.width(s);if(c){l=[],l.push(s),h=t,c=!1,r.push(l);continue}const n=h+a+t;n<=o?(l.push(s),h=n):n<=e?(l.push(s),c=!0):(l=[s],h=t,r.push(l))}return r}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}};$a.className="Text",$a.defaultLineHeightRatio=1.15,$a.defaultStyles=Object.assign({},Ha.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),$a.ellipsis="\u2026",$a.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],x([Ks({redraw:3})],$a.prototype,"x",2),x([Ks({redraw:3})],$a.prototype,"y",2),x([Ks({redraw:3,changeCb:t=>t._setLines()})],$a.prototype,"text",2),x([Xa()],$a.prototype,"fontStyle",2),x([Xa()],$a.prototype,"fontWeight",2),x([Xa()],$a.prototype,"fontSize",2),x([Xa()],$a.prototype,"fontFamily",2),x([Ks({redraw:3})],$a.prototype,"textAlign",2),x([Ks({redraw:3})],$a.prototype,"textBaseline",2),x([Ks({redraw:3})],$a.prototype,"lineHeight",2);var qa=$a;function Za(t){const{fontFamily:e,fontSize:i,fontStyle:s,fontWeight:n}=t;return[null!=s?s:"",null!=n?n:"",i+"px",e].join(" ").trim()}function Qa(t,e,i,s){return Ya.has.textMetrics?Ja(t,e,i,s):to(t,e,i,s)}function Ja(t,e,i,s){var n,a;let o=0,r=0,l=0,h=0,c=0;const d=Za(s),{lineHeight:u,textBaseline:p=qa.defaultStyles.textBaseline,textAlign:g=qa.defaultStyles.textAlign}=s;for(let e=0;e<t.length;e++){const i=Ya.measureText(t[e],d,p,g);o=Math.max(o,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(r+=i.actualBoundingBoxAscent,h+=i.actualBoundingBoxAscent):c+=null!=(n=i.fontBoundingBoxAscent)?n:i.emHeightAscent,e==t.length-1?h+=i.actualBoundingBoxDescent:c+=null!=(a=i.fontBoundingBoxDescent)?a:i.emHeightDescent}return void 0!==u&&(c=(t.length-1)*u),h+=c,r+=c*eo(p),new en(e-o,i-r,l,h)}function to(t,e,i,s){let n=0,a=0,o=0;const r=Za(s),{lineHeight:l,textBaseline:h=qa.defaultStyles.textBaseline,textAlign:c=qa.defaultStyles.textAlign}=s;if(t.length>0){const e=Ya.getTextSize(t[0],r);n=e.width,a=e.height}for(let e=1;e<t.length;e++){const i=Ya.getTextSize(t[e],r);n=Math.max(n,i.width),o+=null!=l?l:i.height}switch(c){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(h){case"alphabetic":i-=.7*a+.5*o;break;case"middle":i-=.45*a+.5*o;break;case"ideographic":i-=a+o;break;case"hanging":i-=.2*a+.5*o;break;case"bottom":i-=a+o}return new en(e,i,n,a+o)}function eo(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function io(t){return"string"==typeof t?t.split(/\r?\n/g):[]}function so(t){const e=Ct(t)?t:t.split(".");if(1===e.length){const[t]=e;return Mt((e,i,s)=>e[t]=s,e=>e[t])}return Mt((t,i,s)=>qt(t,e,s),t=>$t(t,e))}function no(t){return Mt((e,i,s)=>e[t]=s)}function ao(t,e){return Mt((i,s,n)=>i[t][null!=e?e:s]=n)}function oo(t){const{newValue:e,oldValue:i,changeValue:s}=t;return Mt((t,n,a,o)=>(a!==o&&(void 0!==o&&(null==i||i.call(t,o)),void 0!==a&&(null==e||e.call(t,a)),null==s||s.call(t,a,o)),a))}function ro(t){return e=t,(t,i)=>{Dt(t,i).observers.push(e)};var e}function lo(t,e){const i=t.createElement("style");i.innerHTML=e,t.head.insertBefore(i,t.head.querySelector("style"))}function ho(t,e){var i,s,n;if("string"==typeof t)return t;const{content:a=(null!=(i=null==e?void 0:e.content)?i:""),title:o=(null==e?void 0:e.title),color:r=(null!=(s=null==e?void 0:e.color)?s:"white"),backgroundColor:l=(null!=(n=null==e?void 0:e.backgroundColor)?n:"#888")}=t;return`${o?`<div class="ag-chart-tooltip-title"\n        style="color: ${r}; background-color: ${l}">${o}</div>`:""}${a?`<div class="ag-chart-tooltip-content">${a}</div>`:""}`}var co=class extends pe{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};x([Hn(Pa(["pointer","node"],"a position type"))],co.prototype,"type",2),x([Hn(ea)],co.prototype,"xOffset",2),x([Hn(ea)],co.prototype,"yOffset",2);var uo=class t{constructor(e,i,s,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.darkTheme=!1,this.lastVisibilityChange=Date.now(),this.position=new co,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=s;const a=i.createElement("div");if(this.element=this.tooltipRoot.appendChild(a),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=e,"undefined"!=typeof IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}t.tooltipDocuments.indexOf(i)<0&&(lo(i,'\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    max-width: 100%;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.ag-chart-tooltip-wrap-always {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: none;\n}\n\n.ag-chart-tooltip-wrap-hyphenate {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n}\n\n.ag-chart-tooltip-wrap-on-space {\n    overflow-wrap: normal;\n    word-break: normal;\n}\n\n.ag-chart-tooltip-wrap-never {\n    white-space: pre;\n    text-overflow: ellipsis;\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    overflow: hidden;\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n    text-overflow: inherit;\n}\n\n.ag-chart-tooltip-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.ag-chart-tooltip-content {\n    overflow: hidden;\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    text-overflow: inherit;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n'),t.tooltipDocuments.push(i))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e,i=!0){const{element:s,class:n,lastClass:a,enableInteraction:o,lastVisibilityChange:r}=this,l=this.isVisible(),h=!!t;let c=1/0;if(l!==h){const t=Date.now();c=t-r,this.lastVisibilityChange=t}const d=(t,e)=>{const i="ag-chart-tooltip-"+t;e?s.classList.add(i):s.classList.remove(i)};c>5&&d("no-animation",!l&&h&&c>100),d("no-interaction",!o),d("hidden",!t),d("arrow",!!e),s.classList.toggle("ag-chart-dark-tooltip",this.darkTheme),this.updateWrapping(),i?(n!==a&&(a&&s.classList.remove(a),n&&s.classList.add(n)),this.lastClass=n):(a&&s.classList.remove(a),this.lastClass=void 0)}updateWrapping(){const{element:t,wrapping:e}=this,i={always:!1,hyphenate:!1,"on-space":!1,never:!1};i[e]=!0,Object.entries(i).forEach(([e,i])=>{t.classList.toggle("ag-chart-tooltip-wrap-"+e,i)})}show(t,e,i=!1){var s,n,a,o,r,l,h;const{element:c,canvasElement:d}=this;if(void 0!==e)c.innerHTML=e;else if(!c.innerHTML)return void this.toggle(!1);const u=null!=(n=null==(s=t.position)?void 0:s.xOffset)?n:0,p=null!=(o=null==(a=t.position)?void 0:a.yOffset)?o:0,g=d.getBoundingClientRect(),y=g.left+t.offsetX-c.clientWidth/2+u,m=g.top+t.offsetY-c.clientHeight-8+p,f=this.getWindowBoundingBox(),x=f.x+f.width-c.clientWidth-1,v=f.y+f.height-c.clientHeight,b=Vs(f.x,y,x),S=Vs(f.y,m,v),k=!(b!==y||S!==m)&&!u&&!p,D=null!=(l=null!=(r=t.showArrow)?r:this.showArrow)?l:k;if(this.updateShowArrow(D),c.style.transform=`translate(${Math.round(b)}px, ${Math.round(S)}px)`,this.enableInteraction=null!=(h=t.enableInteraction)&&h,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0,t.addCustomClass)},this.delay));this.toggle(!0,t.addCustomClass)}getWindowBoundingBox(){return new en(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t,e){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow,e)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null==(e=t.sourceEvent.relatedTarget)?void 0:e.classList,s=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&s}updateShowArrow(t){this._showArrow=t}};uo.tooltipDocuments=[],x([Hn(Qn)],uo.prototype,"enabled",2),x([Hn(Qn,{optional:!0})],uo.prototype,"showArrow",2),x([Hn(ta,{optional:!0})],uo.prototype,"class",2),x([Hn(sa)],uo.prototype,"delay",2),x([Hn(Ra)],uo.prototype,"range",2),x([Hn(Na)],uo.prototype,"wrapping",2),x([Hn(Qn)],uo.prototype,"darkTheme",2);var po=uo,go=class extends pe{constructor(){super(...arguments),this.id=Bs(this),this.node=(new qa).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}registerInteraction(t){return t.interactionManager.addListener("hover",e=>this.handleMouseMove(t,e))}computeTextWrap(t,e){var i,s;const{text:n,wrapping:a}=this,o=Math.min(null!=(i=this.maxWidth)?i:1/0,t),r=null!=(s=this.maxHeight)?s:e;if(!isFinite(o)&&!isFinite(r))return void(this.node.text=n);const{text:l,truncated:h}=qa.wrap(null!=n?n:"",o,r,this,a);this.node.text=l,this.truncated=h}handleMouseMove(t,e){if(!this.enabled)return;const{offsetX:i,offsetY:s}=e,n=this.node.computeBBox(),a=this.node.visible&&n.containsPoint(i,s);a&&e.consume(),this.truncated&&a?t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:e,showArrow:!1,addCustomClass:!1},ho({content:this.text})):t.tooltipManager.removeTooltip(this.id)}};go.SMALL_PADDING=10,go.LARGE_PADDING=20,x([Hn(Qn)],go.prototype,"enabled",2),x([Hn(ta,{optional:!0}),ao("node")],go.prototype,"text",2),x([Hn(Ca,{optional:!0}),ao("node")],go.prototype,"textAlign",2),x([Hn(Aa,{optional:!0}),ao("node")],go.prototype,"fontStyle",2),x([Hn(wa,{optional:!0}),ao("node")],go.prototype,"fontWeight",2),x([Hn(sa),ao("node")],go.prototype,"fontSize",2),x([Hn(ta),ao("node")],go.prototype,"fontFamily",2),x([Hn(ya,{optional:!0}),ao("node","fill")],go.prototype,"color",2),x([Hn(sa,{optional:!0})],go.prototype,"spacing",2),x([Hn(sa,{optional:!0})],go.prototype,"lineHeight",2),x([Hn(sa,{optional:!0})],go.prototype,"maxWidth",2),x([Hn(sa,{optional:!0})],go.prototype,"maxHeight",2),x([Hn(Na)],go.prototype,"wrapping",2);var yo=class{constructor(){this.enabled=!1,this.spacing=go.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};x([Hn(Qn)],yo.prototype,"enabled",2),x([Hn(ta,{optional:!0})],yo.prototype,"text",2),x([Hn(sa,{optional:!0})],yo.prototype,"spacing",2),x([Hn(Aa,{optional:!0})],yo.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],yo.prototype,"fontWeight",2),x([Hn(sa)],yo.prototype,"fontSize",2),x([Hn(ta)],yo.prototype,"fontFamily",2),x([Hn(ya,{optional:!0})],yo.prototype,"color",2),x([Hn(Na)],yo.prototype,"wrapping",2),x([Hn(Jn,{optional:!0})],yo.prototype,"formatter",2);var mo={constructedArrays:new WeakMap};function fo(t,e){var i;null==(i=mo.constructedArrays)||i.set(t,e)}var xo={constructors:{"axes[].title":yo},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}},vo=class t{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof t}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const{range:e}=this,i=this.getDomain(),s=Math.abs(e[1]-e[0]),n=Math.abs(i[1]-i[0])/t+1,a=Math.floor(s),o=Math.min(n,a);return s/Math.max(1,o)}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const s=null!=(i=null==e?void 0:e.clampMode)?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=this.getDomain().map(t=>this.transform(t)),[a,o]=n,{range:r}=this,[l,h]=r;if(t=this.transform(t),"clamped"===s){const e=Math.min(this.fromDomain(a),this.fromDomain(o)),i=Math.max(this.fromDomain(a),this.fromDomain(o));if(this.fromDomain(t)<e)return l;if(this.fromDomain(t)>i)return h}return a===o?(l+h)/2:t===a?l:t===o?h:l+(this.fromDomain(t)-this.fromDomain(a))/(this.fromDomain(o)-this.fromDomain(a))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,s]=e,{range:n}=this,[a,o]=n,r=a>o;let l;return t<(r?o:a)?r?s:i:t>(r?a:o)?r?i:s:(l=a===o?this.toDomain((this.fromDomain(i)+this.fromDomain(s))/2):this.toDomain(this.fromDomain(i)+(t-a)/(o-a)*(this.fromDomain(s)-this.fromDomain(i))),this.transformInvert(l))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&C.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const t=this.range.slice().sort((t,e)=>t-e);return t[1]-t[0]}isDenseInterval({start:t,stop:e,interval:i,count:s}){return null!=s||(s=(e-t)/("number"==typeof i?i:1)),s>=this.getPixelRange()&&(C.warn("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}};vo.defaultTickCount=5,vo.defaultMaxTickCount=6,x([Un],vo.prototype,"domain",2),x([Un],vo.prototype,"range",2),x([Un],vo.prototype,"nice",2),x([Un],vo.prototype,"interval",2),x([Un],vo.prototype,"tickCount",2),x([Un],vo.prototype,"minTickCount",2),x([Un],vo.prototype,"maxTickCount",2);var bo=vo;function So(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function ko(t,e,i){const s=t=>"function"==typeof t?t():t;for(const n in t){const a=i(s(t[n]),s(e[n]));if(0!==a)return a}return 0}var Do=class t extends ln{constructor(t){var e;super({isVirtual:null==t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:s}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==s&&(this.zIndexSubOrder=s),this.name=null==(e=this.opts)?void 0:e.name}zIndexChanged(){var t;this.layer&&(null==(t=this._layerManager)||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null==(e=this.opts)?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:s,name:n}=null!=(i=this.opts)?i:{},a=()=>this.getComputedOpacity(),o=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:s,name:n,getComputedOpacity:a,getVisibility:o})}}getComputedOpacity(){let e=1,i=this;do{i instanceof t&&(e*=i.opacity)}while(i=i.parent);return e}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=1){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<2||null!=this.layer)&&(i=1),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),t.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:s}={},_debug:n=(()=>{})}=this,{dirty:a,dirtyZIndex:o,layer:r,children:l,clipRect:h,dirtyTransform:c}=this;let{ctx:d,forceRender:u,clipBBox:p}=t;const{resized:m,stats:f}=t,x=d.getTransform(),v=a>=2||o||m;let b=v,S=!1;for(const t of l)if(b||(b=null==t.layerManager&&t.dirty>=1),S||(S=null!=t.layerManager&&t.dirty>=1),b)break;if(s&&n({name:s,group:this,isDirty:v,isChildDirty:b,dirtyTransform:c,renderCtx:t,forceRender:u}),c)u="dirtyTransform";else if(r){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(u="dirtyTransform",this.lastBBox=t)}if(!(v||b||S||u))return s&&f&&n({name:s,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),r&&f&&(f.layersSkipped++,f.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const k=this.visible;if(r){if(d=r.context,d.save(),d.resetTransform(),"dirtyTransform"!==u&&(u=b||o),u&&r.clear(),p){const{width:e,height:i,x:a,y:o}=p;n(()=>({name:s,clipBBox:p,ctxTransform:d.getTransform(),renderCtx:t,group:this})),this.clipCtx(d,a,o,e,i)}d.setTransform(x)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),h){const{x:e,y:i,width:a,height:o}=h;d.save(),n(()=>({name:s,clipRect:h,ctxTransform:d.getTransform(),renderCtx:t,group:this})),this.clipCtx(d,e,i,a,o),p=this.matrix.transformBBox(h)}const D=this.hasVirtualChildren();o?(this.sortChildren(l),"dirtyTransform"!==u&&(u=!0)):D&&this.sortChildren(l);const M=u!==t.forceRender||p!==t.clipBBox||d!==t.ctx?y(g({},t),{ctx:d,forceRender:u,clipBBox:p}):t;let L=0;for(const t of l)t.visible&&k?u||0!==t.dirty?(d.save(),t.render(M),d.restore()):f&&(L+=t.nodeCount.count):(t.markClean(),f&&(L+=t.nodeCount.count));if(f&&(f.nodesSkipped+=L),super.render(t),h&&d.restore(),D)for(const t of this.virtualChildren)t.markClean({recursive:"virtual"});r&&(f&&f.layersRendered++,d.restore(),u&&r.snapshot(),null==(i=(e=r.context).verifyDepthZero)||i.call(e)),s&&f&&n({name:s,result:"rendered",skipped:L,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((t,e)=>{var i,s;return ko([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!=(s=e.zIndexSubOrder)?s:[void 0,void 0],e.serialNumber],So)})}clipCtx(t,e,i,s,n){t.beginPath(),t.moveTo(e,i),t.lineTo(e+s,i),t.lineTo(e+s,i+n),t.lineTo(e,i+n),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,s=1/0,n=-1/0;return t.forEach(t=>{if(!t.visible)return;const a=t.computeTransformedBBox();if(!a)return;const o=a.x,r=a.y;o<e&&(e=o),r<s&&(s=r),o+a.width>i&&(i=o+a.width),r+a.height>n&&(n=r+a.height)}),new en(e,s,i-e,n-s)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}};Do.className="Group",x([Ks({redraw:3,convertor:t=>Vs(0,t,1)})],Do.prototype,"opacity",2);var Mo=Do,Lo=class extends Ha{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new en(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n}=t;if(0===this.dirty&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:o,x2:r,y2:l}=this;a=this.align(a),o=this.align(o),r=this.align(r),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(!(!d||!h)){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(a,o),i.lineTo(r,o),i.lineTo(r,l),i.lineTo(a,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:y}=this;if(!(!g&&!y||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:s,lineCap:n,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),s&&(i.lineDashOffset=s),n&&(i.lineCap=n),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(a,o),i.lineTo(r,o)),y&&(i.moveTo(r,l),i.lineTo(a,l)),i.stroke()}null==(e=this.fillShadow)||e.markClean(),super.render(t)}};Lo.className="Range",Lo.defaultStyles=y(g({},Ha.defaultStyles),{strokeWidth:1}),x([Ks({redraw:2})],Lo.prototype,"x1",2),x([Ks({redraw:2})],Lo.prototype,"y1",2),x([Ks({redraw:2})],Lo.prototype,"x2",2),x([Ks({redraw:2})],Lo.prototype,"y2",2),x([Ks({redraw:2})],Lo.prototype,"startLine",2),x([Ks({redraw:2})],Lo.prototype,"endLine",2),x([Ks({redraw:2})],Lo.prototype,"isRange",2);var Ao=class extends pe{constructor(){super(...arguments),this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Za(this)}};function wo(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?zn(Vn(t.rotation)):0,n=!s&&e>=0&&e<=Math.PI?-1:1,a=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=n*Math.PI/2:-1===a&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:a}}function No(t,e,i,s,n){const a=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(s*(a||o?-1:1)==-1)return"end"}else if(s*n==-1)return"end";return"start"}function Co(t,e,i,s,n){const{width:a,height:o}=e,r=new en(i,s,0,0);n.transformBBox(r,e);const{x:l=0,y:h=0}=e;return e.width=a,e.height=o,{point:{x:l,y:h,size:0},label:{width:a,height:o,text:t}}}x([Hn(Qn)],Ao.prototype,"enabled",2),x([Hn(ya)],Ao.prototype,"color",2),x([Hn(Aa,{optional:!0})],Ao.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],Ao.prototype,"fontWeight",2),x([Hn(sa)],Ao.prototype,"fontSize",2),x([Hn(ta)],Ao.prototype,"fontFamily",2),x([Hn(Jn,{optional:!0})],Ao.prototype,"formatter",2);var Io=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=5]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=6]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=7]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=8]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=9]="LEGEND_ZINDEX",t))(Io||{}),To=t=>!!t&&Object.hasOwn(t,"toString")&&Bt(t.toString()),Eo=t=>Gt(t)||(t=>!!t&&Object.hasOwn(t,"valueOf")&&Gt(t.valueOf()))(t)||Et(t);function Oo(t,e){return e&&Eo(t)?t:e?void 0:Bt(t)||To(t)?t:String(t)}function Ro(t){return To(t)&&Object.hasOwn(t,"id")?t.id:t}var Po=t=>"value"===t?Ba((t,e)=>"line"===e.target.type,t=>"range"===t.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Ba((t,e)=>"range"===e.target.type,t=>"line"===t.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),_o=(t,e,i,s)=>{const n="line"===t&&void 0!==e,a="range"===t&&void 0!==i;if(!n&&!a)return!0;const[o,r]=null!=i?i:[e,void 0],l=bo.is(s),h=null!=Oo(o,l)&&!isNaN(s.convert(o)),c=null!=Oo(r,l)&&!isNaN(s.convert(r));if(n&&h||a&&h&&c)return!0;const d=["Expecting crossLine"];return a?(h||d.push("range start "+Ga(o)),c||d.push(`${h?"":"and "}range end ${Ga(r)}`)):d.push("value "+Ga(o)),d.push("to match the axis scale domain."),C.warnOnce(d.join(" ")),!1},Fo={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Bo={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function zo({yDirection:t,padding:e=0,position:i="top",bbox:s}){const n=t?Fo:Bo,{xTranslationDirection:a,yTranslationDirection:o}=n[i];return{xTranslation:a*(e+(t?s.width:s.height)/2),yTranslation:o*(e+(t?s.height:s.width)/2)}}var Go=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},Ko=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:e,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},Vo=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},Wo=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i/2,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:(s+n)/2},Yo=({yDirection:t,xStart:e,xEnd:i,yStart:s})=>t?{x:e/2,y:s}:{x:i,y:s},Uo=({yDirection:t,xStart:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},jo=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},Ho=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:n},Xo={top:{c:Go},bottom:{c:Wo},left:{c:Ko},right:{c:Vo},topLeft:{c:Yo},topRight:{c:jo},bottomLeft:{c:Uo},bottomRight:{c:Ho},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:Ko},insideRight:{c:Vo},insideTop:{c:Go},insideBottom:{c:Wo},insideTopLeft:{c:Yo},insideBottomLeft:{c:Uo},insideTopRight:{c:jo},insideBottomRight:{c:Ho}},$o=Pa(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),qo=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};x([Hn(Qn,{optional:!0})],qo.prototype,"enabled",2),x([Hn(ta,{optional:!0})],qo.prototype,"text",2),x([Hn(Aa,{optional:!0})],qo.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],qo.prototype,"fontWeight",2),x([Hn(sa)],qo.prototype,"fontSize",2),x([Hn(ta)],qo.prototype,"fontFamily",2),x([Hn(ea)],qo.prototype,"padding",2),x([Hn(ya,{optional:!0})],qo.prototype,"color",2),x([Hn($o,{optional:!0})],qo.prototype,"position",2),x([Hn(aa,{optional:!0})],qo.prototype,"rotation",2),x([Hn(Qn,{optional:!0})],qo.prototype,"parallel",2);var Zo=class t{constructor(){this.id=Bs(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new qo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new Mo({name:""+this.id,layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.labelGroup=new Mo({name:""+this.id,layer:!0,zIndex:t.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Lo,this.crossLineLabel=new qa,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:i,crossLineRange:s,crossLineLabel:n}=this;e.append(s),i.append(n),s.pointerEvents=1}update(t){const{enabled:e,data:i,type:s,value:n,range:a,scale:o}=this;if(!(s&&o&&e&&t&&_o(s,n,a,o)&&0!==i.length))return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,e){if(!t)return;if(!this.createNodeData(e))return;const{sideFlag:i,gridLength:s,data:n}=this,a=[],o=i*s,r=n[0],l=n[1],h=new en(Math.min(0,o),Math.min(r,l),Math.abs(0-o),Math.abs(r-l));a.push(h);const c=this.computeLabelBBox();return c&&a.push(c),en.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(t){var e,i,s;const{scale:n,gridLength:a,sideFlag:o,direction:r,label:{position:l="top"},clippedRange:h,strokeWidth:c=0}=this;if(this.data=[],!n)return!1;const d=null!=(e=n.bandwidth)?e:0,u=null!=(i=n.step)?i:0,p=(t?-1:1)*(n instanceof jn?(u-d)/2:0),[g,y]=[0,o*a];let[m,f]=this.getRange(),[x,v]=[Number(n.convert(m,{clampMode:"clamped"}))-p,n.convert(f,{clampMode:"clamped"})+d+p];x=Ws(x,h),v=Ws(v,h),[m,f]=[Number(n.convert(m)),n.convert(f)+d];const b=(m===x||f===v||x!==v)&&Math.abs(v-x)>0;if(b&&x>v&&([x,v]=[v,x],[m,f]=[f,m]),m-p>=x&&(m-=p),f+p<=v&&(f+=p),this.isRange=b,this.startLine=c>0&&m>=x&&m<=x+p,this.endLine=c>0&&f>=v-d-p&&f<=v,!b&&!this.startLine&&!this.endLine)return!1;if(this.data=[x,v],this.label.enabled){const t="y"===r,{c:e=Go}=null!=(s=Xo[l])?s:{},{x:i,y:n}=e({yDirection:t,xStart:g,xEnd:y,yStart:x,yEnd:v});this.labelPoint={x:i,y:n}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:s,data:n,startLine:a,endLine:o,isRange:r,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*s,e.y1=n[0],e.y2=n[1],e.startLine=a,e.endLine=o,e.isRange=r,e.fill=l,e.fillOpacity=null!=h?h:1,e.stroke=c,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!=(t=this.strokeOpacity)?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:s,rotation:n,position:a="top",padding:o=0},direction:r,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=wo({rotation:n,parallel:s,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=t.computeTransformedBBox();if(!u)return;const p="y"===r,{xTranslation:g,yTranslation:y}=zo({yDirection:p,padding:o,position:a,bbox:u});t.translationX=e+g,t.translationY=i+y}getZIndex(e=!1){return e?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX}getRange(){var t;const{value:e,range:i,scale:s}=this,n=bo.is(s),a=null!=(t=null==i?void 0:i[0])?t:e;let o=null==i?void 0:i[1];return n||void 0!==o||(o=a),n&&a===o&&(o=void 0),[a,o]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new qa;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:s}={},label:{parallel:n,rotation:a,position:o="top",padding:r=0},direction:l,parallelFlipRotation:h,regularFlipRotation:c}=this;if(void 0===i||void 0===s)return;const{configuredRotation:d}=wo({rotation:a,parallel:n,regularFlipRotation:c,parallelFlipRotation:h});e.rotation=d,e.textBaseline="middle",e.textAlign="center";const u=e.computeTransformedBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:y}=zo({yDirection:p,padding:r,position:o,bbox:u});return e.translationX=i+g,e.translationY=s+y,e.computeTransformedBBox()}calculatePadding(t){var e,i,s,n,a,o,r,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const y=this.computeLabelBBox();if(null==(null==y?void 0:y.x)||null==(null==y?void 0:y.y))return;const m=function({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||("top"!==s||t?"bottom"!==s||t?"left"===s&&t?n.left=i+e.width:"right"===s&&t&&(n.right=i+e.width):n.bottom=i+e.height:n.top=i+e.height),n}({yDirection:"y"===u,padding:p,position:g,bbox:y});t.left=Math.max(null!=(e=t.left)?e:0,null!=(i=m.left)?i:0),t.right=Math.max(null!=(s=t.right)?s:0,null!=(n=m.right)?n:0),t.top=Math.max(null!=(a=t.top)?a:0,null!=(o=m.top)?o:0),t.bottom=Math.max(null!=(r=t.bottom)?r:0,null!=(l=m.bottom)?l:0)}};Zo.LINE_LAYER_ZINDEX=8,Zo.RANGE_LAYER_ZINDEX=3,Zo.LABEL_LAYER_ZINDEX=7,Zo.className="CrossLine",x([Hn(Qn,{optional:!0})],Zo.prototype,"enabled",2),x([Hn(Pa(["range","line"],"a crossLine type"),{optional:!0})],Zo.prototype,"type",2),x([Hn($n(Po("range"),ra.restrict({length:2})),{optional:!0})],Zo.prototype,"range",2),x([Hn(Po("value"),{optional:!0})],Zo.prototype,"value",2),x([Hn(ya,{optional:!0})],Zo.prototype,"fill",2),x([Hn(na,{optional:!0})],Zo.prototype,"fillOpacity",2),x([Hn(ya,{optional:!0})],Zo.prototype,"stroke",2),x([Hn(ea,{optional:!0})],Zo.prototype,"strokeWidth",2),x([Hn(na,{optional:!0})],Zo.prototype,"strokeOpacity",2),x([Hn(Ma,{optional:!0})],Zo.prototype,"lineDash",2);var Qo=Zo,Jo=class{constructor(){this.moduleMap=new Map}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error("AG Charts - module already initialised: "+t.optionsKey);this.moduleMap.set(t.optionsKey,e(t))}removeModule(t){var e;const i=Bt(t)?t:t.optionsKey;null==(e=this.moduleMap.get(i))||e.destroy(),this.moduleMap.delete(i)}isModuleEnabled(t){return this.moduleMap.has(Bt(t)?t:t.optionsKey)}getModule(t){return this.moduleMap.get(Bt(t)?t:t.optionsKey)}get modules(){return this.moduleMap.values()}mapValues(t){return Array.from(this.moduleMap.values()).map(t)}destroy(){for(const t of this.moduleMap.keys())this.removeModule({optionsKey:t})}},tr={};function er(t,e){const{nodes:i,selections:s}=Tn(t);for(const t of s){for(const i of t.nodes()){const t=e(i,i.datum);i.setProperties(t)}t.cleanup()}for(const t of i){const i=e(t,t.datum);t.setProperties(i)}}f(tr,{resetMotion:()=>er});var ir=class{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=Cs.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,s;const n=this.states[this.state],a=null==n?void 0:n[t];if(!a)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let o=this.state;return"string"==typeof a?o=a:"object"==typeof a&&(o=a.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${o}`,"color: green"),null==(i=this.preTransitionCb)||i.call(this,this.state,o),this.state=o,"function"==typeof a?a(e):"object"==typeof a&&(null==(s=a.action)||s.call(a,e)),this.state}},sr=t=>`(${t})`,nr=t=>sr(t)+"?",ar=t=>nr("?:"+t),or=new RegExp(["^",ar(`${nr(".")}${sr("[<>=^]")}`),nr("[+\\-( ]"),nr("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),nr("0"),nr("\\d+"),nr(","),ar("\\."+sr("\\d+")),nr("~"),nr("[%a-z]"),"$"].join(""),"i"),rr=new RegExp(["^",sr(".*?"),`#\\{${sr(".+?")}\\}`,sr(".*?"),"$"].join(""));function lr(t){let e,i;const s=rr.exec(t);s&&([,e,t,i]=s);const n=or.exec(t);if(!n)throw new Error("The number formatter is invalid: "+t);const[,a,o,r,l,h,c,d,u,p,g]=n;return{fill:a,align:o,sign:r,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function hr(t){const e="string"==typeof t?lr(t):t,{fill:i,align:s,sign:n="-",symbol:a,zero:o,width:r,comma:l,type:h,prefix:c="",suffix:d="",precision:u}=e;let{trim:p}=e;const g=void 0===u||isNaN(u);let y,m;if(h)if(h in ur&&h in dr)y=g?dr[h]:ur[h];else if(h in ur)y=ur[h];else{if(!(h in dr))throw new Error("The number formatter type is invalid: "+h);y=dr[h]}else y=ur.g,p=!0;return m=null==u||g?h?6:12:u,t=>{let e=y(t,m);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let t=s.length-3;t>0;t-=3)s.splice(t,0,e);return`${s.join("")}${n}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const s="+"===i?"+":"";return`${t>=0?s:"\u2212"}${e}`}(t,e,n),a&&"#"!==a&&(e=`${a}${e}`),"#"===a&&"x"===h&&(e="0x"+e),"s"===h&&(e=`${e}${function(t){return mr[pr(t)]}(t)}`),"%"!==h&&"p"!==h||(e+="%"),null==r||isNaN(r)||(e=function(t,e,i=" ",s=">"){let n=t;if(">"!==s&&s){if("<"===s)n=n.padEnd(e,i);else if("^"===s){const t=Math.max(0,e-n.length),s=Math.ceil(t/2),a=Math.floor(t/2);n=n.padStart(s+n.length,i),n=n.padEnd(a+n.length,i)}}else n=n.padStart(e,i);return n}(e,r,null!=i?i:o,s)),e=`${c}${e}${d}`,e}}var cr=t=>Math.floor(Math.abs(t)),dr={b:t=>cr(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>cr(t).toString(8),x:t=>cr(t).toString(16),X:t=>dr.x(t).toUpperCase(),n:t=>dr.d(t),"%":t=>""+cr(100*t).toFixed(0)},ur={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>ur.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>ur.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>ur.g(t,e).toUpperCase(),n:(t,e)=>ur.g(t,e),p:(t,e)=>ur.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i))-(e-1);if(s<=0)return i.toFixed(-s);const n=Math.pow(10,s);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=pr(t);return ur.r(t/Math.pow(10,i),e)},"%":(t,e)=>ur.f(100*t,e)};function pr(t){return Vs(gr,3*Math.floor(Math.log10(Math.abs(t))/3),yr)}var gr=-24,yr=24,mr={[gr]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[yr]:"Y"};function fr(t,e){const i=lr(null!=e?e:",f"),{precision:s}=i;(null==s||isNaN(s))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),s=i.type?6:12,n=t.toExponential(s-1).replace(/\.?0+e/,"e"),a=n.indexOf(".");if(a<0)return e>=0?0:-e;const o=n.indexOf("e")-a;return Math.max(0,o-e-1)})):i.type&&!(i.type in ur)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const n=hr(i);return t=>n(Number(t))}var xr=(t,e=[])=>Object.assign(e,{fractionDigits:t});function vr(t,e,i,s,n){if(i<2)return kr(t,e,e-t);const a=Sr(t,e,i,s,n);return isNaN(a)?xr(0):kr(t=Math.ceil(t/a)*a,e=Math.floor(e/a)*a,a)}var br=[1,2,5,10];function Sr(t,e,i,s=0,n=1/0){const a=Math.abs(e-t),o=a/i,r=Math.floor(Math.log10(o)),l=Math.pow(10,r),h=br.map(t=>{const e=t*l,o=Math.ceil(a/e);return{multiplier:t,isWithinBounds:o>=s&&o<=n,diffCount:Math.abs(o-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!h||isNaN(h)?NaN:h*l}function kr(t,e,i){const s=Math.min(t,e),n=Math.max(t,e),a=Zs(i),o=Math.pow(10,a),r=Math.ceil((n-s)/i),l=xr(a);for(let t=0;t<=r;t++){const e=s+i*t;l.push(Math.round(e*o)/o)}return l}var Dr=class t extends bo{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=w,this.basePow=w,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,C.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=t.getBaseLogMethod(this.base),this.basePow=t.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[t,e]=this.domain,i=t>e?Math.ceil:Math.floor,s=t>e?Math.floor:Math.ceil,n=this.pow(i(this.log(t))),a=this.pow(s(this.log(e)));this.niceDomain=[n,a]}ticks(){var t;const e=null!=(t=this.tickCount)?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[s,n]=this.getDomain(),a=Math.min(s,n),o=Math.max(s,n);let r=this.log(a),l=this.log(o);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(l-r);let i=kr(r,l,Math.min(e,t));if(i=xr(i.fractionDigits,i.map(t=>this.pow(t)).filter(t=>t>=a&&t<=o)),!this.isDenseInterval({start:a,stop:o,interval:t,count:i.length}))return i}if(!(i%1==0)||l-r>=e){let t=vr(r,l,Math.min(l-r,e));return t=xr(t.fractionDigits,t.map(t=>this.pow(t))),t}const h=[],c=a>0;r=Math.floor(r)-1,l=Math.round(l)+1;const d=Us(this.range)/e;let u=1/0;for(let t=r;t<=l;t++){const e=this.convert(this.pow(t+1));for(let s=1;s<i;s++){const n=c?s:i-s+1,r=this.pow(t)*n,l=this.convert(r),p=Math.abs(u-l),g=Math.abs(l-e),y=p>=d&&g>=d;r>=a&&r<=o&&(1===s||y)&&(h.push(r),u=l)}}return h}tickFormat({count:t,ticks:e,specifier:i}){return t!==1/0&&null==e&&this.ticks(),null!=i||(i=10===this.base?".0e":","),Bt(i)?hr(i):i}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const e=Math.log(t);return t=>Math.log(t)/e}}static getBasePowerMethod(t){switch(t){case 10:return t=>t>=0?u(10,t):1/u(10,-t);case Math.E:return Math.exp;default:return e=>u(t,e)}}};x([Un],Dr.prototype,"base",2);var Mr=Dr,Lr={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Ar(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+6e4*i;return Math.floor(s/864e5)}function wr(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,s=new Date(t.getFullYear(),0,i+1);return s<=t?Math.floor(Ar(t,s)/7)+1:0}var Nr={a:t=>Lr.shortDays[t.getDay()],A:t=>Lr.days[t.getDay()],b:t=>Lr.shortMonths[t.getMonth()],B:t=>Lr.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Ir(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>Ir(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>Ir(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":Ir(i,2,null!=e?e:"0")},j:(t,e)=>Ir(Ar(t)+1,3,null!=e?e:"0"),m:(t,e)=>Ir(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>Ir(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>Ir(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Ir(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Ir(wr(t,0),2,null!=e?e:"0"),V:(t,e)=>Ir(function t(e,i=e.getFullYear()){const s=new Date(i,0,1).getDay(),n=new Date(i,0,(4-s+7)%7-3+1);return n<=e?Math.floor(Ar(e,n)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>Ir(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>Ir(wr(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Ir(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>Ir(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Ir(Math.floor(i/60),2,"0")}${Ir(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},Cr={_:" ",0:"0","-":""};function Ir(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function Tr(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const s=i>0?t.substring(0,i):t;e.push(s)}if(i<0)break;const s=t[i+1],n=Cr[s];null!=n&&i++;const a=t[i+1],o=Nr[a];if("function"==typeof o)e.push([o,n]);else if("string"==typeof o){const t=Tr(o);e.push([t,n])}else e.push(`${null!=n?n:""}${a}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}var Er={0:".%L",1:":%S",2:"%I:%M",3:"%I %p",4:"%a",5:"%b %d",6:"%B",7:"%y",8:"%Y"};function Or(t){return t instanceof Date?t.getTime():t}var Rr=class extends bo{constructor(){super([],[0,1]),this.type="time",this.year=st,this.month=et,this.week=J,this.day=Y,this.hour=V,this.minute=z,this.second=_,this.millisecond=O,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=8;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const s=Or(t[0]),n=Or(t.at(-1)),a=new Date(s).getFullYear(),o=new Date(n).getFullYear()-a>0;return this.buildFormatString(e,o)}buildFormatString(t,e){let i=[Er[t]],s=0;const n=Us(this.getDomain().map(Or));switch(t){case 1:n/6e4>1&&i.push(Er[2]);case 2:n/36e5>1&&i.push(Er[3]);case 3:s=i.length,n/864e5>1&&i.push(Er[4]);case 4:if(n/6048e5>1||e){const t=i.indexOf(Er[4]);t>-1&&i.splice(t,1,Er[5])}case 5:case 6:(n/31536e6>1||e)&&i.push(Er[8])}return s<i.length&&(i=[...i.slice(0,s),i.slice(s).join(" ")]),s>0&&(i=[...i.slice(0,s).reverse(),...i.slice(s)],s<i.length&&i.splice(s,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?0:this.minute.floor(t)<t?1:this.hour.floor(t)<t?2:this.day.floor(t)<t?3:this.month.floor(t)<t?this.week.floor(t)<t?4:5:this.year.floor(t)<t?6:8}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Tr(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:s,maxCount:n}){const{tickIntervals:a}=this;let o,r;const l=null!=i?i:bo.defaultTickCount,h=Math.abs(e-t)/Math.max(l,1);let c=0;for(;c<a.length&&h>a[c][2];)c++;if(0===c)r=Math.max(Sr(t,e,l,s,n),1),o=this.millisecond;else if(c===a.length){r=Sr(t/31536e6,e/31536e6,l,s,n),o=this.year}else{const t=h-a[c-1][2]<a[c][2]-h?c-1:c;[o,r]=a[t]}return o.every(r)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Or),i=Math.min(t,e),s=Math.max(t,e);if(void 0!==this.interval)return this.getTicksForInterval({start:i,stop:s});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:i,stop:s})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:s}=this;if(!i)return[];if(i instanceof I){const s=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:s.length})?this.getDefaultTicks({start:t,stop:e}):s}const n=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:n}))return this.getDefaultTicks({start:t,stop:e});const a=[...s];a.reverse();const o=a.find(t=>n%t[2]==0);if(o){return o[0].every(n/(o[2]/o[1])).range(new Date(t),new Date(e))}let r=new Date(t);const l=new Date(e),h=[];for(;r<=l;)h.push(r),r=new Date(r),r.setMilliseconds(r.getMilliseconds()+n);return h}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):Tr(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,s]=this.niceDomain;if(Or(t)===Or(i)&&Or(e)===Or(s))break;t=i,e=s}}updateNiceDomainIteration(t,e){const i=Math.min(Or(t),Or(e)),s=Math.max(Or(t),Or(e)),n=t>e,{interval:a}=this;let o;if(a instanceof I)o=a;else{const t="number"==typeof a?(s-i)/Math.max(a,1):this.tickCount;o=this.getTickInterval({start:i,stop:s,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){const t=o.range(new Date(i),new Date(s),!0),e=n?[...t].reverse():t,a=e[0],r=e.at(-1);this.niceDomain=[a,r]}}},Pr=class t{constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Cs.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(ln,e)?()=>new e:e}static select(e,i,s=!0){return new t(e,i,s)}static selectAll(t,e){const i=[],s=t=>{e(t)&&i.push(t),t.children.forEach(s)};return s(t),i}static selectByClass(e,i){return t.selectAll(e,t=>t instanceof i)}static selectByTag(e,i){return t.selectAll(e,t=>t.tag===i)}createNode(t,e,i){const s=this.nodeFactory(t);return s.datum=t,null==e||e(s),null!=i?this._nodes.splice(i,0,s):this._nodes.push(s),this.parentNode.appendChild(s),s}update(t,e,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage: "+t),i){const s=new Map(t.map((t,e)=>[i(t),[t,e]]));for(const[t,e]of this._nodesMap.entries())if(s.has(e)){const[i]=s.get(e);t.datum=i,this.garbageBin.delete(t),s.delete(e)}else this.garbageBin.add(t);for(const[t,[i,n]]of s.entries())this._nodesMap.set(this.createNode(i,e,n),t)}else{const i=Math.max(t.length,this.data.length);for(let s=0;s<i;s++)s>=t.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(t[s],e):(this._nodes[s].datum=t[s],this.garbageBin.delete(this._nodes[s]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(e){return t.selectAll(this.parentNode,e)}selectByClass(e){return t.selectByClass(this.parentNode,e)}selectByTag(e){return t.selectByTag(this.parentNode,e)}nodes(){return this._nodes}},_r=class extends Ha{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new en(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:s}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n,devicePixelRatio:a}=t;if(0===this.dirty&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:r,x2:l,y2:h}=this;if(o===l){const{strokeWidth:t}=this,e=Math.round(o*a)/a+Math.trunc(t*a)%2/(2*a);o=e,l=e}else if(r===h){const{strokeWidth:t}=this,e=Math.round(r*a)/a+Math.trunc(t*a)%2/(2*a);r=e,h=e}i.beginPath(),i.moveTo(o,r),i.lineTo(l,h),this.fillStroke(i),null==(e=this.fillShadow)||e.markClean(),super.render(t)}};function Fr(t,e,i,s,n){let a=t.x;t.x<e?a=e:t.x>e+s&&(a=e+s);let o=t.y;t.y<i?o=i:t.y>i+n&&(o=i+n);const r=t.x-a,l=t.y-o;return Math.sqrt(r*r+l*l)<=.5*t.size}function Br(t,e,i,s,n){const a=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+n;return a&&o}function zr(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}_r.className="Line",_r.defaultStyles=Object.assign({},Ha.defaultStyles,{fill:void 0,strokeWidth:1}),x([Ks({redraw:3})],_r.prototype,"x1",2),x([Ks({redraw:3})],_r.prototype,"y1",2),x([Ks({redraw:3})],_r.prototype,"x2",2),x([Ks({redraw:3})],_r.prototype,"y2",2);var Gr=["stroke","lineDash"],Kr=la(t=>Pt(t)&&Object.keys(t).every(t=>Gr.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),Vr=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function Wr(t,e=[void 0]){return Mt((i,s,n)=>e.includes(n)?Rt(t)?t(n):t:n)}x([Hn(Qn)],Vr.prototype,"enabled",2),x([Hn(sa)],Vr.prototype,"width",2),x([Hn(Kr)],Vr.prototype,"style",2);var Yr=class{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Za(this)}};x([Hn(Qn)],Yr.prototype,"enabled",2),x([Hn(Qn,{optional:!0})],Yr.prototype,"autoWrap",2),x([Hn(sa,{optional:!0})],Yr.prototype,"maxWidth",2),x([Hn(sa,{optional:!0})],Yr.prototype,"maxHeight",2),x([Hn(Aa,{optional:!0})],Yr.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],Yr.prototype,"fontWeight",2),x([Hn(ea.restrict({min:1}))],Yr.prototype,"fontSize",2),x([Hn(ta)],Yr.prototype,"fontFamily",2),x([Hn(sa)],Yr.prototype,"padding",2),x([Hn(oa),Wr(NaN)],Yr.prototype,"minSpacing",2),x([Hn(ya,{optional:!0})],Yr.prototype,"color",2),x([Hn(aa,{optional:!0})],Yr.prototype,"rotation",2),x([Hn(Qn)],Yr.prototype,"avoidCollisions",2),x([Hn(Qn)],Yr.prototype,"mirrored",2),x([Hn(Qn)],Yr.prototype,"parallel",2),x([Hn(ta,{optional:!0})],Yr.prototype,"format",2);var Ur=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};x([Hn(Qn)],Ur.prototype,"enabled",2),x([Hn(sa)],Ur.prototype,"width",2),x([Hn(ya,{optional:!0})],Ur.prototype,"color",2);var jr=Ba(t=>Gt(t)&&t>0||t instanceof I,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Hr=class{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}};function Xr(t){const[e,i]=Ys(t.range),s=Math.floor(e),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}x([Hn(Qn)],Hr.prototype,"enabled",2),x([Hn(sa)],Hr.prototype,"width",2),x([Hn(sa)],Hr.prototype,"size",2),x([Hn(ya,{optional:!0})],Hr.prototype,"color",2),x([Hn(jr,{optional:!0})],Hr.prototype,"interval",2),x([Hn(ra,{optional:!0})],Hr.prototype,"values",2),x([Hn(_a),Wr(NaN)],Hr.prototype,"minSpacing",2);var $r=2*Math.PI,qr=$r/2;function Zr(t){const e=(e,i)=>{const[s=t.min,n=t.max]=Ys(null!=i?i:[]);return e<s||e>n};return{tick:{fromFn(t,i,s){let n=t.y1+t.translationY,a=t.opacity;return("added"===s||e(t.datum.translationY,t.datum.range))&&(n=i.translationY,a=0),{y:0,translationY:n,opacity:a,phase:Rn[s]}},toFn(t,e,i){const s=e.translationY;let n=1;return"removed"===i&&(n=0),{y:0,translationY:s,opacity:n,finish:{y:s,translationY:0}}},intermediateFn:(t,i,s)=>({visible:!e(t.y)})},line:{fromFn(t,e){var i;return y(g({},null!=(i=t.previousDatum)?i:e),{phase:Rn.updated})},toFn:(t,e)=>g({},e)},label:{fromFn(t,i,s){var n;const a=null!=(n=t.previousDatum)?n:i,o=a.x,r=a.y,l=a.rotationCenterX;let h=Math.round(t.translationY),c=a.rotation,d=t.opacity;return"removed"===s||e(a.y,a.range)||("added"===s||e(t.datum.y,t.datum.range))&&(h=Math.round(a.translationY),d=0,c=i.rotation),{x:o,y:r,rotationCenterX:l,translationY:h,rotation:c,opacity:d,phase:Rn[s]}},toFn(t,e,i){var s,n;const a=e.x,o=e.y,r=e.rotationCenterX,l=Math.round(e.translationY);let h=0,c=1;var d,u;return"added"===i?(c=1,h=e.rotation):"removed"===i?(c=0,h=e.rotation):(d=null!=(n=null==(s=t.previousDatum)?void 0:s.rotation)?n:e.rotation,u=e.rotation,h=Math.abs(u-d)<qr?u:d>u?u+$r:u-$r),{x:a,y:o,rotationCenterX:r,translationY:l,rotation:h,opacity:c,finish:{rotation:e.rotation}}}},group:{fromFn(t,e){const{rotation:i,translationX:s,translationY:n}=t;return{rotation:i,translationX:s,translationY:n,phase:Rn.updated}},toFn(t,e){const{rotation:i,translationX:s,translationY:n}=e;return{rotation:i,translationX:s,translationY:n}}}}}function Qr(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function Jr(t){const{visible:e,min:i,max:s}=t;return(t,n)=>{const a=n.translationY;return{y:a,translationY:0,opacity:1,visible:e&&a>=i&&a<=s}}}function tl(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function el(){return(t,e)=>g({},e)}var il=(t=>(t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine",t))(il||{}),sl=class t{constructor(e,i,s){this.moduleCtx=e,this.scale=i,this.id=Bs(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Mo({name:this.id+"-axis",zIndex:2}),this.lineNode=this.axisGroup.appendChild(new _r),this.tickLineGroup=this.axisGroup.appendChild(new Mo({name:this.id+"-Axis-tick-lines",zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new Mo({name:this.id+"-Axis-tick-labels",zIndex:2})),this.crossLineGroup=new Mo({name:this.id+"-CrossLines"}),this.gridGroup=new Mo({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new Mo({name:this.id+"-gridLines",zIndex:1})),this.tickLineGroupSelection=Pr.select(this.tickLineGroup,_r,!1),this.tickLabelGroupSelection=Pr.select(this.tickLabelGroup,qa,!1),this.gridLineGroupSelection=Pr.select(this.gridLineGroup,_r,!1),this.line=new Ur,this.tick=this.createTick(),this.gridLine=new Vr,this.label=this.createLabel(),this.defaultTickMinSpacing=t.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new go,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new Jo,this.refreshScale(),this._titleCaption.registerInteraction(this.moduleCtx),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.interactionManager.addListener("hover",t=>this.checkAxisHover(t))),this.animationManager=e.animationManager,this.animationState=new ir("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let n=void 0;this.destroyFns.push(e.layoutService.addListener("layout-complete",t=>{null!=n&&null!=me(t.chart,n)&&this.animationState.transition("resize"),n=g({},t.chart)})),!1!==(null==s?void 0:s.respondsToZoom)&&this.destroyFns.push(e.updateService.addListener("update-complete",t=>{this.minRect=t.minRect}))}get type(){var t;return null!=(t=this.constructor.type)?t:""}set crossLines(t){var e,i;null==(e=this._crossLines)||e.forEach(t=>this.detachCrossLine(t)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null==(i=this._crossLines)||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}resetAnimation(t){"initial"===t&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null==(t=this.crossLines)||t.forEach(this.initCrossLine,this)}updateRange(){var t;const{range:e,visibleRange:i,scale:s}=this,n=(e[1]-e[0])/(i[1]-i[0]),a=n*i[0],o=e[0]-a;s.range=[o,o+n],null==(t=this.crossLines)||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){const[s,n]=Ys(this.range);return t+e>=s-i&&t<=n+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:s}=this,n=!(i instanceof Mr)&&s>0?t=>"number"==typeof t?t.toFixed(s):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=n,C.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setTickInterval(t){var e;this.scale.interval=null!=(e=this.tick.interval)?e:t}setTickCount(t,e,i){const{scale:s}=this;if(t&&bo.is(s))return"number"==typeof t?(s.tickCount=t,s.minTickCount=null!=e?e:0,void(s.maxTickCount=null!=i?i:1/0)):void(s instanceof Rr&&this.setTickInterval(t))}onGridLengthChange(t,e){var i;(e&&!t||!e&&t)&&this.onGridVisibilityChange(),null==(i=this.crossLines)||i.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createTick(){return new Hr}createLabel(){return new Yr}checkAxisHover(t){if(!this.interactionEnabled)return;this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t=0,e=!0){if(!this.tickGenerationResult)return;const{rotation:i,parallelFlipRotation:s,regularFlipRotation:n}=this.calculateRotations(),a=this.label.getSideFlag();this.updatePosition();const o=this.getAxisLineCoordinates(),{tickData:r,combinedRotation:l,textBaseline:h,textAlign:c,primaryTickCount:d}=this.tickGenerationResult,u=this.tickLabelGroupSelection.nodes().map(t=>t.datum.tickId);if(this.updateSelections(o,r.ticks,{combinedRotation:l,textAlign:c,textBaseline:h,range:this.scale.range}),!e||this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(u,r);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(a),this.updateTickLines(),this.updateTitle({anyTickVisible:r.ticks.length>0}),this.updateCrossLines({rotation:i,parallelFlipRotation:s,regularFlipRotation:n}),this.updateLayoutState(),d}getAxisLineCoordinates(){const[t,e]=Ys(this.range);return{x:0,y1:t,y2:e}}getTickLineCoordinates(t){const e=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,e);return{x1:i,x2:i+Math.abs(e),y:t.translationY}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:s,textBaseline:n,textAlign:a,range:o}=e,r=t.tickLabel,l=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding),h=""!==r&&null!=r;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:s,rotationCenterX:l,text:r,textAlign:a,textBaseline:n,visible:h,x:l,y:0,range:o}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(t,e){var i;const{title:s}=this;if(s){if(t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.enabled=s.enabled,t.wrapping=s.wrapping,s.enabled){const n=t.node,a=(null!=(i=s.spacing)?i:0)+e.spacing,o=this.label.getSideFlag(),r=zn(this.rotation),l=-1===o&&r>Math.PI&&r<2*Math.PI?-1:1,h=l*o*Math.PI/2,c=1===l?"bottom":"top",{range:d}=this,u=Math.floor(l*o*(d[0]+d[1])/2),p=-1===o?Math.floor(l*-a):Math.floor(-a),{callbackCache:g}=this.moduleCtx,{formatter:y=(t=>t.defaultValue)}=s,m=g.call(y,this.getTitleFormatterParams());n.setProperties({rotation:h,text:m,textBaseline:c,visible:!0,x:u,y:p})}}else t.enabled=!1}calculateLayout(t){var e,i;const{rotation:s,parallelFlipRotation:n,regularFlipRotation:a}=this.calculateRotations(),o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:a,labelX:r,sideFlag:o}),this.updateLayoutState();const l=this.tickGenerationResult,{tickData:h,combinedRotation:c,textBaseline:d,textAlign:u}=l,p=m(l,["tickData","combinedRotation","textBaseline","textAlign"]),f=[],{x:x,y1:v,y2:b}=this.getAxisLineCoordinates(),S=new en(x+Math.min(o*this.seriesAreaPadding,0),v,this.seriesAreaPadding,b-v);if(f.push(S),this.tick.enabled&&h.ticks.forEach(t=>{const{x1:e,x2:i,y:s}=this.getTickLineCoordinates(t),n=new en(e,s,i-e,0);f.push(n)}),this.label.enabled){const t=new qa;h.ticks.forEach(e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(y(g({},i),{translationY:Math.round(e.translationY)}));const s=t.computeTransformedBBox();s&&f.push(s)})}if(null==(e=this.title)?void 0:e.enabled){const t=new go,e=en.merge(f).width;this.setTitleProps(t,{spacing:e});const i=t.node.computeTransformedBBox();i&&f.push(i)}const k=(t=>{const e=new nn,{rotation:i,translationX:s,translationY:n,rotationCenterX:a,rotationCenterY:o}=this.getAxisTransform();return nn.updateTransformMatrix(e,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:o}),e.transformBBox(t)})(en.merge(f)),D=this.isAnySeriesActive();return null==(i=this.crossLines)||i.forEach(t=>{var e;t.sideFlag=-o,t.direction=s===-Math.PI/2?"x":"y",t instanceof Qo&&(t.label.parallel=null!=(e=t.label.parallel)?e:this.label.parallel),t.parallelFlipRotation=n,t.regularFlipRotation=a,t.calculateLayout(D,this.reverse)}),{primaryTickCount:t=p.primaryTickCount,bbox:k}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;bo.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=Vn(this.rotation);return{rotation:t,parallelFlipRotation:zn(t),regularFlipRotation:zn(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:s,sideFlag:n}){var a;const{scale:o,tick:r,label:{parallel:l,rotation:h,fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p}}=this,m=void 0!==t,{defaultRotation:f,configuredRotation:x,parallelFlipFlag:v,regularFlipFlag:b}=wo({rotation:h,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),S=x+f,k=new nn,{maxTickCount:D}=this.estimateTickCount({minSpacing:r.minSpacing,maxSpacing:null!=(a=r.maxSpacing)?a:NaN}),M=!bo.is(o)||isNaN(D)?10:D;let L=No(l,x,0,n,b);const A=function(t,e,i,s){return t&&!e?i*s==-1?"hanging":"bottom":"middle"}(l,x,n,v),w={fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p,textBaseline:A,textAlign:L};let N={rawTicks:[],ticks:[],labelCount:0},C=0,I=0,T=!0,E=!1;for(;T&&C<=M&&!E;){I=0,L=No(l,x,0,n,b);const e=this.getTickStrategies({secondaryAxis:m,index:C});for(const i of e){({tickData:N,index:C,autoRotation:I,terminate:E}=i({index:C,tickData:N,textProps:w,labelOverlap:T,terminate:E,primaryTickCount:t}));const e=0!==x||0!==I,a=S+I;L=No(l,x,I,n,b),T=this.checkLabelOverlap(a,e,k,N.ticks,s,y(g({},w),{textAlign:L}))}}const O=f+x+I;return!m&&N.rawTicks.length>0&&(t=N.rawTicks.length),{tickData:N,primaryTickCount:t,combinedRotation:O,textBaseline:A,textAlign:L}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:s,tick:n}=this,a=bo.is(i),o=s.enabled&&s.avoidCollisions,r=!a&&0!==t&&o,l=!0===s.autoRotate&&void 0===s.rotation,h=[];let c;c=this.tick.values?3:e?1:r?2:0;if(h.push(({index:t,tickData:e,primaryTickCount:i,terminate:s})=>this.createTickData(c,t,e,s,i)),!a&&!isNaN(n.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:s})=>this.createTickData(2,t,e,s,i);h.push(t)}if(!o)return h;if(s.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);h.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:s})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:s});h.push(t)}return h}createTickData(t,e,i,s,n){var a;const{scale:o,tick:r}=this,{maxTickCount:l,minTickCount:h,defaultTickCount:c}=this.estimateTickCount({minSpacing:r.minSpacing,maxSpacing:null!=(a=r.maxSpacing)?a:NaN}),d=bo.is(o),u=!d||isNaN(l)?10:l;let p=d?Math.max(c-e,h):l;const g=void 0===r.interval&&void 0===r.values&&p>h&&(d||2===t);let y=!0;for(;y&&e<=u;){const s=i.rawTicks;p=d?Math.max(c-e,h):l;const{rawTicks:a,ticks:o,labelCount:r}=this.getTicks({tickGenerationType:t,previousTicks:s,tickCount:p,minTickCount:h,maxTickCount:l,primaryTickCount:n});i.rawTicks=a,i.ticks=o,i.labelCount=r,y=!!g&&zr(a,s),e++}const m=void 0!==r.interval||void 0!==r.values;return s||(s=m),{tickData:i,index:e,autoRotation:0,terminate:s}}checkLabelOverlap(t,e,i,s,n,a){nn.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:a,y:o},label:{text:r}}=n;let{label:{width:l,height:h}}=n;l+=null!=e?e:0,h+=null!=e?e:0;if(i.some(t=>Br(t,a,o,l,h)))return!0;i.push({index:s,text:r,x:a,y:o,width:l,height:h,datum:n})}return!1}(this.createLabelData(s,n,a,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,s){const n=[];for(const a of t){const{tickLabel:t,translationY:o}=a;if(""===t||null==t)continue;const r=io(t),{width:l,height:h}=Qa(r,e,o,i),c=Co(t,new en(e,o,l,h),e,o,s);n.push(c)}return n}getAutoRotation(t){var e;return t?zn(Vn(null!=(e=this.label.autoRotateAngle)?e:0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:s,maxTickCount:n,primaryTickCount:a}){var o;const{range:r,scale:l,visibleRange:h}=this;let c;switch(t){case 3:if(bo.is(l)){const t=l.getDomain(),e=l.fromDomain(t[0]),i=l.fromDomain(t[1]),s=Math.min(e,i),n=Math.max(e,i);c=this.tick.values.filter(t=>t>=s&&t<=n).sort((t,e)=>t-e)}else c=this.tick.values;break;case 1:c=this.updateSecondaryAxisTicks(a);break;case 2:c=this.filterTicks(e,i);break;default:c=this.createTicks(i,s,n)}this.fractionDigits=c.fractionDigits>=0?c.fractionDigits:0,this.onLabelFormatChange(c,this.label.format);const d=(null!=(o=l.bandwidth)?o:0)/2,u=[];let p=0;const g=new Map,y=Math.max(0,Math.floor(h[0]*c.length)),m=Math.min(c.length,Math.ceil(h[1]*c.length));for(let t=y;t<m;t++){const e=c[t],i=l.convert(e)+d;if(r.length>0&&!this.inRange(i,0,.001))continue;const s=this.formatTick(e,t);let n=s;if(g.has(n)){const t=g.get(n);g.set(n,t+1),n=`${n}_${t}`}else g.set(n,1);u.push({tick:e,tickId:n,tickLabel:s,translationY:i}),""!==s&&null!=s&&p++}return{rawTicks:c,ticks:u,labelCount:p}}filterTicks(t,e){var i;const s=!isNaN(this.tick.minSpacing)||!isNaN(null!=(i=this.tick.maxSpacing)?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%s==0)}createTicks(t,e,i){var s,n,a;return this.setTickCount(t,e,i),null!=(a=null==(n=(s=this.scale).ticks)?void 0:n.call(s))?a:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const{minRect:i}=this,s=this.calculateRangeWithBleed(),n=Math.max(this.defaultTickMinSpacing,s/bo.defaultMaxTickCount);let a=!isNaN(e);isNaN(t)&&(t=n),isNaN(e)&&(e=s),t>e&&(t===n?t=e:e=t);const o=i?"x"===this.direction?i.width:i.height:1;a&&(a=o<n);const r=Vs(1,Math.floor(s/t),a?Math.floor(s/o):1/0),l=Math.min(r,Math.ceil(s/e));return{minTickCount:l,maxTickCount:r,defaultTickCount:Vs(l,bo.defaultTickCount,r)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){var s;const n=this.label.getSideFlag(),a=this.isAnySeriesActive();null==(s=this.crossLines)||s.forEach(s=>{var o;s.sideFlag=-n,s.direction=t===-Math.PI/2?"x":"y",s instanceof Qo&&(s.label.parallel=null!=(o=s.label.parallel)?o:this.label.parallel),s.parallelFlipRotation=e,s.regularFlipRotation=i,s.update(a)})}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*this.getTickSize(),e.x2=0})}calculateAvailableRange(){return Us(this.range)}calculateRangeWithBleed(){const t=1/Us(this.visibleRange);return Xs(this.calculateAvailableRange()*t,2)}calculateDomain(){const t=this.boundSeries.filter(t=>this.includeInvisibleDomains||t.isEnabled()).flatMap(t=>t.getDomain(this.direction));this.setDomain(t)}getAxisTransform(){return{rotation:Vn(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:s,gridLineGroupSelection:n,gridPadding:a,gridLength:o}=this,{rotation:r}=this.calculateRotations(),l=this.label.getSideFlag(),h=Math.floor(s.x),c=Math.floor(s.y);t.setProperties({rotation:r,translationX:h,translationY:c}),i.setProperties({rotation:r,translationX:h,translationY:c}),e.datum=this.getAxisTransform(),n.each(t=>{t.x1=a,t.x2=-l*o+a})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],t=>t.append(new _r({tag:2})),t=>t.tickId),this.tickLineGroupSelection.update(e,t=>t.appendChild(new _r({tag:0})),t=>t.tickId),this.tickLabelGroupSelection.update(e.map(t=>this.getTickLabelProps(t,i)),t=>t.appendChild(new qa({tag:1})),t=>t.tickId)}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:s,gridLength:n}=this;0!==n&&0!==e.length&&this.gridLineGroupSelection.each((a,o,r)=>{const{stroke:l,lineDash:h}=e[r%e.length];a.setProperties({x1:s,x2:-t*n+s,fill:void 0,stroke:l,strokeWidth:i,lineDash:h})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,e,i){const{parallel:s,maxWidth:n,maxHeight:a}=this.label;let o=this.maxThickness,r=Math.round(this.calculateAvailableRange()/t.labelCount);return s&&([o,r]=[r,o]),t.ticks.forEach(t=>{const{text:e}=qa.wrap(t.tickLabel,null!=n?n:o,null!=a?a:r,i,"hyphenate");t.tickLabel=e}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:s,lineNode:n,tickLineGroup:a,tickLabelGroup:o}=this;if(!i)return void(s.enabled=!1);let r=0;if(i.enabled&&t.anyTickVisible){const t=Mo.computeBBox([a,o,n]);r+=(0===e?t.width:t.height)+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(s,{spacing:r})}formatTick(t,e){var i,s;const{label:n,labelFormatter:a,fractionDigits:o,moduleCtx:{callbackCache:r}}=this;if(n.formatter){const s=o>0?t:String(t);return null!=(i=r.call(n.formatter,{value:s,index:e,fractionDigits:o,formatter:a}))?i:s}return a&&null!=(s=r.call(a,t))?s:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new en(t,e,i,s))}clipGrid(t,e,i,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new en(t,e,i,s))}calculatePadding(t,e,i){const s=.01*Math.abs(i?e:t);return[s,s]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),s=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:s[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null==(t=this.title)?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return g({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize()},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return null!=this.axisContext||(this.axisContext=this.createAxisContext()),y(g({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:bo.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var e,i;return null==(i=(e=this.scale).tickFormat)?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!=(t=this.scale.bandwidth)?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null==(i=(e=this.scale).invert)?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=Zr(Xr(this));Pn(this.id,"axis-group",e,[this.axisGroup],i.group),Pn(this.id,"line",e,[this.lineNode],i.line),Pn(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(t,e)=>e.tickId,t),Pn(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,(t,e)=>e.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:s}=this,n=Xr(this);er([this.axisGroup],(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})),er([t,e],Jr(n)),er([i],(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})),er([s],el())}calculateUpdateDiff(t,e){const i=new Set,s=new Set,n=Math.max(t.length,e.ticks.length);for(let a=0;a<n;a++){const n=e.ticks[a],o=t[a],r=null==n?void 0:n.tickId;o!==r&&(s.has(r)?s.delete(r):r&&i.add(r),i.has(o)?i.delete(o):o&&s.add(o))}return{changed:i.size>0||s.size>0,added:Array.from(i.values()),removed:Array.from(s.values())}}isReversed(){return this.reverse}};sl.defaultTickMinSpacing=50,x([Hn(Qn)],sl.prototype,"nice",2),x([Hn(Qn)],sl.prototype,"reverse",2),x([Hn(va)],sl.prototype,"keys",2),x([Hn(Ba(t=>"object"==typeof t,"Title object"),{optional:!0})],sl.prototype,"title",2),x([ro((t,e,i)=>t.onGridLengthChange(e,i))],sl.prototype,"gridLength",2);var nl=sl,al=class extends Yr{constructor(){super(...arguments),this.autoRotateAngle=335}};x([Hn(Qn,{optional:!0})],al.prototype,"autoRotate",2),x([Hn(aa)],al.prototype,"autoRotateAngle",2);var ol=class t extends nl{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof t}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t,e){return this.updateDirection(),super.update(t,e)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return y(g({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){fo(t,Qo)}createLabel(){return new al}};x([Hn(sa)],ol.prototype,"thickness",2),x([Hn(La)],ol.prototype,"position",2);var rl=ol,ll=class extends rl{constructor(t){super(t,new jn),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const s of t){const t=s instanceof Date?s.getTime():s;i.has(t)||(i.add(t),e.push(s))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(t=>{var e;return null==(e=t.getBandScalePadding)?void 0:e.call(t)}).filter(t=>null!=t);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...t.map(t=>t.outer)))}return super.calculateDomain()}};ll.className="CategoryAxis",ll.type="category",x([Hn(na)],ll.prototype,"groupPaddingInner",2);var hl=class{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}};function cl(t,e=!0){const i=new hl;let s=0;return e&&t.forEach(t=>s=Math.max(s,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<s;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),s=i.length-1;i.forEach((e,i)=>{const n=t.children,a=n.find(t=>t.label===e),o=i!==s;if(a&&o)t=a;else{const i=new hl(e,t);i.number=n.length,n.push(i),o&&(t=i)}})}(i,t)}),i}function dl(t,e,i){const s=i/(e.number-t.number);e.change-=s,e.shift+=i,t.change+=s,e.prelim+=i,e.mod+=i}function ul(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function pl(t,e){const i=t.children;if(i.length){let s=i[0];i.forEach(t=>{pl(t,e),s=function(t,e,i){const s=t.getLeftSibling();if(s){let n=t,a=t,o=s,r=a.getLeftmostSibling(),l=a.mod,h=n.mod,c=o.mod,d=r.mod;for(;o.nextRight()&&a.nextLeft();){o=o.nextRight(),a=a.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=t;const s=o.prelim+c-(a.prelim+l)+i;s>0&&(dl(ul(o,t,e),t,s),l+=s,h+=s),c+=o.mod,l+=a.mod,d+=r.mod,h+=n.mod}o.nextRight()&&!n.nextRight()?(n.thread=o.nextRight(),n.mod+=c-h):(a.nextLeft()&&!r.nextLeft()&&(r.thread=a.nextLeft(),r.mod+=l-d),e=t)}return e}(t,s,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}(t);const n=(i[0].prelim+i.at(-1).prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var gl=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:s}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}};function yl(t){const e=new ml;return pl(t,1),function t(e,i,s){e.x=e.prelim+i,e.y=e.depth,s.update(e),e.children.forEach(n=>t(n,i+e.mod,s))}(t,-t.prelim,e),function t(e){const i=e.children;let s=0;i.forEach(e=>{t(e),e.children.length?s+=e.leafCount:s++}),e.leafCount=s,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}var ml=class{constructor(){this.dimensions=new gl,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,s=0,n=!1){const a=this.leafCount-1,o=this.depth,r=this.dimensions;let l=1,h=1;if(t>0&&a){const e=(r.right-r.left)/a;l=t/a/e,n&&(l=-l)}if(e>0&&o){const t=(r.bottom-r.top)/o;h=e/o/t}const c=new gl;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,t=>({x:t.screenX,y:t.screenY}))});const d=-c.left,u=-c.top;this.nodes.forEach(t=>{t.screenX+=d+i,t.screenY+=u+s})}},fl=class extends Yr{constructor(){super(...arguments),this.grid=!1}};x([Hn(Qn)],fl.prototype,"grid",2);var xl=class extends rl{constructor(t){super(t,new jn),this.tickScale=new jn,this.line=new Ur,this.label=new fl,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:a}=this;a.paddingOuter=.1,a.paddingInner=2*a.paddingOuter,this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=Pr.select(s,_r),this.axisLineSelection=Pr.select(e,_r),this.separatorSelection=Pr.select(e,_r),this.labelSelection=Pr.select(i,qa)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],a=t[0]-n;this.tickScale.range=i.range=[a,a+s],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+(null!=(t=e.bandwidth)?t:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){var t;const{direction:e}=this;let i=null;const s=this.boundSeries.filter(t=>t.visible).flatMap(t=>{if("y"===e||i)return t.getDomain(e);if(null===i){const s=t.getDomain(e);return i=zt(s[0]),s}return[]});this.setDomain(null!=(t=vs(s))?t:Ms(s));const{domain:n}=this.dataDomain;this.tickTreeLayout=yl(cl(n)),this.tickScale.domain=n.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((t,e)=>{t.setProperties(e)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((t,e)=>{t.setProperties(y(g({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:s,tickScale:n}=this,a=n.ticks(),o=i.getSideFlag(),r=this.gridLineSelection.update(t?a:[]);if(t){const{width:i,style:a}=e,l=a.length;r.each((e,r,h)=>{const c=Math.round(n.convert(r));e.x1=0,e.x2=-o*t,e.y1=c,e.y2=c,e.visible=c>=s[0]&&c<=s[1];const{stroke:d,lineDash:u}=a[h%l];e.stroke=d,e.strokeWidth=i,e.lineDash=u,e.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:a,title:{formatter:o=(t=>t.defaultValue)}={}}=this,r=t.range[0],l=t.range[1],h=Math.abs(l-r)/t.domain.length||0,c=Math.ceil(e.fontSize/h),d=Vn(this.rotation),u=Math.abs(Math.cos(d))<1e-8,p=e.getSideFlag(),m=this.lineHeight,f=this.tickTreeLayout,x=t.ticks(),v=f?f.nodes:[],b=!!f&&f.depth>1,{defaultRotation:S,configuredRotation:k,parallelFlipFlag:D}=wo({rotation:e.rotation,parallel:i,regularFlipRotation:zn(d-Math.PI/2),parallelFlipRotation:zn(d)}),M=[],L=new Map;let A=0;const w=new qa,N=(t,i)=>{var r;if(w.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===D?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null==a?void 0:a.enabled)&&x.length>0))return!1;const i=s.call(o,this.getTitleFormatterParams());w.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(i%c!=0)return!1;if(!(t.screenX>=n[0]&&t.screenX<=n[1]))return!1;e.formatter?w.text=null!=(r=s.call(e.formatter,{value:String(t.label),index:i}))?r:String(t.label):w.text=String(t.label)}return!0};v.forEach((t,e)=>{if(!N(t,e))return;const i=w.computeTransformedBBox();if(!i)return;L.set(e,i);!t.children.length&&i.width>A&&(A=i.width)});const C=p*e.padding,I=this.label.grid,T=[];v.forEach((t,e)=>{let i=N(t,e);const s=e;w.x=C,w.rotationCenterX=C;const n=!t.children.length;if(n)w.rotation=k,w.textAlign="end",w.textBaseline="middle";else{w.translationX-=A-m+this.label.padding;const e=t.leafCount*h,n=L.get(s);n&&n.width>e?(i=!1,L.delete(s)):w.rotation=u?S:-Math.PI/2}if(t.parent&&b){const e=n?t.screenX-h/2:t.screenX-t.leafCount*h/2;if(n)(t.number!==t.children.length-1||I)&&T.push({y:e,x1:0,x2:-A-2*this.label.padding});else{const i=-A-2*this.label.padding+t.screenY;T.push({y:e,x1:i+m,x2:i})}}let a;if(i){const t=w.computeTransformedBBox();t&&L.set(e,t),a=y(g({},{fill:(o=w).fill,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,rotation:o.rotation,rotationCenterX:o.rotationCenterX,rotationCenterY:o.rotationCenterY,text:o.text,textAlign:o.textAlign,textBaseline:o.textBaseline,translationX:o.translationX,translationY:o.translationY,visible:o.visible,x:o.x,y:o.y}),{visible:i})}else L.delete(e),a={visible:i};var o;M.push(a)});let E=0;T.forEach(t=>E=Math.min(E,t.x2)),T.push({y:Math.max(r,l),x1:0,x2:E});const O=[],R=[];T.forEach(t=>{if(t.y>=n[0]-1e-7&&t.y<=n[1]+1e-7){const{x1:e,x2:i,y:s}=t,n=new en(Math.min(e,i),s,Math.abs(e-i),0);R.push(n),O.push({x1:e,x2:i,y:s})}});const P=[],_=[],F=f?f.depth+1:1;for(let t=0;t<F;t++){const e=x.length>0&&(0===t||I&&b),i=t>0?-A-2*this.label.padding-(t-1)*m:0,s=new en(i,Math.min(...n),0,Math.abs(n[1]-n[0]));_.push(s),P.push({x:i,y1:n[0],y2:n[1],visible:e})}return{bbox:(t=>{const e=new nn,{rotation:i,translationX:s,translationY:n,rotationCenterX:a,rotationCenterY:o}=this.getAxisTransform();return nn.updateTransformMatrix(e,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:o}),e.transformBBox(t)})(en.merge([...L.values(),...R,..._])),tickLabelLayout:M,separatorLayout:O,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}};xl.className="GroupedCategoryAxis",xl.type="grouped-category",x([Hn(ya,{optional:!0})],xl.prototype,"labelColor",2);var vl=class{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return"undefined"!=typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;return Va()&&(e=1),this._pixelRatio=e,Ya.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),s.resetTransform(),this._width=t,this._height=e}},bl="adv-composite",Sl=class{constructor(t){var e;this.id=Bs(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=Cs.create(!0,"scene");const{document:i,window:s,mode:n=(null!=(e=ws("agChartsSceneRenderModel"))?e:bl),width:a,height:o,overrideDevicePixelRatio:r}=t;this.overrideDevicePixelRatio=r,this.opts={document:i,window:s,mode:n},this.canvas=new Ya({document:i,window:s,width:a,height:o,overrideDevicePixelRatio:r})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,s=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||s||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite",bl].includes(i))return;const{zIndex:s=this._nextZIndex++,name:n,zIndexSubOrder:a,getComputedOpacity:o,getVisibility:r}=t,{width:l,height:h,overrideDevicePixelRatio:c}=this,d="dom-composite"===i,u=i===bl&&vl.isSupported()?new vl({width:l,height:h,overrideDevicePixelRatio:c}):new Ya({document:this.opts.document,window:this.opts.window,width:l,height:h,domLayer:d,zIndex:s,name:n,overrideDevicePixelRatio:c}),p={id:this._nextLayerId++,name:n,zIndex:s,zIndexSubOrder:a,canvas:u,getComputedOpacity:o,getVisibility:r};if(s>=this._nextZIndex&&(this._nextZIndex=s+1),this.layers.push(p),this.sortLayers(),d){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof Ya),i=t.findIndex(t=>t===u);(null!=(e=t[i-1])?e:this.canvas).element.insertAdjacentElement("afterend",u.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(t,e,i){const s=this.layers.find(e=>e.canvas===t);s&&(s.zIndex=e,s.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((t,e)=>{var i,s;return ko([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.id],[e.zIndex,...null!=(s=e.zIndexSubOrder)?s:[void 0,void 0],e.id],So)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){var e;t!==this._root&&(null==(e=this._root)||e._setLayerManager(),this._root=t,t&&t._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:(...t)=>this.moveLayer(...t),removeLayer:(...t)=>this.removeLayer(...t),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:Cs.create("scene")}),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){return b(this,null,(function*(){var e,i;const{debugSplitTimes:s={start:performance.now()},extraDebugStats:n={}}=null!=t?t:{},{canvas:a,canvas:{context:o},root:r,layers:l,pendingSize:h,opts:{mode:c}}=this;if(h&&(this.canvas.resize(...h),this.layers.forEach(t=>t.canvas.resize(...h)),this.pendingSize=void 0),r&&!r.visible)return void(this._dirty=!1);if(r&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:zs[r.dirty],tree:this.buildTree(r)}),void this.debugStats(s,o,void 0,n);const d={ctx:o,devicePixelRatio:null!=(e=this.canvas.pixelRatio)?e:1,forceRender:!0,resized:!!h,debugNodes:{}};Cs.check("scene:stats:verbose")&&(d.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let u=!1;if((!r||r.dirty>=1)&&(u=!0,a.clear()),r&&Cs.check("scene:dirtyTree")){const{dirtyTree:t,paths:e}=this.buildDirtyTree(r);Cs.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}r&&u&&(this.debug("Scene.render() - before",{redrawType:zs[r.dirty],canvasCleared:u,tree:this.buildTree(r)}),r.visible&&(o.save(),r.render(d),o.restore())),s["\u270d\ufe0f"]=performance.now(),"dom-composite"!==c&&l.length>0&&u&&(this.sortLayers(),o.save(),o.setTransform(1/a.pixelRatio,0,0,1/a.pixelRatio,0,0),l.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:s})=>{e&&s()&&(o.globalAlpha=i(),o.drawImage(t,0,0))}),o.restore(),s["\u26d9"]=performance.now()),null==(i=o.verifyDepthZero)||i.call(o),this._dirty=!1,this.debugStats(s,o,d.stats,n),this.debugSceneNodeHighlight(o,d.debugNodes),r&&this.debug("Scene.render() - after",{redrawType:zs[r.dirty],canvasCleared:u,tree:this.buildTree(r)})}))}debugStats(t,e,i,s={}){if(Cs.check("scene:stats","scene:stats:verbose")){const n=performance.now(),a=t.start;t.end=performance.now();const o=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},r=(t,e,i)=>`${t}: ${Math.round(100*(i-e))/100}ms`,{layersRendered:l=0,layersSkipped:h=0,nodesRendered:c=0,nodesSkipped:d=0}=null!=i?i:{};let u=0;const p=Object.entries(t).filter(([t])=>"end"!==t).map(([t,e],i)=>{const s=i>0?r(t,u,e):null;return u=e,s}).filter(t=>null!=t).join(" + "),g=Object.entries(s).map(([t,e])=>`${t}: ${e}`).join(" ; "),y=Cs.check("scene:stats:verbose"),m=[`${r("\u23f1\ufe0f",a,n)} (${p})`,""+g,"Layers: "+(y?o(l,h):this.layers.length),y?"Nodes: "+o(c,d):null].filter(t=>null!=t).map(t=>[t,Ya.getTextSize(t,e.font)]),f=Math.max(...m.map(([,{width:t}])=>t)),x=m.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,f,x),e.fillStyle="black";let v=0;for(const[t,i]of m)v+=i.height,e.fillText(t,2,v);e.restore()}}debugSceneNodeHighlight(t,e){var i;const s=t=>e=>!!t.test(e.id)||e instanceof Mo&&null!=e.name&&t.test(e.name),n=t=>e=>t===e.id||e instanceof Mo&&null!=e.name&&t===e.name,a=Ds(ws("agChartsSceneDebug")).flatMap(t=>"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t);for(const t of a){if("string"==typeof t&&null!=e[t])continue;const a="string"==typeof t?n(t):s(t),o=null==(i=this.root)?void 0:i.findNodes(a);if(o&&0!==o.length)for(const t of o)t instanceof Mo&&t.name?e[t.name]=t:e[t.id]=t;else C.log(`Scene.render() - no debugging node with id [${t}] in scene graph.`)}t.save();for(const[i,s]of Object.entries(e)){const e=s.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)):C.log(`Scene.render() - no bbox for debugged node [${i}].`)}t.restore()}buildTree(t){var e,i;const s=null!=(e=t instanceof Mo?t.name:null)?e:t.id;return this.debug.check()?g(g({name:s,node:t,dirty:zs[t.dirty]},(null==(i=t.parent)?void 0:i.isVirtual)?{virtualParentDirty:zs[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:s,opacity:n,zIndex:a,zIndexSubOrder:o},node:r,virtualParent:l}=e;(!s||n<=0)&&(i=`(${i})`),r instanceof Mo&&r.isLayer()&&(i=`*${i}*`);const h=[""+(null!=i?i:"<unknown>"),"z: "+a,o&&"zo: "+o.map(t=>"function"==typeof t?t()+" (fn)":t).join(" / "),l&&"(virtual parent)"].filter(t=>!!t).join(" ");let c=h,d=1;for(;null!=t[c]&&d<100;)c=`${h} (${d++})`;return t[c]=e,t},{})):{}}buildDirtyTree(t){var e;if(0===t.dirty)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),s=null!=(e=t instanceof Mo?t.name:null)?e:t.id,n=0===i.length?[s]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${s}.${t}`);return{dirtyTree:g({name:s,node:t,dirty:zs[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!=(i=e.name)?i:"<unknown>"]=e,t},{})),paths:n}}};function kl(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}Sl.className="Scene";var Dl=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null==(i=this.eventListeners.get(t))||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null==(e=this.eventListeners.get(t.type))||e.forEach(e=>e(t))}},Ml=class extends pe{constructor(t=0,e=t,i=t,s=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}};function Ll(t,e){let i,s,n=0,a=!1;const o=()=>a,r=()=>{a=!1,null==s||s(),s=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,a=!0;const i=e({count:t});i?i.then(r,r):r()};return{schedule(e){0!==n||o()||t(l,e),n++},await(){return b(this,null,(function*(){if(o())for(null==i&&(i=new Promise(t=>{s=t}));o();)yield i}))}}}x([Hn(sa)],Ml.prototype,"top",2),x([Hn(sa)],Ml.prototype,"right",2),x([Hn(sa)],Ml.prototype,"bottom",2),x([Hn(sa)],Ml.prototype,"left",2);var Al=class{static init(t){if("undefined"!=typeof ResizeObserver)this.resizeObserver=new ResizeObserver(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}}),this.ownerDocument=t,this.ready=!0,this.documentReady="loading"!==t.readyState,this.documentReady||t.addEventListener("DOMContentLoaded",this.onContentLoaded);else for(const[t,e]of this.elements)this.checkClientSize(t,e)}static destroy(){var t,e;null==(t=this.ownerDocument)||t.removeEventListener("DOMContentLoaded",this.onContentLoaded),null==(e=this.resizeObserver)||e.disconnect(),delete this.resizeObserver,delete this.ownerDocument,this.ready=!1}static checkSize(t,e,i,s){var n,a;t&&(i===(null==(n=t.size)?void 0:n.width)&&s===(null==(a=t.size)?void 0:a.height)||(t.size={width:i,height:s},t.cb(t.size,e)))}static observe(t,e){var i;this.ready||this.init(t.ownerDocument),this.documentReady?(this.elements.has(t)?this.removeFromQueue(t):null==(i=this.resizeObserver)||i.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t){var e;null==(e=this.resizeObserver)||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}static removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}static checkClientSize(t,e){var i,s;const n=null!=(i=t.clientWidth)?i:0,a=null!=(s=t.clientHeight)?s:0;this.checkSize(e,t,n,a)}};Al.elements=new Map,Al.ready=!1,Al.documentReady=!1,Al.queuedObserveRequests=[],Al.onContentLoaded=()=>{var t;const e="loading"!==(null==(t=Al.ownerDocument)?void 0:t.readyState),i=Al.documentReady;Al.documentReady=e,e&&e!==i&&(Al.queuedObserveRequests.forEach(([t,e])=>Al.observe(t,e)),Al.queuedObserveRequests=[])};var wl=Al,Nl=class{constructor(){this.range="tooltip"}};x([Hn(Pa(["tooltip","node"],"a range"))],Nl.prototype,"range",2);var Cl=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Cl||{}),Il=class{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}};function Tl(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function El(t){return t.map(t=>Pt(t)?JSON.stringify(t):t).join("-")}function Ol(t,e){var i;const s=function(t){if(void 0===t)return[];let[e,i]=t;return e=Number(e),i=Number(i),0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),Gt(e)&&Gt(i)?[e,i]:[])}(t);if(0===s.length)return s;let[n,a]=s;if(n===a){const[t,s]=null!=(i=null==e?void 0:e.calculatePadding(n,a,e.isReversed()))?i:[1,1];n-=t,a+=s}return[n,a]}function Rl(){return new Map([[void 0,0]])}function Pl(t,e){var i;return void 0===e?0:null!=(i=e.get(t.id))?i:0}var _l=Symbol("invalid"),Fl=class{constructor(t){this.debug=Cs.create(!0,"data-model");const{props:e,mode:i="standalone"}=t;this.mode=i;let s=!0;for(const t of e){if("key"===t.type&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&s&&(s=!1)}this.opts=g({dataVisible:!0},t),this.keys=e.filter(t=>"key"===t.type).map((t,e)=>y(g({},t),{index:e,missing:Rl()})),this.values=e.filter(t=>"value"===t.type).map((t,e)=>y(g({},t),{index:e,missing:Rl()})),this.aggregates=e.filter(t=>"aggregate"===t.type).map((t,e)=>y(g({},t),{index:e})),this.groupProcessors=e.filter(t=>"group-value-processor"===t.type).map((t,e)=>y(g({},t),{index:e})),this.propertyProcessors=e.filter(t=>"property-value-processor"===t.type).map((t,e)=>y(g({},t),{index:e})),this.reducers=e.filter(t=>"reducer"===t.type).map((t,e)=>y(g({},t),{index:e})),this.processors=e.filter(t=>"processor"===t.type).map((t,e)=>y(g({},t),{index:e}));for(const t of this.values)if(null==t.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(t));const n=({matchGroupIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>t.groupId===e))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)},a=({matchIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>{var i;return null==(i=t.ids)?void 0:i.some(([t,i])=>t===e[0]&&i===e[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)};for(const t of[...this.groupProcessors,...this.aggregates])a(t),n(t)}resolveProcessedDataIndexById(t,e){var i;const{index:s,def:n}=null!=(i=this.resolveProcessedDataDefById(t,e))?i:{};return{index:s,def:n}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map(({index:t,def:e})=>({index:t,def:e}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const s of e)i.push([s,this.resolveProcessedDataDefsById(t,s)]);return i}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const s={};for(const[n,[{index:a,def:o}]]of t){const t="key"===o.type?e:i;s[n]=t[a]}return s}resolveProcessedDataDefsById(t,e){const{keys:i,values:s,aggregates:n,groupProcessors:a,reducers:o}=this,r=i=>{const{ids:s,scopes:n}=i;return null!=s&&(!(null!=t&&!(null==n?void 0:n.some(e=>e===t.id)))&&s.some(([i,s])=>i===t.id&&("string"==typeof e?s===e:e.test(s))))},l=[i,s,n,a,o],h=[];for(const t of l)h.push(...t.filter(r).map(t=>({index:t.index,def:t})));if(h.length>0)return h;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e,i="value",s){var n,a,o,r;let l,h;try{l=this.resolveProcessedDataIndicesById(t,e)}catch(t){if("string"!=typeof e&&/didn't find property definition/.test(t.message))return[];throw t}switch(i){case"key":h="keys";break;case"value":h="values";break;case"aggregate":h="aggValues";break;case"group-value-processor":h="groups";break;default:return[]}const c=null!=(a=null==(n=s.domain[h])?void 0:n[l[0].index])?a:[];if(1===l.length)return c;const d=[...c];for(const t of l.slice(1))Tl(null!=(r=null==(o=s.domain[h])?void 0:o[t.index])?r:[],d);return d}processData(t,e){const{opts:{groupByKeys:i,groupByFn:s},aggregates:n,groupProcessors:a,reducers:o,processors:r,propertyProcessors:l}=this,h=performance.now();if(i&&0===this.keys.length)return;let c=this.extractData(t,e);i?c=this.groupData(c):s&&(c=this.groupData(c,s(c))),a.length>0&&this.postProcessGroups(c),n.length>0&&this.aggregateData(c),l.length>0&&this.postProcessProperties(c),o.length>0&&this.reduceData(c),r.length>0&&this.postProcessData(c);for(const e of[...this.keys,...this.values])if(t.length>0)for(const[i,s]of e.missing)if(s>=t.length){const t=void 0===i?"":" for "+i;C.warnOnce(`the key '${e.property}' was not found in any data element${t}.`)}const d=performance.now();return c.time=d-h,this.debug.check()&&function(t){var e,i;const s=(t,e)=>{e.length>0&&(C.log("DataModel.processData() - "+t),C.table(e))};if(C.log("DataModel.processData() - processedData",t),s("Key Domains",t.domain.keys),s("Group Domains",null!=(e=t.domain.groups)?e:[]),s("Value Domains",t.domain.values),s("Aggregate Domains",null!=(i=t.domain.aggValues)?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,s;const n=null!=(i=e.keys)?i:[],a=null!=(s=e.aggValues)?s:[],o=e.keys.map(()=>{}),r=null==a?void 0:a.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?n:o,...null!=t?t:[],...0==e?a:r])),t},[]);s("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const s=null!=(i=e.aggValues)?i:[];return t.push([...e.keys,...e.values,...s]),t},[]);s("Values",e)}}(c),c}valueGroupIdxLookup({matchGroupIds:t,matchIds:e}){return this.values.map((t,e)=>({def:t,index:e})).filter(({def:i})=>!(t&&(null==i.groupId||!t.includes(i.groupId)))&&(!e||null!=i.ids&&e.some(([t,e])=>{var s;return null==(s=i.ids)?void 0:s.some(([i,s])=>i===t&&s===e)}))).map(({index:t})=>t)}valueIdxLookup(t,e){const i=null==t||0===t.length,s=e=>{if(null==e)return!0;const s=null==e||0===e.length;return i===s||(null==e?void 0:e.some(e=>t.includes(e)))},n="string"==typeof e?e:e.id,a=this.values.findIndex(t=>{var e;return s(t.scopes)&&((null==(e=t.ids)?void 0:e.some(t=>(([t,e])=>s([t])&&e===n)(t)))||t.property===n||t.id===n)});if(a>=0)return a;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t,e){var i,s,n,a;const{keys:o,values:r,opts:{dataVisible:l}}=this,{dataDomain:h,processValue:c,scopes:d,allScopesHaveSameDefs:u}=this.initDataDomainProcessor(),p=new Array(l?t.length:0);let y=0,m=0;for(const[h,f]of t.entries()){const t={},x=d.size>0?new Set(d):void 0,v=l?new Array(o.length):void 0;let b,S=0;for(const t of o){if(b=c(t,f,b),b===_l)break;v&&(v[S++]=b)}if(b===_l)continue;const k=l&&r.length>0?new Array(r.length):void 0;let D;const M={};for(const t of null!=e?e:[])M[t.id]=t;for(const[e,o]of r.entries()){for(const a of null!=(i=o.scopes)?i:d){const i=M[a];D=c(o,null!=(s=null==i?void 0:i.data[h])?s:f,D,a),D!==_l&&k&&(void 0!==i&&(null!=t[n=i.id]||(t[n]={}),t[i.id][o.property]=D),o.useScopedValues?(null!=k[e]||(k[e]={}),k[e][a]=D):k[e]=D)}if(D===_l){if(u)break;for(const t of null!=(a=o.scopes)?a:d)null==x||x.delete(t);if(0===(null==x?void 0:x.size))break}}if((D!==_l||!u)&&(0!==(null==x?void 0:x.size)&&l)){const e={datum:g(g({},f),t),keys:v,values:k};!u&&x&&x.size<d.size&&(m++,e.validScopes=[...x]),p[y++]=e}}p.length=y;const f=t=>{const e=h.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:[...e]};return{type:"ungrouped",input:{count:t.length},data:p,domain:{keys:o.map(t=>f(t)),values:r.map(t=>f(t))},defs:{allScopesHaveSameDefs:u,keys:o,values:r},partialValidDataCount:m,time:0}}groupData(t,e){var i,s,n,a;const o=new Map;for(const r of t.data){const{keys:t,values:l,datum:h,validScopes:c}=r,d=e?e(r):t,u=El(d);if(o.has(u)){const t=o.get(u);if(t.values.push(l),t.datum.push(h),null!=c)for(let e=0;e<(null!=(s=null==(i=t.validScopes)?void 0:i.length)?s:0);e++){const i=null==(n=t.validScopes)?void 0:n[e];c.some(t=>t===i)||(null==(a=t.validScopes)||a.splice(e,1))}}else o.set(u,{keys:d,values:[l],datum:[h],validScopes:c})}const r=new Array(o.size),l=new Array(o.size);let h=0;for(const[,{keys:t,values:e,datum:i,validScopes:s}]of o.entries())0!==(null==s?void 0:s.length)&&(l[h]=t,r[h++]={keys:t,values:e,datum:i,validScopes:s});return y(g({},t),{type:"grouped",data:r,domain:y(g({},t.domain),{groups:l})})}aggregateData(t){var e,i,s,n,a,o,r;const{aggregates:l}=this;if(!l)return;const h=l.map(()=>[1/0,-1/0]),c=l.map(t=>this.valueGroupIdxLookup(t)),d=l.map(t=>t.aggregateFunction),u=l.map(t=>t.groupAggregateFunction),p=l.map(t=>t.finalFunction);for(const g of t.data){let{values:y}=g;const{validScopes:m}=g;null!=g.aggValues||(g.aggValues=new Array(c.length)),"ungrouped"===t.type&&(y=[y]);let f=0;for(const t of c){if(!(null==(e=null==m?void 0:m.some(t=>{var e;return null==(e=l[f].matchScopes)?void 0:e.some(e=>t===e)}))||e)){f++;continue}let c=null!=(s=null==(i=u[f])?void 0:i.call(u))?s:Tl([]);for(const e of y){const i=t.map(t=>e[t]),s=d[f](i,g.keys);s&&(c=null!=(a=null==(n=u[f])?void 0:n.call(u,s,c))?a:Tl(s,c))}const x=(null!=(r=null==(o=p[f])?void 0:o.call(p,c))?r:c).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});Tl(x,h[f]),g.aggValues[f++]=x}}t.domain.aggValues=h}postProcessGroups(t){var e,i,s,n,a;const{groupProcessors:o}=this;if(!o)return;const r=new Set,l=new Map,h=new Map,c=new Map;for(const t of o){const e=this.valueGroupIdxLookup(t);h.set(t,e),c.set(t,t.adjust());for(const t of e){const e=this.values[t];r.add(t),l.set(t,new Il("category"===e.valueType?"discrete":"continuous"))}}const d=t=>{var e;for(const i of r)null==(e=l.get(i))||e.extend(t[i])};for(const r of t.data){for(const l of o){if(!(null==(i=null==(e=r.validScopes)?void 0:e.some(t=>{var e;return null==(e=l.matchScopes)?void 0:e.some(e=>t===e)}))||i))continue;const o=null!=(s=h.get(l))?s:[],d=null!=(a=null==(n=c.get(l))?void 0:n())?a:()=>{};if("grouped"!==t.type)r.values&&d(r.values,o);else for(const t of r.values)t&&d(t,o)}if("grouped"===t.type)for(const t of r.values)d(t);else d(r.values)}for(const[e,i]of l)t.domain.values[e]=[...i.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:s,scopes:n}of e)i()(t,this.valueIdxLookup(null!=n?n:[],s))}reduceData(t){var e,i;const{reducers:s}=this,n=s.map(t=>t.scopes),a=s.map(t=>t.reducer()),o=s.map(t=>t.initialValue);for(const s of t.data){let t=0;for(const r of a){null==(i=null==(e=s.validScopes)?void 0:e.some(e=>{var i;return null==(i=n[t])?void 0:i.some(t=>e===t)}))||i?(o[t]=r(o[t],s),t++):t++}}for(let e=0;e<o.length;e++)null!=t.reduced||(t.reduced={}),t.reduced[s[e].property]=o[e]}postProcessData(t){const{processors:e}=this;for(const i of e)null!=t.reduced||(t.reduced={}),t.reduced[i.property]=i.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,s=new Set;for(const e of i)for(const i of null!=(t=e.scopes)?t:[])s.add(i);const n=s.size,a=new Map,o=new Map;let r=!0;const l=(t,e,i=a)=>{var s;"category"===e?i.set(t,new Il("discrete")):(i.set(t,new Il("continuous")),r&&(r=(null!=(s=t.scopes)?s:[]).length===n))},h=()=>{e.forEach(t=>l(t,t.valueType)),i.forEach(t=>l(t,t.valueType))};h();const c=this.buildAccessors(...e,...i);return{dataDomain:a,processValue:(t,e,i,s)=>{var n,r,l,d,u;let p,g=!1;if(t.property in c){try{p=c[t.property](e)}catch(t){}g=void 0!==p}else g=t.property in e,p=g?e[t.property]:t.missingValue;if(null!=t.forceValue){p=g&&Hs(p)?-1*t.forceValue:t.forceValue,g=!0}if(!g&&!("missingValue"in t)){const e=null!=(n=t.missing.get(s))?n:0;t.missing.set(s,e+1)}if(a.has(t)||h(),g){if(!(null==(l=null==(r=t.validation)?void 0:r.call(t,p,e))||l)){if(!("invalidValue"in t))return"integrated"!==this.mode&&C.warnOnce(`invalid value of type [${typeof p}] ignored:`,`[${p}]`),_l;p=t.invalidValue}}return t.processor&&(o.has(t)||o.set(t,t.processor()),p=null==(d=o.get(t))?void 0:d(p,i!==_l?i:void 0)),null==(u=a.get(t))||u.extend(p),p},initDataDomain:h,scopes:s,allScopesHaveSameDefs:r}}buildAccessors(...t){const e={};if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let t;t=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e[i.property]=new Function("datum",t)}return e}};var Bl=class{constructor(t){this.mode=t,this.debug=Cs.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return b(this,null,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,n)=>{this.requested.push({id:t,opts:i,data:e,resultCb:s,reject:n})})}))}execute(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const{valid:t,invalid:e}=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);const i=this.mergeRequested(t);this.debug("DataController.execute() - merged",i),this.debug.check()&&(window.processedData=[]);const s=t.some(t=>null!=t.data);for(const{opts:e,data:n,resultCbs:a,rejects:o,ids:r}of i){const i=s||e.props.some(t=>{var e;return("value"===t.type||"key"===t.type)&&(null!=(e=t.useScopedValues)&&e)});try{const s=new Fl(y(g({},e),{mode:this.mode})),l=s.processData(n,t);this.debug.check()&&window.processedData.push(l),l&&0===l.partialValidDataCount?a.forEach((t,e)=>{const n=r[e];let a=l;i&&(a=this.extractScopedData(n,l)),t({dataModel:s,processedData:a})}):l?this.splitResult(s,l,r,a):o.forEach(t=>t(new Error("AG Charts - no processed data generated")))}catch(t){o.forEach(e=>e(t))}}e.forEach(({error:t,reject:e})=>e(t))}extractScopedData(t,e){const i=e=>Array.isArray(e)?e.map(i):g(g({},e),e[t]),s=e=>{var i;return Array.isArray(e)?e.map(s):null!=(i=null==e?void 0:e[t])?i:e};return y(g({},e),{data:e.data.map(t=>y(g({},t),{datum:i(t.datum),values:t.values.map(s)}))})}validateRequests(t){const e=[],i=[];for(const[s,n]of t.entries())s>0&&n.data.length!==t[0].data.length&&!1===n.opts.groupByData?i.push(y(g({},n),{error:new Error("all series[].data arrays must be of the same length and have matching keys.")})):e.push(n);return{valid:e,invalid:i}}mergeRequested(t){const e=[],i=t=>t.filter(t=>"key"===t.type).map(t=>t.property).join(";"),s=({opts:t,data:e})=>s=>(!1===t.groupByData||s[0].data===e)&&s[0].opts.groupByKeys===t.groupByKeys&&s[0].opts.dataVisible===t.dataVisible&&s[0].opts.groupByFn===t.groupByFn&&i(s[0].opts.props)===i(t.props),n=t=>e=>{var i;if(e.type!==t.type)return!1;const s=null!=(i=me(e,t))?i:{};return delete s.scopes,delete s.id,delete s.ids,"useScopedValues"in s&&delete s.useScopedValues,0===Object.keys(s).length},a=t=>{var e;if("key"!==t.type&&"value"!==t.type)return;const i=new Set(null!=(e=t.scopes)?e:[]);t.useScopedValues=i.size>1},o=t=>y(g({},t[0]),{props:t.reduce((t,e)=>{var i,s,o,r;for(const l of e.props){if(null!=l.id){null!=l.ids||(l.ids=[]);for(const t of null!=(i=l.scopes)?i:[])l.ids.push([t,l.id])}const e=t.find(n(l));e?(null!=e.scopes||(e.scopes=[]),e.scopes.push(...null!=(s=l.scopes)?s:[]),a(l),"key"!==e.type&&"value"!==e.type||!(null==(o=l.ids)?void 0:o.length)||null==(r=e.ids)||r.push(...l.ids)):(a(l),t.push(l))}return t},[])});for(const i of t){const t=e.find(s(i));t?t.push(i):e.push([i])}return e.map(t=>({ids:t.map(({id:t})=>t),resultCbs:t.map(({resultCb:t})=>t),rejects:t.map(({reject:t})=>t),data:t[0].data,opts:o(t.map(({opts:t})=>t))}))}splitResult(t,e,i,s){for(let n=0;n<i.length;n++){const a=i[n];(0,s[n])({dataModel:t,processedData:y(g({},e),{data:e.data.filter(({validScopes:t})=>null==t||t.some(t=>t===a))})})}}},zl=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex(e=>e.symbol===t);if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const i of this.getListenersByType(t))try{i.handler(...e)}catch(t){C.errorOnce(t)}}dispatchWrapHandlers(t,e,...i){for(const s of this.getListenersByType(t))try{e(s.handler,...i)}catch(t){C.errorOnce(t)}}getListenersByType(t){var e;return null!=(e=this.registeredListeners.get(t))?e:[]}destroy(){this.registeredListeners.clear()}},Gl=class extends zl{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Cs.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){"function"==typeof t&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.throttledFetch(t)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.freshRequests.length>0)}createThrottledFetch(t){return N(t=>this.fetch(t),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return N((t,e)=>{this.debug("DataService - dispatching 'data-load' | "+t),this.dispatch("data-load",{type:"data-load",data:e})},t,{leading:!0,trailing:!0})}fetch(t){return b(this,null,(function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;let s;this.debug("DataService - requesting | "+i),this.freshRequests.push(i);try{s=yield this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(t){this.debug("DataService - request failed | "+i),C.errorOnce(`DataService - request failed | [${t}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(t=>t===i);-1===n||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1?this.debug("DataService - discarding stale request | "+i):(this.freshRequests=this.freshRequests.slice(n+1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error"))}))}};x([oo({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],Gl.prototype,"dispatchThrottle",2),x([oo({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],Gl.prototype,"requestThrottle",2);var Kl=[!0,"animation"],Vl=class{constructor(){this.stoppedCbs=new Set,this.controllers=new Map,this.debug=Cs.create(...Kl),this.currentPhase=0,this.phases=new Map(Nn.map(t=>[t,[]])),this.skipAnimations=!1}get size(){return this.controllers.size}isActive(){return this.controllers.size>0}getActiveControllers(){var t;return null!=(t=this.phases.get(Nn[this.currentPhase]))?t:[]}checkOverlappingId(t){null!=t&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug("Skipping animation batch due to update of existing animation: "+t),this.skip())}addAnimation(t){var e;if(t.isComplete)return;if(Nn.indexOf(t.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",t.id),void t.stop();this.controllers.set(t.id,t),null==(e=this.phases.get(t.phase))||e.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=null==e?void 0:e.indexOf(t);null!=i&&i>=0&&(null==e||e.splice(i,1))}progress(t){const e=Nn[this.currentPhase];let i=[...this.getActiveControllers()];const s=this.controllers.size;this.debug(`AnimationBatch - progressing by ${t}; current phase ${e} with ${null==i?void 0:i.length} active controllers of ${s} total`,this.phases);let n=0===t?.01:t;const a=()=>null==Nn[this.currentPhase],o=()=>{for(i=[...this.getActiveControllers()];!a()&&0===i.length;)this.currentPhase++,i=[...this.getActiveControllers()],this.debug("AnimationBatch - phase changing to "+Nn[this.currentPhase],{unusedTime:n},i)};for(;n>0&&!a();){o();const t=n;let e=0;for(const s of i)n=Math.min(s.update(t),n),s.isComplete&&(e++,this.removeAnimation(s));this.debug(`AnimationBatch - updated ${i.length} controllers; ${e} completed`)}}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(t){C.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(t){if(null!=t&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){}},Wl=class{constructor(){this.listeners=new zl}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}destroy(){this.listeners.destroy()}},Yl=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","page-left","wheel"],Ul=["pagehide","mousemove","mouseup"],jl=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],Hl=(t=>(t[t.Default=8]="Default",t[t.ZoomDrag=4]="ZoomDrag",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=15]="All",t))(Hl||{}),Xl=[!0,"interaction"],$l=class t extends Wl{constructor(e,i,s){super(),this.debug=Cs.create(...Xl),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.stateQueue=8,this.rootElement=i.body,this.element=e,this.window=s;for(const t of jl)t.startsWith("touch")?e.addEventListener(t,this.eventHandler,{passive:!0}):"wheel"===t?e.addEventListener(t,this.eventHandler,{passive:!1}):e.addEventListener(t,this.eventHandler);for(const t of Ul)this.window.addEventListener(t,this.eventHandler);t.interactionDocuments.includes(i)||(lo(i,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),t.interactionDocuments.push(i))}destroy(){super.destroy();for(const t of Ul)this.window.removeEventListener(t,this.eventHandler);for(const t of jl)this.element.removeEventListener(t,this.eventHandler)}addListener(t,e,i=8){return super.addListener(t,t=>{this.getState()&i&&e(t)})}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch(t=>C.errorOnce(t))}dispatchEvent(t,e){return b(this,null,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const s of e)this.listeners.dispatchWrapHandlers(s,(t,e)=>{e.consumed||t(e)},this.buildEvent(g({type:s,event:t},i)))}))}decideInteractionEventTypes(t){switch(t.type){case"click":case"dblclick":case"contextmenu":case"wheel":return[t.type];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null==(e=t.target)?void 0:e.parentElement)===this.element}calculateCoordinates(e){var i;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if("undefined"!=typeof TouchEvent&&e instanceof TouchEvent){const s=null!=(i=e.touches[0])?i:e.changedTouches[0],{clientX:n,clientY:a,pageX:o,pageY:r}=s;return y(g({},t.NULL_COORDS),{clientX:n,clientY:a,pageX:o,pageY:r})}if(e instanceof PageTransitionEvent){if(e.persisted)return;return t.NULL_COORDS}}getMouseEventCoords(t){const{clientX:e,clientY:i,pageX:s,pageY:n}=t;let{offsetX:a,offsetY:o}=t;const r=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const e=r(this.dragStartElement),i=r(t.target);a-=e.x-i.x,o-=e.y-i.y}return{clientX:e,clientY:i,pageX:s,pageY:n,offsetX:a,offsetY:o}}isWheelEvent(t){return"wheel"===t.type}buildEvent(t){const{type:e,event:i,clientX:s,clientY:n}=t;let{offsetX:a,offsetY:o,pageX:r,pageY:l}=t;if(!Gt(a)||!Gt(o)){const t=this.element.getBoundingClientRect();a=s-t.left,o=n-t.top}if(!Gt(r)||!Gt(l)){const t=this.rootElement.getBoundingClientRect();r=s-t.left,l=n-t.top}const h=t=>{const e=Math.sign(t);return(3*Math.log10(Math.abs(t)/60+.1)+3)*e};let[c,d]=[NaN,NaN];if(this.isWheelEvent(i)){const t=0===i.deltaMode?h:t=>t;c=t(i.deltaX),d=t(i.deltaY)}const u={type:e,offsetX:a,offsetY:o,pageX:r,pageY:l,deltaX:c,deltaY:d,sourceEvent:i,consumed:!1,consume(){u.consumed=!0}};return this.debug("InteractionManager - builtEvent: ",u),u}};$l.interactionDocuments=[],$l.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var ql=$l,Zl=[!0,"animation"],Ql=class extends Wl{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new Vl,this.debug=Cs.create(...Zl),this.rafAvailable="undefined"!=typeof requestAnimationFrame,this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i=m(t,["disableInteractions"]);const s=this.batch;try{s.checkOverlappingId(i.id)}catch(t){return void this.failsafeOnError(t)}const n=null!=(e=i.id)?e:Math.random().toString(),a=this.isSkipped();a&&this.debug("AnimationManager - skipping animation");const o=new En(y(g({},i),{id:n,skip:a,autoplay:!!this.isPlaying&&i.autoplay,phase:i.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>b(this,null,(function*(){const s=()=>b(this,null,(function*(){const e=i-(null!=t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:e}),this.interactionManager.pushState(1);try{this.batch.progress(e)}catch(t){this.failsafeOnError(t)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):this.batch.stop()}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){C.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new Vl,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isActive()||this.interactionManager.popState(1),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1),this.requestAnimation()}onBatchStop(t){this.batch.stoppedCbs.add(t)}},Jl=class extends Wl{legendItemClick(t,e,i,s){const n={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,s,n){const a={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:n,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",a)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}},th=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultAction(){return[...this.defaultActions]}registerDefaultAction(t){t.id&&this.defaultActions.find(({id:e})=>e===t.id)||this.defaultActions.push(t)}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}isDisabled(t){return this.disabledActions.has(t)}},eh=class{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}};function ih(t,e){return Math.sqrt(function(t,e){const i=t.screenX-e.screenX,s=t.screenY-e.screenY;return i*i+s*s}(t,e))}var sh=class extends Wl{constructor(t){super(),this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=t,t.addEventListener("touchstart",this.touchstart,{passive:!0}),t.addEventListener("touchmove",this.touchmove,{passive:!0}),t.addEventListener("touchend",this.touchend),t.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:t}=this;t.removeEventListener("touchstart",this.touchstart),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:s}=this.pinch;if(0!==this.pinch.status&&2===e.length){if(e[0].identifier===i.identifier&&e[1].identifier===s.identifier)return[e[0],e[1]];if(e[0].identifier===s.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];Zt(e,this.pinch.finger1,t.touches[0]),Zt(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=ih(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e){const{finger1:i,finger2:s,origin:n}=this.pinch,a={type:t,finger1:i,finger2:s,deltaDistance:e,origin:n};this.listeners.dispatch(t,a)}onTouchStart(t){this.stopPinchTracking();const{pinch:e}=this;2===t.touches.length&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(void 0!==e){const[i,s]=e,{pinch:n}=this,a=ih(i,s),o=a-n.distance;1===n.status?Math.abs(o)>1&&(n.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0)):2===n.status?(n.distance=a,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o)):C.error("unexpected pinch.status: "+n.status)}}onTouchEnd(t){this.stopPinchTracking()}onTouchCancel(t){this.stopPinchTracking()}stopPinchTracking(){const{pinch:t}=this;2===t.status&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},nh=class extends Wl{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}};function ah(t){var e;const{width:i=0,height:s=0}=null!=(e=t.bbox.computeBBox())?e:{};return i*s}var oh=class{constructor(){this.nodes=[]}add(t,e){this.nodes.push({value:t,bbox:e})}find(t,e){return this.nodes.filter(i=>function(t,e,i){var s,n;return null!=(n=null==(s=t.bbox.computeBBox())?void 0:s.containsPoint(e,i))&&n}(i,t,e)).sort((t,e)=>ah(t)-ah(e)).map(t=>t.value)}*[Symbol.iterator](){for(const{value:t}of Object.values(this.nodes))yield t}clear(){this.nodes.length=0}},rh=class extends zl{},lh=class t extends Wl{constructor(t){super(),this.chart=t}subscribe(e=t.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,t.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=t.DEFAULT_GROUP){var i;return null==(i=this.get(e))||i.delete(this.chart),this}getChart(){return this.chart}getGroup(e=t.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=t.DEFAULT_GROUP){return this.getGroup(e).filter(t=>t!==this.chart)}get(e){return t.chartsGroups.get(e)}};lh.chartsGroups=new Map,lh.DEFAULT_GROUP=Symbol("sync-group-default");var hh=lh,ch=class{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",t=>this.checkExclusiveRects(t)))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var s;null==i&&(i=null==(s=this.states[t])?void 0:s.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null==(e=this.states[t])?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,s]of Object.entries(this.exclusiveAreas))if(s.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,s;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:n,meta:a}=null!=(e=this.states[t])?e:{};i=n,s=a}),void 0===s||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null==(t=this.appliedState)?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(s,void 0,t)}else this.tooltip.show(s,i);this.appliedState={content:i,meta:s}}static makeTooltipMeta(t,e){var i,s,n,a;const{offsetX:o,offsetY:r}=t,{tooltip:l}=e.series.properties,h={xOffset:l.position.xOffset,yOffset:l.position.yOffset},c={offsetX:o,offsetY:r,lastPointerEvent:{offsetX:o,offsetY:r},showArrow:l.showArrow,position:h},d=null!=(s=null==(i=e.yBar)?void 0:i.upperPoint)?s:e.midPoint;if("node"===l.position.type&&d){const{x:t,y:i}=d,s=e.series.contentGroup.inverseTransformPoint(t,i);return y(g({},c),{offsetX:Math.round(s.x),offsetY:Math.round(s.y)})}return c.enableInteraction=null!=(a=null==(n=l.interaction)?void 0:n.enabled)&&a,c}},dh=class extends Wl{constructor(){super(...arguments),this.axisZoomManagers=new Map}updateAxes(t){var e;const i=new Map(t.map(t=>[t.id,this.axisZoomManagers.get(t.id)]));this.axisZoomManagers.clear();for(const s of t)this.axisZoomManagers.set(s.id,null!=(e=i.get(s.id))?e:new uh(s));this.initialZoom&&(this.updateZoom(this.initialZoom),this.initialZoom=void 0)}updateZoom(t){0!==this.axisZoomManagers.size?(this.axisZoomManagers.forEach(e=>{e.updateZoom(null==t?void 0:t[e.getDirection()])}),this.applyChanges()):this.initialZoom=t}updateAxisZoom(t,e){var i;null==(i=this.axisZoomManagers.get(t))||i.updateZoom(e),this.applyChanges()}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{"x"===i.getDirection()?null!=t||(t=i.getZoom()):"y"===i.getDirection()&&(null!=e||(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){var e,i;return null!=(i=null==(e=this.axisZoomManagers.get(t))?void 0:e.getZoom())?i:{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(){if(!Array.from(this.axisZoomManagers.values()).map(t=>t.applyChanges()).some(Boolean))return;const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]=i.getZoom();this.listeners.dispatch("zoom-change",y(g({type:"zoom-change"},this.getZoom()),{axes:t}))}},uh=class{constructor(t){this.pendingZoom=null,this.axis=t;const[e=0,i=1]=t.visibleRange;this.initialZoom=this.currentZoom={min:e,max:i}}getDirection(){return this.axis.direction}updateZoom(t){this.pendingZoom=t?g({},t):null}getZoom(){return fe(this.currentZoom)}applyChanges(){var t;const e=this.currentZoom;return this.currentZoom=null!=(t=this.pendingZoom)?t:this.initialZoom,e.min!==this.currentZoom.min||e.max!==this.currentZoom.max}},ph=class extends zl{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((t,e)=>{try{return e.handler(t)}catch(e){return C.errorOnce(e),t}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}};function gh({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:a=0,forceResult:o=!1}){const r="horizontal"===t,l={max:r?s:i,fn:r?t=>t.width:t=>t.height,padding:r?a:n},h={max:r?i:s,fn:r?t=>t.height:t=>t.width,padding:r?n:a};let c=0;const d=[];for(;c<e.length;){const t=yh(e.slice(c),c,l,h,o);if(!t)return;c+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,s,n){let a=0,o=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,s)=>{e[s][i]=t})}),e}(t));let r=0;const l=t.map(t=>{const e=t.map(t=>(r=Math.max(t,r),i[t]));let a=0,o=0;return e.forEach(t=>{a+=t.height+s,o=Math.max(o,t.width+n)}),{indices:t,bboxes:e,columnHeight:Math.ceil(a),columnWidth:Math.ceil(o)}});let h=0,c=0;return l.forEach(t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)}),a=Math.max(h,a),o=Math.max(c,o),{columns:l,startIndex:t[0][0],endIndex:r,pageWidth:h,pageHeight:c}}),maxPageWidth:a,maxPageHeight:o}}(d,t,e,n,a)}function yh(t,e,i,s,n){let a=function(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max){return i/n<2?Math.ceil(i/2):n}return i}(t,i);if(a<1){if(!n)return;a=1}for(let o=a;o>=1;o--){const a=mh(t,e,o,i,s,n);if(null==a&&o<=1)return;if(null==a)continue;if("number"==typeof a){if(a<=1)return;o=a<o&&a>1?a:o;continue}return{processedBBoxCount:a.length*a[0].length,pageIndices:a}}}function mh(t,e,i,s,n,a){var o;const r=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&r.push(c),c=[]);const g=s.fn(t[u])+s.padding;d[p]=Math.max(null!=(o=d[p])?o:0,g),h=Math.max(h,n.fn(t[u])+n.padding);const y=l+h,m=!a||r.length>0;if(y>n.max&&m){c=[];break}if(d.reduce((t,e)=>t+e,0)>s.max&&!a)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&r.push(c),r.length>0?r:void 0}function fh(t,e,i,s){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const s=e*e-4*t*i,n=[];if(0===s){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(s>0){const i=Math.sqrt(s),a=(-e-i)/(2*t),o=(-e+i)/(2*t);a>=0&&a<=1&&n.push(a),o>=0&&o<=1&&n.push(o)}return n}(e,i,s);const n=e/t,a=i/t,o=(3*a-n*n)/9,r=(9*n*a-27*(s/t)-2*n*n*n)/54,l=o*o*o+r*r,h=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(r+t)*Math.pow(Math.abs(r+t),1/3),i=Math.sign(r-t)*Math.pow(Math.abs(r-t),1/3),s=Math.abs(Math.sqrt(3)*(e-i)/2),a=-1/3*n+(e+i);if(a>=0&&a<=1&&h.push(a),0===s){const t=-1/3*n-(e+i)/2;t>=0&&t<=1&&h.push(t)}}else{const t=Math.acos(r/Math.sqrt(-o*o*o)),e=1/3*n,i=2*Math.sqrt(-o),s=i*Math.cos(1/3*t)-e,a=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;s>=0&&s<=1&&h.push(s),a>=0&&a<=1&&h.push(a),l>=0&&l<=1&&h.push(l)}return h}function xh(t,e,i,s,n,a,o,r){const l=(i-t)*(r-a)-(s-e)*(o-n);if(0===l)return null;const h=((o-n)*(e-a)-(t-n)*(r-a))/l,c=((i-t)*(e-a)-(s-e)*(t-n))/l;return h>=0&&h<=1&&c>=0&&c<=1?{x:t+h*(i-t),y:e+h*(s-e)}:null}function vh(t,e,i,s,n,a,o,r,l,h,c,d){const u=[],p=h-d,g=c-l,y=l*(d-h)-h*(c-l),m=bh(t,i,n,o),f=bh(e,s,a,r),x=fh(p*m[0]+g*f[0],p*m[1]+g*f[1],p*m[2]+g*f[2],p*m[3]+g*f[3]+y);for(const t of x){const e=t*t,i=t*e,s=m[0]*i+m[1]*e+m[2]*t+m[3],n=f[0]*i+f[1]*e+f[2]*t+f[3];let a;a=l!==c?(s-l)/(c-l):(n-h)/(d-h),a>=0&&a<=1&&u.push({x:s,y:n})}return u}function bh(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function Sh(t,e,i,s,n,a,o,r,l,h){const c=(h-r)/(l-o),d=r-c*o,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),y=Math.pow(p,2)-4*u*g;if(y<0)return[];const m=(-p+Math.sqrt(y))/2/u,f=(-p-Math.sqrt(y))/2/u,x=[];return[m,f].forEach(t=>{if(!(t>=Math.min(o,l)&&t<=Math.max(o,l)))return;const e=c*t+d,i=zn(s);let r=zn(n),h=zn(Math.atan2(e,t));r<=i&&(r+=2*Math.PI),h<i&&(h+=2*Math.PI),a!==(h>=i&&h<=r)&&x.push({x:t,y:e})}),x}var kh=class{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let s=0;t.beginPath();for(const n of e)switch(n){case 0:t.moveTo(i[s++],i[s++]);break;case 1:t.lineTo(i[s++],i[s++]);break;case 3:t.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case 2:t.arc(i[s++],i[s++],i[s++],i[s++],i[s++],1===i[s++]);break;case 4:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(1),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(t,e+n),this.arc(t+n,e+n,n,Math.PI,3*Math.PI/2),this.lineTo(t+n,e),this.lineTo(t+i-n,e),this.arc(t+i-n,e+n,n,3*Math.PI/2,2*Math.PI),this.lineTo(t+i,e+n),this.lineTo(t+i,e+s-n),this.arc(t+i-n,e+s-n,n,0,Math.PI/2),this.lineTo(t+i-n,e+s),this.lineTo(t+n,e+s),this.arc(t+ +n,e+s-n,n,Math.PI/2,Math.PI),this.lineTo(t,e+s-n),this.closePath()}arc(t,e,i,s,n,a=!1){const o=t+i*Math.cos(n),r=e+i*Math.sin(n);this.xy?(this.xy[0]=o,this.xy[1]=r):this.xy=[o,r],this.commands.push(2),this.params.push(t,e,i,s,n,a?1:0)}cubicCurveTo(t,e,i,s,n,a){this.xy||this.moveTo(t,e),this.commands.push(3),this.params.push(t,e,i,s,n,a),this.xy&&(this.xy[0]=n,this.xy[1]=a)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(4),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,a=-1e4,o=-1e4;let r=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case 0:!isNaN(r)&&xh(r,l,h,c,a,o,t,e)&&d++,h=s[p++],r=h,c=s[p++],l=c;break;case 1:xh(h,c,s[p++],s[p++],a,o,t,e)&&d++,h=s[p-2],c=s[p-1];break;case 3:d+=vh(h,c,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,o,t,e).length,h=s[p-2],c=s[p-1];break;case 2:const i=s[p++],n=s[p++],u=s[p++],g=s[p++],y=s[p++];d+=Sh(i,n,u,g,y,Boolean(s[p++]),a,o,t,e).length,h=i+Math.cos(y)*u,c=n+Math.sin(y)*u;break;case 4:!isNaN(r)&&xh(r,l,h,c,a,o,t,e)&&d++}return d%2==1}getPoints(){const{commands:t,params:e}=this,i=[];let s=0;for(let n=0;n<t.length;n++)switch(t[n]){case 0:case 1:i.push({x:e[s++],y:e[s++]});break;case 3:s+=4,i.push({x:e[s++],y:e[s++]});break;case 2:i.push({x:e[s++],y:e[s++]}),s+=4}return i}};function Dh(t){const{redraw:e=3,changeCb:i,convertor:s}=null!=t?t:{};return Ks({redraw:e,type:"path",convertor:s,changeCb:i})}var Mh=class extends Ha{constructor(){super(...arguments),this.path=new kh,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!=(e=null==(t=this.fillShadow)?void 0:t.isDirty())&&e||null!=(s=null==(i=this._clipPath)?void 0:i.isDirty())&&s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i,s,n;const{ctx:a,forceRender:o,stats:r}=t;if(0!==this.dirty||o){if(this.computeTransformMatrix(),this.matrix.toContext(a),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),isNaN(this._clipX)||isNaN(this._clipY)||null==this.clipMode)this.path.draw(a),this.fillStroke(a);else{a.save();const t=this.strokeWidth/2;if(null!=this._clipPath||(this._clipPath=new kh),this._clipPath.clear(),this._clipPath.rect(-t,-t,this._clipX+t,this._clipY+t+t),"normal"===this.clipMode&&(null==(e=this._clipPath)||e.draw(a),a.clip()),this._clipX>0&&this._clipY>0&&(this.path.draw(a),this.fillStroke(a)),"punch-out"===this.clipMode){null==(i=this._clipPath)||i.draw(a),a.clip();const{x:t=-1e4,y:e=-1e4,width:n=2e4,height:o=2e4}=null!=(s=this.computeBBox())?s:{};a.clearRect(t,e,n,o)}a.restore()}null==(n=this.fillShadow)||n.markClean(),super.render(t)}else r&&(r.nodesSkipped+=this.nodeCount.count)}};Mh.className="Path",x([Dh()],Mh.prototype,"clipMode",2),x([Dh()],Mh.prototype,"clipX",1),x([Dh()],Mh.prototype,"clipY",1);var Lh=class extends Mh{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,s=i/2;return new en(t-s,e-s,i,i)}applyPath(t,e){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:a,y:o,t:r}of e)s+=a*t,n+=o*t,"move"===r?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}};x([Dh()],Lh.prototype,"x",2),x([Dh()],Lh.prototype,"y",2),x([Dh({convertor:Math.abs})],Lh.prototype,"size",2);var Ah=class extends Lh{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=s/2;i.clear(),i.arc(t,e,n,0,2*Math.PI),i.closePath()}};Ah.className="Circle";var wh=class t extends Lh{updatePath(){const e=this.size/4.2;super.applyPath(e,t.moves)}};wh.className="Cross",wh.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var Nh=wh,Ch=class t extends Lh{updatePath(){const e=this.size/2;super.applyPath(e,t.moves)}};Ch.className="Diamond",Ch.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var Ih=Ch,Th=class extends Lh{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:s}=this,n=i/4,a=this.y+n/2;e.clear(),e.arc(t-n,a-n,n,s(130),s(330)),e.arc(t+n,a-n,n,s(220),s(50)),e.lineTo(t,a+n),e.closePath()}};Th.className="Heart";var Eh=class t extends Lh{updatePath(){const e=this.size/3;super.applyPath(e,t.moves)}};Eh.className="Plus",Eh.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var Oh=Eh,Rh=class extends Lh{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}};Rh.className="Square";var Ph=class t extends Lh{updatePath(){const e=1.1*this.size;super.applyPath(e,t.moves)}};Ph.className="Triangle",Ph.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var _h=Ph,Fh={circle:Ah,cross:Nh,diamond:Ih,heart:Th,plus:Oh,square:Rh,triangle:_h},Bh=Object.keys(Fh);function zh(t){return"string"==typeof t&&Bh.includes(t)}function Gh(t=Rh){return zh(t)?Fh[t]:"function"==typeof t?t:Rh}var Kh=class extends Mo{constructor(){super({name:"markerLabelGroup"}),this.label=new qa,this.line=new _r,this._marker=new Rh,this._markerSize=15,this._spacing=8;const{marker:t,label:e,line:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=Ya.has.textMetrics?1:0,this.append([i,t,e]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(t){const e=this.marker.size/2+t;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){this.marker.size=this.markerSize;const t=this.line.visible?this.line.x2:-1/0,e=this.markerSize/2;this.label.x=Math.max(t,e)+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(t)}};Kh.className="MarkerLabel",x([ao("label")],Kh.prototype,"text",2),x([ao("label")],Kh.prototype,"fontStyle",2),x([ao("label")],Kh.prototype,"fontWeight",2),x([ao("label")],Kh.prototype,"fontSize",2),x([ao("label")],Kh.prototype,"fontFamily",2),x([ao("label","fill")],Kh.prototype,"color",2),x([ao("marker","fill")],Kh.prototype,"markerFill",2),x([ao("marker","stroke")],Kh.prototype,"markerStroke",2),x([ao("marker","strokeWidth")],Kh.prototype,"markerStrokeWidth",2),x([ao("marker","fillOpacity")],Kh.prototype,"markerFillOpacity",2),x([ao("marker","strokeOpacity")],Kh.prototype,"markerStrokeOpacity",2),x([ao("marker","visible")],Kh.prototype,"markerVisible",2),x([ao("line","stroke")],Kh.prototype,"lineStroke",2),x([ao("line","strokeWidth")],Kh.prototype,"lineStrokeWidth",2),x([ao("line","strokeOpacity")],Kh.prototype,"lineStrokeOpacity",2),x([ao("line","lineDash")],Kh.prototype,"lineLineDash",2),x([ao("line","visible")],Kh.prototype,"lineVisible",2);var Vh=class extends pe{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};x([Hn(ya)],Vh.prototype,"color",2),x([Hn(Aa,{optional:!0})],Vh.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],Vh.prototype,"fontWeight",2),x([Hn(sa)],Vh.prototype,"fontSize",2),x([Hn(ta)],Vh.prototype,"fontFamily",2);var Wh=class extends pe{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};x([Hn(sa)],Wh.prototype,"size",2),x([Hn(ya,{optional:!0})],Wh.prototype,"fill",2),x([Hn(na,{optional:!0})],Wh.prototype,"fillOpacity",2),x([Hn(ya,{optional:!0})],Wh.prototype,"stroke",2),x([Hn(sa)],Wh.prototype,"strokeWidth",2),x([Hn(na)],Wh.prototype,"strokeOpacity",2);var Yh=class extends pe{constructor(t){super(),this.parent=t,this.shape=_h,this.size=15,this.padding=8}};x([oo({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Yh.prototype,"shape",2),x([Hn(sa)],Yh.prototype,"size",2),x([Hn(sa)],Yh.prototype,"padding",2);var Uh=class extends pe{constructor(t,e,i,s){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.regionManager=i,this.cursorManager=s,this.id=Bs(this),this.marker=new Yh(this),this.activeStyle=new Wh,this.inactiveStyle=new Wh,this.highlightStyle=new Wh,this.label=new Vh,this.group=new Mo({name:"pagination"}),this.labelNode=new qa,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new _h,this._previousButton=new _h,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:Ya.has.textMetrics?1:0}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const n=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(n.addListener("click",t=>this.onPaginationClick(t)),n.addListener("hover",t=>this.onPaginationMouseMove(t))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(t=>t())}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:o,highlightActive:r}=this,l=(t,e)=>e?a:t===r?o:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){var i;const{size:s}=this.marker;t.size=s,t.fill=e.fill,t.fillOpacity=null!=(i=e.fillOpacity)?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,s=t===e-1,n=0===t;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Gh(this.marker.shape||_h);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}};Uh.className="Pagination",x([Hn(Zn)],Uh.prototype,"marker",2),x([Hn(Zn)],Uh.prototype,"activeStyle",2),x([Hn(Zn)],Uh.prototype,"inactiveStyle",2),x([Hn(Zn)],Uh.prototype,"highlightStyle",2),x([Hn(Zn)],Uh.prototype,"label",2);var jh=class extends pe{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};x([Hn(sa,{optional:!0})],jh.prototype,"maxLength",2),x([Hn(ya)],jh.prototype,"color",2),x([Hn(Aa,{optional:!0})],jh.prototype,"fontStyle",2),x([Hn(wa,{optional:!0})],jh.prototype,"fontWeight",2),x([Hn(sa)],jh.prototype,"fontSize",2),x([Hn(ta)],jh.prototype,"fontFamily",2),x([Hn(Jn,{optional:!0})],jh.prototype,"formatter",2);var Hh=class extends pe{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};x([ro(t=>{var e;return null==(e=t.parent)?void 0:e.onMarkerShapeChange()})],Hh.prototype,"shape",2),x([Hn(sa)],Hh.prototype,"size",2),x([Hn(sa)],Hh.prototype,"padding",2),x([Hn(sa,{optional:!0})],Hh.prototype,"strokeWidth",2),x([Hn(Qn)],Hh.prototype,"enabled",2);var Xh=class extends pe{};x([Hn(sa,{optional:!0})],Xh.prototype,"strokeWidth",2),x([Hn(sa,{optional:!0})],Xh.prototype,"length",2);var $h=class extends pe{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new Hh,this.label=new jh,this.line=new Xh}};x([Hn(sa,{optional:!0})],$h.prototype,"maxWidth",2),x([Hn(sa)],$h.prototype,"paddingX",2),x([Hn(sa)],$h.prototype,"paddingY",2),x([Hn(Qn)],$h.prototype,"toggleSeriesVisible",2),x([Hn(Qn)],$h.prototype,"showSeriesStroke",2),x([Hn(Zn)],$h.prototype,"marker",2),x([Hn(Zn)],$h.prototype,"label",2),x([Hn(Zn)],$h.prototype,"line",2);var qh=class extends pe{};x([Hn(Jn,{optional:!0})],qh.prototype,"legendItemClick",2),x([Hn(Jn,{optional:!0})],qh.prototype,"legendItemDoubleClick",2);var Zh=class extends pe{constructor(t){super(),this.ctx=t,this.id=Bs(this),this.group=new Mo({name:"legend",layer:!0,zIndex:9}),this.itemSelection=Pr.select(this.group,Kh),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new $h,this.listeners=new qh,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Uh(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.regionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=t.regionManager.addRegion("legend",this.group);this.destroyFns.push(e.addListener("click",t=>this.checkLegendClick(t),9),e.addListener("dblclick",t=>this.checkLegendDoubleClick(t),9),e.addListener("hover",t=>this.handleLegendMouseMove(t)),e.addListener("leave",t=>this.handleLegendMouseExit(t)),t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach(t=>t()),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":Ya.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null==(t=this.group.parent)||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:a,marker:{size:o,padding:r,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p},line:g,showSeriesStroke:y}=this.item,m=[...this.data];this.reverseOrder&&m.reverse(),this.itemSelection.update(m);const f=[],x=Za(n),v=null!=a?a:.8*t,b=o+r+i;if(this.itemSelection.each((t,e)=>{var i,s,n;const a=Gh(null!=l?l:e.marker.shape),m=null!=(i=e.marker.enabled)?i:this.item.marker.enabled;t.marker&&t.marker instanceof a||(t.marker=new a),t.markerSize=o,t.spacing=r,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const S=null!=(s=e.itemId)?s:e.id,k=this.getItemLabel(e),D=(null!=k?k:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(D,h,v,b,x,S),y&&void 0!==e.line?(t.lineVisible=!0,t.markerVisible=m,t.setSeriesStrokeOffset(null!=(n=g.length)?n:5)):(t.lineVisible=!1,t.markerVisible=!0),f.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const S=this.size,k=this.oldSize;S[0]=t,S[1]=e,S[0]===k[0]&&S[1]===k[1]||(k[0]=S[0],k[1]=S[1]);const{pages:D,maxPageHeight:M,maxPageWidth:L}=this.updatePagination(f,t,e);this.pages=D,this.maxPageSize=[L-i,M-s];const A=this.pagination.currentPage,w=this.pages[A];this.pages.length<1||!w?this.visible=!1:(this.visible=!0,this.updatePositions(A),this.update())}truncate(t,e,i,s,n,a){const o=t.split("");let r=!1;t.length>e&&(t=""+t.substring(0,e),r=!0);if(Math.floor(s+Ya.getTextSize(t,n).width)>i){let e="";const a=this.getCharacterWidths(n);let l=s+a["..."];for(const t of o){if(a[t]||(a[t]=Ya.getTextSize(t,n).width),l+=a[t],l>i)break;e+=t}t=e,r=!0}return r?(t+="...",this.truncatedItems.add(a)):this.truncatedItems.delete(a),t}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=a.findIndex(t=>t.endIndex>=n);this.pagination.currentPage=Vs(0,c,a.length-1);const{paddingX:d,paddingY:u}=this.item,p=r-d,g=o-u;let y=0,m=-l.y-this.item.marker.size/2;return h?m+=g+8:(y+=-l.x+p+8,m+=(g-l.height)/2),this.pagination.translationX=y,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:r,pages:a}}calculatePagination(t,e,i){var s,n,a;const{paddingX:o,paddingY:r}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new en(0,0,0,0),u=[],p=0,g=0,y=0;const m=t=>{const{width:e,height:i}=t;return e===c.width&&i===c.height},f=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(y++>10){C.warn("unable to find stable legend layout.");break}c=d;const m=e-(h?0:c.width),x=gh({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:m,itemPaddingY:r,itemPaddingX:o,forceResult:f});u=null!=(s=null==x?void 0:x.pages)?s:[],p=null!=(n=null==x?void 0:x.maxPageWidth)?n:0,g=null!=(a=null==x?void 0:x.maxPageHeight)?a:0;const v=u.length;if(this.pagination.visible=v>1,this.pagination.totalPages=v,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(d));return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:a,endIndex:o}=s[t];let r=0,l=0;const h=n.length,c=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var s,g;if(i<a||i>o)return void(t.visible=!1);const y=i-a;let m=0,f=0;d?(m=y%h,f=Math.floor(y/h)):(m=Math.floor(y/c),f=y%c),t.visible=!0;const x=n[m];x&&(l=u*f,r=null!=(s=p[f])?s:0,p[f]=(null!=(g=p[f])?g:0)+x.columnWidth,t.translationX=Math.floor(r),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:s}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(6)}update(){const{label:{color:t},marker:e,line:i,showSeriesStroke:s}=this.item;this.itemSelection.each((n,a)=>{var o,r;const l=a.marker;n.markerFill=l.fill,n.markerStroke=l.stroke,n.markerStrokeWidth=null!=(o=e.strokeWidth)?o:Math.min(2,l.strokeWidth),n.markerFillOpacity=l.fillOpacity,n.markerStrokeOpacity=l.strokeOpacity,n.opacity=a.enabled?1:.5,n.color=t;const{line:h}=a;s&&void 0!==h&&(n.lineStroke=h.stroke,n.lineStrokeOpacity=h.strokeOpacity,n.lineStrokeWidth=null!=(r=i.strokeWidth)?r:Math.min(2,h.strokeWidth),n.lineLineDash=h.lineDash)})}getDatumForPoint(t,e){const i=[],s={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible)continue;if(!(n instanceof Kh))continue;const a=n.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(t,e))return n.datum;const o=t-a.x-this.item.paddingX/2,r=e-a.y-this.item.paddingY/2,l=u(o,2)+u(r,2);o>=0&&r>=0&&l<s.dist&&(s.dist=l,s.datum=n.datum),i.push(a)}if(en.merge(i).containsPoint(t,e))return s.datum}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{chartService:i,highlightManager:s},item:{toggleSeriesVisible:n},preventHidingAll:a}=this,o=this.getDatumForPoint(t.offsetX,t.offsetY);if(!o)return;const{id:r,itemId:l,enabled:h}=o,c=i.series.find(t=>t.id===r);if(!c)return;t.consume();let d=h;if(n){if(d=!h,a&&!d){i.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length<2&&(d=!0)}this.ctx.chartEventManager.legendItemClick(c,l,d,o.legendItemName)}d?s.updateHighlight(this.id,{series:c,itemId:l,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:d,itemId:l,seriesId:c.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},item:{toggleSeriesVisible:n}}=this;if("integrated"===s.mode)return;const a=this.getDatumForPoint(t.offsetX,t.offsetY);if(!a)return;const{id:o,itemId:r,seriesId:l}=a,h=s.series.find(t=>t.id===o);if(h){if(t.consume(),n){const t=s.series.flatMap(t=>t.getLegendData("category")),i=t.filter(t=>t.enabled).length,n=t.find(t=>t.itemId===r&&t.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(h,r,null!=(e=null==n?void 0:n.enabled)&&e,i,null==n?void 0:n.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:r,seriesId:h.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;const{offsetX:a,offsetY:o}=t;t.consume();const r=this.getDatumForPoint(a,o);if(void 0===r)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const l=r?this.ctx.chartService.series.find(t=>t.id===(null==r?void 0:r.id)):void 0;r&&this.truncatedItems.has(null!=(e=r.itemId)?e:r.id)?this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:a,offsetY:o,lastPointerEvent:t,showArrow:!1,addCustomClass:!1},ho({content:this.getItemLabel(r)})):this.ctx.tooltipManager.removeTooltip(this.id),(s||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==r?void 0:r.enabled)&&l?this.ctx.highlightManager.updateHighlight(this.id,{series:l,itemId:null==r?void 0:r.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(t){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,s]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,s);const n=this.computePagedBBox(),a=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-n.height;case"right":default:return t.width-n.width}};if(this.visible){let i,s;switch(this.position){case"top":case"bottom":i=(t.width-n.width)/2,s=a(),e.shrink(n.height,this.position);break;case"left":case"right":default:i=a(),s=(t.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+t.x+i),this.group.translationY=Math.floor(-n.y+t.y+s)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i;let n,a;switch(this.position){case"top":case"bottom":const t=s<1?Math.min(.5,1/s*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,a=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const o=s>1?Math.min(.5,.25*s):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*o),a=this.maxHeight?Math.min(this.maxHeight,i):i}return[n,a]}};Zh.className="Legend",x([Hn(Zn)],Zh.prototype,"pagination",2),x([Hn(Zn)],Zh.prototype,"item",2),x([Hn(Zn)],Zh.prototype,"listeners",2),x([ro(t=>t.updateGroupVisibility()),Hn(Qn)],Zh.prototype,"enabled",2),x([Hn(La)],Zh.prototype,"position",2),x([Hn(sa,{optional:!0})],Zh.prototype,"maxWidth",2),x([Hn(sa,{optional:!0})],Zh.prototype,"maxHeight",2),x([Hn(Qn,{optional:!0})],Zh.prototype,"reverseOrder",2),x([Hn(Pa(["horizontal","vertical"],"an orientation"),{optional:!0})],Zh.prototype,"orientation",2),x([Hn(Qn,{optional:!0})],Zh.prototype,"preventHidingAll",2),x([Hn(sa)],Zh.prototype,"spacing",2);var Qh=["top","right","bottom","left"],Jh=["category","grouped-category","number","log","time"];var tc=class{constructor(t,e,i){this.className=t,this.parentElement=e,this.animationManager=i,this.darkTheme=!1}show(t){var e,i;this.element||(this.element=this.createElement("div"),this.element.classList.add(this.className,"ag-chart-overlay")),this.element.classList.toggle("ag-chart-dark-overlay",this.darkTheme);const{element:s}=this;if(s.style.position="absolute",s.style.left=t.x+"px",s.style.top=t.y+"px",s.style.width=t.width+"px",s.style.height=t.height+"px",this.renderer)s.innerHTML=this.renderer();else{const t=this.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!=(e=this.text)?e:"No data to display",s.replaceChildren(t),this.animationManager.animate({from:0,to:1,phase:"add",id:"overlay",groupId:"opacity",onUpdate(t){s.style.opacity=String(t)},onStop(){s.style.opacity="1"}})}null==(i=this.parentElement)||i.append(s)}hide(){if(!this.element)return;const t=this.element;this.animationManager.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){t.style.opacity=String(e)},onStop(){t.remove()}}),this.element=void 0}createElement(t,e){return this.parentElement.ownerDocument.createElement(t,e)}};x([Hn(Jn,{optional:!0})],tc.prototype,"renderer",2),x([Hn(ta,{optional:!0})],tc.prototype,"text",2),x([Hn(Qn)],tc.prototype,"darkTheme",2);var ec=class t{constructor(e,i){this.loading=new tc("ag-chart-loading-overlay",e,i),this.loading.text="Loading data...",this.loading.renderer=()=>this.renderLoadingSpinner(e,i),this.noData=new tc("ag-chart-no-data-overlay",e,i),this.noVisibleSeries=new tc("ag-chart-no-visible-series",e,i),this.noVisibleSeries.text="No visible series",t.overlayDocuments.indexOf(e.ownerDocument)<0&&(lo(e.ownerDocument,"\n.ag-chart-overlay {\n    color: #181d1f;\n}\n\n.ag-chart-overlay.ag-chart-dark-overlay {\n    color: #ffffff;\n}\n\n.ag-chart-overlay--loading {\n    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */\n}\n\n.ag-chart-overlay__loading-background {\n    background: white; /* DEFAULT_BACKGROUND_FILL */\n}\n\n.ag-chart-overlay.ag-chart-dark-overlay .ag-chart-overlay__loading-background {\n    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */\n}\n"),t.overlayDocuments.push(e.ownerDocument))}destroy(){this.loading.hide(),this.noData.hide(),this.noVisibleSeries.hide()}renderLoadingSpinner(t,e){var i;const s=this.createElement(t,"div");s.className="ag-chart-overlay--loading",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.flexDirection="column",s.style.height="100%",s.style.boxSizing="border-box",s.style.font="13px Verdana, sans-serif",s.style.userSelect="none",s.style.animation=`ag-charts-loading ${An.animationDuration*e.defaultDuration}ms linear 50ms both`;const n=this.createElement(s,"span");n.style.width="45px",n.style.height="40px",n.style.backgroundImage=""+["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),n.style.backgroundSize="10px 400%",n.style.backgroundRepeat="no-repeat",n.style.animation="ag-charts-loading-matrix 1s infinite linear";const a=this.createElement(s,"p");a.style.marginTop="1em",a.innerText=null!=(i=this.loading.text)?i:"Loading data...";const o=this.createElement(t,"div");o.className="ag-chart-overlay__loading-background",o.style.position="absolute",o.style.top="0",o.style.right="0",o.style.bottom="0",o.style.left="0",o.style.opacity="0.5",o.style.zIndex="-1";const r=this.createElement(s,"style");return r.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(r,n,a,o),s.outerHTML}createElement(t,e,i){return t.ownerDocument.createElement(e,i)}};ec.overlayDocuments=[];var ic=ec;function sc(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function nc(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:t=>sc(t)}}function ac(t,e,i){return{id:e,scopes:[t.id],type:"aggregate",matchGroupIds:i?[i]:void 0,aggregateFunction:t=>sc(t),groupAggregateFunction:(t,e=[0,0])=>{var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e}}}function oc(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:t=>Tl(t)}}function rc(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1]}}function lc(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e}}}function hc(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:t=>sc(t).map(e=>e/t.length)}}function cc(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>sc(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}function dc(t,e,i,s){const n={id:e,scopes:[t.id],matchGroupIds:s?[s]:void 0,type:"aggregate",aggregateFunction:(t,e=[])=>{const s=e[1]-e[0];return i.aggregateFunction(t).map(t=>t/s)}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function uc(t){return()=>{let e=0;return i=>Gt(i)?(e+=t?Math.max(0,i):i,e):i}}function pc(){return()=>{let t=0;return e=>{if(!Gt(e))return e;const i=t;return t+=e,i}}}var gc=new Map;function yc(t,e){var i,s,n;const a=JSON.stringify(t,null,0);return gc.has(e)||gc.set(e,new Map),(null==(i=gc.get(e))?void 0:i.has(a))||null==(s=gc.get(e))||s.set(a,e(t)),null==(n=gc.get(e))?void 0:n.get(a)}var mc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s=i.keys[0],n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n<e?n:e}}},fc={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,s,n;const a=[...null!=(i=null==(e=t.domain.aggValues)?void 0:e[0])?i:[0,0]];for(const[e,i]of null!=(n=null==(s=t.domain.aggValues)?void 0:s.slice(1))?n:[])e<a[0]&&(a[0]=e),i>a[1]&&(a[1]=i);return a}},xc={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const s=t[i]-e[i];if(0!==s)return s}return 0})}};function vc({normaliseTo:t,mode:e}){const i=(e,i)=>{const s=e*t/i;return s>=0?Math.min(t,s):Math.max(-t,s)};return()=>()=>(t,s)=>{const n=[0,0];for(const i of s){const s=t[i],a=s<0?0:1;"sum"===e?n[a]+=s:n[a]=0===a?Math.min(n[a],s):Math.max(n[a],s)}const a=Math.max(Math.abs(n[0]),n[1]);for(const e of s)t[e]=i(t[e],a)}}function bc(t,e,i,s="sum"){return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:yc({normaliseTo:i,mode:s},vc)}}function Sc({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const n=t[1]-t[0],a=(i,s,a)=>{const o=t[0]+(i-s)/a*n;return 0===a?e:o>=t[1]?t[1]:o<t[0]?t[0]:o};return()=>(e,n)=>{let[o,r]=e.domain.values[n];null!=i&&(o=i),null!=s&&(r=s);const l=r-o;e.domain.values[n]=[t[0],t[1]];for(const t of e.data){let i=t.values;"ungrouped"===e.type&&(i=[i]);for(const t of i)t[n]=a(t[n],o,l)}}}function kc(t,e,i,s,n,a){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:yc({normaliseTo:i,rangeMin:n,rangeMax:a,zeroDomain:s},Sc)}}function Dc(t,e=[]){return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var s;const{keys:n,values:a}=i.defs,{input:o,data:r}=i;let l=!0,h=!0;const c=[];for(let i=0;i<a.length;i++)(null==(s=a[i].scopes)?void 0:s.some(e=>e===t.id))&&e.some(t=>a[i].id===t)&&c.push([i,a[i]]);const d=(t,e,s)=>{var n;if("category"===e.valueType){const e=i.domain[s][t];return void(l&&(l=e.length===o.count))}let a=null==(n=r[0])?void 0:n[s][t];for(let e=1;(l||h)&&e<r.length;e++){const i=r[e][s][t];h&&(h=a<=i),l&&(l=a!==i),a=i}};for(let t=0;(l||h)&&t<n.length;t++)d(t,n[t],"keys");for(let t=0;(l||h)&&t<c.length;t++){const[e,i]=c[t];d(e,i,"values")}return{uniqueKeys:l,orderedKeys:h}}}}function Mc({mode:t,separateNegative:e}){return()=>()=>(i,s)=>{const n=[0,0];for(const a of s){const s=i[a],o=Hs(s)&&e?0:1;Gt(s)&&("normal"===t&&(n[o]+=s),i[a]=n[o],"trailing"===t&&(n[o]+=s))}}}function Lc({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(n,a)=>{let o=0;for(const r of a){const a=n[r],l=s&&"current"===e?0:i[r];i[r]=a;const h="current"===e?a:l;Gt(a)&&Gt(l)?("normal"===t&&(o+=h),n[r]=o,"trailing"===t&&(o+=h)):n[r]=o}s=!1}}}function Ac(t,e,i,s,n=!1){let a;if(i.startsWith("window")){a=yc({mode:i.endsWith("-trailing")?"trailing":"normal",sum:s},Lc)}else a=yc({mode:i,separateNegative:n},Mc);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:a}}function wc(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{const s={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,a=new Map,o=new Map,r=new Map,l=new Map,h=new Map,c=new Map;for(let s=0;s<Math.max(t.data.length,i.data.length);s++){const d=t.data[s],u=i.data[s],p=d?Nc(d.keys):"",g=u?Nc(u.keys):"";p!==g?(r.has(g)?(!e&&ks(r.get(g).values,u.values)||(o.set(g,u),h.set(g,s),n.set(g,u)),r.delete(g),c.delete(g)):u&&(a.set(g,u),l.set(g,s)),a.has(p)?(!e&&ks(a.get(p).values,d.values)||(o.set(p,d),h.set(p,s),n.set(p,d)),a.delete(p),l.delete(p)):d&&(o.delete(p),h.delete(p),r.set(p,d),c.set(p,s))):ks(d.values,u.values)||(o.set(g,u),h.set(g,s))}return s.added=Array.from(a.keys()),s.updated=Array.from(o.keys()),s.removed=Array.from(r.keys()),s.moved=Array.from(n.keys()),s.addedIndices=Array.from(l.values()),s.updatedIndices=Array.from(h.values()),s.removedIndices=Array.from(c.values()),s.changed=s.added.length>0||s.updated.length>0||s.removed.length>0,s}}}function Nc(t){return Ct(t)?t.map(t=>Ro(t)).join("___"):Ro(t)}var Cc=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(Cc||{});function Ic(t){return null!=Oo(t,!0)}function Tc(t){return null!=Oo(t,!1)}function Ec(t,e,i,s={}){return g({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?Ic:Tc},s)}function Oc(t,e,i,s={}){return g({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?Ic:Tc},s)}function Rc(t,e,i={}){const s=i,{min:n=-1/0,max:a=1/0}=s,o=m(s,["min","max"]);return g({scopes:[t.id],type:"value",property:e,valueType:"range",validation:Ic,processor:()=>t=>Gt(t)?Vs(n,t,a):t},o)}function Pc(t,e,i,s={}){return y(g({},Oc(t,e,i,s)),{processor:()=>{let t=0;return e=>{const i=t;return t=e,i}}})}function _c(){return()=>{let t=0;return e=>{const i=t;return t=e,i}}}function Fc(t,e,i,s={}){const n=s,{onlyPositive:a}=n,o=m(n,["onlyPositive"]);return y(g({},Oc(t,e,i,o)),{processor:uc(a)})}function Bc(t,e,i,s={}){return y(g({},Oc(t,e,i,s)),{processor:pc()})}function zc(t,e,i,s,n="current",a){return[Oc(t,e,i,a),Ac(t,a.groupId,s,n,a.separateNegative),...null!=a.rangeId?[oc(t,a.rangeId,a.groupId)]:[]]}var Gc=class{constructor(t,e,{datum:i},s){this.type=t,this.event=e,this.datum=i,this.seriesId=s.id}},Kc=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},Vc=class extends Dl{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeClickEvent=Gc,this.internalId=Bs(this),this.rootGroup=new Mo({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new Jo,this._declarationOrder=-1,this.seriesListeners=new zl;const{moduleCtx:e,useLabelLayer:i=!1,pickModes:s=[1],directionKeys:n={},directionNames:a={},contentGroupVirtual:o=!0,canHaveAxes:r=!1}=t;this.ctx=e,this.directionKeys=n,this.directionNames=a,this.canHaveAxes=r,this.contentGroup=this.rootGroup.appendChild(new Mo({name:this.internalId+"-content",layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new Mo({name:this.internalId+"-highlight",layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new Mo({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Mo({name:"highlightLabel",zIndex:10})),this.pickModes=s,this.labelGroup=this.rootGroup.appendChild(new Mo({name:this.internalId+"-series-labels",layer:i,zIndex:7})),this.annotationGroup=new Mo({name:this.id+"-annotation",layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var t,e;return null!=(e=null==(t=this.properties)?void 0:t.id)?e:this.internalId}get type(){var t;return null!=(t=this.constructor.type)?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!=(t=this._data)?t:this._chartData}set visible(t){this.properties.visible=t,this.visibleChanged()}get visible(){return this.properties.visible}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:n}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:n,seriesGrouping:e}),this.fireEvent(new Kc(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=null==e?void 0:e[i],n=[];if(!s)return n;const a=(...t)=>{for(const e of t)Array.isArray(e)?a(...e):"object"==typeof e?a(...Object.values(e)):n.push(e)};return a(...s.map(t=>this.properties[t])),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapValues(e=>e.getDomain(t));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.properties.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!=(e=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight())?e:{};return null==i?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapValues(t=>t.getTooltipParams()).reduce((t,e)=>g(g({},e),t),{})}pickNode(t,e){const{pickModes:i,visible:s,rootGroup:n}=this;if(s&&n.visible)for(const s of i){if(e&&!e.includes(s))continue;let i;switch(s){case 0:i=this.pickNodeExactShape(t);break;case 1:case 2:i=this.pickNodeMainAxisFirst(t,2===s);break;case 3:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:s,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return y(g({},this.ctx),{series:this})}getLabelText(t,e,i=String){var s;return t.formatter&&null!=(s=this.ctx.callbackCache.call(t.formatter,g({seriesId:this.id},e)))?s:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var s,n;const a=jt({size:null!=(n=null==(s=e.datum.point)?void 0:s.size)?n:0},i);if(t.formatter){return jt(this.ctx.callbackCache.call(t.formatter,y(g(g({seriesId:this.id},a),e),{datum:e.datum.datum})),a)}return a}updateMarkerStyle(t,e,i,s=e.getStyle(),{applyTranslation:n=!0}={}){const{point:a}=i.datum,o=this.getMarkerStyle(e,i,s),r=this.visible&&o.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);n?t.setProperties(y(g({visible:r},o),{translationX:null==a?void 0:a.x,translationY:null==a?void 0:a.y})):t.setProperties(g({visible:r},o)),"function"!=typeof e.shape||t.dirtyPath||(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}get nodeDataDependencies(){var t;return null!=(t=this._nodeDataDependencies)?t:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=null!=t?t:{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,n=null!=me(this.nodeDataDependencies,s);return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}};Vc.highlightedZIndex=1e12,x([oo({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Vc.prototype,"seriesGrouping",2);var Wc=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}layoutComplete({clipSeries:t,series:{paddedRect:e}}){const{seriesArea:i,seriesRoot:s}=this.chartLike;i.clip||t?s.setClipRectInGroupCoordinateSpace(e):s.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,s,n;const{title:a,subtitle:o,footnote:r}=this.chartLike,l=t.clone(),h=e=>{var i;const s=t.height/10,n=null!=(i=e.lineHeight)?i:e.fontSize*qa.defaultLineHeightRatio,a=t.width,o=Math.max(n,s);e.computeTextWrap(a,o)},c=t=>"left"===t?l.x:"right"===t?l.x+l.width:("center"!==t&&C.error("invalid textAlign value: "+t),l.x+l.width/2),d=(t,e)=>{const i=l.y;t.node.x=c(t.textAlign),t.node.y=i,t.node.textBaseline="top",h(t);const s=t.node.computeBBox(),n=Math.ceil(s.y-i+s.height+e);l.shrink(n,"top")};if(o&&(o.node.visible=null!=(e=o.enabled)&&e),a&&(a.node.visible=a.enabled,a.node.visible)){const t=(null==o?void 0:o.node.visible)?go.SMALL_PADDING:go.LARGE_PADDING;d(a,null!=(i=a.spacing)?i:t)}return o&&o.node.visible&&d(o,null!=(s=o.spacing)?s:0),r&&(r.node.visible=r.enabled,r.node.visible&&((t,e)=>{const i=l.y+l.height;t.node.x=c(t.textAlign),t.node.y=i,t.node.textBaseline="bottom",h(t);const s=t.node.computeBBox(),n=Math.ceil(i-s.y+e);l.shrink(n,"bottom")})(r,null!=(n=r.spacing)?n:0)),{shrinkRect:l}}},Yc=class{constructor(t,e,i,s){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return b(this,null,(function*(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:null==e?void 0:e.min,windowEnd:null==e?void 0:e.max})}))}getValidAxis(){return this.chart.axes.find(t=>"time"===t.type)}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return(!i||e.min!==i.min||e.max!==i.max)&&(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){var i,s;const n=null==(s=(i=t.scale).getDomain)?void 0:s.call(i);if(!e||!n||0===n.length||isNaN(Number(n[0])))return;const a=Number(n[1])-Number(n[0]);return{min:new Date(Number(n[0])+a*e.min),max:new Date(Number(n[0])+a*e.max)}}},Uc=class{constructor(t,e,i,s){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutService=s,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}destroy(){this.destroyFns.forEach(t=>t())}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some(t=>{var e;return null==(e=t.data)?void 0:e.length}),s=this.chartLike.series.some(t=>t.visible);this.toggleOverlay(this.overlays.loading,t,e),this.toggleOverlay(this.overlays.noData,t,!e&&!i),this.toggleOverlay(this.overlays.noVisibleSeries,t,i&&!s)}toggleOverlay(t,e,i){i&&e?t.show(e):t.hide()}},jc=class extends zl{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t})}},Hc=Cs.create(!0,"opts"),Xc=class extends pe{constructor(){super(...arguments),this.padding=new Ml(0)}};x([Hn(Qn,{optional:!0})],Xc.prototype,"clip",2),x([Hn(Zn)],Xc.prototype,"padding",2);var $c=class t extends Dl{constructor(t,e){var i;super(),this.id=Bs(this),this.seriesRoot=new Mo({name:this.id+"-Series-root"}),this.debug=Cs.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new Ml(20),this.seriesArea=new Xc,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.highlightManager=new nh,this.syncManager=new hh(this),this.zoomManager=new dh,this.modules=new Map,this.legends=new Map,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()})}acquireImmediately(t){return b(this,null,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return b(this,null,(function*(){return this.acquire(()=>b(this,null,(function*(){})))}))}dispatchNext(){return b(this,null,(function*(){var t,e;this.available=!1;let[i,s]=null!=(t=this.acquireQueue.shift())?t:[];for(;i;){try{yield i(),null==s||s()}catch(t){C.error("mutex callback error",t),null==s||s()}[i,s]=null!=(e=this.acquireQueue.shift())?e:[]}this.available=!0}))}},this.updateRequestors={},this.performUpdateTrigger=Ll((t,e=0)=>setTimeout(t,e),t=>b(this,[t],(function*({count:t}){this.destroyed||this.updateMutex.acquire(()=>b(this,null,(function*(){try{yield this.performUpdate(t)}catch(t){C.error("update error",t)}})))}))),this.axes=[],this.series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return Ll((t,e)=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&(this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0)}),this.onSeriesNodeClick=t=>{const e=y(g({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=y(g({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.seriesGroupingChanged=t=>{if(!(t instanceof Kc))return;const{series:e,seriesGrouping:i,oldGrouping:s}=t;null!=e.rootGroup.parent&&this.seriesLayerManager.changeGroup({internalId:e.internalId,type:e.type,rootGroup:e.rootGroup,highlightGroup:e.highlightGroup,annotationGroup:e.annotationGroup,getGroupZIndexSubOrder:t=>e.getGroupZIndexSubOrder(t),seriesGrouping:i,oldGrouping:s})},this.chartOptions=t;const{window:s,document:n}=t.specialOverrides,a=null==e?void 0:e.scene,o=null!=(i=null==e?void 0:e.element)?i:n.createElement("div"),r=null==e?void 0:e.container,l=new Mo({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGridGroup=new Mo({name:"Axes-Grids",layer:!0,zIndex:1}),l.appendChild(this.axisGridGroup),this.axisGroup=new Mo({name:"Axes",layer:!0,zIndex:2}),l.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=null!=a?a:new Sl(this.chartOptions.specialOverrides),this.scene.root=l,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new Jl,this.contextMenuRegistry=new th,this.cursorManager=new eh(o),this.highlightManager=new nh,this.interactionManager=new ql(o,n,s),this.regionManager=new class{constructor(t){this.interactionManager=t,this.eventHandler=t=>this.processEvent(t),this.regions=new oh,this.destroyFns=[],Yl.forEach(e=>this.destroyFns.push(t.addListener(e,this.eventHandler,15)))}destroy(){this.destroyFns.forEach(t=>t()),this.currentRegion=void 0;for(const t of this.regions)t.listeners.destroy();this.regions.clear()}pushRegion(t,e){const i={name:t,listeners:new rh};return this.regions.add(i,e),i}addRegion(t,e){const i=this.pushRegion(t,e),{interactionManager:s}=this;return new class{addListener(t,e,n=8){return i.listeners.addListener(t,t=>{if(!t.consumed){s.getState()&n&&e(t)}})}}}processEvent(t){const{currentRegion:e}=this,i=this.pickRegion(t.offsetX,t.offsetY);if(void 0!==e&&(null==i?void 0:i.name)!==e.name&&(null==e||e.listeners.dispatch("leave",y(g({},t),{type:"leave"}))),void 0!==i){(()=>b(this,null,(function*(){return i.listeners.dispatch(t.type,t)})))().catch(t=>C.errorOnce(t))}this.currentRegion=i}pickRegion(t,e){const i=this.regions.find(t,e);return i.length>0?i[0]:void 0}}(this.interactionManager),this.gestureDetector=new sh(o),this.layoutService=new ph,this.updateService=new jc((t=0,e)=>this.update(t,e)),this.seriesStateManager=new class{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:s}){var n;e&&(null!=(n=this.groups)[s]||(n[s]={}),this.groups[s][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){var s;if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const n=new Set,a=new Set;for(const[i,o]of Object.entries(null!=(s=this.groups[t])?s:{}))o.visible&&(n.add(o.grouping.groupIndex),o.grouping.groupIndex===e.groupIndex&&a.add(o.grouping.stackIndex));const o=[...n.values()];return o.sort((t,e)=>t-e),{visibleGroupCount:o.length,visibleSameStackCount:a.size,index:o.indexOf(e.groupIndex)}}},this.seriesLayerManager=new class{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,s;const{internalId:n,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l,seriesGrouping:h}=t,{groupIndex:c=n}=null!=h?h:{};if(null!=this.series[n])throw new Error("AG Charts - series already has an allocated layer: "+this.series[n]);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!=(e=this.groups)[a]||(e[a]={});const d=this.lookupIdx(c);let u=this.groups[a][d];return u||(u=null!=(s=(i=this.groups[a])[d])?s:i[d]={seriesIds:[],group:this.rootGroup.appendChild(new Mo({name:a+"-content",layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new Mo({name:a+"-highlight",layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new Mo({name:a+"-annotation",layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[n]={layerState:u,seriesConfig:t},u.seriesIds.push(n),u.group.appendChild(o),u.highlight.appendChild(r),u.annotation.appendChild(l),u.group}changeGroup(t){var e,i;const{internalId:s,seriesGrouping:n,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l,oldGrouping:h}=t,{groupIndex:c=s}=null!=n?n:{};(null==(i=null==(e=this.groups[a])?void 0:e[c])?void 0:i.seriesIds.includes(s))||(null!=this.series[s]&&this.releaseGroup({internalId:s,seriesGrouping:h,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,s,n,a;const{internalId:o,seriesGrouping:r,rootGroup:l,highlightGroup:h,annotationGroup:c,type:d}=t,{groupIndex:u=o}=null!=r?r:{};if(null==this.series[o])throw new Error("AG Charts - series doesn't have an allocated layer: "+o);const p=this.lookupIdx(u),g=null!=(s=null==(e=this.groups[d])?void 0:e[p])?s:null==(i=this.series[o])?void 0:i.layerState;if(g&&(g.seriesIds=g.seriesIds.filter(t=>t!==o),g.group.removeChild(l),g.highlight.removeChild(h),g.annotation.removeChild(c)),0===(null==g?void 0:g.seriesIds.length))this.rootGroup.removeChild(g.group),this.rootGroup.removeChild(g.highlight),this.rootGroup.removeChild(g.annotation),delete this.groups[d][p],delete this.groups[d][o];else if((null==g?void 0:g.seriesIds.length)>0){const t=null==(a=this.series[null==(n=null==g?void 0:g.seriesIds)?void 0:n[0]])?void 0:a.seriesConfig;g.group.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}(this.seriesRoot),this.callbackCache=new class{constructor(){this.cache=new WeakMap}call(t,...e){let i,s=this.cache.get(t);const n=()=>{try{const n=t(...e);return s&&null!=i&&s.set(i,n),n}catch(t){return void C.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return n()}return null==s&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):n()}invalidateCache(){this.cache=new WeakMap}},this.animationManager=new Ql(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.dataService=new Gl(this.animationManager),this.overlays=new ic(this.element,this.animationManager),this.processors=[new Wc(this,this.layoutService),new Yc(this,this.dataService,this.updateService,this.zoomManager),new Uc(this,this.overlays,this.dataService,this.layoutService)],this.tooltip=new po(this.scene.canvas.element,n,s,n.body),this.tooltipManager=new ch(this.tooltip,this.interactionManager),this.highlight=new Nl,this.container=r,this.attachLegend("category",Zh),this.legend=this.legends.get("category");const{All:h}=Hl;wl.observe(this.element,t=>this.rawResize(t)),this._destroyFns.push(this.dataService.addListener("data-load",t=>{this.data=t.data}),this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.resetPointer()),this.interactionManager.addListener("drag",()=>this.resetPointer()),this.interactionManager.addListener("contextmenu",t=>this.onContextMenu(t),h),this.animationManager.addListener("animation-frame",()=>{this.update(6)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",()=>this.update(2,{forceNodeDataRefresh:!0,skipAnimations:!0})))}static getInstance(e){return t.chartsInstances.get(e)}onAutoSizeChange(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}getOptions(){var t;return null!=(t=this.queuedUserOptions.at(-1))?t:this.userOptions}addModule(t){if(this.modules.has(t.optionsKey))throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());if("legend"===t.type){const i=e;this.legends.set(t.identifier,i),i.attachLegend(this.scene.root)}this.modules.set(t.optionsKey,e)}removeModule(t){var e;"legend"===t.type&&this.legends.delete(t.identifier),null==(e=this.modules.get(t.optionsKey))||e.destroy(),this.modules.delete(t.optionsKey)}attachLegend(t,e){const i=new e(this.getModuleContext());this.legends.set(t,i),i.attachLegend(this.scene.root)}isModuleEnabled(t){return this.modules.has(t.optionsKey)}getModuleContext(){return{window:this.chartOptions.specialOverrides.window,document:this.chartOptions.specialOverrides.document,scene:this.scene,animationManager:this.animationManager,chartEventManager:this.chartEventManager,contextMenuRegistry:this.contextMenuRegistry,cursorManager:this.cursorManager,highlightManager:this.highlightManager,interactionManager:this.interactionManager,regionManager:this.regionManager,gestureDetector:this.gestureDetector,tooltipManager:this.tooltipManager,syncManager:this.syncManager,zoomManager:this.zoomManager,chartService:this,dataService:this.dataService,layoutService:this.layoutService,updateService:this.updateService,seriesStateManager:this.seriesStateManager,callbackCache:this.callbackCache}}resetAnimations(){var t;this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,null==(t=this.animationManager)||t.reset()}skipAnimations(){this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){if(this.destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;this.performUpdateType=7,this._destroyFns.forEach(t=>t()),this.processors.forEach(t=>t.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),this.legends.forEach(t=>t.destroy()),this.legends.clear(),this.overlays.destroy(),wl.unobserve(this.element);for(const t of this.modules.values())null==t||t.destroy();return this.modules.clear(),this.regionManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.zoomManager.destroy(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this.animationRect=void 0,this.animationManager.reset(),this.syncManager.destroy(),this.destroyed=!0,Object.freeze(this),i}resetPointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>b(this,null,(function*(){this.destroyed||(yield t(this),this.destroyed||this._pendingFactoryUpdatesCount--)}))))}update(t=0,e){var i,s;const{forceNodeDataRefresh:n=!1,skipAnimations:a,seriesToUpdate:o=this.series,newAnimationBatch:r}=null!=e?e:{};n&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of o)this.seriesToUpdate.add(t);if(a&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=null!=(i=null==e?void 0:e.skipSync)&&i,this.debug.check()){let e=null!=(s=(new Error).stack)?s:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}performUpdate(t){return b(this,null,(function*(){const{performUpdateType:e,extraDebugStats:i}=this,s=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&e<6&&(this.animationManager.startBatch(this._performUpdateSkipAnimations),this.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",Cl[e]);const n={start:performance.now()};switch(e){case 0:case 1:yield this.updateData(),n["\u2b07\ufe0f"]=performance.now();case 2:yield this.processData(),this.resetPointer(!0),n["\ud83c\udfed"]=performance.now();case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(s))break;yield this.processLayout(),n["\u2316"]=performance.now();case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:t}=this;yield Promise.all(s.map(e=>e.update({seriesRect:t}))),n["\ud83e\udd14"]=performance.now();case 5:if(this.checkUpdateShortcut(5))break;const a=this.tooltipManager.getTooltipMeta(this.id);e<=4&&void 0!==a&&this.handlePointer(a.lastPointerEvent,!0),n["\u2196"]=performance.now();case 6:if(this.checkUpdateShortcut(6))break;i.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:n,extraDebugStats:i}),this.extraDebugStats={};case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const a=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(a-n.start))/100,count:t,performUpdateType:Cl[e]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(C.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*u(e,2);if(e<8)return this.update(3,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onSeriesChange(t,e){var i,s;const n=null!=(i=null==e?void 0:e.filter(e=>!t.includes(e)))?i:[];this.destroySeries(n),null==(s=this.seriesLayerManager)||s.setSeriesCount(t.length);for(const i of t){if(null==e?void 0:e.includes(i))continue;null==i.rootGroup.parent&&this.seriesLayerManager.requestGroup(i);const t=this;i.chart={get mode(){return t.mode},get isMiniChart(){return!1},get seriesRect(){return t.seriesRect},placeLabels:()=>t.placeLabels()},i.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(i),i.addChartEventListeners()}}destroySeries(t){null==t||t.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t=Ls(this.axes,t=>t.direction);this.series.forEach(e=>{e.directions.forEach(i=>{const s=t[i];if(!s)return void C.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=e.getKeys(i),a=this.findMatchingAxis(s,n);a?e.axes[i]=a:C.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e)for(const t of e)if(i.keys.includes(t))return i}}rawResize(t){var e;let{width:i,height:s}=t;if(i=Math.floor(i),s=Math.floor(s),!this.autoSize)return;if(0===i&&0===s)return;const[n=0,a=0]=null!=(e=this._lastAutoSize)?e:[];n===i&&a===s||(this._lastAutoSize=[i,s],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var s,n,a,o;if(null!=t||(t=null!=(n=this.width)?n:this.autoSize?null==(s=this._lastAutoSize)?void 0:s[0]:this.scene.canvas.width),null!=e||(e=null!=(o=this.height)?o:this.autoSize?null==(a=this._lastAutoSize)?void 0:a[1]:this.scene.canvas.height),this.debug("Chart.resize() from "+i,{width:t,height:e,stack:(new Error).stack}),t&&e&&Gt(t)&&Gt(e)&&this.scene.resize(t,e)){this.resetPointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})}}updateData(){return b(this,null,(function*(){this.series.forEach(t=>t.setChartData(this.data));const t=Array.from(this.modules.values(),t=>{var e;return null==(e=t.updateData)?void 0:e.call(t,{data:this.data})});yield Promise.all(t)}))}processData(){return b(this,null,(function*(){if(this.series.some(t=>t.canHaveAxes)){this.assignAxesToSeries(),this.assignSeriesToAxes();const t=this.modules.get("sync");(null==t?void 0:t.enabled)&&t.syncAxes(this._skipSync)}const t=new Bl(this.mode),e=this.series.map(e=>e.processData(t)),i=Array.from(this.modules.values(),e=>{var i;return null==(i=e.processData)?void 0:i.call(e,{dataController:t})});t.execute(),yield Promise.all([...e,...i]),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const s of this.series){if(!s.visible)continue;const n=s.getLabelData();null!=(i=null==n?void 0:n[0])&&"object"==typeof i.point&&"object"==typeof i.label&&(e.push(n),t.push(s))}var i;const{seriesRect:s}=this,{top:n,right:a,bottom:o,left:r}=this.seriesArea.padding,l=s&&e.length>0?function(t,e,i=5){const s=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const h=s[l]=[],c=t[l];if((null==c?void 0:c.length)&&c[0].label)for(let l=0,d=c.length;l<d;l++){const d=c[l],u=d.label,p=.5*d.point.size,g=d.point.x-.5*u.width,y=d.point.y-p-u.height-i,{width:m,height:f}=u;if(!(!e||(o=y,r=f,(a=g)+m<(n=e).x+n.width&&a>n.x&&o>n.y&&o+r<n.y+n.height)))continue;if(t.some(t=>t.some(t=>Fr(t.point,g,y,m,f))))continue;s.some(t=>t.some(t=>Br(t,g,y,m,f)))||h.push({index:l,text:u.text,x:g,y:y,width:m,height:f,datum:d})}}var n,a,o,r;return s}(e,{x:-r,y:-n,width:s.width+r+a,height:s.height+n+o}):[];return new Map(l.map((e,i)=>[t[i],e]))}updateLegend(){return b(this,null,(function*(){this.legends.forEach((t,e)=>{const i=this.series.filter(t=>t.properties.showInLegend).flatMap(t=>t.getLegendData(e));i.every(t=>"category"===t.legendType)&&"integrated"!==this.mode&&this.validateCategoryLegendData(i),t.data=i})}))}validateCategoryLegendData(t){const e={};t.forEach(t=>{var i,s,n;const a=null==(i=this.series.find(e=>e.id===t.seriesId))?void 0:i.type;a&&(null!=e[a]||(e[a]={}),null!=(s=e[a])[n=t.label.text]||(s[n]=new Set),null!=t.marker.fill&&e[a][t.label.text].add(t.marker.fill))});for(const t of Object.values(e))for(const[e,i]of Object.entries(t))i.size>1&&C.warnOnce(`legend item '${e}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){return b(this,null,(function*(){var t;const e=this.animationRect;yield this.performLayout(),e&&!(null==(t=this.animationRect)?void 0:t.equals(e))&&this.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return b(this,null,(function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new en(0,0,t,e)};i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i);const s=Array.from(this.modules.values(),t=>b(this,null,(function*(){var e;null!=t.performLayout&&(i=yield null==(e=t.performLayout)?void 0:e.call(t,i))})));return yield Promise.all(s),i.shrinkRect}))}pickSeriesNode(t,e,i){var s,n;const a=performance.now(),o=e?[0]:void 0,r=[...this.series].reverse();let l;for(const e of r){if(!e.visible||!e.rootGroup.visible)continue;const{match:n,distance:a}=null!=(s=e.pickNode(t,o))?s:{};if(n&&null!=a&&((!l||l.distance>a)&&a<=(null!=i?i:1/0)&&(l={series:e,distance:a,datum:n}),0===a))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!=(n=this.extraDebugStats.pickSeriesNode)?n:0)+(performance.now()-a)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(6)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||(this.resetPointer(),this.update(6))}onContextMenu(t){this.tooltipManager.removeTooltip(this.id);const{Default:e,ContextMenu:i}=Hl;this.interactionManager.getState()&(e|i)&&this.checkSeriesNodeRange(t,(t,e)=>{this.highlightManager.updateHighlight(this.id,e)})}handlePointer(t,e){if(8!==this.interactionManager.getState())return;const{lastPick:i,hoverRect:s}=this,{offsetX:n,offsetY:a}=t,o=(t=!1)=>{i&&this.resetPointer(t)};e&&this.animationManager.isActive()?o():(null==s?void 0:s.containsPoint(n,a))?(this.handlePointerTooltip(t,o),this.handlePointerNode(t)):o()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:s}=this,{range:n}=s,{offsetX:a,offsetY:o}=t;let r;Gt(n)&&(r=n);const l=this.pickSeriesNode({x:a,y:o},"exact"===n,r);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const h="node"===this.highlight.range||!i||i!==l.datum;let c;h&&(c=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum));const d=null!=r,u=this.tooltip.enabled&&l.series.properties.tooltip.enabled,p="exact"===n&&0===l.distance,g=u&&("nearest"===n||d||p)&&(!h||void 0!==c),y=ch.makeTooltipMeta(t,l.datum);g&&this.tooltipManager.updateTooltip(this.id,y,c)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(4):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(4):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),s=null==i?void 0:i.datum,n=null==s?void 0:s.series.properties.nodeClickRange;let a;Gt(n)&&(a=n);let o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(o?this.highlightManager.updatePicked(this.id,o.datum):this.highlightManager.updatePicked(this.id),s&&"nearest"===n)return e(s.series,s),!0;if("exact"!==n&&(o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,a)),!o)return!1;const r=null!=a,l="exact"===n&&0===o.distance;return!(!r&&!l)&&(e(o.series,o.datum),!0)}changeHighlightDatum(t){var e,i;const s=new Set,{series:n,datum:a}=null!=(e=t.currentHighlight)?e:{},{series:o,datum:r}=null!=(i=t.previousHighlight)?i:{};o&&s.add(o),n&&s.add(n),(null==o?void 0:o.properties.cursor)&&r&&this.cursorManager.updateCursor(o.id),(null==n?void 0:n.properties.cursor)&&a&&this.cursorManager.updateCursor(n.id,n.properties.cursor),this.lastPick=t.currentHighlight;null==n||null==o?this.update(4):this.update(4,{seriesToUpdate:s})}waitForUpdate(t=5e3){return b(this,null,(function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());7!==this.performUpdateType;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield kl(5)}yield this.updateMutex.waitForClearAcquireQueue()}))}getMinRect(){const t=this.series.map(t=>t.getMinRect()).filter(t=>void 0!==t);if(t.length)return new en(0,0,t.reduce((t,e)=>Math.max(t,e.width),0),t.reduce((t,e)=>Math.max(t,e.height),0))}filterMiniChartSeries(t){return null!=t?t.filter(t=>!1!==t.showInMiniChart):t}applyOptions(t){var e,i,s,n,a,o;const r=this.processedOptions,l=t.diffOptions(r),h=t.userOptions;if(null==l)return;Hc("AgChartV2.updateDelta() - applying delta",l);const c=jt(l,r),d=this.applyModules(c),u=["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.label"];(he(l)||de(l))&&u.push("axes"),l.listeners&&this.registerListeners(this,l.listeners),this.applyOptionValues(this,l,{skip:u});let p=!1,g="no-op";l.series&&l.series.length>0&&(g=this.applySeries(this,l.series,null==r?void 0:r.series),p=!0),"replaced"===g&&this.resetAnimations(),this.applyAxes(this,c,r,g)&&(p=!0);const y=!!l.data||"data-change"===g||"replaced"===g,m=Be,f=Object.values(m).some(t=>null!=l[t]),x=null!=l.title&&null!=l.subtitle;p=p||y||f||x,l.data&&(this.data=l.data),(null==(e=l.legend)?void 0:e.listeners)&&Object.assign(this.legend.listeners,l.legend.listeners),l.listeners&&this.updateAllSeriesListeners(),this.chartOptions=t,this.processedOptions=c,this.userOptions=jt(h,this.userOptions);const v=this.modules.get("navigator"),b=this.modules.get("zoom");(null==v?void 0:v.enabled)||(null==b?void 0:b.enabled)||this.zoomManager.updateZoom();const S=null==v?void 0:v.miniChart;if(!0===(null==S?void 0:S.enabled)&&null!=(null==l?void 0:l.series)){const t=this.applySeries(S,this.filterMiniChartSeries(l.series),this.filterMiniChartSeries(null==r?void 0:r.series));this.applyAxes(S,l,r,t,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const e=S.axes,h=e.find(t=>"x"===t.direction);for(const t of e)t.gridLine.enabled=!1,t.label.enabled=t===h,t.tick.enabled=!1,t.interactionEnabled=!1;if(null!=h){const t=null==(s=null==(i=l.navigator)?void 0:i.miniChart)?void 0:s.label,e=null==(o=null==(a=null==(n=l.navigator)?void 0:n.miniChart)?void 0:a.label)?void 0:o.interval;be(h.label,t,{path:"navigator.miniChart.label",skip:["navigator.miniChart.label.interval","navigator.miniChart.label.rotation","navigator.miniChart.label.minSpacing","navigator.miniChart.label.autoRotate","navigator.miniChart.label.autoRotateAngle"]}),be(h.tick,e,{path:"navigator.miniChart.interval",skip:["navigator.miniChart.interval.enabled","navigator.miniChart.interval.width","navigator.miniChart.interval.size","navigator.miniChart.interval.color","navigator.miniChart.interval.interval","navigator.miniChart.interval.step"]});const r=null==e?void 0:e.step;null!=r&&(h.tick.interval=r)}}else!1===(null==S?void 0:S.enabled)&&(S.series=[],S.axes=[]);const k=p||d?1:3;Hc("AgChartV2.applyChartOptions() - update type",Cl[k]),this.update(k,{forceNodeDataRefresh:p,newAnimationBatch:!0})}applyModules(t){let e=!1;for(const i of dt){if("root"!==i.type&&"legend"!==i.type)continue;const s=t[i.optionsKey],n=i.chartTypes.includes(this.constructor.type)&&null!=s;n!==this.isModuleEnabled(i)&&(n?(this.addModule(i),this[i.optionsKey]=this.modules.get(i.optionsKey)):(this.removeModule(i),delete this[i.optionsKey]),e=!0)}return e}applySeries(t,e,i){if(!e)return"no-change";const s=function(t,e,i){var s,n,a;const o=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"],r=(t,e)=>{const i=[t];for(const t of o)t in e&&null!=e[t]&&i.push(`${t}=${e[t]}`);return i.join(";")},l=new Map;let h=0;for(const e of t){const t=r(e.type,e.properties);l.has(t)||l.set(t,[]),null==(s=l.get(t))||s.push([e,h++])}const c=new Map;for(const t of e){const e=r(t.type,t);c.has(e)||c.set(e,[]),null==(n=c.get(e))||n.push(t)}if(![...l.keys()].some(t=>c.has(t)))return{status:"no-overlap",oldKeys:l.keys(),newKeys:c.keys()};const d=[];let u=-1;for(const[t,e]of c.entries())for(const s of e){u++;const e=l.get(t);if(null==e||e.length<1){d.push({opts:s,idx:u,status:"add"}),l.delete(t);continue}const[n,o]=e.shift(),r=me(null!=(a=null==i?void 0:i[o])?a:{},null!=s?s:{});r?d.push({opts:s,series:n,diff:r,idx:o,status:"update"}):d.push({opts:s,series:n,idx:o,status:"no-op"}),0===e.length&&l.delete(t)}for(const t of l.values())for(const[e,i]of t)d.push({series:e,idx:i,status:"remove"});return{status:"overlap",changes:d}}(t.series,e,i);if("no-overlap"===s.status)return Hc("AgChartV2.applySeries() - creating new series instances, status: "+s.status,s),t.series=this.createSeries(e),"replaced";Hc("AgChartV2.applySeries() - matchResult",s);const n=[];for(const t of s.changes){if("add"===t.status){const e=this.createSeries([t.opts])[0];n.push(e),Hc("AgChartV2.applySeries() - created new series",e);continue}if("remove"===t.status){Hc("AgChartV2.applySeries() - removing series at previous idx "+t.idx,t.series);continue}if("no-op"===t.status){n.push(t.series),Hc("AgChartV2.applySeries() - no change to series at previous idx "+t.idx,t.series);continue}const{series:e,diff:i,idx:s}=t;Hc("AgChartV2.applySeries() - applying series diff previous idx "+s,i,e),this.applySeriesValues(e,i),e.markNodeDataDirty(),n.push(e)}for(let t=0;t<n.length;t++)n[t]._declarationOrder=t;Hc("AgChartV2.applySeries() - final series instances",n),t.series=n;const a=s.changes.some(({diff:t})=>t&&(null!=t.seriesGrouping||null!=t.data)),o=s.changes.every(t=>"no-op"===t.status);return a?"data-change":o?"no-op":"updated"}applyAxes(t,e,i,s,n=[]){if(!("axes"in e)||!e.axes)return!1;n=["axes[].type",...n];const{axes:a}=e;return"replaced"!==s&&t.axes.length===a.length&&t.axes.every((t,e)=>t.type===a[e].type)&&he(i)?(t.axes.forEach((t,e)=>{var s,o;const r=me(null!=(o=null==(s=i.axes)?void 0:s[e])?o:{},a[e]);Hc("AgChartV2.applyAxes() - applying axis diff idx "+e,r);const l=`axes[${e}]`;this.applyOptionValues(t,r,{path:l,skip:n})}),!0):(Hc("AgChartV2.applyAxes() - creating new axes instances; seriesStatus: "+s),t.axes=this.createAxis(a,n),!0)}createSeries(t){var e;const i=[],s=this.getModuleContext();for(const n of null!=t?t:[]){const t=null!=(e=n.type)?e:"unknown";if(ne(t)&&!oe(t))continue;const a=Pe(t,s);this.applySeriesOptionModules(a,n),this.applySeriesValues(a,n),i.push(a)}return i}applySeriesOptionModules(t,e){const i=t.createModuleContext(),s=t.getModuleMap();for(const n of dt)"series-option"===n.type&&n.optionsKey in e&&n.seriesTypes.includes(t.type)&&s.addModule(n,t=>new t.instanceConstructor(i))}applySeriesValues(t,e){const i=t.getModuleMap(),s=e,{type:n,data:a,errorBar:o,listeners:r,seriesGrouping:l,showInMiniChart:h}=s,c=m(s,["type","data","errorBar","listeners","seriesGrouping","showInMiniChart"]);t.properties.set(c),"data"in e&&(t.data=e.data),"errorBar"in e&&i.isModuleEnabled("errorBar")&&i.getModule("errorBar").properties.set(e.errorBar),(null==e?void 0:e.listeners)&&this.registerListeners(t,e.listeners),l&&(t.seriesGrouping=g(g({},t.seriesGrouping),l))}createAxis(t,e){const i=new class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(t,e){const{result:i,valid:s,invalid:n}=this;var a;(function(t){return Jh.includes(t.type)})(e)&&("string"==typeof(a=e.position)&&Qh.includes(a)?s.push(t):n.push(t)),i.push(t)}guessInvalidPositions(){const t=this.valid.filter(t=>Jh.includes(t.type)).map(t=>t.position).filter(t=>void 0!==t),e=["top","right","bottom","left"];for(const i of this.invalid){let s=e.pop();for(;t.includes(s)&&void 0!==s;)s=e.pop();if(void 0===s)break;i.position=s}return this.result}},s=this.getModuleContext();let n=0;for(const a of null!=t?t:[]){const t=mt(a.type,s),o=`axes[${n++}]`;this.applyAxisModules(t,a),this.applyOptionValues(t,a,{path:o,skip:e}),i.push(t,a)}return i.guessInvalidPositions()}applyAxisModules(t,e){let i=!1;const s=dt.filter(t=>"axis-option"===t.type),n=t.createModuleContext();for(const a of s){const s=null!=e[a.optionsKey],o=t.getModuleMap();s!==o.isModuleEnabled(a)&&(i=!0,s?(o.addModule(a,t=>new t.instanceConstructor(n)),t[a.optionsKey]=o.getModule(a)):(o.removeModule(a),delete t[a.optionsKey]))}return i}applyOptionValues(t,e,{skip:i,path:s}={}){const n=this.getModuleContext();class a extends go{constructor(){super(),this.registerInteraction(n)}}return be(t,e,{constructors:y(g({},xo.constructors),{title:a,subtitle:a,footnote:a}),constructedArrays:mo.constructedArrays,allowedTypes:g({},xo.allowedTypes),skip:i,path:s})}registerListeners(t,e){t.clearEventListeners();for(const[i,s]of Object.entries(e))Rt(s)&&t.addEventListener(i,s)}};$c.chartsInstances=new WeakMap,$c.NodeValueChangeOptions={newValue(t){var e;null==(e=this.scene.root)||e.appendChild(t.node)},oldValue(t){var e;null==(e=this.scene.root)||e.removeChild(t.node)}},x([oo({newValue(t){this.destroyed||(t.setAttribute("data-ag-charts",""),t.appendChild(this.element),$c.chartsInstances.set(t,this))},oldValue(t){t.removeAttribute("data-ag-charts"),t.removeChild(this.element),$c.chartsInstances.delete(t)}})],$c.prototype,"container",2),x([oo({newValue(t){this.resize(t,void 0,"width option")}})],$c.prototype,"width",2),x([oo({newValue(t){this.resize(void 0,t,"height option")}})],$c.prototype,"height",2),x([oo({newValue(t){this.onAutoSizeChange(t)}}),Hn(Qn)],$c.prototype,"autoSize",2),x([Hn(Zn)],$c.prototype,"padding",2),x([Hn(Zn)],$c.prototype,"seriesArea",2),x([oo($c.NodeValueChangeOptions)],$c.prototype,"title",2),x([oo($c.NodeValueChangeOptions)],$c.prototype,"subtitle",2),x([oo($c.NodeValueChangeOptions)],$c.prototype,"footnote",2),x([Hn(Pa(["standalone","integrated"],"a chart mode"))],$c.prototype,"mode",2),x([oo({changeValue(t,e=[]){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)(null==e?void 0:e.includes(i))||i.attachAxis(this.axisGroup,this.axisGridGroup);this.zoomManager.updateAxes(t)}})],$c.prototype,"axes",2),x([oo({changeValue(t,e){this.onSeriesChange(t,e)}})],$c.prototype,"series",2);var qc=$c,Zc=class extends Vc{isContinuous(){var t,e;return{isContinuousX:bo.is(null==(t=this.axes.x)?void 0:t.scale),isContinuousY:bo.is(null==(e=this.axes.y)?void 0:e.scale)}}getModulePropertyDefinitions(){return this.moduleMap.mapValues(t=>t.getPropertyDefinitions(this.isContinuous())).flat()}requestDataModel(t,e,i){return b(this,null,(function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=yield t.request(this.id,null!=e?e:[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}))}isProcessedDataAnimatable(){var t,e;const i=null==(e=null==(t=this.processedData)?void 0:t.reduced)?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:n}=i;return s&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}},Qc=class extends pe{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};x([Hn(ya,{optional:!0})],Qc.prototype,"fill",2),x([Hn(na,{optional:!0})],Qc.prototype,"fillOpacity",2),x([Hn(ya,{optional:!0})],Qc.prototype,"stroke",2),x([Hn(sa,{optional:!0})],Qc.prototype,"strokeWidth",2),x([Hn(na,{optional:!0})],Qc.prototype,"strokeOpacity",2),x([Hn(Ma,{optional:!0})],Qc.prototype,"lineDash",2),x([Hn(sa,{optional:!0})],Qc.prototype,"lineDashOffset",2);var Jc=class extends pe{};x([Hn(sa,{optional:!0})],Jc.prototype,"strokeWidth",2),x([Hn(na,{optional:!0})],Jc.prototype,"dimOpacity",2),x([Hn(Qn,{optional:!0})],Jc.prototype,"enabled",2);var td=class extends pe{constructor(){super(...arguments),this.color="black"}};x([Hn(ya,{optional:!0})],td.prototype,"color",2);var ed=class extends pe{constructor(){super(...arguments),this.item=new Qc,this.series=new Jc,this.text=new td}};x([Hn(Zn)],ed.prototype,"item",2),x([Hn(Zn)],ed.prototype,"series",2),x([Hn(Zn)],ed.prototype,"text",2);var id=class extends pe{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new ed}};x([Hn(ta,{optional:!0})],id.prototype,"id",2),x([Hn(Qn)],id.prototype,"visible",2),x([Hn(Qn)],id.prototype,"showInLegend",2),x([Hn(ta)],id.prototype,"cursor",2),x([Hn(Ra)],id.prototype,"nodeClickRange",2),x([Hn(Zn)],id.prototype,"highlightStyle",2);var sd={x:["xKey"],y:["yKey"]},nd={x:["xName"],y:["yName"]},ad=class extends Gc{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},od=class extends id{};x([Hn(ta,{optional:!0})],od.prototype,"legendItemName",2);var rd=class extends Zc{constructor(t){var e=t,{pathsPerSeries:i=1,hasMarkers:s=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:a=[],directionKeys:o=sd,directionNames:r=nd,datumSelectionGarbageCollection:l=!0,markerSelectionGarbageCollection:h=!0,animationAlwaysUpdateSelections:c=!1,animationResetFns:d}=e,u=m(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns"]);super(g({directionKeys:o,directionNames:r,useSeriesGroupLayer:!0,canHaveAxes:!0},u)),this._contextNodeData=[],this.NodeClickEvent=ad,this.highlightSelection=Pr.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Pr.select(this.highlightLabel,qa),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=Cs.create(),this.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:a,directionKeys:o,directionNames:r,animationResetFns:d,animationAlwaysUpdateSelections:c,datumSelectionGarbageCollection:l,markerSelectionGarbageCollection:h},this.animationState=new ir("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData.slice()}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(t){return b(this,arguments,(function*({seriesRect:t}){var e,i;const{visible:s,_contextNodeData:n}=this,{series:a}=null!=(i=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight())?i:{},o=a?a===this:void 0,r=this.checkResize(t),l=yield this.updateHighlightSelection(o);yield this.updateSelections(s),yield this.updateNodes(l,o,s);const h=this.getAnimationData(t,n);r&&this.animationState.transition("resize",h),this.animationState.transition("update",h)}))}updateSelections(t){return b(this,null,(function*(){const e=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((t||!e)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach(e=>{null!=e.animationValid||(e.animationValid=t)}),yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e)))}}))}updateSeriesGroupSelections(t,e,i){return b(this,null,(function*(){const{datumSelection:s,labelSelection:n,markerSelection:a,paths:o}=t,r=this._contextNodeData[e],{nodeData:l,labelData:h,itemId:c}=r;yield this.updatePaths({seriesHighlighted:i,itemId:c,contextData:r,paths:o,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:s,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:h,labelSelection:n,seriesIdx:e}),a&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:a,seriesIdx:e}))}))}markerFactory(){return new(Gh())}updateSeriesGroups(){return b(this,null,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:s,hasMarkers:n,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:o}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:t,markerGroup:i,labelGroup:s,paths:n})=>{e.removeChild(t),i&&e.removeChild(i),s&&e.removeChild(s);for(const t of n)e.removeChild(t)});const r=t.length;for(;r>i.length;){const t=!1,r=this.subGroupId++,l=new Mo({name:`${this.id}-series-sub${r}-dataNodes`,layer:t,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data",r)}),h=n?new Mo({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:t,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",r)}):void 0,c=new Mo({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:t,zIndex:7,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",r)});e.appendChild(l),e.appendChild(c),h&&e.appendChild(h);const d=[];for(let t=0;t<s;t++)d[t]=new Mh,d[t].zIndex=4,d[t].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",t),e.appendChild(d[t]);i.push({paths:d,dataNodeGroup:l,markerGroup:h,labelGroup:c,labelSelection:Pr.select(c,qa),datumSelection:Pr.select(l,()=>this.nodeFactory(),a),markerSelection:h?Pr.select(h,()=>this.markerFactory(),o):void 0})}}))}getGroupZIndexSubOrder(t,e=0){var i;const s=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const t=null!=(i=this.opts.pathsZIndexSubOrderOffset[e])?i:0,n=s[0];s[0]="function"==typeof n?()=>+n()+t:+n+t}return s}updateNodes(t,e,i){return b(this,null,(function*(){var s;const{highlightSelection:n,highlightLabelSelection:a,opts:{hasMarkers:o,hasHighlightedLabels:r}}=this,l=!this.ctx.animationManager.isSkipped(),h=this.visible&&(null==(s=this._contextNodeData)?void 0:s.length)>0&&i;this.rootGroup.visible=l||h,this.contentGroup.visible=l||h,this.highlightGroup.visible=(l||h)&&!!e;const c=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),r&&(yield this.updateLabelNodes({labelSelection:a,seriesIdx:-1})),yield Promise.all(this.subGroups.map((i,s)=>b(this,null,(function*(){const{dataNodeGroup:n,markerGroup:a,datumSelection:r,labelSelection:d,markerSelection:u,paths:p,labelGroup:g}=i,{itemId:y}=this.contextNodeData[s],m=h;n.opacity=c,n.visible=l||m,g.visible=m,a&&(a.opacity=c,a.zIndex=n.zIndex>=4?n.zIndex:n.zIndex+1,a.visible=m),g&&(g.opacity=c),yield this.updatePathNodes({seriesHighlighted:e,itemId:y,paths:p,seriesIdx:s,opacity:c,visible:m,animationEnabled:l}),n.visible&&(yield this.updateDatumNodes({datumSelection:r,highlightedItems:t,isHighlight:!1,seriesIdx:s}),yield this.updateLabelNodes({labelSelection:d,seriesIdx:s}),o&&u&&(yield this.updateMarkerNodes({markerSelection:u,isHighlight:!1,seriesIdx:s})))}))))}))}getHighlightLabelData(t,e){const i=t.filter(t=>t.datum===e.datum&&t.itemId===e.itemId);return 0!==i.length?i:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return b(this,null,(function*(){var e;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this,a=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight(),o=t&&(null==a?void 0:a.datum)?a:void 0;let r,l;if(null!=o){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of n)if(l=this.getHighlightData(i,o),r=t?this.getHighlightLabelData(e,o):void 0,(!t||null!=r)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:s}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:s,y:n}=t,{opts:{hasMarkers:a}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let i=t.pickNode(s,n);if(!i&&a&&(i=null==e?void 0:e.pickNode(s,n)),i)break}for(const i of this.moduleMap.modules){const{datum:s}=null!=(e=i.pickNodeExact(t))?e:{};if(void 0!==s)return{datum:s,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{axes:a,rootGroup:o,_contextNodeData:r}=this,l=a.x,h=a.y,c=o.transformPoint(s,n);let d,p=1/0;for(const t of r)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==l?void 0:l.inRange(t))&&(null==h?void 0:h.inRange(i))))continue;const s=Math.max(u(c.x-t,2)+u(c.y-i,2),0);s<p&&(p=s,d=e)}for(const e of this.moduleMap.modules){const i=e.pickNodeNearest(t);if(void 0!==i&&i.distanceSquared<p){p=i.distanceSquared,d=i.datum;break}}if(d){return{datum:d,distance:Math.max(Math.sqrt(p)-(null!=(i=null==(e=d.point)?void 0:e.size)?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,s;const{x:n,y:a}=t,{axes:o,rootGroup:r,_contextNodeData:l}=this,h=o.x,c=o.y,d=[h,c].filter(t=>t instanceof ll).map(t=>t.direction);if(e&&0===d.length)return;const[p="x"]=d,g=r.transformPoint(n,a),y="x"===p?[g.x,g.y]:[g.y,g.x],m=[1/0,1/0];let f;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==h?void 0:h.inRange(t))&&(null==c?void 0:c.inRange(i))))continue;const s="x"===p?[t,i]:[i,t];let n=!0;for(let t=0;t<s.length;t++){const e=Math.abs(s[t]-y[t]);if(e>m[t]){n=!1;break}e<m[t]&&(m[t]=e,m.fill(1/0,t+1,m.length))}n&&(f=e)}if(f){let e=Math.max(u(m[0],2)+u(m[1],2)-(null!=(s=null==(i=f.point)?void 0:i.size)?s:0),0);for(const i of this.moduleMap.modules){const s=i.pickNodeMainAxisFirst(t);if(void 0!==s&&s.distanceSquared<e){f=s.datum,e=s.distanceSquared;break}}return{datum:f,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=null!=e&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,o=null!=a&&a===t.legendItemName;s.id===this.id||o||e&&1===n?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!(null==t?void 0:t.nodeData.length))return;const e=t.nodeData.map(({midPoint:t})=>{var e;return null!=(e=null==t?void 0:t.x)?e:0}).sort((t,e)=>t-e).reduce((t,e,i,s)=>i>0?Math.max(t,e-s[i-1]):t,0),i=t.nodeData.map(({midPoint:t})=>{var e;return null!=(e=null==t?void 0:t.y)?e:0}).sort((t,e)=>t-e).reduce((t,e,i,s)=>i>0?Math.max(t,e-s[i-1]):t,0);return new en(0,0,e,i)}updateHighlightSelectionItem(t){return b(this,null,(function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,n=null!=i?i:[];if(e){const t=s;return this.updateMarkerSelection({nodeData:n,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return b(this,null,(function*(){var e;return this.updateLabelSelection({labelData:null!=(e=t.items)?e:[],labelSelection:t.highlightLabelSelection,seriesIdx:-1})}))}updateDatumSelection(t){return b(this,null,(function*(){return t.datumSelection}))}updateDatumNodes(t){return b(this,null,(function*(){}))}updateMarkerSelection(t){return b(this,null,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return b(this,null,(function*(){}))}updatePaths(t){return b(this,null,(function*(){t.paths.forEach(t=>t.visible=!1)}))}updatePathNodes(t){return b(this,null,(function*(){const{paths:e,opacity:i,visible:s}=t;for(const t of e)t.opacity=i,t.visible=s}))}resetAllAnimation(t){var e,i;const{path:s,datum:n,label:a,marker:o}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),s&&t.paths.forEach(t=>{er(t,s)}),n&&er(t.datumSelections,n),a&&er(t.labelSelections,a),o&&er(t.markerSelections,o),t.contextData.some(t=>!1===t.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:s}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};s&&er([t],s)}animateReadyHighlightMarkers(t){var e,i;const{marker:s}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};s&&er([t],s)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.filter(({markerSelection:t})=>void 0!==t).map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof Mr){const{range:s,domain:n}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale instanceof bo){const{range:s}=i.scale,n=i.scale.getDomain();t[e]={type:"continuous",domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale){const{domain:s}=i.scale;t[e]={type:"category",domain:s,range:s.map(t=>i.scale.convert(t))}}};return e("x"),e("y"),t}},ld=["top","right","bottom","left"],hd=class t extends qc{constructor(t,e){super(t,e),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}performLayout(){return b(this,null,(function*(){const e=yield v(t.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:s}=this,{animationRect:n,seriesRect:a,visibility:o,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=o.series,this.seriesRect=a,this.animationRect=n;const{x:l,y:h}=a;if(i)s.translationX=Math.floor(l),s.translationY=Math.floor(h),this.firstSeriesTranslation=!1;else{const{translationX:t,translationY:e}=s;_n(this.id,"seriesRect",this.animationManager,[this.seriesRoot],{translationX:t,translationY:e},{translationX:Math.floor(l),translationY:Math.floor(h)},{phase:"update"})}const c=a.clone().grow(this.seriesArea.padding);this.hoverRect=c,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:a,paddedRect:c,visible:o.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(t=>g({id:t.id},t.getLayoutState()))});const d=Array.from(this.modules.values(),t=>{var e;return null==(e=t.performCartesianLayout)?void 0:e.call(t,{seriesRect:a})});return yield Promise.all(d),e}))}updateAxes(t){var e;const i=this.axes.flatMap(t=>{var e;return null!=(e=t.crossLines)?e:[]}).map(t=>t.id);let s,n;null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every((t,e)=>i[e]===t)?(s=g({},this._lastAxisWidths),n=g({},this._lastVisibility)):(s={top:0,bottom:0,left:0,right:0},n={crossLines:!0,series:!0},this._lastCrossLineIds=i);const a=new Set(this.axes.map(t=>t.position));for(const t of Object.keys(s))a.has(t)||delete s[t];const o=(t,e)=>!Object.keys(t).some(t=>null==s[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(s).every(([e,i])=>{const s=t[e];return null==i&&null==s||i===s}));let r={},l={},h=!1,c=null==(e=this.seriesRect)?void 0:e.clone(),d=0,u={};do{Object.assign(s,r),Object.assign(n,l);const e=this.updateAxesPass(s,t.clone(),c);if(r=Xt(e.axisWidths,t=>t&&Math.abs(t)===1/0?0:null!=t?Math.ceil(t):t),l=e.visibility,h=e.clipSeries,c=e.seriesRect,u=e.primaryTickCounts,d++>10){C.warn("unable to find stable axis layout.");break}}while(!o(r,l));this.axes.forEach(t=>{t.update(u[t.direction])});return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}}),this._lastAxisWidths=s,this._lastVisibility=n,{seriesRect:c,animationRect:t,visibility:n,clipSeries:h}}updateAxesPass(t,e,i){const s={},n={},a={series:!0,crossLines:!0};let o=!1;const r={},l=this.applySeriesPadding(e),h=i?this.buildCrossLinePadding(t):{},c=this.buildAxisBound(l,t,h,a),d=this.buildSeriesRect(c,t);return this.axes.forEach(e=>{var i,a;const{position:h="left"}=e,{clipSeries:u,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:d,paddedBounds:l,axisWidths:t,newAxisWidths:n,primaryTickCounts:r,clipSeries:o,addInterAxisPadding:(null!=(i=s[h])?i:0)>0});s[h]=(null!=(a=s[h])?a:0)+1,o=o||u,this.positionAxis({axis:e,axisBound:c,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:r,seriesRect:d})}),{clipSeries:o,seriesRect:d,axisWidths:n,visibility:a,primaryTickCounts:r}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[s,n=0]of Object.entries(i))i[s]=Math.max(n-(null!=(e=t[s])?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return ld.forEach(t=>{const s=this.seriesArea.padding[t],n=i.find(e=>e.position===t);n?n.seriesAreaPadding=s:e.shrink(s,t)}),e}buildAxisBound(t,e,i,s){var n,a,o,r;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,y=(null!=(n=e.left)?n:0)+(null!=(a=e.right)?a:0)+p,m=(null!=(o=e.top)?o:0)+(null!=(r=e.bottom)?r:0)+g;return l.width<=y||l.height<=m?(s.crossLines=!1,s.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:s,bottom:n,left:a,right:o}=e;return i.x+=null!=a?a:0,i.y+=null!=s?s:0,i.width-=(null!=a?a:0)+(null!=o?o:0),i.height-=(null!=s?s:0)+(null!=n?n:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,s){const{x:n,y:a,width:o,height:r}=t,l=[n,a,n+o,a+r][("x"===i?0:1)+(1===s?0:2)];return(1===s?Math.min:Math.max)(e,l)}calculateAxisDimensions(t){var e,i,s,n;const{axis:a,seriesRect:o,paddedBounds:r,axisWidths:l,newAxisWidths:h,primaryTickCounts:c,addInterAxisPadding:d}=t;let{clipSeries:u}=t;const{position:p="left",direction:g}=a,y=null!=(e=h[p])?e:0;switch(p){case"top":case"bottom":a.range=[0,o.width],a.gridLength=o.height;break;case"right":case"left":a.range=(m=a)instanceof ll||m instanceof xl?[0,o.height]:[o.height,0],a.gridLength=o.width}var m;const{min:f,max:x}=this.zoomManager.getAxisZoom(a.id);a.visibleRange=[f,x],u||(u=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1);let v=a.nice?c[g]:void 0;const b="y"===g;a.maxThickness=a.thickness||.3*(b?r.width:r.height);const S=a.calculateLayout(v);let k;if(v=S.primaryTickCount,null!=c[g]||(c[g]=v),null!=a.thickness&&a.thickness>0)k=a.thickness;else{const{bbox:t}=S;k=b?t.width:t.height}return d&&(k+=15),k=Math.ceil(k),h[p]=(null!=(i=h[p])?i:0)+k,a.gridPadding=(null!=(s=l[p])?s:0)-(null!=(n=h[p])?n:0),{clipSeries:u,axisThickness:k,axisOffset:y,primaryTickCount:v}}positionAxis(t){var e,i,s,n;const{axis:a,axisBound:o,axisWidths:r,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=a;switch(d){case"top":a.translation.x=o.x+(null!=(e=r.left)?e:0),a.translation.y=this.clampToOutsideSeriesRect(l,o.y+1+h+c,"y",1);break;case"bottom":a.translation.x=o.x+(null!=(i=r.left)?i:0),a.translation.y=this.clampToOutsideSeriesRect(l,o.y+o.height+1-c-h,"y",-1);break;case"left":a.translation.y=o.y+(null!=(s=r.top)?s:0),a.translation.x=this.clampToOutsideSeriesRect(l,o.x+h+c,"x",1);break;case"right":a.translation.y=o.y+(null!=(n=r.top)?n:0),a.translation.x=this.clampToOutsideSeriesRect(l,o.x+o.width-c-h,"x",-1)}a.updatePosition({rotation:Vn(a.rotation),sideFlag:a.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(t=>!(t instanceof rd&&t.shouldFlipXY()))}};hd.className="CartesianChart",hd.type="cartesian";var cd=hd,dd=class t{static isInstance(e){var i;return e instanceof t||("AgChartInstanceProxy"===(null==(i=e.constructor)?void 0:i.name)&&null!=e.chart||null!=e.chart&&this.validateImplementation(e))}static validateImplementation(t){var e;const i=Object.keys(null!=(e=Object.getPrototypeOf(t))?e:{});return["getOptions","destroy"].every(t=>i.includes(t))}constructor(t){this.chart=t}getOptions(){return fe(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};dd.chartInstances=new WeakMap,x([oo({oldValue(t){dd.chartInstances.delete(t)},newValue(t){dd.chartInstances.set(t,this)}})],dd.prototype,"chart",2);var ud=dd,pd=class extends bo{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!=(t=this.tickCount)?t:bo.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,s]=this.getDomain(),{interval:n}=this;if(n){const t=Math.abs(n);if(!this.isDenseInterval({start:i,stop:s,interval:t}))return kr(i,s,t)}return vr(i,s,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,s;const n=null!=(i=this.tickCount)?i:bo.defaultTickCount;return null!=(s=this.interval)?s:Sr(t,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!=(t=this.tickCount)?t:bo.defaultTickCount;if(e<1)return void(this.niceDomain=[...this.domain]);let[i,s]=this.domain;if(1===e)[i,s]=function(t,e){const i=Math.abs(e-t),s=Math.floor(Math.log10(i)),n=Math.pow(10,s),a=t>e?Math.ceil:Math.floor,o=e<t?Math.floor:Math.ceil;return br.map(s=>{const r=s*n,l=a(t/r)*r,h=o(e/r)*r;return{error:1-i/Math.abs(h-l),domain:[l,h]}}).sort((t,e)=>t.error-e.error)[0].domain}(i,s);else{const t=i>s?Math.ceil:Math.floor,e=s<i?Math.floor:Math.ceil,n=4;for(let a=0;a<n;a++){const n=i,a=s,o=this.getTickStep(i,s),[r,l]=this.domain;if(o>=1)i=t(r/o)*o,s=e(l/o)*o;else{const n=1/o;i=t(r*n)/n,s=e(l*n)/n}if(i===n&&s===a)break}}this.niceDomain=[i,s]}tickFormat({ticks:t,specifier:e}){return fr(null!=t?t:this.ticks(),e)}};function gd(t,e,i){let[s,n]=Ys(t);s=function(t,e,i){const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(t/a)*a}(Math.floor(s),n,e);const a=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;if(s>0&&s<=1)return i/10;if(s>1&&s<=2)return 2*i/10;if(s>1&&s<=5)return 5*i/10;if(s>5&&s<=10)return 10*i/10;if(s>10&&s<=20)return 20*i/10;if(s>20&&s<=40)return 40*i/10;if(s>40&&s<=50)return 50*i/10;if(s>50&&s<=100)return 100*i/10;return s}((e-t)/(i-1))}(s,n,e);n=s+(e-1)*a;return[i?[n,s]:[s,n],function(t,e,i){const s=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(s):0,a=Math.pow(10,n),o=xr(n);for(let s=0;s<i;s++){const i=t+e*s;o[s]=Math.round(i*a)/a}return o}(s,a,e)]}var yd=class extends Hr{constructor(){super(...arguments),this.maxSpacing=NaN}};x([Hn(Fa),Wr(NaN)],yd.prototype,"maxSpacing",2);var md=class extends rl{constructor(t,e=new pd){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=Ss(t,e,i);return{domain:s,clipped:n}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(C.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new yd}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=gd(this.dataDomain.domain,null!=t?t:0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}};md.className="NumberAxis",md.type="number",x([Hn($n(oa,ca("max"))),Wr(NaN)],md.prototype,"min",2),x([Hn($n(oa,da("min"))),Wr(NaN)],md.prototype,"max",2);var fd=Ba(t=>zt(t)&&0!==t,"a non-zero number"),xd=class extends md{constructor(t){super(t,new Mr),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=Ss(t,e,i),a=s[0]>s[1],o=s[0]<0&&s[1]>0,r=0===s[0]&&0===s[1];return(a||o||r)&&(t=[],o?C.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):r&&C.warn("the data domain has 0 extent, no data is rendered.")),0===s[0]&&(s[0]=1),0===s[1]&&(s[1]=-1),{domain:s,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}};xd.className="LogAxis",xd.type="log",x([Hn($n(oa,fd,ca("max"))),Wr(NaN)],xd.prototype,"min",2),x([Hn($n(oa,fd,da("min"))),Wr(NaN)],xd.prototype,"max",2);var vd=class extends Hr{constructor(){super(...arguments),this.maxSpacing=NaN}};x([Hn(Fa),Wr(NaN)],vd.prototype,"maxSpacing",2);var bd=class extends rl{constructor(t){super(t,new Rr),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:s}=this,n=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof s&&(s=new Date(s)),t.length>2&&(t=(null!=(e=vs(t))?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),s instanceof Date&&(n||(n=s<t[1]),t=[t[0],s]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}createTick(){return new vd}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!=(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))?e:String(t)}calculatePadding(t,e,i){return i?[1,0]:[0,1]}};bd.className="TimeAxis",bd.type="time",x([Hn($n(pa,ca("max")),{optional:!0})],bd.prototype,"min",2),x([Hn($n(pa,da("min")),{optional:!0})],bd.prototype,"max",2);var Sd=(t,e,i,s,n)=>{let a=!1,o=!1,r=s-Math.sqrt(Math.max(u(n,2)-u(i,2),0)),l=0,h=0,c=i-Math.sqrt(Math.max(u(n,2)-u(s,2),0));return r>t?(a=!0,r=t,l=i-Math.sqrt(Math.max(u(n,2)-u(s-t,2)))):r<1e-6&&(r=0),c>e?(o=!0,h=s-Math.sqrt(Math.max(u(n,2)-u(i-e,2))),c=e):c<1e-6&&(c=0),{leading0:r,leading1:l,trailing0:h,trailing1:c,leadingClipped:a,trailingClipped:o}},kd=(t,{x0:e,y0:i,x1:s,y1:n,cx:a,cy:o},r,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==n){const l=Math.atan2(i-o,e-a),h=Math.atan2(n-o,s-a);t.arc(a,o,r,l,h)}else t.lineTo(e,i)},Dd=(t,e,i,s,n,a,o)=>{let{topLeft:r,topRight:l,bottomRight:h,bottomLeft:c}=a;const d=Math.max(r+c,l+h),u=Math.max(r+l,c+h);if(d<=0&&u<=0)return void t.rect(e,i,s,n);if(null==o&&r===l&&r===h&&r===c)return void t.roundRect(e,i,s,n,r);if(s<0&&(e+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),null!=o){const t=Math.max(e,o.x),a=Math.min(e+s,o.x+o.width),r=Math.max(i,o.y),l=Math.min(i+n,o.y+o.height);e=t,i=r,s=a-t,n=l-r}if(s<=0||n<=0)return;null!=o||(o=new en(e,i,s,n));const p=Math.max(d/o.height,u/o.width,1);p>1&&(r/=p,l/=p,h/=p,c/=p);let g,y,m,f,x=!0,v=!0,b=!0,S=!0;if(x){const t=Sd(n,s,Math.max(o.x+r-e,0),Math.max(o.y+r-i,0),r);t.leadingClipped&&(S=!1),t.trailingClipped&&(v=!1);g={x0:Math.max(e+t.leading1,e),y0:Math.max(i+t.leading0,i),x1:Math.max(e+t.trailing1,e),y1:Math.max(i+t.trailing0,i),cx:o.x+r,cy:o.y+r}}if(v){const t=Sd(s,n,Math.max(o.y+l-i,0),Math.max(e+s-(o.x+o.width-l),0),l);t.leadingClipped&&(x=!1),t.trailingClipped&&(b=!1);y={x0:Math.min(e+s-t.leading0,e+s),y0:Math.max(i+t.leading1,i),x1:Math.min(e+s-t.trailing0,e+s),y1:Math.max(i+t.trailing1,i),cx:o.x+o.width-l,cy:o.y+l}}if(b){const t=Sd(n,s,Math.max(e+s-(o.x+o.width-h),0),Math.max(i+n-(o.y+o.height-h),0),h);t.leadingClipped&&(v=!1),t.trailingClipped&&(S=!1);m={x0:Math.min(e+s-t.leading1,e+s),y0:Math.min(i+n-t.leading0,i+n),x1:Math.min(e+s-t.trailing1,e+s),y1:Math.min(i+n-t.trailing0,i+n),cx:o.x+o.width-h,cy:o.y+o.height-h}}if(S){const t=Sd(s,n,Math.max(i+n-(o.y+o.height-c),0),Math.max(o.x+c-e,0),c);t.leadingClipped&&(b=!1),t.trailingClipped&&(x=!1);f={x0:Math.max(e+t.leading0,e),y0:Math.min(i+n-t.leading1,i+n),x1:Math.max(e+t.trailing0,e),y1:Math.min(i+n-t.trailing1,i+n),cx:o.x+c,cy:o.y+o.height-c}}let k=!1;x&&null!=g&&(kd(t,g,r,!k),k||(k=!0)),v&&null!=y&&(kd(t,y,l,!k),k||(k=!0)),b&&null!=m&&(kd(t,m,h,!k),k||(k=!0)),S&&null!=f&&(kd(t,f,c,!k),k||(k=!0)),t.closePath()},Md=class extends Mh{constructor(){super(...arguments),this.borderPath=new kh,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.cornerRadiusBbox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Ha.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Ha.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!(!this.path.isDirty()&&!this.borderPath.isDirty())}updatePath(){var t,e,i;const{path:s,borderPath:n,crisp:a,topLeftCornerRadius:o,topRightCornerRadius:r,bottomRightCornerRadius:l,bottomLeftCornerRadius:h}=this;let{x:c,y:d,width:u,height:p,strokeWidth:g,cornerRadiusBbox:y}=this;const m=1/(null!=(e=null==(t=this.layerManager)?void 0:t.canvas.pixelRatio)?e:1);let f=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),a&&(u<=m&&(f*=u/m),p<=m&&(f*=p/m),u=this.align(c,u),p=this.align(d,p),c=this.align(c),d=this.align(d),y=null!=y?new en(this.align(y.x),this.align(y.y),this.align(y.x,y.width),this.align(y.y,y.height)):void 0),g)if(u<m){const t=c+m/2;n.moveTo(t,d),n.lineTo(t,d+p),g=m,this.borderClipPath=void 0}else if(p<m){const t=d+m/2;n.moveTo(c,t),n.lineTo(c+u,t),g=m,this.borderClipPath=void 0}else if(g<u&&g<p){const t=g/2;c+=t,d+=t,u-=g,p-=g;const e=null==y?void 0:y.clone().shrink(t),i={topLeft:o>0?o-g:0,topRight:r>0?r-g:0,bottomRight:l>0?l-g:0,bottomLeft:h>0?h-g:0};this.borderClipPath=void 0,Dd(s,c,d,u,p,i,e),Dd(n,c,d,u,p,i,e)}else this.borderClipPath=null!=(i=this.borderClipPath)?i:new kh,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(c,d,u,p),n.rect(c,d,u,p);else{const t={topLeft:o,topRight:r,bottomRight:l,bottomLeft:h};this.borderClipPath=void 0,Dd(s,c,d,u,p,t,y)}this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=f}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new en(t,e,i,s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=t;t.globalAlpha=n*s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:a,microPixelEffectOpacity:o}=this;if(!!e&&!!i){const{strokeOpacity:r,lineDash:l,lineDashOffset:h,lineCap:c,lineJoin:d}=this;n&&(n.draw(t),t.clip()),s.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*a*r*o,t.lineWidth=i,l&&t.setLineDash(l),h&&(t.lineDashOffset=h),c&&(t.lineCap=c),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}};Md.className="Rect",x([Dh()],Md.prototype,"x",2),x([Dh()],Md.prototype,"y",2),x([Dh()],Md.prototype,"width",2),x([Dh()],Md.prototype,"height",2),x([Dh()],Md.prototype,"topLeftCornerRadius",2),x([Dh()],Md.prototype,"topRightCornerRadius",2),x([Dh()],Md.prototype,"bottomRightCornerRadius",2),x([Dh()],Md.prototype,"bottomLeftCornerRadius",2),x([Dh()],Md.prototype,"cornerRadiusBbox",2),x([Dh()],Md.prototype,"crisp",2);var Ld=class extends ct{constructor(t){var e;super(),this.node=new Mo({name:"background",zIndex:0}),this.rectNode=new Md,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null==(e=t.scene.root)||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null==(e=t.scene.root)?void 0:e.removeChild(this.node)},t.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};x([Hn(Qn),ao("node","visible")],Ld.prototype,"visible",2),x([Hn(ya,{optional:!0}),ao("rectNode","fill")],Ld.prototype,"fill",2),x([Hn(Zn,{optional:!0})],Ld.prototype,"image",2);var Ad={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Ld},wd=class extends Mh{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this;return new en(t-i/2,e-s/2,i,s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:s,height:n}=this;t.clear();const a=e-s/2,o=i-n/2,r=this.align(a),l=this.align(o),h=r+this.align(a,s),c=l+this.align(o,n);t.moveTo(r,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(r,c),t.closePath();const d=this.gripLineGap/2,u=this.gripLineLength/2;t.moveTo(this.align(e-d),this.align(i-u)),t.lineTo(this.align(e-d),this.align(i+u)),t.moveTo(this.align(e+d),this.align(i-u)),t.lineTo(this.align(e+d),this.align(i+u))}};function Nd(t,e){t!==e&&(this.dirtyPath=!0)}wd.className="RangeHandle",x([Hn(ya)],wd.prototype,"_fill",2),x([Hn(ya)],wd.prototype,"_stroke",2),x([Hn(sa)],wd.prototype,"_strokeWidth",2),x([Hn(ka)],wd.prototype,"_lineCap",2),x([Hn(sa)],wd.prototype,"_width",2),x([Hn(sa)],wd.prototype,"_gripLineGap",2),x([Hn(sa)],wd.prototype,"_gripLineLength",2),x([Hn(sa)],wd.prototype,"_height",2);var Cd=class extends Mh{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.001,this._min=0,this._max=1}set min(t){var e;t=Vs(0,t,this.max-this.minRange),this._min===t||isNaN(t)||(this._min=t,this.dirtyPath=!0,null==(e=this.onRangeChange)||e.call(this))}get min(){return this._min}set max(t){var e;t=Vs(this.min+this.minRange,t,1),this._max===t||isNaN(t)||(this._max=t,this.dirtyPath=!0,null==(e=this.onRangeChange)||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new en(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:n,max:a}=this,o=t+i*n;return new en(o,e,t+i*a-o,s)}updatePath(){const{path:t,x:e,y:i,width:s,height:n,min:a,max:o}=this;t.clear();const r=this.align(e),l=this.align(i),h=r+this.align(e,s),c=l+this.align(i,n);t.moveTo(r,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(r,c),t.lineTo(r,l);const d=this.align(e+s*a),u=this.align(e+s*o);t.moveTo(d,l),t.lineTo(d,c),t.lineTo(u,c),t.lineTo(u,l),t.lineTo(d,l)}};Cd.className="RangeMask",x([oo({changeValue:Nd}),Hn(sa)],Cd.prototype,"x",2),x([oo({changeValue:Nd}),Hn(sa)],Cd.prototype,"y",2),x([oo({changeValue:Nd}),Hn(sa)],Cd.prototype,"width",2),x([oo({changeValue:Nd}),Hn(sa)],Cd.prototype,"height",2),x([Hn(ea)],Cd.prototype,"_min",2),x([Hn(ea)],Cd.prototype,"_max",2);var Id=class t extends Mo{constructor(){super({name:"rangeSelectorGroup",layer:!0}),this.minHandle=new wd,this.maxHandle=new wd,this.background=(()=>{const t=new Mo({name:"navigator-background"});return t.zIndex=1,this.appendChild(t),t})(),this.mask=(()=>{const{x:e,y:i,width:s,height:n,min:a,max:o}=t.defaults,r=new Cd;r.x=e,r.y=i,r.width=s,r.height=n,r.min=a,r.max=o,r.zIndex=2;const{minHandle:l,maxHandle:h}=this;return l.centerX=e,h.centerX=e+s,l.centerY=h.centerY=i+n/2,l.zIndex=4,h.zIndex=3,this.append([r,l,h]),r.onRangeChange=()=>{var t;this.updateHandles(),null==(t=this.onRangeChange)||t.call(this)},r})(),this.isContainerNode=!0}layout(t,e,i,s){this.mask.x=t,this.mask.y=e,this.mask.width=i,this.mask.height=s,this.updateHandles(),this.background.translationX=t,this.background.translationY=e}updateHandles(){const{x:t,y:e,width:i,height:s}=this.mask,{minHandle:n,maxHandle:a,min:o,max:r}=this;n.centerX=t+i*o,a.centerX=t+i*r,n.centerY=a.centerY=e+s/2,o+(r-o)/2<.5?(n.zIndex=3,a.zIndex=4):(n.zIndex=4,a.zIndex=3)}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}};Id.className="Range",Id.defaults={x:0,y:0,width:200,height:30,min:0,max:1},x([so("mask.min")],Id.prototype,"min",2),x([so("mask.max")],Id.prototype,"max",2);var Td=Id,Ed=class extends ct{constructor(t){var e;super(),this.ctx=t,this.rs=new Td,this.miniChart=void 0,this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.height=30,this.margin=10,this.visible=!0,this.x=0,this.y=0,this.width=0,this.rs.onRangeChange=function(t,e=0,i){const{leading:s=!1,trailing:n=!0,maxWait:a=1/0}=null!=i?i:{};let o,r;if(a<e)throw new Error("Value of maxWait cannot be lower than waitMs.");return Object.assign((function(...i){if(s&&!r)return r=Date.now(),o=setTimeout(()=>r=null,e),void t(...i);let l=e;if(a!==1/0&&r){const t=Date.now()-r;e>a-t&&(l=a-t)}clearTimeout(o),null!=r||(r=Date.now()),o=setTimeout(()=>{r=null,n&&t(...i)},l)}),{cancel(){clearTimeout(o),r=null}})}(()=>this.onRangeChange()),null==(e=t.scene.root)||e.appendChild(this.rs);this.destroyFns.push(t.interactionManager.addListener("drag-start",t=>this.onDragStart(t),13),t.interactionManager.addListener("drag",t=>this.onDrag(t),13),t.interactionManager.addListener("hover",t=>this.onDrag(t),13),t.interactionManager.addListener("drag-end",()=>this.onDragStop(),13),t.zoomManager.addListener("zoom-change",()=>this.onZoomChange()),()=>{var e;return null==(e=t.scene.root)?void 0:e.removeChild(this.rs)},()=>delete this.rs.onRangeChange),this.updateGroupVisibility()}updateGroupVisibility(){const t=Boolean(this.enabled&&this.visible);t!==this.rs.visible&&(this.rs.visible=t,t&&this.onRangeChange())}performLayout(t){return b(this,arguments,(function*({shrinkRect:t}){if(this.enabled){const e=this.height+this.margin;t.shrink(e,"bottom"),this.y=t.y+t.height+this.margin}else this.y=0;return{shrinkRect:t}}))}performCartesianLayout(t){return b(this,null,(function*(){const{x:e,width:i}=t.seriesRect;if(this.enabled){const{y:t,height:s}=this;this.rs.layout(e,t,i,s)}this.visible=!0,this.x=e,this.width=i}))}onRangeChange(){var t,e;const{min:i,max:s}=this.rs,n=this.ctx.zoomManager.getZoom();(null==(t=null==n?void 0:n.x)?void 0:t.min)===i&&(null==(e=null==n?void 0:n.x)?void 0:e.max)===s||this.ctx.zoomManager.updateZoom({x:{min:i,max:s},y:null==n?void 0:n.y})}onZoomChange(){const t=this.ctx.zoomManager.getZoom();t&&t.x&&(this.min=t.x.min,this.max=t.x.max)}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:s}=this,{minHandle:n,maxHandle:a,min:o}=s,{x:r,width:l}=this,h=s.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.zIndex<a.zIndex?a.containsPoint(e,i)?this.maxHandleDragging=!0:n.containsPoint(e,i)&&(this.minHandleDragging=!0):n.containsPoint(e,i)?this.minHandleDragging=!0:a.containsPoint(e,i)&&(this.maxHandleDragging=!0),this.minHandleDragging||this.maxHandleDragging||!h.containsPoint(e,i)||(this.panHandleOffset=(e-r)/l-o))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{minHandle:s,maxHandle:n}=e,{x:a,y:o,width:r,height:l}=this,{offsetX:h,offsetY:c}=t,d=a+r*e.min,u=a+r*e.max,p=new en(d,o,u-d,l),g=()=>Vs(0,(h-a)/r,1);if(s.containsPoint(h,c)||n.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=g();else if(this.maxHandleDragging)e.max=g();else if(!isNaN(i)){const t=e.max-e.min,s=Math.min(g()-i,1-t);s<=e.min?(e.min=s,e.max=e.min+t):(e.max=s+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}};x([Hn(Zn,{optional:!0})],Ed.prototype,"miniChart",2),x([Hn(Qn),ro(t=>t.updateGroupVisibility())],Ed.prototype,"enabled",2),x([so("rs.mask")],Ed.prototype,"mask",2),x([so("rs.minHandle")],Ed.prototype,"minHandle",2),x([so("rs.maxHandle")],Ed.prototype,"maxHandle",2),x([so("rs.min")],Ed.prototype,"min",2),x([so("rs.max")],Ed.prototype,"max",2),x([Hn(sa)],Ed.prototype,"margin",2),x([Hn(Qn),ro(t=>t.updateGroupVisibility())],Ed.prototype,"visible",2);var Od={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Ed,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},Rd=({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},Pd=t=>{const{fill:e,stroke:i}=Rd(t);return{marker:{fill:e,stroke:i}}};function _d(t,e,i,s,n){const{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:r}=n,l=(s,n,a)=>{i.animate({id:`${t}_${e}_${n.id}_${s}`,groupId:t,from:0,to:1,ease:fn,onUpdate(t,e){e&&"removed"!==s||(n.path.clear({trackChanges:!0}),a(t,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear({trackChanges:!0}),a(1,n),n.checkPathDirty())},phase:Rn[s]})};for(const t of s)i.isSkipped()||(l("removed",t,r),l("updated",t,o)),l("added",t,a)}var Fd=null;function Bd(t){if(null!=t)return""===t?"":(null!=Fd||(Fd=document.createElement("div")),Fd.textContent=String(t),Fd.innerHTML)}function zd({id:t},e,i,s){_n(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Gd({id:t},e,i,s){_n(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Kd(t){return{opacity:1}}var Vd=class extends pe{constructor(){super(...arguments),this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},Wd=class extends Vd{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};x([Hn(Qn),Ks({redraw:3})],Wd.prototype,"enabled",2),x([Hn(ya),Ks({redraw:3})],Wd.prototype,"color",2),x([Hn(ea),Ks({redraw:3})],Wd.prototype,"xOffset",2),x([Hn(ea),Ks({redraw:3})],Wd.prototype,"yOffset",2),x([Hn(sa),Ks({redraw:3})],Wd.prototype,"blur",2);var Yd=Ba(t=>zh(t)||Object.getPrototypeOf(t)===Lh,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Ud=class extends Vd{constructor(){super(...arguments),this.enabled=!0,this.shape=Ah,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}=this;return{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}}getDiameter(){return this.size+this.strokeWidth}};x([Hn(Qn),Ks({redraw:3})],Ud.prototype,"enabled",2),x([Hn(Yd),Ks({redraw:3})],Ud.prototype,"shape",2),x([Hn(sa),Ks({redraw:3})],Ud.prototype,"size",2),x([Hn(ya,{optional:!0}),Ks({redraw:3})],Ud.prototype,"fill",2),x([Hn(na),Ks({redraw:3})],Ud.prototype,"fillOpacity",2),x([Hn(ya,{optional:!0}),Ks({redraw:3})],Ud.prototype,"stroke",2),x([Hn(sa),Ks({redraw:3})],Ud.prototype,"strokeWidth",2),x([Hn(na),Ks({redraw:3})],Ud.prototype,"strokeOpacity",2),x([Hn(Jn,{optional:!0}),Ks({redraw:3})],Ud.prototype,"formatter",2);var jd=class extends pe{constructor(){super(...arguments),this.enabled=!1}};x([Hn(Qn)],jd.prototype,"enabled",2);var Hd=class extends pe{constructor(){super(...arguments),this.enabled=!0,this.interaction=new jd,this.position=new co}toTooltipHtml(t,e){return this.renderer?ho(this.renderer(e),t):ho(t)}};x([Hn(Qn)],Hd.prototype,"enabled",2),x([Hn(Qn,{optional:!0})],Hd.prototype,"showArrow",2),x([Hn(Jn,{optional:!0})],Hd.prototype,"renderer",2),x([Hn(Zn)],Hd.prototype,"interaction",2),x([Hn(Zn)],Hd.prototype,"position",2);var Xd=class extends od{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Wd,this.marker=new Ud,this.label=new Ao,this.tooltip=new Hd,this.connectMissingData=!1}};function $d({id:t},e,i,s){_n(t,"markers",e,i,{opacity:0},{opacity:1},{phase:s?Rn[s]:"trailing"}),i.forEach(t=>t.cleanup())}function qd({id:t},e,i){_n(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(t=>t.cleanup())}function Zd({id:t,nodeDataDependencies:e},i,s){const n=e.seriesRectWidth;Pn(t,"markers",i,s,{fromFn:(t,e)=>{var i,s;const a=null!=(s=null==(i=e.midPoint)?void 0:i.x)?s:n;return{scalingX:0,scalingY:0,delay:Vs(0,kn(a/n),1),duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Qd(t){return{opacity:1,scalingX:1,scalingY:1}}function Jd(t,e){var i,s,n,a;return{translationX:null!=(s=null==(i=e.point)?void 0:i.x)?s:NaN,translationY:null!=(a=null==(n=e.point)?void 0:n.y)?a:NaN}}function tu(t,e){const i=(e,i)=>{const s=t[i][e];return Array.isArray(s)?s[0]:s},s=e=>{const{xValue:s}=e;return t.moved[s]?{point:i(s,"moved"),status:"updated"}:t.removed[s]?{point:i(s,"removed"),status:"removed"}:t.added[s]?{point:i(s,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var n,a,o,r,l,h;const{status:c,point:d}=s(i);if("unknown"===c)return{opacity:0};const u={translationX:null!=(a=null==(n=null==d?void 0:d.from)?void 0:n.x)?a:t.translationX,translationY:null!=(r=null==(o=null==d?void 0:d.from)?void 0:o.y)?r:t.translationY,opacity:t.opacity,phase:Rn[c]};return"added"===e?y(g({},u),{opacity:0,translationX:null==(l=null==d?void 0:d.to)?void 0:l.x,translationY:null==(h=null==d?void 0:d.to)?void 0:h.y,phase:Rn.added}):("added"===c&&(u.opacity=0),u)},toFn:(t,i)=>{var n,a;const{status:o,point:r}=s(i);if("unknown"===o)return{opacity:0};const l={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:Rn[o]};return"removed"===o||"removed"===e?y(g({},l),{translationX:null==(n=null==r?void 0:r.to)?void 0:n.x,translationY:null==(a=null==r?void 0:r.to)?void 0:a.y,opacity:0,phase:Rn.removed}):l}}}function eu(t){return t.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function iu(t,e,i){const s=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*s+t.y}}function su(t,e,i,s){let n=-1,a=0;const o=[];for(;a<t.length;)t[a].change!==e?t[a].change!==i?(o.length>0&&(s(o,n,a),o.length=0),n=a,a++):a++:(o.push(t[a]),a++);o.length>0&&s(o,n,a)}function nu(t,e){su(t,"out","in",(i,s,n)=>{var a,o;-1===s&&t[n]?i.forEach(e=>e.to=t[n].from):n===t.length&&t[s]?i.forEach(e=>e.to=t[s].from):"intersect"===e&&(null==(a=t[s])?void 0:a.from)&&(null==(o=t[n])?void 0:o.from)?i.forEach(e=>e.to=iu(t[s].from,t[n].from,e.from.x)):i.forEach(t=>t.to=t.from)}),su(t,"in","out",(i,s,n)=>{var a,o;-1===s&&t[n]?i.forEach(e=>e.from=t[n].to):n===t.length&&t[s]?i.forEach(e=>e.from=t[s].to):"intersect"===e&&(null==(a=t[s])?void 0:a.to)&&(null==(o=t[n])?void 0:o.to)?i.forEach(e=>e.from=iu(t[s].to,t[n].to,e.to.x)):i.forEach(t=>t.from=t.to)})}function au(t,e,i){const s=isNaN(t.x)?e.x:t.x,n=isNaN(t.y)?e.y:t.y,a=e.x-t.x,o=e.y-t.y;return{x:s+(isNaN(a)?0:a*i),y:n+(isNaN(o)?0:o*i)}}function ou(t,e,i){const{path:s}=i;let n;for(const i of t){const{from:t,to:a}=i,o=e[i.change];if(null==o||null==t||null==a)continue;const{x:r,y:l}=au(t,a,o);if(!1===i.moveTo)s.lineTo(r,l);else if(!0!==i.moveTo&&n){if(n){const t="in"===i.moveTo?o:1-o,{x:e,y:a}=au(n,{x:r,y:l},t);s.lineTo(e,a),s.moveTo(r,l)}}else s.moveTo(r,l);n={x:r,y:l}}}function ru({id:t,visible:e,nodeDataDependencies:i},s,n){const{seriesRectWidth:a,seriesRectHeight:o}=i;_n(t,"path_properties",s,n,{clipX:0},{clipX:a},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function lu({id:t},e,i,s,n="add"){_n(t,e,i,s,{opacity:0},{opacity:1},{phase:n})}function hu({id:t},e,i,s){_n(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function cu(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function du({nodeDataDependencies:t},e){const i=t=>isFinite(t)?t:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}function uu(t){return"continuous"===t.type||"log"===t.type}function pu(t){return"category"===t.type}function gu(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every((t,i)=>t===e.domain[i])&&t.range.every((t,i)=>t===e.range[i])}function yu(t,e){return void 0===t||void 0===e?void 0!==t||void 0!==e:uu(t)&&uu(e)?t.type===e.type&&gu(t,e):!(!pu(t)||!pu(e))&&gu(t,e)}function mu(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"==typeof t)return e.convert(t);const i=e.domain.findIndex(e=>e===t);return i>=0?e.range[i]:NaN}function fu(t,e){const i=Number(t),s=Number(e);return isNaN(i)||isNaN(s)?t===e:Math.abs(s-i)<.25}function xu(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function vu(t,e,i={}){var s,n,a,o;const{backfillSplitMode:r="intersect"}=i,l=t=>{var i,s;return{x:mu(null!=(i=t.xValue)?i:NaN,e.scales.x),y:mu(null!=(s=t.yValue)?s:NaN,e.scales.y)}},h=[],c={added:{},moved:{},removed:{}},d=(t,e,i,s="move")=>{t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const n={from:null==t?void 0:t.point,to:null==e?void 0:e.point,moveTo:xu(null==t?void 0:t.point.moveTo,null==e?void 0:e.point.moveTo),change:s};"move"===s?(c.moved[i]=n,m++,f++):"in"===s?(c.added[i]=n,f++):"out"===s&&(c.removed[i]=n,m++),h.push(n)},{min:u,max:p}=eu(e.nodeData),{min:g,max:y}=eu(t.nodeData);let m=0,f=0;for(;m<e.nodeData.length||f<t.nodeData.length;){const i=e.nodeData[m],r=t.nodeData[f],h=i?(v=void 0,b=void 0,{x:mu(null!=(v=(x=i).xValue)?v:NaN,t.scales.x),y:mu(null!=(b=x.yValue)?b:NaN,t.scales.y)}):void 0,c=r?l(r):void 0,S=void 0;if(h&&fu(h.x,null==r?void 0:r.point.x))d(i,r,r.xValue,"move");else if(h&&h.x<(null!=(s=null==g?void 0:g.point.x)?s:-1/0))d(i,S,i.xValue,"out");else if(h&&h.x>(null!=(n=null==y?void 0:y.point.x)?n:1/0))d(i,S,i.xValue,"out");else if(c&&c.x<(null!=(a=null==u?void 0:u.point.x)?a:-1/0))d(S,r,r.xValue,"in");else if(c&&c.x>(null!=(o=null==p?void 0:p.point.x)?o:1/0))d(S,r,r.xValue,"in");else if(h&&h.x<(null==r?void 0:r.point.x))d(i,S,i.xValue,"out");else if(c&&c.x<(null==i?void 0:i.point.x))d(S,r,r.xValue,"in");else if(i)d(i,S,i.xValue,"out");else{if(!r)throw new Error("Unable to process points");d(S,r,r.xValue,"in")}}var x,v,b;return nu(h,r),{result:h,resultMap:c}}function bu(t,e,i,s={}){var n,a,o;const{backfillSplitMode:r="intersect",multiDatum:l=!1}=s,h=[],c={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}};let u=void 0,p=void 0;const y=(t,e)=>{var i;const s="move"===e.change?"moved":"in"===e.change?"added":"removed";l?(null!=(i=d[s])[t]||(i[t]=[]),d[s][t].push(e)):c[s][t]=e,u=e,p=Ro(t)};let m=0,f=0,x=!1;for(;m<e.nodeData.length||f<t.nodeData.length;){const s=e.nodeData[m],r=t.nodeData[f],c=Ro(null==s?void 0:s.xValue),d=Ro(null==r?void 0:r.xValue);let v;if(c===d)v={change:"move",moveTo:xu(null!=(n=s.point.moveTo)&&n,r.point.moveTo),from:s.point,to:r.point},y(null==s?void 0:s.xValue,v),m++,f++;else if(void 0!==i&&i.removed.indexOf(String(c))>=0)v={change:"out",moveTo:null!=(a=s.point.moveTo)&&a,from:s.point},y(null==s?void 0:s.xValue,v),m++;else if(void 0!==i&&i.added.indexOf(String(d))>=0)v={change:"in",moveTo:null!=(o=r.point.moveTo)&&o,to:r.point},y(null==r?void 0:r.xValue,v),f++;else if(l&&u&&p===c)v=g({},u),y(null==s?void 0:s.xValue,v),m++;else{if(!l||!u||p!==d){x=!0;break}v=g({},u),y(null==r?void 0:r.xValue,v),f++}h.push(v)}let v=-1/0;return x||(x=h.some(t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const s=i<v;return v=i,s})),x?{result:void 0,resultMap:void 0}:(nu(h,r),l?{result:h,resultMap:d}:{result:h,resultMap:c})}function Su(t,e){let i="updated";const s=t=>t.visible;return!s(e)&&s(t)?i="added":s(e)&&!s(t)&&(i="removed"),i}function ku(t,e,i,s,n){const a=Su(t,e);return{status:a,path:{addPhaseFn:(t,e)=>{n(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{n(i,{move:t},e)},removePhaseFn:(t,e)=>{n(i,{move:0,out:t},e)}},pathProperties:function(t,e){const i="none"===e?"updated":t,s={fromFn:e=>{let s;return s="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},g({phase:Rn[i]},s)},toFn:t=>({phase:Rn[i]})};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return g({opacity:i},s.fromFn(e))},toFn:e=>g({opacity:"removed"===t?0:1},s.toFn(e))}:s}(a,s)}}function Du(t,e,i){var s,n,a;const o="category"===(null==(s=t.scales.x)?void 0:s.type);if(o!==("category"===(null==(n=e.scales.x)?void 0:n.type)))return;const{result:r,resultMap:l}=o?bu(t,e,i):vu(t,e);let h="updated";if(e.visible&&!t.visible?h="removed":!e.visible&&t.visible&&(h="added"),void 0===r||void 0===l)return;const c=null==(a=null==i?void 0:i.changed)||a||function(t,e){return!yu(t.scales.x,e.scales.x)||!yu(t.scales.y,e.scales.y)}(t,e)||"updated"!==h,d=ku(t,e,r,"fade",ou),u=tu(l,h);return y(g({},d),{marker:u,hasMotion:c})}x([Hn(ta)],Xd.prototype,"xKey",2),x([Hn(ta,{optional:!0})],Xd.prototype,"xName",2),x([Hn(ta)],Xd.prototype,"yKey",2),x([Hn(ta,{optional:!0})],Xd.prototype,"yName",2),x([Hn(sa,{optional:!0})],Xd.prototype,"normalizedTo",2),x([Hn(ya)],Xd.prototype,"fill",2),x([Hn(na)],Xd.prototype,"fillOpacity",2),x([Hn(ya)],Xd.prototype,"stroke",2),x([Hn(sa)],Xd.prototype,"strokeWidth",2),x([Hn(na)],Xd.prototype,"strokeOpacity",2),x([Hn(Ma)],Xd.prototype,"lineDash",2),x([Hn(sa)],Xd.prototype,"lineDashOffset",2),x([Hn(Zn)],Xd.prototype,"shadow",2),x([Hn(Zn)],Xd.prototype,"marker",2),x([Hn(Zn)],Xd.prototype,"label",2),x([Hn(Zn)],Xd.prototype,"tooltip",2),x([Hn(Qn)],Xd.prototype,"connectMissingData",2);var Mu=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(Mu||{});function Lu(t){const{points:e}=t.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function Au(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function wu(t,e,i){var s,n;const a="category"===(null==(s=t.scales.x)?void 0:s.type),o="category"===(null==(n=e.scales.x)?void 0:n.type);if(a!==o)return;let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:l}=a?bu(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):vu(t,e,{backfillSplitMode:"static"}),{top:h,bottom:c}=a?function(t,e,i){const s=Lu(e),n=Lu(t),a={multiDatum:!0};return{top:bu(Au("top",t,n),Au("top",e,s),i,a),bottom:bu(Au("bottom",t,n),Au("bottom",e,s),i,a)}}(t,e,i):function(t,e){const i=Lu(e),s=Lu(t);return{top:vu(Au("top",t,s),Au("top",e,i)),bottom:vu(Au("bottom",t,s),Au("bottom",e,i))}}(t,e);if(void 0===l||void 0===h.result||void 0===c.result)return;const d=[...h.result,...c.result.reverse()],u=!!e.stackVisible&&t.stackVisible;return{fill:ku(t,e,d,u?"none":"fade",ou),marker:tu(l,r)}}var Nu=class t extends rd{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:cu({getOpacity:()=>this.getOpacity()}),label:Kd,marker:(t,e)=>g(g({},{opacity:1,scalingX:1,scalingY:1}),Jd(0,e))}}),this.properties=new Xd}processData(t){return b(this,null,(function*(){if(null==this.data||!this.properties.isValid())return;const{data:e,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:a,yKey:o,connectMissingData:r,normalizedTo:l}=this.properties,h=!this.ctx.animationManager.isSkipped(),{isContinuousX:c,isContinuousY:d}=this.isContinuous(),u=[`area-stack-${s}-yValues`,`area-stack-${s}-yValues-trailing`,`area-stack-${s}-yValues-prev`,`area-stack-${s}-yValues-trailing-prev`,`area-stack-${s}-yValues-marker`],p=[];Nt(l)&&(p.push(bc(this,[u[0],u[1],u[4]],l,"range")),p.push(bc(this,[u[2],u[3]],l,"range"))),!c&&h&&this.processedData&&p.push(wc(this.processedData)),h&&p.push(Dc(this));const m={invalidValue:null};r&&n>1&&(m.invalidValue=0),i||(m.forceValue=0),yield this.requestDataModel(t,e,{props:[Ec(this,a,c,{id:"xValue"}),Oc(this,o,d,g({id:"yValueRaw"},m)),...zc(this,o,d,"window","current",y(g({id:"yValueEnd"},m),{groupId:u[0]})),...zc(this,o,d,"window-trailing","current",y(g({id:"yValueStart"},m),{groupId:u[1]})),...zc(this,o,d,"window","last",y(g({id:"yValuePreviousEnd"},m),{groupId:u[2]})),...zc(this,o,d,"window-trailing","last",y(g({id:"yValuePreviousStart"},m),{groupId:u[3]})),...zc(this,o,d,"normal","current",y(g({id:"yValueCumulative"},m),{groupId:u[4]})),...p],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i||0===e.data.length)return[];const n=s.x,a=s.y,o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if("x"===t)return"key"===(null==o?void 0:o.def.type)&&"category"===o.def.valueType?r:Ol(vs(r),n);if(a instanceof xd||a instanceof bd)return Ol(l,a);return Ol([l[0]>0?0:l[0],l[1]<0?0:l[1]],a)}createNodeData(){return b(this,null,(function*(){var e;const{axes:i,data:s,processedData:{data:n}={},dataModel:a}=this,o=i.x,r=i.y;if(!(o&&r&&s&&a&&this.properties.isValid()))return[];const{yKey:l,xKey:h,marker:c,label:d,fill:u,stroke:p,connectMissingData:f}=this.properties,{scale:x}=o,{scale:b}=r,S=bo.is(b),k=(null!=(e=x.bandwidth)?e:0)/2,D=a.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),M=t=>{const e=t,{point:i}=e,s=m(e,["point"]);return y(g({},s),{point:y(g({},i),{moveTo:!0})})},L=(t,e,i)=>{const s=x.convert(t)+k,n=b.convert(e);return[{point:{x:s,y:b.convert(i)},yValue:i,xValue:t},{point:{x:s,y:n},yValue:e,xValue:t}]},A=(t,e,i)=>{let s;return(Nt(this.properties.normalizedTo)?S&&Eo(i):!isNaN(i))&&(s=e),{x:x.convert(t)+k,y:b.convert(s),size:c.size}},w=l,N=[],C=[],{visibleSameStackCount:I}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),T={itemId:w,fillData:{itemId:w,points:[]},strokeData:{itemId:w,points:[]},labelData:N,nodeData:C,scales:v(t.prototype,this,"calculateScaling").call(this),visible:this.visible,stackVisible:I>0},E=T.fillData.points,O=[],R=T.strokeData.points;let P,_=-1,F=-1/0;return null==n||n.forEach(t=>{const{keys:e,keys:[i],datum:s,values:n}=t;n.forEach((t,n)=>{var o,r,g;_++;const y=s[n],m=a.resolveProcessedDataDefsValues(D,{keys:e,values:t}),{yValueRaw:x,yValueCumulative:v}=m;let{yValueStart:b,yValueEnd:S,yValuePreviousStart:k,yValuePreviousEnd:I}=m;const T=null!=x,B=A(i,+v,x);if(T&&c&&C.push({index:_,series:this,itemId:w,datum:y,midPoint:{x:B.x,y:B.y},cumulativeValue:S,yValue:x,xValue:i,yKey:l,xKey:h,point:B,fill:null!=(o=c.fill)?o:u,stroke:null!=(r=c.stroke)?r:p,strokeWidth:null!=(g=c.strokeWidth)?g:this.getStrokeWidth(this.properties.strokeWidth)}),T&&d){const t=this.getLabelText(d,{value:x,datum:y,xKey:h,yKey:l,xName:this.properties.xName,yName:this.properties.yName},t=>Gt(t)?t.toFixed(2):String(t));N.push({index:_,series:this,itemId:l,datum:y,x:B.x,y:B.y,label:t?{text:t,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0})}const z=null!=P&&null!=i,G=null!=F&&T;G||(b=null!=b?b:0,S=null!=b?b:0,k=null!=k?k:0,I=null!=k?k:0);const[K,V]=L(P,k,I),[W,Y]=L(i,b,S);!z||f&&!G||(E.push(K),O.push(V),E.push(W),O.push(Y)),G&&_>0&&(R.push(M(K)),R.push(W)),P=i,F=x})}),R.length>0&&(R[0]=M(R[0])),O.reverse(),E.push(...O),[T]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(Gh(t))}updatePathNodes(t){return b(this,null,(function*(){const{opacity:e,visible:i,animationEnabled:s}=t,[n,a]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:1,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),n.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:e,visible:i||s,strokeWidth:o}),du(this,a),du(this,n)}))}updatePaths(t){return b(this,null,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:e},i)=>{const[s]=t[i],{path:n}=s;n.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y);n.closePath(),s.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:e},i)=>{const[,s]=t[i],{path:n}=s;n.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y);s.checkPathDirty()})}updateMarkerSelection(t){return b(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return b(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,marker:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c,highlightStyle:d}=this.properties,u=jt(i&&d.item,a.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c});e.each((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:s,yKey:n},u)}),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return b(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=3})}))}updateLabelNodes(t){return b(this,null,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o,color:r}=this.properties.label;e.each((t,e)=>{const{x:l,y:h,label:c}=e;c&&i&&this.visible?(t.fontStyle=s,t.fontWeight=n,t.fontSize=a,t.fontFamily=o,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l,t.y=h-10,t.fill=r,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{id:e,axes:i,dataModel:s}=this,{xKey:n,xName:a,yName:o,tooltip:r,marker:l}=this.properties,{yKey:h,xValue:c,yValue:d,datum:u}=t,p=i.x,g=i.y;if(!this.properties.isValid()||!(p&&g&&Gt(d))||!s)return"";const y=p.formatDatum(c),m=g.formatDatum(d),f=Bd(o),x=Bd(y+": "+m),v=jt({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:b}=this.getMarkerStyle(l,{datum:t,xKey:n,yKey:h,highlighted:!1},v);return r.toTooltipHtml({title:f,content:x,backgroundColor:b},{datum:u,xKey:n,xName:a,yKey:h,yName:o,color:b,title:f,seriesId:e})}getLegendData(t){var e,i,s,n;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{yKey:a,yName:o,fill:r,stroke:l,fillOpacity:h,strokeOpacity:c,strokeWidth:d,lineDash:u,marker:p,visible:g}=this.properties,y=!p.enabled||void 0===p.fill;return[{legendType:t,id:this.id,itemId:a,seriesId:this.id,enabled:g,label:{text:null!=o?o:a},marker:{shape:p.shape,fill:y?r:p.fill,fillOpacity:y?h:p.fillOpacity,stroke:null!=(i=p.stroke)?i:l,strokeOpacity:null!=(s=p.strokeOpacity)?s:c,strokeWidth:null!=(n=p.strokeWidth)?n:0,enabled:p.enabled||d<=0},line:{stroke:l,strokeOpacity:c,strokeWidth:d,lineDash:u}}]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),ru(this,a,n.flat()),er(e,Jd),Zd(this,a,e),zd(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:a,contextData:o,paths:r,previousContextData:l}=t,[[h,c]]=r;super.resetAllAnimation(t);const d=()=>{this.updateAreaPaths(r,o),this.updateStrokePath(r,o)};if(0===o.length||0===(null==l?void 0:l.length))return d(),$d(this,s,n,"added"),lu(this,"fill_path_properties",s,[h]),lu(this,"stroke",s,[c],"trailing"),void zd(this,"labels",s,a);const[u]=o,[p]=null!=l?l:[],g=wu(u,p,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===g)return s.skipCurrentBatch(),void d();$d(this,s,n),Pn(this.id,"fill_path_properties",s,[h],g.fill.pathProperties),_d(this.id,"fill_path_update",s,[h],g.fill.path),this.updateStrokePath(r,o),lu(this,"stroke",s,[c],"trailing"),zd(this,"labels",s,a)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}};Nu.className="AreaSeries",Nu.type="area";var Cu={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:Nu,stackable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:ai,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:fi,xOffset:3,yOffset:3,blur:5},marker:{__extends__:oi,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi,formatter:void 0}}},paletteFactory:t=>{const{marker:e}=Pd(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},Iu=class extends od{constructor(){super(...arguments),this.direction="vertical"}};x([Hn(Ea)],Iu.prototype,"direction",2);var Tu=class extends rd{getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}},Eu=class extends Ao{constructor(){super(...arguments),this.placement="inside"}};x([Hn(Oa)],Eu.prototype,"placement",2);var Ou=class extends Iu{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Wd,this.label=new Eu,this.tooltip=new Hd}};function Ru({rect:t,config:e}){const{crisp:i=!0,fill:s,stroke:n,strokeWidth:a,fillOpacity:o,strokeOpacity:r,lineDash:l,lineDashOffset:h,fillShadow:c,cornerRadius:d=0,topLeftCornerRadius:u,topRightCornerRadius:p,bottomRightCornerRadius:g,bottomLeftCornerRadius:y,cornerRadiusBbox:m,visible:f=!0}=e;t.crisp=i,t.fill=s,t.stroke=n,t.strokeWidth=a,t.fillOpacity=o,t.strokeOpacity=r,t.lineDash=l,t.lineDashOffset=h,t.fillShadow=c,t.topLeftCornerRadius=u?d:0,t.topRightCornerRadius=p?d:0,t.bottomRightCornerRadius=g?d:0,t.bottomLeftCornerRadius=y?d:0,t.cornerRadiusBbox=m,t.visible=f}function Pu(t){var e,i,s,n,a,o,r=t,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,ctx:{callbackCache:y}}=r,f=m(r,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:x,fillOpacity:v,stroke:b,strokeWidth:S}=jt(h&&d,c),{strokeOpacity:k,fillShadow:D,lineDash:M,lineDashOffset:L,cornerRadius:A=0,topLeftCornerRadius:w=!0,topRightCornerRadius:N=!0,bottomRightCornerRadius:C=!0,bottomLeftCornerRadius:I=!0,cornerRadiusBbox:T}=c;let E;return u&&(E=y.call(u,g({datum:l.datum,xKey:l.xKey,fill:x,stroke:b,strokeWidth:S,cornerRadius:A,highlighted:h,seriesId:p},f))),{fill:null!=(e=null==E?void 0:E.fill)?e:x,stroke:null!=(i=null==E?void 0:E.stroke)?i:b,strokeWidth:null!=(s=null==E?void 0:E.strokeWidth)?s:S,fillOpacity:null!=(n=null==E?void 0:E.fillOpacity)?n:v,strokeOpacity:null!=(a=null==E?void 0:E.strokeOpacity)?a:k,lineDash:M,lineDashOffset:L,fillShadow:D,cornerRadius:null!=(o=null==E?void 0:E.cornerRadius)?o:A,topLeftCornerRadius:w,topRightCornerRadius:N,bottomRightCornerRadius:C,bottomLeftCornerRadius:I,cornerRadiusBbox:T}}function _u(t=[]){const[e,i]=t;return!(0!==e||1!==i)}x([Hn(ta)],Ou.prototype,"xKey",2),x([Hn(ta,{optional:!0})],Ou.prototype,"xName",2),x([Hn(ta)],Ou.prototype,"yKey",2),x([Hn(ta,{optional:!0})],Ou.prototype,"yName",2),x([Hn(ta,{optional:!0})],Ou.prototype,"stackGroup",2),x([Hn(ea,{optional:!0})],Ou.prototype,"normalizedTo",2),x([Hn(ya)],Ou.prototype,"fill",2),x([Hn(na)],Ou.prototype,"fillOpacity",2),x([Hn(ya)],Ou.prototype,"stroke",2),x([Hn(sa)],Ou.prototype,"strokeWidth",2),x([Hn(na)],Ou.prototype,"strokeOpacity",2),x([Hn(Ma)],Ou.prototype,"lineDash",2),x([Hn(sa)],Ou.prototype,"lineDashOffset",2),x([Hn(sa)],Ou.prototype,"cornerRadius",2),x([Hn(Jn,{optional:!0})],Ou.prototype,"formatter",2),x([Hn(Zn,{optional:!0})],Ou.prototype,"shadow",2),x([Hn(Zn)],Ou.prototype,"label",2),x([Hn(Zn)],Ou.prototype,"tooltip",2);var Fu=t=>{var e;return Hs(null!=(e=t.yValue)?e:0)};function Bu(t,e,i){const{startingX:s,startingY:n}=function(t,e){const i=e[t?"y":"x"];let s=1/0,n=0;if(!i)return{startingX:s,startingY:n};t?n=i.scale.convert(bo.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(bo.is(i.scale)?0:Math.min(...i.range));return{startingX:s,startingY:n}}(t,e);return{isVertical:t,calculate:(e,i)=>{let a=t?e.x:s,o=t?n:e.y,r=t?e.width:0,l=t?0:e.height;const h=e.opacity;return i&&(isNaN(a)||isNaN(o))&&(({x:a,y:o}=i),r=t?i.width:0,l=t?0:i.height,t&&!Fu(i)?o+=i.height:!t&&Fu(i)&&(a+=i.width)),{x:a,y:o,width:r,height:l,opacity:h}},mode:i}}function zu(t,e){return{isVertical:t,calculate:e=>({x:t?e.x:e.x+e.width/2,y:t?e.y+e.height/2:e.y,width:t?e.width:0,height:t?0:e.height,opacity:e.opacity}),mode:e}}function Gu(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,s,n)=>"removed"===n&&null==i.datum&&"fade"===t.mode?y(g({},Ku(i,s)),{opacity:0}):"removed"===n||e(s)?t.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,opacity:s.opacity},fromFn:(i,s,n)=>{"updated"===n&&e(s)?n="removed":"updated"===n&&e(i.previousDatum)&&(n="added");let a={x:i.x,y:i.y,width:i.width,height:i.height,opacity:i.opacity};"added"===n&&null==i.previousDatum&&"fade"===t.mode?a=y(g({},Ku(i,s)),{opacity:0}):"unknown"!==n&&"added"!==n||(a=t.calculate(s,i.previousDatum));const o=Rn[n];return y(g({},a),{phase:o})}}}function Ku(t,{x:e,y:i,width:s,height:n,opacity:a}){return{x:e,y:i,width:s,height:n,opacity:a}}function Vu(t,e,i){if(e.enabled&&i){const{x:s,y:n,text:a,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u}=e;t.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,textAlign:o,textBaseline:r})}else t.visible=!1}function Wu({isPositive:t,isVertical:e,placement:i,padding:s=0,rect:n}){let a=n.x+n.width/2,o=n.y+n.height/2,r="center",l="middle";switch(i){case"start":e?(o=t?n.y+n.height+s:n.y-s,l=t?"top":"bottom"):(a=t?n.x-s:n.x+n.width+s,r=t?"start":"end");break;case"outside":case"end":e?(o=t?n.y-s:n.y+n.height+s,l=t?"bottom":"top"):(a=t?n.x+n.width+s:n.x-s,r=t?"start":"end")}return{x:a,y:o,textAlign:r,textBaseline:l}}var Yu=class t extends Tu{constructor(t){super({moduleCtx:t,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Ku,label:Kd}}),this.properties=new Ou,this.groupScale=new jn,this.smallestDataInterval=void 0}resolveKeyDirection(t){return"x"===this.getBarDirection()?"x"===t?"y":"x":t}processData(t){return b(this,null,(function*(){var e,i,s,n;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:a=this.id}={},data:o=[]}=this,{xKey:r,yKey:l,normalizedTo:h}=this.properties,c=!this.ctx.animationManager.isSkipped(),d=Math.abs(null!=h?h:NaN),u=bo.is(null==(e=this.getCategoryAxis())?void 0:e.scale),p=bo.is(null==(i=this.getValueAxis())?void 0:i.scale),y=`bar-stack-${a}-yValues`,m=y+"-trailing",f=d&&isFinite(d)?d:void 0,x=[];f&&x.push(bc(this,[y,m],f,"range")),c&&this.processedData&&x.push(wc(this.processedData)),c&&x.push(Dc(this));const v=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,o,{props:[Ec(this,r,u,{id:"xValue"}),Oc(this,l,p,g({id:"yValue-raw",invalidValue:null},v)),...zc(this,l,p,"normal","current",g({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:y,separateNegative:!0},v)),...zc(this,l,p,"trailing","current",g({id:"yValue-start",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},v)),...u?[mc]:[],...x],groupByKeys:!0,groupByData:!1});this.smallestDataInterval={x:null!=(n=null==(s=b.reduced)?void 0:s.smallestKeyInterval)?n:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:s}=this;if(!i||!s||0===i.data.length)return[];const{reduced:{[mc.property]:n}={}}=i,a=this.getCategoryAxis(),o=this.getValueAxis(),r=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),h=s.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null==r?void 0:r.def.type)&&"category"===(null==r?void 0:r.def.valueType))return l;const i=null!=n&&isFinite(n)?n:0,s=null!=(e=vs(l))?e:[NaN,NaN],o=null==a?void 0:a.isReversed();if("y"===t){return Ol([s[0]+(o?0:-i),s[1]+(o?i:0)],a)}return Ol([s[0]+(o?-i:0),s[1]+(o?0:i)],a)}if(this.getValueAxis()instanceof xd)return Ol(h,o);return Ol([h[0]>0?0:h[0],h[1]<0?0:h[1]],o)}createNodeData(){return b(this,null,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&s&&this.properties.isValid()))return[];const n=i.scale,a=s.scale,{groupScale:o,processedData:r,smallestDataInterval:l,ctx:{seriesStateManager:h}}=this,{xKey:c,yKey:d,xName:u,yName:p,fill:y,stroke:m,strokeWidth:f,cornerRadius:x,legendItemName:b,label:S}=this.properties,k=s.isReversed(),D=bo.is(n)?n.calcBandwidth(null==l?void 0:l.x):n.bandwidth,M=[],{index:L,visibleGroupCount:A}=h.getVisiblePeerGroupIndex(this);for(let t=0;t<A;t++)M.push(String(t));o.domain=M,o.range=[0,null!=D?D:0],i instanceof ll?o.paddingInner=i.groupPaddingInner:o.padding=i instanceof xl?.1:0,o.round=0!==o.padding;const w=o.bandwidth>=1?o.bandwidth:o.rawBandwidth,N=e.resolveProcessedDataIndexById(this,"xValue").index,C=e.resolveProcessedDataIndexById(this,"yValue-raw").index,I=e.resolveProcessedDataIndexById(this,"yValue-start").index,T=e.resolveProcessedDataIndexById(this,"yValue-end").index,E=e.resolveProcessedDataDefById(this,"yValue-range").index,O=!this.ctx.animationManager.isSkipped(),R=[];return null==r||r.data.forEach(({keys:e,datum:i,values:s,aggValues:r})=>{s.forEach((s,l)=>{var h;null!=R[l]||(R[l]={itemId:d,nodeData:[],labelData:[],scales:v(t.prototype,this,"calculateScaling").call(this),visible:this.visible||O});const D=e[N],M=n.convert(D),A=+s[T],P=+s[I],_=s[C],F=_>=0,B=F!==k,z=null!=(h=null==r?void 0:r[E][F?1:0])?h:0,G=M+o.convert(String(L));if(isNaN(A))return;const K=a.convert(A),V=a.convert(P),W="x"===this.getBarDirection(),Y=a.convert(z),U=a.convert(0),j=new en(W?Math.min(U,Y):G,W?G:Math.min(U,Y),W?Math.abs(U-Y):w,W?w:Math.abs(U-Y)),H={x:W?Math.min(K,V):G,y:W?G:Math.min(K,V),width:W?Math.abs(V-K):w,height:W?w:Math.abs(V-K),cornerRadiusBbox:j},{fontStyle:X,fontWeight:$,fontSize:q,fontFamily:Z,color:Q,placement:J}=S,tt=this.getLabelText(this.properties.label,{datum:i[l],value:_,xKey:c,yKey:d,xName:u,yName:p,legendItemName:b},t=>Gt(t)?t.toFixed(2):""),et=tt?g({text:tt,fill:Q,fontStyle:X,fontWeight:$,fontSize:q,fontFamily:Z},Wu({isPositive:F,isVertical:!W,placement:J,rect:H})):void 0,it=this.shouldFlipXY()?H.height:H.width,st={series:this,itemId:d,datum:i[l],cumulativeValue:A,xValue:D,yValue:_,yKey:d,xKey:c,capDefaults:{lengthRatioMultiplier:it,lengthMax:it},x:H.x,y:H.y,width:H.width,height:H.height,midPoint:{x:H.x+H.width/2,y:H.y+H.height/2},fill:y,stroke:m,opacity:1,strokeWidth:f,cornerRadius:x,topLeftCornerRadius:!(W===B),topRightCornerRadius:B,bottomRightCornerRadius:W===B,bottomLeftCornerRadius:!B,cornerRadiusBbox:j,label:et};R[l].nodeData.push(st),R[l].labelData.push(st)})}),R}))}nodeFactory(){return new Md}updateDatumSelection(t){return b(this,null,(function*(){return t.datumSelection.update(t.nodeData,t=>{t.tag=0},t=>Nc(t.xValue))}))}updateDatumNodes(t){return b(this,null,(function*(){if(!this.properties.isValid())return;const{yKey:e,stackGroup:i,fill:s,fillOpacity:n,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:h,formatter:c,shadow:d,highlightStyle:{item:u}}=this.properties,p=this.axes.x,g=_u(null==p?void 0:p.visibleRange),y="x"===this.getCategoryDirection();t.datumSelection.each((p,m)=>{const f={fill:s,stroke:a,fillOpacity:n,strokeOpacity:r,lineDash:l,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(o),cornerRadius:m.cornerRadius,topLeftCornerRadius:m.topLeftCornerRadius,topRightCornerRadius:m.topRightCornerRadius,bottomRightCornerRadius:m.bottomRightCornerRadius,bottomLeftCornerRadius:m.bottomLeftCornerRadius,cornerRadiusBbox:m.cornerRadiusBbox},x=y?m.width>0:m.height>0,v=Pu({datum:m,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:u,yKey:e,style:f,formatter:c,stackGroup:i});v.crisp=g,v.visible=x,Ru({rect:p,config:v})})}))}updateLabelSelection(t){return b(this,null,(function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,t=>{t.tag=1,t.pointerEvents=1})}))}updateLabelNodes(t){return b(this,null,(function*(){t.labelSelection.each((t,e)=>{Vu(t,this.properties.label,e.label)})}))}getTooltipHtml(t){var e;const{id:i,processedData:s,ctx:{callbackCache:n}}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!(s&&this.properties.isValid()&&a&&o))return"";const{xKey:r,yKey:l,xName:h,yName:c,fill:d,stroke:u,strokeWidth:p,tooltip:y,formatter:m,stackGroup:f}=this.properties,{xValue:x,yValue:v,datum:b}=t,S=a.formatDatum(x),k=o.formatDatum(v),D=Bd(c),M=Bd(S+": "+k);let L;m&&(L=n.call(m,{seriesId:i,datum:b,xKey:r,yKey:l,stackGroup:f,fill:d,stroke:u,strokeWidth:this.getStrokeWidth(p),highlighted:!1}));const A=null!=(e=null==L?void 0:L.fill)?e:d;return y.toTooltipHtml({title:D,content:M,backgroundColor:A},g({seriesId:i,datum:b,xKey:r,yKey:l,xName:h,yName:c,stackGroup:f,title:D,color:A},this.getModuleTooltipParams()))}getLegendData(t){var e,i;const{showInLegend:s}=this.properties;if("category"!==t||!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||!s)return[];const{yKey:n,yName:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c,legendItemName:d,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:u,label:{text:null!=(i=null!=d?d:a)?i:n},marker:{fill:o,fillOpacity:h,stroke:r,strokeWidth:l,strokeOpacity:c},legendItemName:d}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,annotationSelections:i}){const s=Gu(Bu(this.isVertical(),this.axes,"normal"));Pn(this.id,"nodes",this.ctx.animationManager,t,s),zd(this,"labels",this.ctx.animationManager,e),zd(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i,s;const{datumSelections:n,labelSelections:a,annotationSelections:o,previousContextData:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,h=0===(null==r?void 0:r.length)?"fade":"normal",c=Gu(Bu(this.isVertical(),this.axes,h));Pn(this.id,"nodes",this.ctx.animationManager,n,c,(t,e)=>Nc(e.xValue),l);(null==(s=null==l?void 0:l.changed)||s)&&(zd(this,"labels",this.ctx.animationManager,a),zd(this,"annotations",this.ctx.animationManager,o))}isLabelEnabled(){return this.properties.label.enabled}};Yu.className="BarSeries",Yu.type="bar";var Uu={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Yu,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},swapDefaultAxesCondition:t=>"horizontal"===(null==t?void 0:t.direction),themeTemplate:{series:{__extends__:ai,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:li,color:di,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:fi,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Rd},ju=t=>{const e=un.fromString(t),[i,s,n]=un.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:n,a:e.a}},Hu=class{constructor(){this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(ju)}update(){const{domain:t,range:e}=this;t.length<2&&(C.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){C.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(ju)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,n=e[0],a=e.at(-1),o=i[0],r=i[i.length-1];if(t<=n)return o;if(t>=a)return r;let l,h;if(2===e.length){const e=(t-n)/(a-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*s)/s}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let s,n;if(i=Vs(0,i,1),Number.isNaN(t.h)&&Number.isNaN(e.h))s=0,n=0;else if(Number.isNaN(t.h))s=e.h,n=e.c;else if(Number.isNaN(e.h))s=t.h,n=t.c;else{const a=t.h;let o=e.h;const r=e.h-t.h;r>180?o-=360:r<-180&&(o+=360),s=a*(1-i)+o*i,n=t.c*(1-i)+e.c*i}const a=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return un.fromOKLCH(a,n,s,o)})(s[l],s[l+1],h).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&C.warnOnce("Expected update to not invalidate scale"))}};x([Un],Hu.prototype,"domain",2),x([Un],Hu.prototype,"range",2);var Xu=class extends Ud{constructor(){super(...arguments),this.maxSize=30}};x([Hn(sa),Ks({redraw:3})],Xu.prototype,"maxSize",2),x([Hn(xa,{optional:!0}),Ks({redraw:3})],Xu.prototype,"domain",2);var $u=class extends od{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Xu,this.label=new Ao,this.tooltip=new Hd}};x([Hn(ta)],$u.prototype,"xKey",2),x([Hn(ta)],$u.prototype,"yKey",2),x([Hn(ta)],$u.prototype,"sizeKey",2),x([Hn(ta,{optional:!0})],$u.prototype,"labelKey",2),x([Hn(ta,{optional:!0})],$u.prototype,"colorKey",2),x([Hn(ta,{optional:!0})],$u.prototype,"xName",2),x([Hn(ta,{optional:!0})],$u.prototype,"yName",2),x([Hn(ta,{optional:!0})],$u.prototype,"sizeName",2),x([Hn(ta,{optional:!0})],$u.prototype,"labelName",2),x([Hn(ta,{optional:!0})],$u.prototype,"colorName",2),x([Hn(xa,{optional:!0})],$u.prototype,"colorDomain",2),x([Hn(ma)],$u.prototype,"colorRange",2),x([Hn(ta,{optional:!0})],$u.prototype,"title",2),x([Hn(Zn)],$u.prototype,"marker",2),x([Hn(Zn)],$u.prototype,"label",2),x([Hn(Zn)],$u.prototype,"tooltip",2);var qu=class extends ad{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},Zu=class t extends rd{constructor(t){super({moduleCtx:t,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Kd,marker:Qd}}),this.NodeClickEvent=qu,this.properties=new $u,this.sizeScale=new pd,this.colorScale=new Hu}processData(t){return b(this,null,(function*(){var e,i;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:s,isContinuousY:n}=this.isContinuous(),{xKey:a,yKey:o,sizeKey:r,labelKey:l,colorDomain:h,colorRange:c,colorKey:d,marker:u}=this.properties,{dataModel:p,processedData:g}=yield this.requestDataModel(t,this.data,{props:[Ec(this,a,s,{id:"xKey-raw"}),Ec(this,o,n,{id:"yKey-raw"}),...l?[Ec(this,l,!1,{id:"labelKey-raw"})]:[],Oc(this,a,s,{id:"xValue"}),Oc(this,o,n,{id:"yValue"}),Oc(this,r,!0,{id:"sizeValue"}),...d?[Oc(this,d,!0,{id:"colorValue"})]:[],...l?[Oc(this,l,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=p.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!=(e=g.domain.values[y])?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=p.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(i=null!=h?h:g.domain.values[t])?i:[],this.colorScale.range=c,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s="x"===t?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if("value"===(null==n?void 0:n.def.type)&&"category"===(null==n?void 0:n.def.valueType))return a;const o=this.axes[t];return Ol(vs(a),o)}createNodeData(){return b(this,null,(function*(){var e,i,s;const{axes:n,dataModel:a,processedData:o,colorScale:r,sizeScale:l}=this,{xKey:h,yKey:c,sizeKey:d,labelKey:u,xName:p,yName:y,sizeName:m,labelName:f,label:x,colorKey:b,marker:S,visible:k}=this.properties,D=n.x,M=n.y;if(!(a&&o&&k&&D&&M))return[];const L=a.resolveProcessedDataIndexById(this,"xValue").index,A=a.resolveProcessedDataIndexById(this,"yValue").index,w=d?a.resolveProcessedDataIndexById(this,"sizeValue").index:-1,N=b?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=u?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,I=D.scale,T=M.scale,E=(null!=(e=I.bandwidth)?e:0)/2,O=(null!=(i=T.bandwidth)?i:0)/2,R=[];l.range=[S.size,S.maxSize];const P=x.getFont();for(const{values:t,datum:e}of null!=(s=o.data)?s:[]){const i=t[L],s=t[A],n=I.convert(i)+E,a=T.convert(s)+O,o=this.getLabelText(x,{value:u?t[C]:s,datum:e,xKey:h,yKey:c,sizeKey:d,labelKey:u,xName:p,yName:y,sizeName:m,labelName:f}),v=Ya.getTextSize(String(o),P),k=d?l.convert(t[w]):S.size,D=b?r.convert(t[N]):void 0;R.push({series:this,itemId:c,yKey:c,xKey:h,datum:e,xValue:i,yValue:s,sizeValue:t[w],point:{x:n,y:a,size:k},midPoint:{x:n,y:a},fill:D,label:g({text:o},v)})}return[{itemId:c,nodeData:R,labelData:R,scales:v(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return null==(t=this.contextNodeData)?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.properties.marker;return new(Gh(t))}updateMarkerSelection(t){return b(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,t=>Nc([t.xValue,t.yValue,t.label.text]))}))}updateMarkerNodes(t){return b(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,sizeKey:a,labelKey:o,marker:r}=this.properties,l=jt(i&&this.properties.highlightStyle.item,r.getStyle());this.sizeScale.range=[r.size,r.maxSize],e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:s,yKey:n,sizeKey:a,labelKey:o},l)}),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return b(this,null,(function*(){var e,i;const s=this.properties.label.enabled&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(s.map(t=>y(g({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})))}))}updateLabelNodes(t){return b(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each((t,i)=>{var s,n,a,o;t.text=i.label.text,t.fill=e.color,t.x=null!=(n=null==(s=i.point)?void 0:s.x)?n:0,t.y=null!=(o=null==(a=i.point)?void 0:a.y)?o:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,sizeKey:o,labelKey:r,xName:l,yName:h,sizeName:c,labelName:d,marker:u,tooltip:p}=this.properties,g=null!=(e=this.properties.title)?e:h,y=jt({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:m="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:n,yKey:a,sizeKey:o,labelKey:r},y),{datum:f,xValue:x,yValue:v,sizeValue:b,label:{text:S}}=t,k=Bd(i.formatDatum(x)),D=Bd(s.formatDatum(v));let M=`<b>${Bd(null!=l?l:n)}</b>: ${k}<br><b>${Bd(null!=h?h:a)}</b>: ${D}`;return o&&(M+=`<br><b>${Bd(null!=c?c:o)}</b>: ${Bd(String(b))}`),r&&(M=`<b>${Bd(null!=d?d:r)}</b>: ${Bd(S)}<br>`+M),p.toTooltipHtml({title:g,content:M,backgroundColor:m},{datum:f,xKey:n,xName:l,yKey:a,yName:h,sizeKey:o,sizeName:c,labelKey:r,labelName:d,title:g,color:m,seriesId:this.id})}getLegendData(){var t,e;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid())return[];const{yKey:i,yName:s,title:n,marker:a,visible:o}=this.properties,{shape:r,fill:l,stroke:h,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=a;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:o,label:{text:null!=(e=null!=n?n:s)?e:i},marker:{shape:r,fill:null!=l?l:"rgba(0, 0, 0, 0)",stroke:null!=h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!=c?c:1,strokeOpacity:null!=d?d:1,strokeWidth:null!=u?u:0}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){qd(this,this.ctx.animationManager,t),zd(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}};Zu.className="BubbleSeries",Zu.type="bubble";var Qu={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:Zu,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:ai,tooltip:{position:{type:"node"}},marker:{__extends__:oi,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi}}},paletteFactory:Pd},Ju=class extends od{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Wd,this.label=new Ao,this.tooltip=new Hd}};x([Hn(ta)],Ju.prototype,"xKey",2),x([Hn(ta,{optional:!0})],Ju.prototype,"yKey",2),x([Hn(ta,{optional:!0})],Ju.prototype,"xName",2),x([Hn(ta,{optional:!0})],Ju.prototype,"yName",2),x([Hn(ya,{optional:!0})],Ju.prototype,"fill",2),x([Hn(na)],Ju.prototype,"fillOpacity",2),x([Hn(ya,{optional:!0})],Ju.prototype,"stroke",2),x([Hn(sa)],Ju.prototype,"strokeWidth",2),x([Hn(na)],Ju.prototype,"strokeOpacity",2),x([Hn(Ma)],Ju.prototype,"lineDash",2),x([Hn(sa)],Ju.prototype,"lineDashOffset",2),x([Hn(Qn)],Ju.prototype,"areaPlot",2),x([Hn(ra,{optional:!0})],Ju.prototype,"bins",2),x([Hn(Pa(["count","sum","mean"],"a histogram aggregation"))],Ju.prototype,"aggregation",2),x([Hn(sa,{optional:!0})],Ju.prototype,"binCount",2),x([Hn(Zn)],Ju.prototype,"shadow",2),x([Hn(Zn)],Ju.prototype,"label",2),x([Hn(Zn)],Ju.prototype,"tooltip",2);var tp=class t extends rd{constructor(t){super({moduleCtx:t,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Ku,label:Kd}}),this.properties=new Ju,this.calculatedBins=[]}deriveBins(t){if(this.properties.binCount)return this.calculateNiceBins(t,this.properties.binCount);const e=vr(t[0],t[1],10),i=Sr(t[0],t[1],10),[s]=e;return[[s-i,s],...e.map(t=>[t,t+i])]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:a,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(a,s,o,n)}getBins(t,e,i,s){const n=[],a=this.calculatePrecision(i);for(let o=0;o<s;o++){const r=Math.round((t+o*i)*a)/a;let l=Math.round((t+(o+1)*i)*a)/a;o===s-1&&(l=Math.max(l,e)),n[o]=[r,l]}return n}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return{start:Math.floor(t/a)*a,binSize:s}}processData(t){return b(this,null,(function*(){var e;const{xKey:i,yKey:s,areaPlot:n,aggregation:a}=this.properties,o=[Ec(this,i,!0),xc];if(s){let t=lc(this,"groupCount");"count"===a||("sum"===a?t=ac(this,"groupAgg"):"mean"===a&&(t=cc(this,"groupAgg"))),n&&(t=dc(this,"groupAgg",t)),o.push(Oc(this,s,!0,{invalidValue:void 0}),t)}else{let t=lc(this,"groupAgg");n&&(t=dc(this,"groupAgg",t)),o.push(t)}!this.ctx.animationManager.isSkipped()&&this.processedData&&o.push(wc(this.processedData,!1)),yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:o,dataVisible:this.visible,groupByFn:t=>{var e;const i=Ol(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const s=null!=(e=this.properties.bins)?e:this.deriveBins(i),n=s.length;return this.calculatedBins=[...s],t=>{const e=t.keys[0];for(let t=0;t<n;t++){const i=s[t];if(e>=i[0]&&e<i[1])return i;if(t===n-1&&e<=i[1])return i}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,s,n;const{processedData:a,dataModel:o}=this;if(!a||!o||!this.calculatedBins.length)return[];const r=o.getDomain(this,"groupAgg","aggregate",a),l=null==(e=this.calculatedBins)?void 0:e[0][0],h=null==(n=this.calculatedBins)?void 0:n[(null!=(s=null==(i=this.calculatedBins)?void 0:i.length)?s:0)-1][1];return Ol("x"===t?[l,h]:r)}createNodeData(){return b(this,null,(function*(){var e;const{id:i,axes:s,processedData:n,ctx:{callbackCache:a}}=this,o=s.x,r=s.y;if(!(this.visible&&o&&r&&n&&"grouped"===n.type))return[];const{scale:l}=o,{scale:h}=r,{xKey:c,yKey:d,xName:u,yName:p,fill:g,stroke:y,strokeWidth:m}=this.properties,{formatter:f=(t=>String(t.value)),fontStyle:x,fontWeight:b,fontSize:S,fontFamily:k,color:D}=this.properties.label,M=[];return n.data.forEach(t=>{var e;const{aggValues:[[s,n]]=[[0,0]],datum:o,datum:{length:r},keys:v,keys:[L,A]}=t,w=l.convert(L),N=l.convert(A),C=s+n,I=h.convert(0),T=h.convert(C),E=Math.abs(N-w),O=Math.abs(T-I),R=Math.min(w,N),P=Math.min(I,T),_=0!==C?{text:null!=(e=a.call(f,{value:C,datum:o,seriesId:i,xKey:c,yKey:d,xName:u,yName:p}))?e:String(C),fontStyle:x,fontWeight:b,fontSize:S,fontFamily:k,fill:D,x:R+E/2,y:P+O/2}:void 0,F={x:R+E/2,y:P+O/2};M.push({series:this,datum:o,aggregatedValue:C,frequency:r,domain:v,yKey:d,xKey:c,x:R,y:P,xValue:w,yValue:T,width:E,height:O,midPoint:F,fill:g,stroke:y,opacity:1,strokeWidth:m,label:_})}),[{itemId:null!=(e=this.properties.yKey)?e:this.id,nodeData:M,labelData:M,scales:v(t.prototype,this,"calculateScaling").call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new Md}updateDatumSelection(t){return b(this,null,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=0,t.crisp=!0},t=>t.domain.join("_"))}))}updateDatumNodes(t){return b(this,null,(function*(){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:a,shadow:o,highlightStyle:{item:{fill:r,fillOpacity:l=i,stroke:h,strokeWidth:c}}}=this.properties;t.datumSelection.each((t,d,u)=>{var p,g;const y=e&&void 0!==c?c:d.strokeWidth,m=e?l:i;t.fill=null!=(p=e?r:void 0)?p:d.fill,t.stroke=null!=(g=e?h:void 0)?g:d.stroke,t.fillOpacity=m,t.strokeOpacity=s,t.strokeWidth=y,t.lineDash=n,t.lineDashOffset=a,t.fillShadow=o,t.zIndex=e?Vc.highlightedZIndex:u,t.visible=d.height>0})}))}updateLabelSelection(t){return b(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=1,t.pointerEvents=1,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return b(this,null,(function*(){const e=this.isLabelEnabled();t.labelSelection.each((t,i)=>{const s=i.label;s&&e?(t.text=s.text,t.x=s.x,t.y=s.y,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.fontSize=s.fontSize,t.fontFamily=s.fontFamily,t.fill=s.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return"";const{xKey:s,yKey:n,xName:a,yName:o,fill:r,aggregation:l,tooltip:h}=this.properties,{aggregatedValue:c,frequency:d,domain:[u,p]}=t,g=`${Bd(null!=a?a:s)}: ${e.formatDatum(u)} - ${e.formatDatum(p)}`;let y=n?`<b>${Bd(null!=o?o:n)} (${l})</b>: ${i.formatDatum(c)}<br>`:"";y+="<b>Frequency</b>: "+d;const m={title:g,backgroundColor:r,content:y};return h.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:s,xName:a,yKey:n,yName:o,color:r,title:g,seriesId:this.id})}getLegendData(t){var e,i;if(!(null==(e=this.data)?void 0:e.length)||"category"!==t)return[];const{xKey:s,yName:n,fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:h,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:c,label:{text:null!=(i=null!=n?n:s)?i:"Frequency"},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=r?r:"rgba(0, 0, 0, 0)",fillOpacity:o,strokeOpacity:h,strokeWidth:l}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=Gu(Bu(!0,this.axes,"normal"));Pn(this.id,"datums",this.ctx.animationManager,t,i),zd(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,n=Gu(Bu(!0,this.axes,"normal"));Pn(this.id,"datums",this.ctx.animationManager,t.datumSelections,n,(t,e)=>Nc(e.domain),s),zd(this,"labels",this.ctx.animationManager,t.labelSelections)}isLabelEnabled(){return this.properties.label.enabled}};tp.className="HistogramSeries",tp.type="histogram";var ep={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:tp,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:ai,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:di,formatter:void 0},shadow:{enabled:!1,color:fi,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}},ip=class extends od{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new Ud,this.label=new Ao,this.tooltip=new Hd,this.connectMissingData=!1}};x([Hn(ta)],ip.prototype,"xKey",2),x([Hn(ta)],ip.prototype,"yKey",2),x([Hn(ta,{optional:!0})],ip.prototype,"xName",2),x([Hn(ta,{optional:!0})],ip.prototype,"yName",2),x([Hn(ta,{optional:!0})],ip.prototype,"title",2),x([Hn(ya)],ip.prototype,"stroke",2),x([Hn(sa)],ip.prototype,"strokeWidth",2),x([Hn(na)],ip.prototype,"strokeOpacity",2),x([Hn(Ma)],ip.prototype,"lineDash",2),x([Hn(sa)],ip.prototype,"lineDashOffset",2),x([Hn(Zn)],ip.prototype,"marker",2),x([Hn(Zn)],ip.prototype,"label",2),x([Hn(Zn)],ip.prototype,"tooltip",2),x([Hn(Qn)],ip.prototype,"connectMissingData",2);var sp=class t extends rd{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:cu({getOpacity:()=>this.getOpacity()}),label:Kd,marker:(t,e)=>g(g({},{opacity:1,scalingX:1,scalingY:1}),Jd(0,e))}}),this.properties=new ip}processData(t){return b(this,null,(function*(){if(!this.properties.isValid()||null==this.data)return;const{xKey:e,yKey:i}=this.properties,s=!this.ctx.animationManager.isSkipped(),{isContinuousX:n,isContinuousY:a}=this.isContinuous(),o=[];n||(o.push(Ec(this,e,n,{id:"xKey"})),s&&this.processedData&&o.push(wc(this.processedData))),s&&o.push(Dc(this,n?["xValue"]:[])),o.push(Oc(this,e,n,{id:"xValue"}),Oc(this,i,a,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,this.data,{props:o}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];const n=e.x,a=e.y,o=i.resolveProcessedDataDefById(this,"xValue");if("x"===t){const t=i.getDomain(this,"xValue","value",s);return"value"===(null==o?void 0:o.def.type)&&"category"===o.def.valueType?t:Ol(vs(t),n)}return Ol(i.getDomain(this,"yValue","value",s),a)}createNodeData(){return b(this,null,(function*(){var e,i,s;const{processedData:n,dataModel:a,axes:o}=this,r=o.x,l=o.y;if(!(n&&a&&r&&l))return[];const{xKey:h,yKey:c,xName:d,yName:u,marker:p,label:g,connectMissingData:y}=this.properties,m=r.scale,f=l.scale,x=(null!=(e=m.bandwidth)?e:0)/2,b=(null!=(i=f.bandwidth)?i:0)/2,S=[],k=p.enabled?p.size:0,D=a.resolveProcessedDataIndexById(this,"xValue").index,M=a.resolveProcessedDataIndexById(this,"yValue").index;let L,A=!0;for(let t=0;t<n.data.length;t++){const{datum:e,values:i}=null!=L?L:n.data[t],a=i[D],o=i[M];if(void 0===o)A=!y;else{const i=m.convert(a)+x;if(isNaN(i)){A=!y,L=void 0;continue}L=void 0===(null==(s=n.data[t+1])?void 0:s.values[M])?void 0:n.data[t+1];const r=f.convert(o)+b,l=this.getLabelText(g,{value:o,datum:e,xKey:h,yKey:c,xName:d,yName:u},t=>Gt(t)?t.toFixed(2):String(t));S.push({series:this,datum:e,yKey:c,xKey:h,point:{x:i,y:r,moveTo:A,size:k},midPoint:{x:i,y:r},yValue:o,xValue:a,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0}),A=!1}}return[{itemId:c,nodeData:S,labelData:S,scales:v(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(Gh(t))}updatePathNodes(t){return b(this,null,(function*(){const{paths:[e],opacity:i,visible:s,animationEnabled:n}=t;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(e.visible=s),du(this,e)}))}updateMarkerSelection(t){return b(this,null,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:s,enabled:n}=this.properties.marker;return e=s&&n?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,t=>Nc(t.xValue))}))}updateMarkerNodes(t){return b(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,stroke:a,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:h}=this.properties,c=jt(i&&h.item,l.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:r}),d=this.ctx.animationManager.isSkipped();e.each((t,e)=>{this.updateMarkerStyle(t,l,{datum:e,highlighted:i,xKey:s,yKey:n},c,{applyTranslation:d})}),i||l.markClean()}))}updateLabelSelection(t){return b(this,null,(function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}))}updateLabelNodes(t){return b(this,null,(function*(){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,color:o}=this.properties.label;t.labelSelection.each((t,r)=>{const{point:l,label:h}=r;r&&h&&e?(t.fontStyle=i,t.fontWeight=s,t.fontSize=n,t.fontFamily=a,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=o,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,xName:o,yName:r,strokeWidth:l,marker:h,tooltip:c}=this.properties,{datum:d,xValue:u,yValue:p}=t,y=i.formatDatum(u),m=s.formatDatum(p),f=Bd(null!=(e=this.properties.title)?e:r),x=Bd(y+": "+m),v=jt({fill:h.stroke},h.getStyle(),{strokeWidth:l}),{fill:b}=this.getMarkerStyle(h,{datum:t,xKey:n,yKey:a,highlighted:!1},v);return c.toTooltipHtml({title:f,content:x,backgroundColor:b},g({datum:d,xKey:n,xName:o,yKey:a,yName:r,title:f,color:b,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,o,r,l,h;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{yKey:c,yName:d,stroke:u,strokeOpacity:p,strokeWidth:g,lineDash:y,title:m,marker:f,visible:x}=this.properties,v="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:c,seriesId:this.id,enabled:x,label:{text:null!=(i=null!=m?m:d)?i:c},marker:{shape:f.shape,fill:null!=(s=f.fill)?s:v,stroke:null!=(a=null!=(n=f.stroke)?n:u)?a:v,fillOpacity:null!=(o=f.fillOpacity)?o:1,strokeOpacity:null!=(l=null!=(r=f.strokeOpacity)?r:p)?l:1,strokeWidth:null!=(h=f.strokeWidth)?h:0,enabled:f.enabled},line:{stroke:null!=u?u:v,strokeOpacity:p,strokeWidth:g,lineDash:y}}]}updatePaths(t){return b(this,null,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(({nodeData:e},i)=>{const[s]=t[i],{path:n}=s;n.clear({trackChanges:!0});for(const t of e)t.point.moveTo?n.moveTo(t.point.x,t.point.y):n.lineTo(t.point.x,t.point.y);s.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:s,contextData:n,paths:a}=t,{animationManager:o}=this.ctx;this.updateLinePaths(a,n),ru(this,o,a.flat()),er(e,Jd),Zd(this,o,e),zd(this,"labels",o,i),zd(this,"annotations",o,s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:a,annotationSelections:o,contextData:r,paths:l,previousContextData:h}=t,[c]=l;super.resetAllAnimation(t);const d=()=>{this.updateLinePaths(l,r)};if(0===r.length||0===(null==h?void 0:h.length))return d(),$d(this,s,n,"added"),lu(this,"path_properties",s,null!=c?c:[]),zd(this,"labels",s,a),void zd(this,"annotations",s,o);const[u]=r,[p]=null!=h?h:[],g=Du(u,p,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===g)return s.skipCurrentBatch(),void d();$d(this,s,n),Pn(this.id,"path_properties",s,c,g.pathProperties),_d(this.id,"path_update",s,c,g.path),g.hasMotion&&(zd(this,"labels",s,a),zd(this,"annotations",s,o))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Mo}};sp.className="LineSeries",sp.type="line";var np={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:sp,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:ai,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:oi,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi,formatter:void 0}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=Pd(t);return{stroke:e.fill,marker:e}}},ap=class extends od{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Ud,this.label=new Ao,this.tooltip=new Hd}};x([Hn(ta)],ap.prototype,"xKey",2),x([Hn(ta)],ap.prototype,"yKey",2),x([Hn(ta,{optional:!0})],ap.prototype,"labelKey",2),x([Hn(ta,{optional:!0})],ap.prototype,"colorKey",2),x([Hn(ta,{optional:!0})],ap.prototype,"xName",2),x([Hn(ta,{optional:!0})],ap.prototype,"yName",2),x([Hn(ta,{optional:!0})],ap.prototype,"labelName",2),x([Hn(ta,{optional:!0})],ap.prototype,"colorName",2),x([Hn(xa,{optional:!0})],ap.prototype,"colorDomain",2),x([Hn(ma)],ap.prototype,"colorRange",2),x([Hn(ta,{optional:!0})],ap.prototype,"title",2),x([Hn(Zn)],ap.prototype,"marker",2),x([Hn(Zn)],ap.prototype,"label",2),x([Hn(Zn)],ap.prototype,"tooltip",2);var op=class t extends rd{constructor(t){super({moduleCtx:t,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Qd,label:Kd}}),this.properties=new ap,this.colorScale=new Hu}processData(t){return b(this,null,(function*(){var e;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:i,isContinuousY:s}=this.isContinuous(),{xKey:n,yKey:a,labelKey:o,colorKey:r,colorDomain:l,colorRange:h}=this.properties,{dataModel:c,processedData:d}=yield this.requestDataModel(t,this.data,{props:[Ec(this,n,i,{id:"xKey-raw"}),Ec(this,a,s,{id:"yKey-raw"}),...o?[Ec(this,o,!1,{id:"labelKey-raw"})]:[],Oc(this,n,i,{id:"xValue"}),Oc(this,a,s,{id:"yValue"}),...r?[Oc(this,r,!0,{id:"colorValue"})]:[],...o?[Oc(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(r){const t=c.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(e=null!=l?l:d.domain.values[t])?e:[],this.colorScale.range=h,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s="x"===t?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if("value"===(null==n?void 0:n.def.type)&&"category"===(null==n?void 0:n.def.valueType))return a;const o=this.axes[t];return Ol(vs(a),o)}createNodeData(){return b(this,null,(function*(){var e,i,s;const{axes:n,dataModel:a,processedData:o,colorScale:r}=this,{xKey:l,yKey:h,labelKey:c,colorKey:d,xName:u,yName:p,labelName:y,marker:m,label:f,visible:x}=this.properties,b=n.x,S=n.y;if(!(a&&o&&x&&b&&S))return[];const k=a.resolveProcessedDataIndexById(this,"xValue").index,D=a.resolveProcessedDataIndexById(this,"yValue").index,M=d?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,L=c?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,A=b.scale,w=S.scale,N=(null!=(e=A.bandwidth)?e:0)/2,C=(null!=(i=w.bandwidth)?i:0)/2,I=[],T=f.getFont();for(const{values:t,datum:e}of null!=(s=o.data)?s:[]){const i=t[k],s=t[D],n=A.convert(i)+N,a=w.convert(s)+C,o=this.getLabelText(f,{value:c?t[L]:s,datum:e,xKey:l,yKey:h,labelKey:c,xName:u,yName:p,labelName:y}),x=Ya.getTextSize(o,T),v=d?r.convert(t[M]):void 0;I.push({series:this,itemId:h,yKey:h,xKey:l,datum:e,xValue:i,yValue:s,capDefaults:{lengthRatioMultiplier:m.getDiameter(),lengthMax:1/0},point:{x:n,y:a,size:m.size},midPoint:{x:n,y:a},fill:v,label:g({text:o},x)})}return[{itemId:h,nodeData:I,labelData:I,scales:v(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return null==(t=this.contextNodeData)?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.properties.marker;return new(Gh(t))}updateMarkerSelection(t){return b(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return b(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,labelKey:a,marker:o,highlightStyle:r}=this.properties,l=jt(i&&r.item,o.getStyle());e.each((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:s,yKey:n,labelKey:a},l)}),i||o.markClean()}))}updateLabelSelection(t){return b(this,null,(function*(){var e,i;const s=this.isLabelEnabled()&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(s.map(({datum:t,x:e,y:i})=>y(g({},t),{point:{x:e,y:i,size:t.point.size}})),t=>{t.pointerEvents=1})}))}updateLabelNodes(t){return b(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each((t,i)=>{var s,n,a,o;t.text=i.label.text,t.fill=e.color,t.x=null!=(n=null==(s=i.point)?void 0:s.x)?n:0,t.y=null!=(o=null==(a=i.point)?void 0:a.y)?o:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return"";const{xKey:s,yKey:n,labelKey:a,xName:o,yName:r,labelName:l,title:h=r,marker:c,tooltip:d}=this.properties,{datum:u,xValue:p,yValue:y,label:m}=t,f=jt({fill:t.fill,strokeWidth:this.getStrokeWidth(c.strokeWidth)},c.getStyle()),{fill:x="gray"}=this.getMarkerStyle(c,{datum:t,highlighted:!1,xKey:s,yKey:n,labelKey:a},f),v=Bd(e.formatDatum(p)),b=Bd(i.formatDatum(y));let S=`<b>${Bd(null!=o?o:s)}</b>: ${v}<br><b>${Bd(null!=r?r:n)}</b>: ${b}`;return a&&(S=`<b>${Bd(null!=l?l:a)}</b>: ${Bd(m.text)}<br>`+S),d.toTooltipHtml({title:h,content:S,backgroundColor:x},g({datum:u,xKey:s,xName:o,yKey:n,yName:r,labelKey:a,labelName:l,title:h,color:x,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,o;const{yKey:r,yName:l,title:h,marker:c,visible:d}=this.properties,{fill:u,stroke:p,fillOpacity:g,strokeOpacity:y,strokeWidth:m}=c;return(null==(e=this.data)?void 0:e.length)&&this.properties.isValid()&&"category"===t?[{legendType:"category",id:this.id,itemId:r,seriesId:this.id,enabled:d,label:{text:null!=(i=null!=h?h:l)?i:r},marker:{shape:c.shape,fill:null!=(n=null!=(s=c.fill)?s:u)?n:"rgba(0, 0, 0, 0)",stroke:null!=(o=null!=(a=c.stroke)?a:p)?o:"rgba(0, 0, 0, 0)",fillOpacity:null!=g?g:1,strokeOpacity:null!=y?y:1,strokeWidth:null!=m?m:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:s}=t;qd(this,this.ctx.animationManager,e),zd(this,"labels",this.ctx.animationManager,i),zd(this,"annotations",this.ctx.animationManager,s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}};op.className="ScatterSeries",op.type="scatter";var rp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:op,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:ai,tooltip:{position:{type:"node"}},marker:{__extends__:oi,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Pd};function lp(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const o=Kn(i.startAngle),r=Kn(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function hp(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=e,o={x:a*Math.cos(i),y:a*Math.sin(i)},r={x:a*Math.cos(s),y:a*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},h=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return null!=xh(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||null!=xh(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,h.x,h.y)||Sh(0,0,a,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}function cp(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return hp({start:i,end:s},e)||hp({start:n,end:a},e)}var dp=class extends Mh{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new en(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,s=this.startAngle+e,n=this.endAngle+e,a=s<=n?n-s:2*Math.PI-(s-n),o=Math.max(Math.min(this.innerRadius,this.outerRadius)+i,0),r=Math.max(Math.max(this.innerRadius,this.outerRadius)-i,0),l=a>=2*Math.PI,h=this.centerX,c=this.centerY;if(t.clear(),l)t.arc(h,c,r,s,n),o>i&&(t.moveTo(h+o*Math.cos(n),c+o*Math.sin(n)),t.arc(h,c,o,n,s,!0));else{const e=o>0?i/o:0,l=r>0?i/r:0;if(a<2*l)return;const d=o<=i||a<2*e;if(d){const e=a<.5*Math.PI?i*(1+Math.cos(a))/Math.sin(a):NaN;let n;n=e>0&&e<r?Math.max(Math.hypot(i,e),o):o;const l=s+.5*a;t.moveTo(h+n*Math.cos(l),c+n*Math.sin(l))}else t.moveTo(h+o*Math.cos(s+e),c+o*Math.sin(s+e));t.arc(h,c,r,s+l,n-l),d||(o>0?t.arc(h,c,o,n-e,s+e,!0):t.lineTo(h,c))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,a=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),r=this.transformPoint(t,e);return lp(r.x,r.y,{startAngle:s,endAngle:n,innerRadius:a,outerRadius:o})}};dp.className="Sector",x([Dh()],dp.prototype,"centerX",2),x([Dh()],dp.prototype,"centerY",2),x([Dh()],dp.prototype,"innerRadius",2),x([Dh()],dp.prototype,"outerRadius",2),x([Dh()],dp.prototype,"startAngle",2),x([Dh()],dp.prototype,"endAngle",2),x([Dh()],dp.prototype,"angleOffset",2),x([Dh()],dp.prototype,"inset",2);var up=class extends go{constructor(){super(...arguments),this.showInLegend=!1}};x([Hn(Qn)],up.prototype,"showInLegend",2);var pp=class extends Ao{constructor(){super(...arguments),this.margin=2}set(t,e){return super.set(t)}};x([Hn(ta)],pp.prototype,"text",2),x([Hn(ea)],pp.prototype,"margin",2);var gp=class extends pe{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};x([Hn(ya)],gp.prototype,"fill",2),x([Hn(na)],gp.prototype,"fillOpacity",2);var yp=class extends Ao{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Hn(sa)],yp.prototype,"offset",2),x([Hn(aa)],yp.prototype,"minAngle",2),x([Hn(sa)],yp.prototype,"minSpacing",2),x([Hn(sa)],yp.prototype,"maxCollisionOffset",2),x([Hn(Qn)],yp.prototype,"avoidCollisions",2);var mp=class extends Ao{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Hn(ea)],mp.prototype,"positionOffset",2),x([Hn(na)],mp.prototype,"positionRatio",2);var fp=class extends pe{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Hn(ma,{optional:!0})],fp.prototype,"colors",2),x([Hn(sa)],fp.prototype,"length",2),x([Hn(sa)],fp.prototype,"strokeWidth",2);var xp=class extends id{constructor(){super(...arguments),this.fills=Object.values(He),this.strokes=Object.values(Xe),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ge(pp),this.title=new up,this.innerCircle=new gp,this.shadow=new Wd,this.calloutLabel=new yp,this.sectorLabel=new mp,this.calloutLine=new fp,this.tooltip=new Hd,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const t=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(C.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};function vp(t,e,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],o=Math.PI/-2+Vn(e);return{nodes:{toFn:(t,e,i,{prevLive:s})=>{var a,r;let{startAngle:l,endAngle:h,innerRadius:c,outerRadius:d}=e;const{stroke:u,fill:p}=e.sectorFormat;if("removed"===i&&s?(l=null==(a=s.datum)?void 0:a.endAngle,h=null==(r=s.datum)?void 0:r.endAngle):"removed"!==i||s||(l=o,h=o),"removed"===i){const t=(({radius:t})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*t}))(e);c=t.innerRadius,d=t.outerRadius}return{startAngle:l,endAngle:h,outerRadius:d,innerRadius:c,stroke:u,fill:p}},fromFn:(e,i,s,{prevFromProps:n})=>{var r,l,h,c,d,u;let{startAngle:p,endAngle:g,innerRadius:y,outerRadius:m}=e,{fill:f,stroke:x}=i.sectorFormat;if("unknown"===s||"added"===s&&!n?(p=o,g=o,y=i.innerRadius,m=i.outerRadius):"added"===s&&n&&(p=null!=(r=n.endAngle)?r:o,g=null!=(l=n.endAngle)?l:o,y=null!=(h=n.innerRadius)?h:i.innerRadius,m=null!=(c=n.outerRadius)?c:i.outerRadius),"added"===s&&!t){const t=(({radius:t})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*t}))(i);y=t.innerRadius,m=t.outerRadius}return"updated"===s&&(f=null!=(d=e.fill)?d:f,x=null!=(u=e.stroke)?u:x),{startAngle:p,endAngle:g,innerRadius:y,outerRadius:m,fill:f,stroke:x,phase:"initial"}}},innerCircle:{fromFn:(t,e)=>{var i,s,n;return{size:null!=(n=null!=(s=null==(i=t.previousDatum)?void 0:i.radius)?s:t.size)?n:0,phase:"initial"}},toFn:(t,e)=>{var i;return{size:null!=(i=e.radius)?i:0}}}}}function bp(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}x([Hn(ta)],xp.prototype,"angleKey",2),x([Hn(ta,{optional:!0})],xp.prototype,"angleName",2),x([Hn(ta,{optional:!0})],xp.prototype,"radiusKey",2),x([Hn(ta,{optional:!0})],xp.prototype,"radiusName",2),x([Hn(sa,{optional:!0})],xp.prototype,"radiusMin",2),x([Hn(sa,{optional:!0})],xp.prototype,"radiusMax",2),x([Hn(ta,{optional:!0})],xp.prototype,"calloutLabelKey",2),x([Hn(ta,{optional:!0})],xp.prototype,"calloutLabelName",2),x([Hn(ta,{optional:!0})],xp.prototype,"sectorLabelKey",2),x([Hn(ta,{optional:!0})],xp.prototype,"sectorLabelName",2),x([Hn(ta,{optional:!0})],xp.prototype,"legendItemKey",2),x([Hn(ma)],xp.prototype,"fills",2),x([Hn(ma)],xp.prototype,"strokes",2),x([Hn(na)],xp.prototype,"fillOpacity",2),x([Hn(na)],xp.prototype,"strokeOpacity",2),x([Hn(Ma)],xp.prototype,"lineDash",2),x([Hn(sa)],xp.prototype,"lineDashOffset",2),x([Hn(Jn,{optional:!0})],xp.prototype,"formatter",2),x([Hn(aa)],xp.prototype,"rotation",2),x([Hn(ea)],xp.prototype,"outerRadiusOffset",2),x([Hn(na)],xp.prototype,"outerRadiusRatio",2),x([Hn(ea,{optional:!0})],xp.prototype,"innerRadiusOffset",2),x([Hn(na,{optional:!0})],xp.prototype,"innerRadiusRatio",2),x([Hn(sa)],xp.prototype,"strokeWidth",2),x([Hn(sa,{optional:!0})],xp.prototype,"sectorSpacing",2),x([Hn(Sa)],xp.prototype,"innerLabels",2),x([Hn(Zn)],xp.prototype,"title",2),x([Hn(Zn)],xp.prototype,"innerCircle",2),x([Hn(Zn)],xp.prototype,"shadow",2),x([Hn(Zn)],xp.prototype,"calloutLabel",2),x([Hn(Zn)],xp.prototype,"sectorLabel",2),x([Hn(Zn)],xp.prototype,"calloutLine",2),x([Hn(Zn)],xp.prototype,"tooltip",2),x([Hn(ta,{optional:!0})],xp.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var Sp=class extends Zc{constructor(t){var e=t,{useLabelLayer:i=!1,pickModes:s=[0],canHaveAxes:n=!1,animationResetFns:a}=e,o=m(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(y(g({},o),{useLabelLayer:i,pickModes:s,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new Mo),this.itemSelection=Pr.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Pr.select(this.labelGroup,qa,!1),this.highlightSelection=Pr.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new ir("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!=(t=this.animationResetFns)?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&er([this.itemSelection,this.highlightSelection],e),i&&er([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!=(e=this.animationResetFns)?e:{};i&&er([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}},kp=class extends Gc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Dp=class extends Sp{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:bp,label:Kd}}),this.properties=new xp,this.previousRadiusScale=new pd,this.radiusScale=new pd,this.backgroundGroup=this.rootGroup.appendChild(new Mo({name:this.id+"-background",layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Mo({name:this.id+"-zerosumRings"})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ah),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ah),this.innerCircleGroup=this.backgroundGroup.appendChild(new Mo({name:this.id+"-innerCircle"})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=kp,this.angleScale=new pd,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2);const e=new Mo({name:"pieCalloutLabels"}),i=new Mo({name:"pieSectorLabels"}),s=new Mo({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Pr.select(e,Mo),this.sectorLabelSelection=Pr.select(i,qa),this.innerLabelsSelection=Pr.select(s,qa),this.innerCircleSelection=Pr.select(this.innerCircleGroup,Ah);for(const t of[this.zerosumInnerRing,this.zerosumOuterRing])t.fillOpacity=0,t.stroke=this.properties.calloutLabel.color,t.strokeWidth=1,t.strokeOpacity=1}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(t=>t):super.visible}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(()=>i))?t:[]}nodeFactory(){return new dp}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return b(this,null,(function*(){var e,i,s,n,a;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{seriesItemEnabled:r}=this,{angleKey:l,radiusKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),m=[],f=[];u?m.push(Ec(this,u,!1,{id:"legendItemKey"})):c?m.push(Ec(this,c,!1,{id:"calloutLabelKey"})):d&&m.push(Ec(this,d,!1,{id:"sectorLabelKey"})),h&&f.push(Rc(this,h,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Oc(this,h,!0,{id:"radiusRaw"}),kc(this,{id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),c&&f.push(Oc(this,c,!1,{id:"calloutLabelValue"})),d&&f.push(Oc(this,d,!1,{id:"sectorLabelValue"})),u&&f.push(Oc(this,u,!1,{id:"legendItemValue"})),p&&this.processedData&&m.length>0&&f.push(wc(this.processedData)),f.push(Dc(this)),o=o.map((t,e)=>r[e]?t:y(g({},t),{[l]:0})),yield this.requestDataModel(t,o,{props:[...m,Fc(this,l,!0,{id:"angleValue",onlyPositive:!0}),Oc(this,l,!0,{id:"angleRaw"}),kc(this,{id:"angleValue"},[0,1],0,0),...f]});for(const t of null!=(a=null==(n=null==(s=this.processedData)?void 0:s.defs)?void 0:n.values)?a:[]){const{id:e,missing:i,property:s}=t,n=Pl(this,i);"angleRaw"!==e&&n>0&&C.warnOnce(`no value was found for the key '${String(s)}' on ${n} data element${n>1?"s":""}`)}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return b(this,null,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return b(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,[{itemId:t,nodeData:[],labelData:[]}];if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:o,radiusIdx:r,calloutLabelIdx:l,sectorLabelIdx:h,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0,u=0;const p=e.data.map((t,e)=>{var i;const{datum:a,values:p}=t,y=p[o],m=s.convert(d)+Vn(n);d=y,u+=y;const f=s.convert(d)+Vn(n),x=Math.abs(f-m),v=m+x/2,b=p[o+1],S=r>=0&&null!=(i=p[r])?i:1,k=r>=0?p[r+1]:void 0,D=c>=0?p[c]:void 0,M=this.getLabels(a,v,x,!0,p[l],p[h],D),L=this.getSectorFormat(a,e,!1);return g({itemId:e,series:this,datum:a,index:e,angleValue:b,midAngle:v,midCos:Math.cos(v),midSin:Math.sin(v),startAngle:m,endAngle:f,sectorFormat:L,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:D},M)});return this.zerosumOuterRing.visible=0===u,this.zerosumInnerRing.visible=0===u&&null!=a&&1!==a&&a>0,[{itemId:t,nodeData:p,labelData:p}]}))}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:h}=this.properties,c=!s||r.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Vn(r.minAngle)&&(p.calloutLabel=y(g({},this.getTextAlignment(e)),{text:this.getLabelText(r,y(g({},u),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,y(g({},u),{value:a}))}),null!=h&&null!=o&&(p.legendItem={key:h,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Kn(t)- -3*Math.PI/4;return e[qs(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var s,n,a,o,r;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:y,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,f=h.getActiveHighlight(),x=i&&(null==f?void 0:f.series)===this&&e===f.itemId,{fill:v,fillOpacity:b,stroke:S,strokeWidth:k,strokeOpacity:D}=jt(x&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:null!=y?p.length>0?p[e%p.length]:void 0:p.length>0?p[e%p.length]:m,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let M;return g&&(M=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:v,stroke:S,fills:u,strokes:p,strokeWidth:k,highlighted:x,seriesId:this.id})),{fill:null!=(s=null==M?void 0:M.fill)?s:v,fillOpacity:null!=(n=null==M?void 0:M.fillOpacity)?n:b,stroke:null!=(a=null==M?void 0:M.stroke)?a:S,strokeWidth:null!=(o=null==M?void 0:M.strokeWidth)?o:k,strokeOpacity:null!=(r=null==M?void 0:M.strokeOpacity)?r:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var e=t,{radius:i}=e,s=m(e,["radius"]);return y(g({},s),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return b(this,arguments,(function*({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},s=null!=me(this.nodeDataDependencies,i);if(s&&(this._nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return b(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return b(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map(t=>y(g({},t),{sectorFormat:g({},t.sectorFormat)}))),t.update(i,void 0,t=>this.getDatumId(t)),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,t=>{const e=new _r;e.tag=1,e.pointerEvents=1,t.appendChild(e);const i=new qa;i.tag=2,i.pointerEvents=1,t.appendChild(i)}),s.update(this.nodeData,t=>{t.pointerEvents=1}),n.update(this.properties.innerLabels,t=>{t.pointerEvents=1})}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),s=1;e=Math.ceil(2*t+s)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return b(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((t,{radius:e})=>{var i,s;t.setProperties({fill:null==(i=this.properties.innerCircle)?void 0:i.fill,opacity:null==(s=this.properties.innerCircle)?void 0:s.fillOpacity,size:e})});const s=(t,e,i,s)=>{const n=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=n.stroke?n.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each((t,e,i)=>s(t,e,0,!1)),this.highlightSelection.each((t,i,n)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;s(t,i,0,!0),t.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((t,e)=>{const o=t.datum,{calloutLabel:r,outerRadius:l}=o;if((null==r?void 0:r.text)&&!r.hidden&&0!==l){t.visible=!0,t.strokeWidth=s,t.stroke=n[e%n.length],t.fill=void 0;const h=o.midCos*l,c=o.midSin*l;let d=o.midCos*(l+i),u=o.midSin*(l+i);if((r.collisionTextAlign||0!==r.collisionOffsetY)&&null!=r.box){const t=r.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const s=e-d,n=i-u,o=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),l=o-a;l>0&&(d+=s*l/o,u+=n*l/o)}t.x1=h,t.y1=c,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY;let r=1;e.x+1<s?r=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(r=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(null==s)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=u(s,2);return n.some(t=>u(t.x,2)+u(t.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=this.nodeData,r=this.nodeData.filter(t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e});if(r.forEach(t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),r.length<=1)return;const l=r.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),h=r.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),c=r.filter(t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),d=r.filter(t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),u=new qa,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new en(0,0,0,0);const a=t.outerRadius+i.length+s,o=t.midCos*a,r=t.midSin*a+n.collisionOffsetY;return u.text=n.text,u.x=o,u.y=r,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=n.collisionTextAlign)?e:n.textAlign,textBaseline:n.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const s=p(t).grow(n/2),a=p(e).grow(n/2);if(s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)){const t="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y;e.calloutLabel.collisionOffsetY=t}},y=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],s=t[e];g(i,s,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],s=t[e];g(i,s,"to-bottom")}},m=t=>{const e=r.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),s=i.map(t=>t.clone().grow(n/2));let l=!1;for(let e=0;e<s.length&&!l;e++){const i=s[e];for(let n=e+1;n<t.length;n++){const t=s[n];if(i.collidesBBox(t)){l=!0;break}}}const h=o.map(t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}}),c=i.some(t=>h.some(e=>cp(t,e)));(l||e||c)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};y(l),y(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new qa;this.calloutLabelSelection.selectByTag(2).forEach(s=>{var l;const{datum:h}=s,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(!(null==c?void 0:c.text)||0===u||c.hidden)return void(s.visible=!1);const p=u+n+a,g=h.midCos*p,y=h.midSin*p+c.collisionOffsetY,m={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=g,r.y=y,r.setFont(this.properties.calloutLabel),r.setAlign(m);const f=r.computeBBox();let x=c.text,v=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,t);x=c.text.length===e?c.text:c.text.substring(0,e)+"\u2026",v=!i}s.text=x,s.x=g,s.y=y,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=o,s.visible=v})}computeLabelsBBox(t,e){return b(this,null,(function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new qa;let c;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach(i=>{var s;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+n+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(s=d.collisionTextAlign)?s:d.textAlign,textBaseline:d.textBaseline});const y=h.computeBBox();if(d.box=y,Math.abs(d.collisionOffsetY)>o)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new en(c.x-r,t,c.width+2*r,c.y+c.height+r-t);if(y.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(d.text,y,e),n=d.text.length>2&&t<2;if(i||n||s)return void(d.hidden=!0)}d.hidden=!1,l.push(y)}}),0===l.length?null:en.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel;this.sectorLabelSelection.each((t,h)=>{const{sectorLabel:c,outerRadius:d}=h;let u=!1;if(c&&0!==d){const p=e*(1-r)+d*r+o;t.fill=l,t.fontStyle=s,t.fontWeight=n,t.fontSize=i,t.fontFamily=a,t.text=c.text,t.x=h.midCos*p,t.y=h.midSin*p,t.textAlign="center",t.textBaseline="middle";const g=t.computeBBox(),y=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:m,endAngle:f}=h,x={startAngle:m,endAngle:f,innerRadius:e,outerRadius:d};y.every(([t,e])=>lp(t,e,x))&&(u=!0)}t.visible=u})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,s)=>{const{fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r,color:l}=s;i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(s.margin)});const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce((t,e,n)=>t+e.height+i(n)+s(n),0),a=Math.max(...t.map(t=>t.width)),o=this.getInnerRadius(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let e=0,a=-n/2;e<t.length;e++){const n=t[e].height+a+i(e);l.push(n),a=n+s(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=r})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;return n&&void 0!==r?r.text:i&&i!==e&&void 0!==(null==o?void 0:o.text)?o.text:s&&s!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}getTooltipHtml(t){var e;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=t,a=Bd(null==(e=this.properties.title)?void 0:e.text),o=Gt(s)?$s(s):String(s),r=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:null!=a?a:r,content:a&&r?`${r}: ${o}`:o,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(t){var e,i,s,n,a;const{processedData:o,dataModel:r}=this;if(!r||!(null==o?void 0:o.data.length)||!this.properties.isValid()||"category"!==t)return[];const{angleKey:l,calloutLabelKey:h,sectorLabelKey:c,legendItemKey:d}=this.properties;if(!(d||h&&h!==l||c&&c!==l))return[];const{calloutLabelIdx:u,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(r),y=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,m=[];for(let t=0;t<o.data.length;t++){const{datum:e,values:r}=o.data[t],f=[];y&&f.push(y);const x=this.getLabels(e,2*Math.PI,2*Math.PI,!1,r[u],r[p],r[g]);if(d&&void 0!==x.legendItem?f.push(x.legendItem.text):h&&h!==l&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?f.push(null==(s=x.calloutLabel)?void 0:s.text):c&&c!==l&&void 0!==(null==(n=x.sectorLabel)?void 0:n.text)&&f.push(null==(a=x.sectorLabel)?void 0:a.text),0===f.length)continue;const v=this.getSectorFormat(e,t,!1);m.push({legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:this.seriesItemEnabled[t],label:{text:f.join(" - ")},marker:{fill:v.fill,stroke:v.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=d?e[d]:void 0})}return m}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(i=this.processedData)||i.data.forEach(({values:i},n)=>{i[s]===t&&this.toggleSeriesItem(n,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=vp(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Pn(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Pn(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),zd(this,"callout",e,[this.calloutLabelSelection]),zd(this,"sector",e,[this.sectorLabelSelection]),zd(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.length)?e:0)&&(null==u?void 0:u.addedIndices.every(t=>!u.removedIndices.includes(t))),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,y=null==(a=null==(n=null==(s=null==l?void 0:l.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)||a;p&&g&&y||this.ctx.animationManager.skipCurrentBatch();const m=vp(!1,this.properties.rotation,h,c);Pn(this.id,"nodes",d,[o,r],m.nodes,(t,e)=>this.getDatumId(e),u),Pn(this.id,"innerCircle",d,[this.innerCircleSelection],m.innerCircle),zd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),zd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),zd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=vp(!1,this.properties.rotation,i,s);Pn(this.id,"nodes",n,[t,e],a.nodes),Pn(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Gd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Gd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Gd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:o}=this.properties;if(null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)?void 0:s.uniqueKeys)return o?t[o]:n?t[n]:a?t[a]:void 0}getDatumId(t){var e;const{index:i}=t;return null!=(e=this.getDatumIdFromData(t.datum))?e:""+i}onDataChange(){this.processSeriesItemEnabled()}};Dp.className="DonutSeries",Dp.type="donut";var Mp={series:{__extends__:ai,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:li,color:ui,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:li,color:di,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:fi,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:li,color:hi,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:mi}},Lp=({takeColors:t,colorsCount:e,userPalette:i})=>{const{fills:s,strokes:n}=t(e);return{fills:s,strokes:i?n:[],calloutLine:{colors:n}}},Ap={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:Dp,seriesDefaults:{},themeTemplate:Mp,paletteFactory:Lp},wp=class extends go{constructor(){super(...arguments),this.showInLegend=!1}};x([Hn(Qn)],wp.prototype,"showInLegend",2);var Np=class extends Ao{set(t,e){return super.set(t)}};x([Es("Use a Donut Series instead"),Hn(ta,{optional:!0})],Np.prototype,"text",2),x([Es("Use a Donut Series instead"),Hn(ea,{optional:!0})],Np.prototype,"margin",2);var Cp=class extends pe{};x([Es("Use a Donut Series instead"),Hn(ya,{optional:!0})],Cp.prototype,"fill",2),x([Es("Use a Donut Series instead"),Hn(na,{optional:!0})],Cp.prototype,"fillOpacity",2);var Ip=class extends Ao{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Hn(sa)],Ip.prototype,"offset",2),x([Hn(aa)],Ip.prototype,"minAngle",2),x([Hn(sa)],Ip.prototype,"minSpacing",2),x([Hn(sa)],Ip.prototype,"maxCollisionOffset",2),x([Hn(Qn)],Ip.prototype,"avoidCollisions",2);var Tp=class extends Ao{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Hn(ea)],Tp.prototype,"positionOffset",2),x([Hn(na)],Tp.prototype,"positionRatio",2);var Ep=class extends pe{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Hn(ma,{optional:!0})],Ep.prototype,"colors",2),x([Hn(sa)],Ep.prototype,"length",2),x([Hn(sa)],Ep.prototype,"strokeWidth",2);var Op=class extends id{constructor(){super(...arguments),this.fills=Object.values(He),this.strokes=Object.values(Xe),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ge(Np),this.title=new wp,this.innerCircle=new Cp,this.shadow=new Wd,this.calloutLabel=new Ip,this.sectorLabel=new Tp,this.calloutLine=new Ep,this.tooltip=new Hd,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};x([Hn(ta)],Op.prototype,"angleKey",2),x([Hn(ta,{optional:!0})],Op.prototype,"angleName",2),x([Hn(ta,{optional:!0})],Op.prototype,"radiusKey",2),x([Hn(ta,{optional:!0})],Op.prototype,"radiusName",2),x([Hn(sa,{optional:!0})],Op.prototype,"radiusMin",2),x([Hn(sa,{optional:!0})],Op.prototype,"radiusMax",2),x([Hn(ta,{optional:!0})],Op.prototype,"calloutLabelKey",2),x([Hn(ta,{optional:!0})],Op.prototype,"calloutLabelName",2),x([Hn(ta,{optional:!0})],Op.prototype,"sectorLabelKey",2),x([Hn(ta,{optional:!0})],Op.prototype,"sectorLabelName",2),x([Hn(ta,{optional:!0})],Op.prototype,"legendItemKey",2),x([Hn(ma)],Op.prototype,"fills",2),x([Hn(ma)],Op.prototype,"strokes",2),x([Hn(na)],Op.prototype,"fillOpacity",2),x([Hn(na)],Op.prototype,"strokeOpacity",2),x([Hn(Ma)],Op.prototype,"lineDash",2),x([Hn(sa)],Op.prototype,"lineDashOffset",2),x([Hn(Jn,{optional:!0})],Op.prototype,"formatter",2),x([Hn(aa)],Op.prototype,"rotation",2),x([Hn(ea)],Op.prototype,"outerRadiusOffset",2),x([Hn(na)],Op.prototype,"outerRadiusRatio",2),x([Es("Use a Donut Series instead"),Hn(ea,{optional:!0})],Op.prototype,"innerRadiusOffset",2),x([Es("Use a Donut Series instead"),Hn(na,{optional:!0})],Op.prototype,"innerRadiusRatio",2),x([Hn(sa)],Op.prototype,"strokeWidth",2),x([Hn(sa,{optional:!0})],Op.prototype,"sectorSpacing",2),x([Hn(Sa)],Op.prototype,"innerLabels",2),x([Hn(Zn)],Op.prototype,"title",2),x([Hn(Zn)],Op.prototype,"innerCircle",2),x([Hn(Zn)],Op.prototype,"shadow",2),x([Hn(Zn)],Op.prototype,"calloutLabel",2),x([Hn(Zn)],Op.prototype,"sectorLabel",2),x([Hn(Zn)],Op.prototype,"calloutLine",2),x([Hn(Zn)],Op.prototype,"tooltip",2),x([Hn(ta,{optional:!0})],Op.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var Rp=class extends Gc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Pp=class extends Sp{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:bp,label:Kd}}),this.properties=new Op,this.previousRadiusScale=new pd,this.radiusScale=new pd,this.backgroundGroup=this.rootGroup.appendChild(new Mo({name:this.id+"-background",layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Mo({name:this.id+"-zerosumRings"})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ah),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ah),this.innerCircleGroup=this.backgroundGroup.appendChild(new Mo({name:this.id+"-innerCircle"})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=Rp,this.angleScale=new pd,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2);const e=new Mo({name:"pieCalloutLabels"}),i=new Mo({name:"pieSectorLabels"}),s=new Mo({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Pr.select(e,Mo),this.sectorLabelSelection=Pr.select(i,qa),this.innerLabelsSelection=Pr.select(s,qa),this.innerCircleSelection=Pr.select(this.innerCircleGroup,Ah);for(const t of[this.zerosumInnerRing,this.zerosumOuterRing])t.fillOpacity=0,t.stroke=this.properties.calloutLabel.color,t.strokeWidth=1,t.strokeOpacity=1}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(t=>t):super.visible}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(()=>i))?t:[]}nodeFactory(){return new dp}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return b(this,null,(function*(){var e,i,s,n,a;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{seriesItemEnabled:r}=this,{angleKey:l,radiusKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),m=[],f=[];u?m.push(Ec(this,u,!1,{id:"legendItemKey"})):c?m.push(Ec(this,c,!1,{id:"calloutLabelKey"})):d&&m.push(Ec(this,d,!1,{id:"sectorLabelKey"})),h&&f.push(Rc(this,h,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Oc(this,h,!0,{id:"radiusRaw"}),kc(this,{id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),c&&f.push(Oc(this,c,!1,{id:"calloutLabelValue"})),d&&f.push(Oc(this,d,!1,{id:"sectorLabelValue"})),u&&f.push(Oc(this,u,!1,{id:"legendItemValue"})),p&&this.processedData&&m.length>0&&f.push(wc(this.processedData)),f.push(Dc(this)),o=o.map((t,e)=>r[e]?t:y(g({},t),{[l]:0})),yield this.requestDataModel(t,o,{props:[...m,Fc(this,l,!0,{id:"angleValue",onlyPositive:!0}),Oc(this,l,!0,{id:"angleRaw"}),kc(this,{id:"angleValue"},[0,1],0,0),...f]});for(const t of null!=(a=null==(n=null==(s=this.processedData)?void 0:s.defs)?void 0:n.values)?a:[]){const{id:e,missing:i,property:s}=t,n=Pl(this,i);"angleRaw"!==e&&n>0&&C.warnOnce(`no value was found for the key '${String(s)}' on ${n} data element${n>1?"s":""}`)}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return b(this,null,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return b(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n}=this.properties;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:a,radiusIdx:o,calloutLabelIdx:r,sectorLabelIdx:l,legendItemIdx:h}=this.getProcessedDataIndexes(i);let c=0,d=0;const u=e.data.map((t,e)=>{var i;const{datum:u,values:p}=t,y=p[a],m=s.convert(c)+Vn(n);c=y,d+=y;const f=s.convert(c)+Vn(n),x=Math.abs(f-m),v=m+x/2,b=p[a+1],S=o>=0&&null!=(i=p[o])?i:1,k=o>=0?p[o+1]:void 0,D=h>=0?p[h]:void 0,M=this.getLabels(u,v,x,!0,p[r],p[l],D),L=this.getSectorFormat(u,e,!1);return g({itemId:e,series:this,datum:u,index:e,angleValue:b,midAngle:v,midCos:Math.cos(v),midSin:Math.sin(v),startAngle:m,endAngle:f,sectorFormat:L,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:D},M)});this.zerosumOuterRing.visible=0===d;const{innerRadiusRatio:p=1}=this.properties;return this.zerosumInnerRing.visible=0===d&&1!==p&&p>0,[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:h}=this.properties,c=!s||r.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Vn(r.minAngle)&&(p.calloutLabel=y(g({},this.getTextAlignment(e)),{text:this.getLabelText(r,y(g({},u),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,y(g({},u),{value:a}))}),null!=h&&null!=o&&(p.legendItem={key:h,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Kn(t)- -3*Math.PI/4;return e[qs(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var s,n,a,o,r;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:y,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,f=h.getActiveHighlight(),x=i&&(null==f?void 0:f.series)===this&&e===f.itemId,{fill:v,fillOpacity:b,stroke:S,strokeWidth:k,strokeOpacity:D}=jt(x&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:null!=y?p.length>0?p[e%p.length]:void 0:p.length>0?p[e%p.length]:m,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let M;return g&&(M=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:v,stroke:S,fills:u,strokes:p,strokeWidth:k,highlighted:x,seriesId:this.id})),{fill:null!=(s=null==M?void 0:M.fill)?s:v,fillOpacity:null!=(n=null==M?void 0:M.fillOpacity)?n:b,stroke:null!=(a=null==M?void 0:M.stroke)?a:S,strokeWidth:null!=(o=null==M?void 0:M.strokeWidth)?o:k,strokeOpacity:null!=(r=null==M?void 0:M.strokeOpacity)?r:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var e=t,{radius:i}=e,s=m(e,["radius"]);return y(g({},s),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return b(this,arguments,(function*({seriesRect:t}){const{title:e}=this.properties,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},s=null!=me(this.nodeDataDependencies,i);if(s&&(this._nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return b(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return b(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map(t=>y(g({},t),{sectorFormat:g({},t.sectorFormat)}))),t.update(i,void 0,t=>this.getDatumId(t)),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,t=>{const e=new _r;e.tag=1,e.pointerEvents=1,t.appendChild(e);const i=new qa;i.tag=2,i.pointerEvents=1,t.appendChild(i)}),s.update(this.nodeData,t=>{t.pointerEvents=1}),n.update(this.properties.innerLabels,t=>{t.pointerEvents=1})}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),s=1;e=Math.ceil(2*t+s)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return b(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((t,{radius:e})=>{var i,s;t.setProperties({fill:null==(i=this.properties.innerCircle)?void 0:i.fill,opacity:null==(s=this.properties.innerCircle)?void 0:s.fillOpacity,size:e})});const s=(t,e,i,s)=>{const n=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=n.stroke?n.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each((t,e,i)=>s(t,e,0,!1)),this.highlightSelection.each((t,i,n)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;s(t,i,0,!0),t.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((t,e)=>{const o=t.datum,{calloutLabel:r,outerRadius:l}=o;if((null==r?void 0:r.text)&&!r.hidden&&0!==l){t.visible=!0,t.strokeWidth=s,t.stroke=n[e%n.length],t.fill=void 0;const h=o.midCos*l,c=o.midSin*l;let d=o.midCos*(l+i),u=o.midSin*(l+i);if((r.collisionTextAlign||0!==r.collisionOffsetY)&&null!=r.box){const t=r.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const s=e-d,n=i-u,o=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),l=o-a;l>0&&(d+=s*l/o,u+=n*l/o)}t.x1=h,t.y1=c,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY;let r=1;e.x+1<s?r=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(r=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(null==s)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=u(s,2);return n.some(t=>u(t.x,2)+u(t.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=this.nodeData,r=this.nodeData.filter(t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e});if(r.forEach(t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),r.length<=1)return;const l=r.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),h=r.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),c=r.filter(t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),d=r.filter(t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),u=new qa,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new en(0,0,0,0);const a=t.outerRadius+i.length+s,o=t.midCos*a,r=t.midSin*a+n.collisionOffsetY;return u.text=n.text,u.x=o,u.y=r,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=n.collisionTextAlign)?e:n.textAlign,textBaseline:n.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const s=p(t).grow(n/2),a=p(e).grow(n/2);if(s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)){const t="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y;e.calloutLabel.collisionOffsetY=t}},y=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],s=t[e];g(i,s,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],s=t[e];g(i,s,"to-bottom")}},m=t=>{const e=r.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),s=i.map(t=>t.clone().grow(n/2));let l=!1;for(let e=0;e<s.length&&!l;e++){const i=s[e];for(let n=e+1;n<t.length;n++){const t=s[n];if(i.collidesBBox(t)){l=!0;break}}}const h=o.map(t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}}),c=i.some(t=>h.some(e=>cp(t,e)));(l||e||c)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};y(l),y(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new qa;this.calloutLabelSelection.selectByTag(2).forEach(s=>{var l;const{datum:h}=s,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(!(null==c?void 0:c.text)||0===u||c.hidden)return void(s.visible=!1);const p=u+n+a,g=h.midCos*p,y=h.midSin*p+c.collisionOffsetY,m={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=g,r.y=y,r.setFont(this.properties.calloutLabel),r.setAlign(m);const f=r.computeBBox();let x=c.text,v=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,t);x=c.text.length===e?c.text:c.text.substring(0,e)+"\u2026",v=!i}s.text=x,s.x=g,s.y=y,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=o,s.visible=v})}computeLabelsBBox(t,e){return b(this,null,(function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new qa;let c;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach(i=>{var s;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+n+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(s=d.collisionTextAlign)?s:d.textAlign,textBaseline:d.textBaseline});const y=h.computeBBox();if(d.box=y,Math.abs(d.collisionOffsetY)>o)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new en(c.x-r,t,c.width+2*r,c.y+c.height+r-t);if(y.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(d.text,y,e),n=d.text.length>2&&t<2;if(i||n||s)return void(d.hidden=!0)}d.hidden=!1,l.push(y)}}),0===l.length?null:en.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((t,d)=>{const{sectorLabel:u,outerRadius:p}=d;let g=!1;if(u&&0!==p){const y=e*(1-r)+p*r+o;t.fill=l,t.fontStyle=s,t.fontWeight=n,t.fontSize=i,t.fontFamily=a,t.text=u.text;!h&&c?(t.x=0,t.y=0):(t.x=d.midCos*y,t.y=d.midSin*y),t.textAlign="center",t.textBaseline="middle";const m=t.computeBBox(),f=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:x,endAngle:v}=d,b={startAngle:x,endAngle:v,innerRadius:e,outerRadius:p};f.every(([t,e])=>lp(t,e,b))&&(g=!0)}t.visible=g})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,s)=>{const{fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r,color:l,margin:h=2}=s;i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(h)});const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce((t,e,n)=>t+e.height+i(n)+s(n),0),a=Math.max(...t.map(t=>t.width)),o=this.getInnerRadius(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let e=0,a=-n/2;e<t.length;e++){const n=t[e].height+a+i(e);l.push(n),a=n+s(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=r})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;return n&&void 0!==r?r.text:i&&i!==e&&void 0!==(null==o?void 0:o.text)?o.text:s&&s!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}getTooltipHtml(t){var e;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=t,a=Bd(null==(e=this.properties.title)?void 0:e.text),o=Gt(s)?$s(s):String(s),r=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:null!=a?a:r,content:a&&r?`${r}: ${o}`:o,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(t){var e,i,s,n,a;const{processedData:o,dataModel:r}=this;if(!r||!(null==o?void 0:o.data.length)||"category"!==t)return[];const{angleKey:l,calloutLabelKey:h,sectorLabelKey:c,legendItemKey:d}=this.properties;if(!(d||h&&h!==l||c&&c!==l))return[];const{calloutLabelIdx:u,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(r),y=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,m=[];for(let t=0;t<o.data.length;t++){const{datum:e,values:r}=o.data[t],f=[];y&&f.push(y);const x=this.getLabels(e,2*Math.PI,2*Math.PI,!1,r[u],r[p],r[g]);if(d&&void 0!==x.legendItem?f.push(x.legendItem.text):h&&h!==l&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?f.push(null==(s=x.calloutLabel)?void 0:s.text):c&&c!==l&&void 0!==(null==(n=x.sectorLabel)?void 0:n.text)&&f.push(null==(a=x.sectorLabel)?void 0:a.text),0===f.length)continue;const v=this.getSectorFormat(e,t,!1);m.push({legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:this.seriesItemEnabled[t],label:{text:f.join(" - ")},marker:{fill:v.fill,stroke:v.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=d?e[d]:void 0})}return m}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(i=this.processedData)||i.data.forEach(({values:i},n)=>{i[s]===t&&this.toggleSeriesItem(n,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=vp(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Pn(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Pn(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),zd(this,"callout",e,[this.calloutLabelSelection]),zd(this,"sector",e,[this.sectorLabelSelection]),zd(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.length)?e:0)&&(null==u?void 0:u.addedIndices.every(t=>!u.removedIndices.includes(t))),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,y=null==(a=null==(n=null==(s=null==l?void 0:l.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)||a;p&&g&&y||this.ctx.animationManager.skipCurrentBatch();const m=vp(!1,this.properties.rotation,h,c);Pn(this.id,"nodes",d,[o,r],m.nodes,(t,e)=>this.getDatumId(e),u),Pn(this.id,"innerCircle",d,[this.innerCircleSelection],m.innerCircle),zd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),zd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),zd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=vp(!1,this.properties.rotation,i,s);Pn(this.id,"nodes",n,[t,e],a.nodes),Pn(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Gd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Gd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Gd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:o}=this.properties;if(null==(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)?void 0:s.uniqueKeys)return o?t[o]:n?t[n]:a?t[a]:void 0}getDatumId(t){var e;const{index:i}=t;return null!=(e=this.getDatumIdFromData(t.datum))?e:""+i}onDataChange(){this.processSeriesItemEnabled()}};Pp.className="PieSeries",Pp.type="pie";var _p={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:Pp,seriesDefaults:{},themeTemplate:Mp,paletteFactory:Lp};function Fp(){for(const t of dt){if("enterprise"!==t.packageType||re(t)||C.errorOnce("Unexpected enterprise module registered: "+t.identifier),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)ee(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+t.identifier);Oe(t)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Re(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],s=g(g({},t.themeTemplate),i);for(const e of t.axisTypes)delete s[e];vt(e,s)}"axis"===t.type&&(yt(t.identifier,t.instanceConstructor),t.themeTemplate&&vt(t.identifier,t.themeTemplate)),"legend"===t.type&&ze(t.identifier,t.optionsKey,t.instanceConstructor,t.themeTemplate)}if(pt()){const t=se.filter(({useCount:t})=>null==t||0===t);t.length>0&&C.errorOnce("Enterprise modules expected but not registered: ",t)}}var Bp=class t extends qc{constructor(t,e){super(t,e),this._data={}}performLayout(){return b(this,null,(function*(){const e=yield v(t.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s}=this,n=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,s.translationX=Math.floor(e.x),s.translationY=Math.floor(e.y),yield Promise.all(this.series.map(t=>b(this,null,(function*(){yield t.update({seriesRect:e})})))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new en(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e}))}};Bp.className="HierarchyChart",Bp.type="hierarchy";var zp=Bp,Gp=class extends nl{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}};x([Hn(Pa(["polygon","circle"],"a polar axis shape"))],Gp.prototype,"shape",2),x([Hn(na)],Gp.prototype,"innerRadiusRatio",2);var Kp=class t extends qc{constructor(t,e){super(t,e),this.padding=new Ml(40),this.axisGroup.zIndex=5}performLayout(){return b(this,null,(function*(){const e=yield v(t.prototype,this,"performLayout").call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(t=>t.update()),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var s,n;const a=this.axes.find(t=>"x"===t.direction),o=this.axes.find(t=>"y"===t.direction);if(!(a instanceof Gp&&o instanceof Gp))return;const r=a.scale,l=null==(s=r.ticks)?void 0:s.call(r).map(t=>r.convert(t)),h=o.innerRadiusRatio;a.innerRadiusRatio=h,null==(n=a.computeRange)||n.call(a),a.gridLength=i,o.gridAngles=l,o.gridRange=a.range,o.range=[i,i*h],[a,o].forEach(i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()})}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return b(this,null,(function*(){const e=this.series.filter(t=>t instanceof Sp),i=this.axes.filter(t=>t instanceof Gp),s=(t,i,s)=>{this.updateAxes(t,i,s),e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=s});const n=e.filter(t=>t instanceof Pp||t instanceof Dp);if(n.length>1){const t=n.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t.at(-1).series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},n=t.x+t.width/2,a=t.y+t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let r=o;s(n,a,r);const l=(...l)=>b(this,[...l],(function*({hideWhenNecessary:l=!1}={}){const h=[];for(const s of[...i,...e]){const e=yield s.computeLabelsBBox({hideWhenNecessary:l},t);e&&h.push(e)}if(0===h.length)return void s(n,a,o);const c=en.merge(h),d=this.refineCircle(c,r,t);s(d.centerX,d.centerY,d.radius),d.radius!==r&&(r=d.radius)}));return yield l(),yield l(),yield l(),yield l({hideWhenNecessary:!0}),yield l({hideWhenNecessary:!0}),{radius:r,centerX:n,centerY:a}}))}refineCircle(t,e,i){const s=-e,n=-e,a=e,o=e;let r=Math.max(0,s-t.x),l=Math.max(0,n-t.y),h=Math.max(0,t.x+t.width-a),c=Math.max(0,t.y+t.height-o);r=h=Math.max(r,h),l=c=Math.max(l,c);const d=i.width-r-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,y=.5*i.height/2,m=Math.min(g,y);if(p<m){p=m;const t=r+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(r,h)>t?(r=t/2,h=t/2):r>h?r=t-h:h=t-r}}const f=r+2*p+h,x=l+2*p+c;return{centerX:i.x+(i.width-f)/2+r+p,centerY:i.y+(i.height-x)/2+l+p,radius:p}}};Kp.className="PolarChart",Kp.type="polar";var Vp=Kp,Wp=Cs.create(!0,"opts");function Yp(t){if(he(t))return"cartesian";if(de(t))return"polar";if(ce(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}var Up=class t{static licenseCheck(t){var e,i,s,n;this.licenseChecked||(this.licenseManager=null==(i=(e=ht).licenseManager)?void 0:i.call(e,t),null==(s=this.licenseManager)||s.setLicenseKey(this.licenseKey,this.gridContext),null==(n=this.licenseManager)||n.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var e,i;return null==(i=(e=ht).licenseManager)?void 0:i.call(e,{}).getLicenseDetails(t)}static getInstance(t){return Xp.getInstance(t)}static create(t){var e,i,s,n;this.licenseCheck(t);const a=Xp.createOrUpdate(t);return(null==(e=this.licenseManager)?void 0:e.isDisplayWatermark())&&(null==(n=(s=ht).injectWatermark)||n.call(s,null!=(i=t.document)?i:document,a.chart.element,this.licenseManager.getWatermarkMessage())),a}static update(e,i){if(!ud.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Xp.createOrUpdate(i,e)}static updateDelta(e,i){if(!ud.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Xp.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof ud))throw new Error(t.INVALID_CHART_REF_MESSAGE);Xp.download(e,i)}static getImageDataURL(e,i){if(!(e instanceof ud))throw new Error(t.INVALID_CHART_REF_MESSAGE);return Xp.getImageDataURL(e,i)}};Up.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",Up.licenseChecked=!1,Up.gridContext=!1;var jp=Up,Hp=class t{static getInstance(t){const e=qc.getInstance(t);return null!=e?ud.chartInstances.get(e):void 0}static initialiseModules(){t.initialised||(ut(Ad),ut(Od),ut(Cu),ut(Uu),ut(Qu),ut(np),ut(rp),ut(Ap),ut(_p),ut(ep),new Map([[md.type,md],[ll.type,ll],[bd.type,bd],[xl.type,xl],[xd.type,xd]]).forEach((t,e)=>{yt(e,t)}),ze("category","legend",0,void 0),Fp(),t.initialised=!0)}static createOrUpdate(e,i){t.initialiseModules(),Wp(">>> AgChartV2.createOrUpdate() user options",e);const s=e,{overrideDevicePixelRatio:n,document:a,window:o}=s,r=m(s,["overrideDevicePixelRatio","document","window"]),l=new Is(r,{overrideDevicePixelRatio:n,document:a,window:o});let h=null==i?void 0:i.chart;return null!=h&&Yp(r)===Yp(h.processedOptions)||(h=t.createChartInstance(l,h)),null==i?i=new ud(h):i.chart=h,Wp.check()&&"undefined"!=typeof window&&(null!=window.agChartInstances||(window.agChartInstances={}),window.agChartInstances[h.id]=h),h.queuedUserOptions.push(r),h.requestFactoryUpdate(t=>{t.applyOptions(l),t.queuedUserOptions.splice(0,t.queuedUserOptions.indexOf(r))}),i}static updateUserDelta(e,i){ve(i=fe(i,{shallow:["data"]}),t=>{if("object"==typeof t)for(const[e,i]of Object.entries(t))void 0===i&&Object.assign(t,{[e]:Symbol("UNSET")})},{skip:["data"]});const{chart:s}=e,n=s.getOptions(),a=jt(i,n);Wp(">>> AgChartV2.updateUserDelta() user delta",i),Wp("AgChartV2.updateUserDelta() - base options",n),t.createOrUpdate(a,e)}static download(e,i){return b(this,null,(function*(){try{const s=yield t.prepareResizedChart(e,i);s.chart.scene.download(null==i?void 0:i.fileName,null==i?void 0:i.fileFormat),s.destroy()}catch(t){C.errorOnce(t)}}))}static getImageDataURL(e,i){return b(this,null,(function*(){const s=yield t.prepareResizedChart(e,i),{canvas:n}=s.chart.scene,a=n.getDataURL(null==i?void 0:i.fileFormat);return s.destroy(),a}))}static prepareResizedChart(e){return b(this,arguments,(function*(e,i={}){const{chart:s}=e,{width:n=s.width,height:a=s.height}=i,o=jt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:n,height:a},pt()&&{animation:{enabled:!1}},s.userOptions),r=t.createOrUpdate(o);return r.chart.zoomManager.updateZoom(e.chart.zoomManager.getZoom()),e.chart.series.forEach((t,e)=>{!0!==t.visible&&(r.chart.series[e].visible=t.visible)}),e.chart.update(0,{forceNodeDataRefresh:!0}),yield r.chart.waitForUpdate(),r}))}static createChartInstance(e,i){const s=null==i?void 0:i.destroy({keepTransferableResources:!0});return new(t.getChartByOptions(e.processedOptions))(e,s)}static getChartByOptions(t){if(he(t))return cd;if(ce(t))return zp;if(de(t))return Vp;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};Hp.initialised=!1;var Xp=Hp,$p={};f($p,{Arc:()=>qp,BBox:()=>en,BandScale:()=>jn,Caption:()=>go,Circle:()=>Ah,ContinuousScale:()=>bo,Diamond:()=>Ih,DropShadow:()=>Wd,Group:()=>Mo,HdpiCanvas:()=>Ya,Image:()=>eg,Label:()=>Ao,Line:()=>_r,LinearGradientFill:()=>Zp,LinearScale:()=>pd,Marker:()=>Lh,Node:()=>ln,Path:()=>Mh,Path2D:()=>kh,PointerEvents:()=>an,RadialColumnShape:()=>Jp,Rect:()=>Md,RedrawType:()=>zs,Scene:()=>Sl,SceneChangeDetection:()=>Ks,ScenePathChangeDetection:()=>Dh,Sector:()=>dp,Selection:()=>Pr,Shape:()=>Ha,Square:()=>Rh,Text:()=>qa,Tooltip:()=>po,Triangle:()=>_h,easing:()=>gn,getFont:()=>Za,getMarker:()=>Gh,getRadialColumnWidth:()=>tg,motion:()=>ig,nearestSquared:()=>Qs,nearestSquaredInContainer:()=>Js,toRadians:()=>Vn,toTooltipHtml:()=>ho});var qp=class extends Mh{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return js(zn(this.startAngle),zn(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?t.closePath():2!==this.type||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new en(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return 0!==this.type&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}};qp.className="Arc",qp.defaultStyles=Object.assign({},Ha.defaultStyles,{lineWidth:1,fillStyle:null}),x([Dh()],qp.prototype,"centerX",2),x([Dh()],qp.prototype,"centerY",2),x([Dh()],qp.prototype,"radius",2),x([Dh()],qp.prototype,"startAngle",2),x([Dh()],qp.prototype,"endAngle",2),x([Dh()],qp.prototype,"counterClockwise",2),x([Dh()],qp.prototype,"type",2);var Zp=class extends Ha{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,s;return null!=(s=null==(i=this.mask)?void 0:i.isPointInPath(t,e))&&s}computeBBox(){var t;return null==(t=this.mask)?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:s,devicePixelRatio:n}=t,a=1/n,o=null==e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==o)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),s.save(),s.beginPath(),e.path.draw(s),s.clip(),s.resetTransform();const r=Math.floor(o.x),l=Math.ceil(o.x+o.width),h=Math.floor(o.y),c=Math.ceil(o.y+o.height),d=new Hu,[u,p]="to-right"===this.direction?[r,l]:[h,c];if(d.domain=i.map((t,e)=>u+(p-u)*e/(i.length-1)),d.range=i,d.update(),"to-right"===this.direction){const t=c-h;for(let e=r;e<=l;e+=a)s.fillStyle=d.convert(e),s.fillRect(e,h,a,t)}else{const t=l-r;for(let e=h;e<=c;e+=a)s.fillStyle=d.convert(e),s.fillRect(r,e,t,a)}s.restore()}};function Qp(t,e,i){const s=Math.sqrt(u(t,2)+u(e,2)),n=Math.atan2(e,t)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}x([Ks({redraw:3})],Zp.prototype,"direction",2),x([Ks({redraw:3})],Zp.prototype,"stops",2),x([Ks({redraw:3})],Zp.prototype,"_mask",2);var Jp=class extends Mh{constructor(){super(...arguments),this.borderPath=new kh,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:t,endAngle:e}=this;return zn(t+Yn(t,e)/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,n=-t/2,a=t/2,o=-i,r=-e,l=this.getRotation(),h=[[n,r],[n,o],[a,o],[a,r],[n,r]].map(([t,e])=>Qp(t,e,l));s.clear({trackChanges:!0}),s.moveTo(h[0].x,h[0].y),s.lineTo(h[1].x,h[1].y),s.lineTo(h[2].x,h[2].y),s.lineTo(h[3].x,h[3].y),s.lineTo(h[0].x,h[0].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:o}=this,r=js(s,n),l=Math.asin(t/2/s),h=this.getRotation(),c=(t,e)=>Qp(t,e,h),d=(t,e)=>Math.sqrt(u(t,2)+u(e,2)),p=(t,e)=>e>t?0:Math.sqrt(u(t,2)-u(e,2)),g=(t,e,i)=>i?t<e:t>e,y=r&&!isNaN(l)&&l<Math.PI/6;let m=-t/2,f=t/2;const x=-i,v=-s*(y?Math.cos(l):1),b=g(a,d(s,t/2),!o);if(b){const t=p(a,s);m=-t,f=t}e.clear({trackChanges:!0});const S=c(m,v);e.moveTo(S.x,S.y);const k=js(s,i),D=g(a,d(i,t/2),!o);if(k&&y)e.arc(0,0,s,zn(-l-Math.PI/2)+h,zn(l-Math.PI/2)+h,!1);else if(D){const s=-p(a,t/2),n=p(a,i);if(!b){const t=c(m,s);e.lineTo(t.x,t.y)}if(e.arc(0,0,a,Math.atan2(s,m)+h,Math.atan2(x,-n)+h,!1),!js(n,0)){const t=c(n,x);e.lineTo(t.x,t.y)}e.arc(0,0,a,Math.atan2(x,n)+h,Math.atan2(s,f)+h,!1)}else{const t=c(m,x),i=c(f,x);e.lineTo(t.x,t.y),e.lineTo(i.x,i.y)}const M=c(f,v);if(e.lineTo(M.x,M.y),y)e.arc(0,0,s,zn(l-Math.PI/2)+h,zn(-l-Math.PI/2)+h,!0);else{const t=c(m,v);e.lineTo(t.x,t.y)}e.closePath()}};function tg(t,e,i,s,n){const a=Yn(t,e),o=a*(1-s)/2;if(t+=o,e-=o,a<.001)return 2*i*n;if(a>=2*Math.PI){const i=t+a/2;t=i-Math.PI,e=i+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),h=i*Math.cos(e),c=i*Math.sin(e),d=Math.floor(Math.sqrt(u(r-h,2)+u(l-c,2))),p=2*i*n;return Math.max(1,Math.min(p,d))}Jp.className="RadialColumnShape",x([Dh()],Jp.prototype,"isBeveled",2),x([Dh()],Jp.prototype,"columnWidth",2),x([Dh()],Jp.prototype,"startAngle",2),x([Dh()],Jp.prototype,"endAngle",2),x([Dh()],Jp.prototype,"outerRadius",2),x([Dh()],Jp.prototype,"innerRadius",2),x([Dh()],Jp.prototype,"axisInnerRadius",2),x([Dh()],Jp.prototype,"axisOuterRadius",2),x([Dh()],Jp.prototype,"isRadiusAxisReversed",2);var eg=class extends ln{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(0===this.dirty&&!i)return void(s&&s.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}};x([Ks({redraw:3})],eg.prototype,"x",2),x([Ks({redraw:3})],eg.prototype,"y",2),x([Ks({redraw:3})],eg.prototype,"width",2),x([Ks({redraw:3})],eg.prototype,"height",2),x([Ks({redraw:3})],eg.prototype,"opacity",2);var ig=g(g({},Rs),tr),sg={};f(sg,{CARTESIAN_AXIS_TYPE:()=>Ye,ChartTheme:()=>Ii,DEFAULT_AXIS_GRID_COLOUR:()=>pi,DEFAULT_AXIS_LINE_COLOUR:()=>gi,DEFAULT_BACKGROUND_COLOUR:()=>mi,DEFAULT_CROSS_LINES_COLOUR:()=>yi,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>Di,DEFAULT_FONT_FAMILY:()=>li,DEFAULT_HIERARCHY_FILLS:()=>Mi,DEFAULT_HIERARCHY_STROKES:()=>Li,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>di,DEFAULT_INVERTED_LABEL_COLOUR:()=>ci,DEFAULT_LABEL_COLOUR:()=>hi,DEFAULT_MUTED_LABEL_COLOUR:()=>ui,DEFAULT_POLAR_SERIES_STROKE:()=>ki,DEFAULT_SHADOW_COLOUR:()=>fi,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>Si,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>vi,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>xi,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>bi,EXTENDS_AXES_DEFAULTS:()=>ti,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>ni,EXTENDS_AXES_LABEL_DEFAULTS:()=>ei,EXTENDS_AXES_LINE_DEFAULTS:()=>ii,EXTENDS_AXES_TICK_DEFAULTS:()=>si,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>oi,EXTENDS_CHART_DEFAULTS:()=>qe,EXTENDS_LEGEND_DEFAULTS:()=>Ze,EXTENDS_LEGEND_ITEM_DEFAULTS:()=>Qe,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:()=>Je,EXTENDS_SERIES_DEFAULTS:()=>ai,FONT_SIZE:()=>Ke,FONT_WEIGHT:()=>Ve,IS_DARK_THEME:()=>$e,OVERRIDE_SERIES_LABEL_DEFAULTS:()=>ri,POLAR_AXIS_SHAPE:()=>je,POLAR_AXIS_TYPE:()=>Ue,POSITION:()=>We,getChartTheme:()=>xs,themes:()=>ng});var ng=Object.entries(ms).reduce((t,[e,i])=>(t[e]=i(),t),{}),ag={};f(ag,{BandScale:()=>jn,ColorScale:()=>Hu,ContinuousScale:()=>bo,Invalidating:()=>Un,LinearScale:()=>pd,TimeScale:()=>Rr});var og={};f(og,{Color:()=>un,Logger:()=>C,Padding:()=>Ml,angleBetween:()=>Yn,checkDatum:()=>Oo,clamp:()=>Vs,clampArray:()=>Ws,countFractionDigits:()=>Zs,createId:()=>Bs,deepClone:()=>fe,extent:()=>vs,findMinMax:()=>Ys,findRangeExtent:()=>Us,isContinuous:()=>Eo,isDate:()=>Et,isEqual:()=>js,isNegative:()=>Hs,isNumber:()=>Gt,isNumberEqual:()=>js,isString:()=>Bt,isStringObject:()=>To,jsonApply:()=>be,jsonDiff:()=>me,jsonWalk:()=>ve,mod:()=>qs,normalisedExtent:()=>bs,normalisedExtentWithMetadata:()=>Ss,normalizeAngle180:()=>Kn,normalizeAngle360:()=>zn,normalizeAngle360Inclusive:()=>Gn,range:()=>kr,resetIds:()=>Fs,round:()=>Xs,sanitizeHtml:()=>Bd,shallowClone:()=>xe,tickFormat:()=>fr,tickStep:()=>Sr,ticks:()=>vr,toDegrees:()=>Wn,toFixed:()=>$s,toRadians:()=>Vn,transformIntegratedCategoryValue:()=>Ro,zipObject:()=>Ps});var rg={};function lg(...t){for(const e of t)if(e instanceof Md){const{x:t,y:i,width:s,height:n}=e;e.setProperties({x:i,y:t,width:n,height:s})}else if(e instanceof _r){const{x1:t,y1:i,x2:s,y2:n}=e;e.setProperties({x1:i,y1:t,x2:n,y2:s})}}f(rg,{ADD_PHASE:()=>An,AGG_VALUES_EXTENT:()=>fc,AND:()=>$n,ANIMATION_PHASE_ORDER:()=>Nn,ANIMATION_PHASE_TIMINGS:()=>Cn,ARRAY:()=>ra,ARRAY_OF:()=>la,AbstractBarSeries:()=>Tu,AbstractBarSeriesProperties:()=>Iu,ActionOnSet:()=>oo,Animation:()=>En,AnimationManager:()=>Ql,AreaSeriesTag:()=>Mu,Axis:()=>nl,AxisLabel:()=>Yr,AxisTick:()=>Hr,BOOLEAN:()=>Qn,BOOLEAN_ARRAY:()=>fa,Background:()=>Ld,BackgroundModule:()=>Ad,BaseModuleInstance:()=>ct,BaseProperties:()=>pe,COLOR_STRING:()=>ya,COLOR_STRING_ARRAY:()=>ma,CartesianAxis:()=>rl,CartesianSeries:()=>rd,CartesianSeriesNodeClickEvent:()=>ad,CartesianSeriesProperties:()=>od,CategoryAxis:()=>ll,ChartAxisDirection:()=>Ka,ChartEventManager:()=>Jl,ChartOptions:()=>Is,ChartUpdateType:()=>Cl,ContextMenuRegistry:()=>th,CursorManager:()=>eh,DATE:()=>ua,DATE_ARRAY:()=>ba,DATE_OR_DATETIME_MS:()=>pa,DEGREE:()=>aa,DIRECTION:()=>Ea,DataController:()=>Bl,DataModel:()=>Fl,DataService:()=>Gl,Default:()=>Wr,Deprecated:()=>Es,DeprecatedAndRenamedTo:()=>Os,FONT_STYLE:()=>Aa,FONT_WEIGHT:()=>wa,FUNCTION:()=>Jn,GREATER_THAN:()=>da,GestureDetector:()=>sh,GroupedCategoryAxis:()=>xl,HierarchyNode:()=>cg,HierarchySeries:()=>dg,HierarchySeriesProperties:()=>ug,HighlightManager:()=>nh,HighlightStyle:()=>ed,INITIAL_LOAD:()=>Dn,INTERACTION_RANGE:()=>Ra,INTERACTION_TYPES:()=>Yl,InteractionManager:()=>ql,InteractionState:()=>Hl,LABEL_PHASE:()=>wn,LESS_THAN:()=>ca,LINE_CAP:()=>ka,LINE_DASH:()=>Ma,LINE_JOIN:()=>Da,Layers:()=>Io,LayoutService:()=>ph,MATCHING_CROSSLINE_TYPE:()=>Po,MAX_SPACING:()=>Fa,MIN_SPACING:()=>_a,Motion:()=>gn,NAN:()=>ia,NODE_UPDATE_PHASES:()=>On,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Rn,NUMBER:()=>ea,NUMBER_ARRAY:()=>xa,NUMBER_OR_NAN:()=>oa,Navigator:()=>Ed,NavigatorModule:()=>Od,OBJECT:()=>Zn,OBJECT_ARRAY:()=>Sa,OR:()=>qn,OVERFLOW_STRATEGY:()=>Ta,ObserveChanges:()=>ro,PLACEMENT:()=>Oa,POSITION:()=>La,POSITIVE_NUMBER:()=>sa,PolarAxis:()=>Gp,PolarSeries:()=>Sp,PropertiesArray:()=>ge,ProxyOnWrite:()=>no,ProxyProperty:()=>so,ProxyPropertyOnWrite:()=>ao,QUICK_TRANSITION:()=>.2,RATIO:()=>na,REGISTERED_MODULES:()=>dt,REMOVE_PHASE:()=>Mn,RepeatType:()=>In,SMALLEST_KEY_INTERVAL:()=>mc,SORT_DOMAIN_GROUPS:()=>xc,STRING:()=>ta,STRING_ARRAY:()=>va,Series:()=>Vc,SeriesGroupingChangedEvent:()=>Kc,SeriesItemHighlightStyle:()=>Qc,SeriesMarker:()=>Ud,SeriesNodeClickEvent:()=>Gc,SeriesNodePickMode:()=>Cc,SeriesProperties:()=>id,SeriesTooltip:()=>Hd,StateMachine:()=>ir,TEXT_ALIGN:()=>Ca,TEXT_WRAP:()=>Na,Tags:()=>il,TooltipManager:()=>ch,UNION:()=>Pa,UPDATE_PHASE:()=>Ln,UpdateService:()=>jc,VERTICAL_ALIGN:()=>Ia,Validate:()=>Hn,ZoomManager:()=>dh,__FORCE_MODULE_DETECTION:()=>pg,accumulateGroup:()=>Ac,accumulatedValue:()=>uc,accumulativeValueProperty:()=>Fc,adjustLabelPlacement:()=>Wu,animationValidation:()=>Dc,area:()=>dc,arraysEqual:()=>ks,assignJsonApplyConstructedArray:()=>fo,average:()=>hc,backfillPathPointData:()=>nu,buildResetPathFn:()=>cu,checkCrisp:()=>_u,circularSliceArray:()=>As,clamp:()=>Vs,clampArray:()=>Ws,collapsedStartingBarPosition:()=>Bu,count:()=>rc,countFractionDigits:()=>Zs,createDatumId:()=>Nc,createDeprecationWarning:()=>Ts,deconstructSelectionsOrNodes:()=>Tn,deepClone:()=>fe,deepMerge:()=>Ut,determinePathStatus:()=>Su,diff:()=>wc,enterpriseModule:()=>ht,extent:()=>vs,extractDecoratedProperties:()=>wt,findMinMax:()=>Ys,findRangeExtent:()=>Us,fixNumericExtent:()=>Ol,fromToMotion:()=>Pn,getMissCount:()=>Pl,getPath:()=>$t,getRectConfig:()=>Pu,groupAccumulativeValueProperty:()=>zc,groupAverage:()=>cc,groupBy:()=>Ls,groupCount:()=>lc,groupSum:()=>ac,hasRegisteredEnterpriseModules:()=>pt,injectStyle:()=>lo,invertShapeDirection:()=>lg,isArray:()=>Ct,isBoolean:()=>It,isDate:()=>Tt,isDecoratedObject:()=>Lt,isDefined:()=>Nt,isEnumKey:()=>Vt,isEnumValue:()=>Wt,isEqual:()=>js,isFiniteNumber:()=>Gt,isFunction:()=>Rt,isHtmlElement:()=>Kt,isNegative:()=>Hs,isNumber:()=>zt,isObject:()=>Pt,isObjectLike:()=>_t,isPlainObject:()=>Ft,isProperties:()=>ye,isRegExp:()=>Ot,isString:()=>Bt,isSymbol:()=>Yt,isValidDate:()=>Et,jsonApply:()=>be,jsonDiff:()=>me,jsonWalk:()=>ve,keyProperty:()=>Ec,listDecoratedProperties:()=>At,mapValues:()=>Xt,markerFadeInAnimation:()=>$d,markerPaletteFactory:()=>Pd,markerScaleInAnimation:()=>qd,markerSwipeScaleInAnimation:()=>Zd,mergeArrayDefaults:()=>Ht,mergeDefaults:()=>jt,midpointStartingBarPosition:()=>zu,minMax:()=>eu,mod:()=>qs,normaliseGroupTo:()=>bc,normalisePropertyTo:()=>kc,normalisedExtent:()=>bs,normalisedExtentWithMetadata:()=>Ss,pairCategoryData:()=>bu,pairContinuousData:()=>vu,partialAssign:()=>Zt,pathFadeInAnimation:()=>lu,pathFadeOutAnimation:()=>hu,pathSwipeInAnimation:()=>ru,predicateWithMessage:()=>Ba,prepareAreaPathAnimation:()=>wu,prepareAxisAnimationContext:()=>Xr,prepareAxisAnimationFunctions:()=>Zr,prepareBarAnimationFunctions:()=>Gu,prepareLinePathAnimation:()=>Du,prepareLinePathAnimationFns:()=>ku,prepareMarkerAnimation:()=>tu,range:()=>oc,rangedValueProperty:()=>Rc,registerModule:()=>ut,renderPartialPath:()=>ou,resetAxisGroupFn:()=>Qr,resetAxisLabelSelectionFn:()=>tl,resetAxisLineSelectionFn:()=>el,resetAxisSelectionFn:()=>Jr,resetBarSelectionsFn:()=>Ku,resetIds:()=>Fs,resetLabelFn:()=>Kd,resetMarkerFn:()=>Qd,resetMarkerPositionFn:()=>Jd,resetMotion:()=>er,round:()=>Xs,seriesLabelFadeInAnimation:()=>zd,seriesLabelFadeOutAnimation:()=>Gd,setPath:()=>qt,shallowClone:()=>xe,singleSeriesPaletteFactory:()=>Rd,staticFromToMotion:()=>_n,stringify:()=>Ga,sum:()=>nc,toArray:()=>Ds,toFixed:()=>$s,trailingAccumulatedValue:()=>pc,trailingAccumulatedValueProperty:()=>Bc,trailingValue:()=>_c,trailingValueProperty:()=>Pc,unique:()=>Ms,updateClipPath:()=>du,updateLabelNode:()=>Vu,updateRect:()=>Ru,validateCrossLineValues:()=>_o,valueProperty:()=>Oc});var hg=class t{constructor(t,e,i,s,n,a,o,r,l,h,c){this.series=t,this.index=e,this.datum=i,this.size=s,this.colorValue=n,this.fill=a,this.stroke=o,this.sumSize=r,this.depth=l,this.parent=h,this.children=c,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(e,i=t.Walk.PreOrder){i===t.Walk.PreOrder&&e(this),this.children.forEach(t=>{t.walk(e,i)}),i===t.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*k(t)}};hg.Walk={PreOrder:0,PostOrder:1};var cg=hg,dg=class extends Vc{constructor(t){super({moduleCtx:t,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new cg(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new ir("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}processData(){return b(this,null,(function*(){var t,e;const{childrenKey:i,sizeKey:s,colorKey:n,fills:a,strokes:o,colorRange:r}=this.properties;let l=0;let h=0,c=1/0,d=-1/0;const u=new Array((null!=(e=null==(t=this.data)?void 0:t.length)?e:0)+1).fill(void 0),p=(t,e)=>{const a=(l+=1,l),o=null!=e.depth?e.depth+1:0,r=null!=i?t[i]:void 0,p=null==r||0===r.length;let y=null!=s?t[s]:void 0;y=Number.isFinite(y)?Math.max(y,0):p?1:0;const m=y;h=Math.max(h,o);const f=null!=n?t[n]:void 0;return"number"==typeof f&&(u[a]=f,c=Math.min(c,f),d=Math.max(d,f)),g(new cg(this,a,t,y,f,void 0,void 0,m,o,e,[]),r)},g=(t,e)=>(null==e||e.forEach(e=>{const i=p(e,t);t.children.push(i),t.sumSize+=i.sumSize}),t),y=g(new cg(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),m=[c,d];let f;null!=r&&Number.isFinite(c)&&Number.isFinite(d)&&(f=new Hu,f.domain=m,f.range=r,f.update()),y.children.forEach((t,e)=>{t.walk(t=>{let i;const s=u[t.index];null!=s&&(i=null==f?void 0:f.convert(s)),null!=i||(i=null==a?void 0:a[e%a.length]),t.fill=i,t.stroke=null==f?null==o?void 0:o[e%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=y,this.maxDepth=h,this.colorDomain=m}))}update(t){return b(this,arguments,(function*({seriesRect:t}){yield this.updateSelections(),yield this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}))}resetAllAnimation(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&er(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;null!=i&&er([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s,visible:n}=this.properties;return"gradient"===t&&null!=e&&null!=s?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return""+t.index}getDatumId(t){return this.getDatumIdFromData(t)}},ug=class extends id{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(He),this.strokes=Object.values(Xe)}};x([Hn(ta)],ug.prototype,"childrenKey",2),x([Hn(ta,{optional:!0})],ug.prototype,"sizeKey",2),x([Hn(ta,{optional:!0})],ug.prototype,"colorKey",2),x([Hn(ta,{optional:!0})],ug.prototype,"colorName",2),x([Hn(ma)],ug.prototype,"fills",2),x([Hn(ma)],ug.prototype,"strokes",2),x([Hn(ma,{optional:!0})],ug.prototype,"colorRange",2);var pg=0,gg=Object.defineProperty,yg=Object.defineProperties,mg=Object.getOwnPropertyDescriptor,fg=Object.getOwnPropertyDescriptors,xg=Object.getOwnPropertySymbols,vg=Object.getPrototypeOf,bg=Object.prototype.hasOwnProperty,Sg=Object.prototype.propertyIsEnumerable,kg=Reflect.get,Dg=Math.pow,Mg=(t,e,i)=>e in t?gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,Lg=(t,e)=>{for(var i in e||(e={}))bg.call(e,i)&&Mg(t,i,e[i]);if(xg)for(var i of xg(e))Sg.call(e,i)&&Mg(t,i,e[i]);return t},Ag=(t,e)=>yg(t,fg(e)),wg=(t,e)=>{var i={};for(var s in t)bg.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&xg)for(var s of xg(t))e.indexOf(s)<0&&Sg.call(t,s)&&(i[s]=t[s]);return i},Ng=(t,e,i,s)=>{for(var n,a=s>1?void 0:s?mg(e,i):e,o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s?n(e,i,a):n(a))||a);return s&&a&&gg(e,i,a),a},Cg=(t,e,i)=>kg(vg(t),i,e),Ig=(t,e,i)=>new Promise((s,n)=>{var a=t=>{try{r(i.next(t))}catch(t){n(t)}},o=t=>{try{r(i.throw(t))}catch(t){n(t)}},r=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,o);r((i=i.apply(t,e)).next())}),Tg={__extends__:sg.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:sg.EXTENDS_AXES_GRID_LINE_DEFAULTS}};function Eg(t,e,i){const s=(e,i,s,n)=>{let a=t[0];for(let o=e;s>0?o<=i:o>i;o+=s){const e=t[o];if(n(a,e))return!0;a=e}return!1},n=Math.floor(t.length/2);return!!s(e,n,e,i)||s(t.length-e,n,-e,i)}var{ChartAxisDirection:Og,Layers:Rg,ARRAY:Pg,BOOLEAN:_g,COLOR_STRING:Fg,FONT_STYLE:Bg,FONT_WEIGHT:zg,LINE_DASH:Gg,NUMBER:Kg,POSITIVE_NUMBER:Vg,RATIO:Wg,STRING:Yg,UNION:Ug,AND:jg,Validate:Hg,MATCHING_CROSSLINE_TYPE:Xg}=rg,{Group:$g}=$p,{createId:qg}=og,Zg=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};Ng([Hg(_g,{optional:!0})],Zg.prototype,"enabled",2),Ng([Hg(Yg,{optional:!0})],Zg.prototype,"text",2),Ng([Hg(Bg,{optional:!0})],Zg.prototype,"fontStyle",2),Ng([Hg(zg,{optional:!0})],Zg.prototype,"fontWeight",2),Ng([Hg(Vg)],Zg.prototype,"fontSize",2),Ng([Hg(Yg)],Zg.prototype,"fontFamily",2),Ng([Hg(Kg)],Zg.prototype,"padding",2),Ng([Hg(Fg,{optional:!0})],Zg.prototype,"color",2),Ng([Hg(_g,{optional:!0})],Zg.prototype,"parallel",2);var Qg=class t{constructor(){this.id=qg(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new Zg,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Og.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new $g({name:""+this.id,layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.labelGroup=new $g({name:""+this.id,layer:!0,zIndex:t.LABEL_LAYER_ZINDEX})}calculatePadding(){}setSectorNodeProps(t){var e,i,s;t.fill=this.fill,t.fillOpacity=null!=(e=this.fillOpacity)?e:1,t.stroke=this.stroke,t.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,t.strokeWidth=null!=(s=this.strokeWidth)?s:1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,s,n){const{label:a}=this;t.x=e,t.y=i,t.text=a.text,t.textAlign="center",t.textBaseline=s,t.rotation=n,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=a.color,t.fontFamily=a.fontFamily,t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.visible=!0}calculateLayout(t){}};Qg.LINE_LAYER_ZINDEX=Rg.SERIES_CROSSLINE_LINE_ZINDEX,Qg.RANGE_LAYER_ZINDEX=Rg.SERIES_CROSSLINE_RANGE_ZINDEX,Qg.LABEL_LAYER_ZINDEX=Rg.SERIES_LABEL_ZINDEX,Ng([Hg(_g,{optional:!0})],Qg.prototype,"enabled",2),Ng([Hg(Ug(["range","line"],"a crossLine type"),{optional:!0})],Qg.prototype,"type",2),Ng([Hg(jg(Xg("range"),Pg.restrict({length:2})),{optional:!0})],Qg.prototype,"range",2),Ng([Hg(Xg("value"),{optional:!0})],Qg.prototype,"value",2),Ng([Hg(Fg,{optional:!0})],Qg.prototype,"fill",2),Ng([Hg(Wg,{optional:!0})],Qg.prototype,"fillOpacity",2),Ng([Hg(Fg,{optional:!0})],Qg.prototype,"stroke",2),Ng([Hg(Kg,{optional:!0})],Qg.prototype,"strokeWidth",2),Ng([Hg(Wg,{optional:!0})],Qg.prototype,"strokeOpacity",2),Ng([Hg(Gg,{optional:!0})],Qg.prototype,"lineDash",2);var Jg=Qg,{ChartAxisDirection:ty,validateCrossLineValues:ey}=rg,{Path:iy,Sector:sy,Text:ny}=$p,{normalizeAngle360:ay,isNumberEqual:oy}=og,ry=class t extends Jg{constructor(){super(),this.direction=ty.X,this.polygonNode=new iy,this.sectorNode=new sy,this.lineNode=new iy,this.labelNode=new ny,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e,shape:i,type:s,value:n,range:a}=this;if(!e||!s||!ey(s,n,a,e))return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=t,this.labelGroup.visible=t,"line"===s&&"circle"===i&&e instanceof ag.BandScale&&(this.type="range",this.range=[n,n]),this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(e){var i,s;const{scale:n,type:a,value:o,lineNode:r}=this;let l;if(!e||"line"!==a||!n||isNaN(l=n.convert(o)))return void(r.visible=!1);const{axisInnerRadius:h,axisOuterRadius:c}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,r.strokeWidth=null!=(s=this.strokeWidth)?s:1,r.fill=void 0,r.lineDash=this.lineDash;const d=c*Math.cos(l),u=c*Math.sin(l),p=h*Math.cos(l),g=h*Math.sin(l);r.path.clear({trackChanges:!0}),r.path.moveTo(p,g),r.path.lineTo(d,u),this.group.zIndex=t.LINE_LAYER_ZINDEX}updatePolygonNode(e){var i;const{polygonNode:s,range:n,scale:a,shape:o,type:r}=this;let l;if(!(e&&"range"===r&&"polygon"===o&&a&&n&&(l=null==(i=a.ticks)?void 0:i.call(a))))return void(s.visible=!1);const{axisInnerRadius:h,axisOuterRadius:c}=this,d=l.indexOf(n[0]),u=l.indexOf(n[1]),p=(d<=u?l.slice(d,u+1):l.slice(d).concat(l.slice(0,u+1))).map(t=>a.convert(t));s.visible=!0,this.setSectorNodeProps(s);const{path:g}=s;g.clear({trackChanges:!0}),p.forEach((t,e)=>{const i=c*Math.cos(t),s=c*Math.sin(t);0===e?g.moveTo(i,s):g.lineTo(i,s)}),0===h?g.lineTo(0,0):p.slice().reverse().forEach(t=>{const e=h*Math.cos(t),i=h*Math.sin(t);g.lineTo(e,i)}),s.path.closePath(),this.group.zIndex=t.RANGE_LAYER_ZINDEX}updateSectorNode(e){var i;const{sectorNode:s,range:n,scale:a,shape:o,type:r}=this;if(!e||"range"!==r||"circle"!==o||!a||!n)return void(s.visible=!1);const{axisInnerRadius:l,axisOuterRadius:h}=this,c=n.map(t=>a.convert(t)),d=null!=(i=a.step)?i:0,u=a instanceof ag.BandScale?d/2:0;s.visible=!0,this.setSectorNodeProps(s),s.centerX=0,s.centerY=0,s.innerRadius=l,s.outerRadius=h,s.startAngle=c[0]-u,s.endAngle=c[1]+u,this.group.zIndex=t.RANGE_LAYER_ZINDEX}updateLabelNode(t){var e,i;const{label:s,labelNode:n,range:a,scale:o,type:r}=this;if(!t||!1===s.enabled||!s.text||!o||"range"===r&&!a)return void(n.visible=!0);const{axisInnerRadius:l,axisOuterRadius:h}=this;let c,d,u,p;if("line"===r){const t=ay(o.convert(this.value)),e=3*Math.PI/2,i=oy(t,e)||t>e||t<Math.PI/2,n=(l+h)/2*Math.cos(t),a=(l+h)/2*Math.sin(t);c=n+s.padding*Math.cos(t+Math.PI/2),d=a+s.padding*Math.sin(t+Math.PI/2),p=i?"top":"bottom",u=i?t:t-Math.PI}else{const[t,n]=a.map(t=>ay(o.convert(t)));let r=(t+n)/2;t>n&&(r-=Math.PI),r=ay(r);const l=(oy(r,0)||r>0)&&r<Math.PI;let g;const y=null!=(i=null==(e=o.ticks)?void 0:e.call(o))?i:[];g="circle"===this.shape||y.length<3?h-s.padding:h*Math.cos(Math.PI/y.length)-s.padding,c=g*Math.cos(r),d=g*Math.sin(r),p=l?"bottom":"top",u=l?r-Math.PI/2:r+Math.PI/2}this.setLabelNodeProps(n,c,d,p,u)}};ry.className="AngleCrossLine";var ly=ry,{AND:hy,assignJsonApplyConstructedArray:cy,ChartAxisDirection:dy,GREATER_THAN:uy,NUMBER:py,UNION:gy,ProxyOnWrite:yy,Validate:my}=rg,{Path:fy,Text:xy}=$p,{angleBetween:vy,isNumberEqual:by,toRadians:Sy,normalizeAngle360:ky}=og,Dy=class extends rg.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};Ng([my(gy(["fixed","parallel","perpendicular"],"a label orientation"))],Dy.prototype,"orientation",2);var My=class extends rg.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new fy),this.computeRange=()=>{const t=ky(-Math.PI/2+Sy(this.startAngle));let e=null==this.endAngle?t+2*Math.PI:-Math.PI/2+Sy(this.endAngle);e<t&&(e+=2*Math.PI),this.range=[t,e]},this.includeInvisibleDomains=!0}get direction(){return dy.X}assignCrossLineArrayConstructor(t){cy(t,ly)}createLabel(){return new Dy}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:t,gridLength:e}=this;return vy(t[0],t[1])*e}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineGroup:s}=this,n=Math.floor(t.x),a=Math.floor(t.y);e.translationX=n,e.translationY=a,i.translationX=n,i.translationY=a,s.translationX=n,s.translationY=a}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear({trackChanges:!0});const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:t,y:i,moveTo:s,arc:n,radius:a=0,startAngle:o=0,endAngle:r=0})=>{n?e.arc(t,i,a,o,r):s?e.moveTo(t,i):e.lineTo(t,i)}),s&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.color,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){var t;const{scale:e,shape:i,gridLength:s}=this,[n,a]=this.range,o=by(a-n,2*Math.PI),r=[];if("circle"===i)o?(r.push({x:s,y:0,moveTo:!0}),r.push({x:0,y:0,radius:s,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(r.push({x:s*Math.cos(n),y:s*Math.sin(n),moveTo:!0}),r.push({x:0,y:0,radius:s,startAngle:ky(n),endAngle:ky(a),arc:!0,moveTo:!1}));else if("polygon"===i){const i=((null==(t=e.ticks)?void 0:t.call(e))||[]).map(t=>e.convert(t));i.length>2&&i.forEach((t,e)=>{const i=s*Math.cos(t),n=s*Math.sin(t),a=0===e;r.push({x:i,y:n,moveTo:a})})}return{points:r,closePath:o}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{enabled:i,style:s,width:n},innerRadiusRatio:a}=this;if(!(s&&e>0))return;const o=this.tickData,r=e*a,l=s.length;this.gridLineGroupSelection.update(i?o:[],void 0,t=>t.value).each((i,a,o)=>{const{value:h}=a,{stroke:c,lineDash:d}=s[o%l],u=t.convert(h);i.x1=r*Math.cos(u),i.y1=r*Math.sin(u),i.x2=e*Math.cos(u),i.y2=e*Math.sin(u),i.stroke=c,i.strokeWidth=n,i.lineDash=d,i.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this,i=this.tickData;e.update(t.enabled?i:[]).each((e,i,s)=>{const n=this.labelData[s];n&&!n.hidden?(e.text=n.text,e.setFont(t),e.fill=t.color,e.x=n.x,e.y=n.y,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline,e.visible=!0,n.rotation?(e.rotation=n.rotation,e.rotationCenterX=n.x,e.rotationCenterY=n.y):e.rotation=0):e.visible=!1})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:s}=this,n=this.tickData;s.update(i.enabled?n:[]).each((s,n)=>{const{value:a}=n,o=t.convert(a),r=Math.cos(o),l=Math.sin(o);s.x1=e*r,s.y1=e*l,s.x2=(e+i.size)*r,s.y2=(e+i.size)*l,s.stroke=i.color,s.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:s,gridLength:n,scale:a,tick:o}=this;if(!s.enabled)return[];const r=new xy,l=i.x-this.translation.x,h=i.x+i.width-this.translation.x,c=t.map((i,c)=>{var d;const{value:u}=i,p=n+s.padding+o.size,g=a.convert(u),y=p*Math.cos(g),m=p*Math.sin(g),{textAlign:f,textBaseline:x}=this.getLabelAlign(g),v=c===t.length-1&&u!==t[0]&&by(ky(g),ky(a.convert(t[0]))),b=this.getLabelRotation(g);let S=String(u);if(s.formatter){const{callbackCache:t}=this.moduleCtx;S=null!=(d=t.call(s.formatter,{value:u,index:c}))?d:""}r.text=S,r.x=y,r.y=m,r.setFont(s),r.textAlign=f,r.textBaseline=x,r.rotation=b,b&&(r.rotationCenterX=y,r.rotationCenterY=m);let k=b?r.computeTransformedBBox():r.computeBBox();if(k&&e.hideWhenNecessary&&!b){const t=l-k.x,e=k.x+k.width-h,i=1;if(t>i||e>i){const i=k.width-Math.max(t,e);({text:S}=xy.wrap(S,i,1/0,s,"never")),"\u2026"===S&&(S="",k=void 0),r.text=S,k=r.computeBBox()}}return{text:S,x:y,y:m,textAlign:f,textBaseline:x,hidden:""===S||i.hidden||v,rotation:b,box:k}});return s.avoidCollisions&&this.avoidLabelCollisions(c),c}computeLabelsBBox(t,e){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:t})=>t).filter(t=>null!=t);return this.label.enabled&&0!==i.length?$p.BBox.merge(i):null}getLabelOrientation(){const{label:t}=this;return t instanceof Dy?t.orientation:"fixed"}getLabelRotation(t){var e;let i=Sy(null!=(e=this.label.rotation)?e:0);t=ky(t);const s=this.getLabelOrientation();return"parallel"===s?(i+=t,t>=0&&t<Math.PI?i-=Math.PI/2:i+=Math.PI/2):"perpendicular"===s&&(i+=t,t>=Math.PI/2&&t<3*Math.PI/2&&(i+=Math.PI)),i}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let s,n;const a=this.getLabelOrientation(),o=by(e,0),r=by(i,0),l=by(e,1),h=by(i,-1),c=e>0&&!o,d=i>0&&!r;return"parallel"===a?(s="center",n=l&&r||d?"top":"bottom"):"perpendicular"===a?(s=h||c?"left":"right",n="middle"):(s=o?"center":c?"left":"right",n=r?"middle":d?"top":"bottom"),{textAlign:s,textBaseline:n}}updateCrossLines(){var t;null==(t=this.crossLines)||t.forEach(t=>{if(t instanceof ly){const{shape:e,gridLength:i,innerRadiusRatio:s}=this;t.shape=e,t.axisOuterRadius=i,t.axisInnerRadius=i*s}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};Ng([yy("rotation"),my(py.restrict({min:0,max:360}))],My.prototype,"startAngle",2),Ng([my(hy(py.restrict({min:0,max:720}),uy("startAngle")),{optional:!0})],My.prototype,"endAngle",2);var{RATIO:Ly,Validate:Ay}=rg,{BandScale:wy}=ag,{isNumberEqual:Ny}=og,Cy=class extends My{constructor(t){super(t,new wy),this.groupPaddingInner=0,this.paddingInner=0}generateAngleTicks(){var t,e;const{scale:i,tick:s,gridLength:n}=this,a=null!=(e=null!=(t=s.values)?t:i.ticks())?e:[];if(a.length<2||isNaN(s.minSpacing))return a.map(t=>({value:t,visible:!0}));const o=a[0],r=i.convert(o),l=n*Math.cos(r),h=n*Math.sin(r);for(let t=1;t<a.length-1;t++){const e=a[t],c=i.convert(e);if(c-r>Math.PI)break;const d=n*Math.cos(c),u=n*Math.sin(c);if(Math.sqrt(Dg(d-l,2)+Dg(u-h,2))>s.minSpacing){const e=new Set([o]);return Eg(a,t,(t,i)=>{e.add(i)}),a.map(t=>({value:t,visible:e.has(t)}))}}return[{value:o,visible:!0}]}avoidLabelCollisions(t){let{minSpacing:e}=this.label;if(Number.isFinite(e)||(e=0),t.length<3)return;const i=(t,i)=>{if(t.hidden||i.hidden)return!1;const s=t.box.clone().grow(e/2),n=i.box.clone().grow(e/2);return s.collidesBBox(n)},s=t[0],n=t.at(-1),a=new Set([s]),o=Ny(s.x,n.x)&&Ny(s.y,n.y),r=Math.floor(t.length/2);for(let e=1;e<=r;e++){const s=o?t.slice(0,-1):t;if(!Eg(s,e,i)){Eg(s,e,(t,e)=>{a.add(e)});break}}t.forEach(t=>{a.has(t)||(t.hidden=!0,t.box=void 0)})}};Cy.className="AngleCategoryAxis",Cy.type="angle-category",Ng([Ay(Ly)],Cy.prototype,"groupPaddingInner",2),Ng([Ay(Ly)],Cy.prototype,"paddingInner",2);var Iy={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:Cy,themeTemplate:Tg},{LinearScale:Ty,Invalidating:Ey}=ag,{isNumberEqual:Oy,range:Ry}=og,Py=class extends Ty{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[t,e]=this.getDomain(),{interval:i}=this;if(i){const s=Math.abs(i);if(!this.isDenseInterval({start:t,stop:e,interval:s}))return Ry(t,e,s)}const s=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(t,e);return Ry(t,e,s)}hasNiceRange(){const t=this.range.slice().sort((t,e)=>t-e);return[Math.PI,2*Math.PI].some(e=>Oy(e,t[1]-t[0]))}getNiceStepAndTickCount(){const[t,e]=this.niceDomain;let i=this.getTickStep(t,e);const s=isNaN(this.maxTickCount)?1/0:this.maxTickCount,n=Math.abs(e-t)/i;let a=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return a>s&&(a/=2,i*=2),{count:a,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const t=this.niceDomain[0]>this.niceDomain[1],e=t?this.niceDomain[1]:this.niceDomain[0],{step:i,count:s}=this.getNiceStepAndTickCount(),n=1/i,a=i>=1?Math.ceil(e/i+s)*i:Math.ceil((e+s*i)*n)/n;this.niceDomain=t?[a,e]:[e,a],this.niceTickStep=i}getPixelRange(){return this.arcLength}};Ng([Ey],Py.prototype,"arcLength",2);var{AND:_y,Default:Fy,GREATER_THAN:By,LESS_THAN:zy,NUMBER_OR_NAN:Gy,MIN_SPACING:Ky,Validate:Vy}=rg,{angleBetween:Wy,isNumberEqual:Yy,normalisedExtentWithMetadata:Uy}=og,jy=class extends rg.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};Ng([Vy(Ky),Fy(NaN)],jy.prototype,"maxSpacing",2);var Hy=class extends My{constructor(t){super(t,new Py),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=Uy(t,e,i);return{domain:s,clipped:n}}createTick(){return new jy}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t);return(Wy(e,i)||2*Math.PI)*this.gridLength}generateAngleTicks(){var t;const e=this.getRangeArcLength(),{scale:i,tick:s,range:n}=this,{minSpacing:a=NaN,maxSpacing:o=NaN}=s,r=o?Math.floor(e/o):1,l=a?Math.floor(e/a):1/0,h=Math.floor(4/Math.PI*Math.abs(n[0]-n[1]));i.tickCount=Math.max(r,Math.min(l,h)),i.minTickCount=r,i.maxTickCount=l,i.arcLength=e;return(null!=(t=s.values)?t:i.ticks()).map(t=>({value:t,visible:!0}))}avoidLabelCollisions(t){let{minSpacing:e}=this.label;Number.isFinite(e)||(e=0);const i=(t,i)=>{if(t.hidden||i.hidden)return!1;const s=t.box.clone().grow(e/2),n=i.box.clone().grow(e/2);return s.collidesBBox(n)},s=t[0],n=t.at(-1);s!==n&&Yy(s.x,n.x)&&Yy(s.y,n.y)&&(n.hidden=!0);for(let e=1;e<t.length;e*=2){let s=!1;for(let n=e;n<t.length;n+=e){const a=t[n];if(i(t[n-e],a)){s=!0;break}}if(!s)return void t.forEach((t,i)=>{i%e>0&&(t.hidden=!0,t.box=void 0)})}t.forEach((t,e)=>{e>0&&(t.hidden=!0,t.box=void 0)})}};Hy.className="AngleNumberAxis",Hy.type="angle-number",Ng([Vy(_y(Gy,zy("max"))),Fy(NaN)],Hy.prototype,"min",2),Ng([Vy(_y(Gy,By("min"))),Fy(NaN)],Hy.prototype,"max",2);var Xy={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:Hy,themeTemplate:Tg},$y={__extends__:sg.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:sg.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:sg.EXTENDS_AXES_TICK_DEFAULTS}},{ChartAxisDirection:qy,Validate:Zy,DEGREE:Qy,validateCrossLineValues:Jy}=rg,{Path:tm,Sector:em,Text:im}=$p,{normalizeAngle360:sm,toRadians:nm,isNumberEqual:am}=og,om=class extends Zg{constructor(){super(...arguments),this.positionAngle=void 0}};Ng([Zy(Qy,{optional:!0})],om.prototype,"positionAngle",2);var rm=class t extends Jg{constructor(){super(),this.direction=qy.Y,this.label=new om,this.polygonNode=new tm,this.sectorNode=new em,this.labelNode=new im,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,type:s,value:n,range:a}=this;if(!i||!s||!Jy(s,n,a,i))return this.group.visible=!1,void(this.labelGroup.visible=!1);"line"===s&&i instanceof ag.BandScale&&(this.type="range",this.range=[n,n]),this.updateRadii();const{innerRadius:o,outerRadius:r}=this;e&&(e=o>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.group.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.group.zIndex="line"===this.type?t.LINE_LAYER_ZINDEX:t.RANGE_LAYER_ZINDEX}updateRadii(){var t;const{range:e,scale:i,type:s,axisInnerRadius:n,axisOuterRadius:a}=this;if(!i)return{innerRadius:0,outerRadius:0};const o=t=>a+n-t;let r=0,l=0;if("line"===s)r=o(i.convert(this.value)),l=r;else{const s=Math.abs(null!=(t=null==i?void 0:i.bandwidth)?t:0),n=e.map(t=>i.convert(t));r=o(Math.max(...n)),l=o(Math.min(...n))+s}this.outerRadius=r,this.innerRadius=l}drawPolygon(t,e,i){e.forEach((e,s)=>{const n=t*Math.cos(e),a=t*Math.sin(e);0===s?i.path.moveTo(n,a):i.path.lineTo(n,a)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:s,shape:n,type:a,innerRadius:o,outerRadius:r}=this;if(!t||"polygon"!==n||!s||!e)return void(i.visible=!1);i.visible=!0;const l=this.getPadding();i.path.clear({trackChanges:!0}),this.drawPolygon(r-l,e,i);const h=e.slice().reverse(),c="line"===a?r-l:o+l;this.drawPolygon(c,h,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:s,sectorNode:n,shape:a,innerRadius:o,outerRadius:r}=this;if(!t||"circle"!==a||!s)return void(n.visible=!1);n.visible=!0,n.startAngle=0,n.endAngle=2*Math.PI;const l=this.getPadding();n.innerRadius=og.clamp(e,o+l,i),n.outerRadius=og.clamp(e,r-l,i),this.setSectorNodeProps(n)}updateLabelNode(t){var e,i;const{innerRadius:s,label:n,labelNode:a,scale:o,shape:r,type:l}=this;if(!t||!1===n.enabled||!n.text||!o)return void(a.visible=!1);const h=sm(nm((null!=(e=n.positionAngle)?e:0)-90)),c=(am(h,0)||h>0)&&h<Math.PI,d=c?h-Math.PI/2:h+Math.PI/2;let u=0;const p=null!=(i=this.gridAngles)?i:[];u="line"===l?s+n.padding:"circle"===r||p.length<3?s-n.padding:s*Math.cos(Math.PI/p.length)-n.padding;const g=u*Math.cos(h),y=u*Math.sin(h);let m;m="line"===l?c?"top":"bottom":c?"bottom":"top",this.setLabelNodeProps(a,g,y,m,d)}getPadding(){var t,e;const{scale:i}=this;if(!i)return 0;const s=Math.abs(null!=(t=i.bandwidth)?t:0),n=Math.abs(null!=(e=i.step)?e:0);return i instanceof ag.BandScale?(n-s)/2:0}};rm.className="RadiusCrossLine";var lm=rm,{assignJsonApplyConstructedArray:hm,ChartAxisDirection:cm,Default:dm,Layers:um,DEGREE:pm,MIN_SPACING:gm,BOOLEAN:ym,Validate:mm}=rg,{Caption:fm,Group:xm,Path:vm,Selection:bm}=$p,{isNumberEqual:Sm,normalizeAngle360:km,toRadians:Dm}=og,Mm=class extends rg.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};Ng([mm(gm),dm(NaN)],Mm.prototype,"maxSpacing",2);var Lm=class extends rg.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};Ng([mm(ym,{optional:!0})],Lm.prototype,"autoRotate",2),Ng([mm(pm)],Lm.prototype,"autoRotateAngle",2);var Am=class extends rg.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new xm({name:this.id+"-gridPaths",zIndex:um.AXIS_GRID_ZINDEX})),this.gridPathSelection=bm.select(this.gridPathGroup,vm)}get direction(){return cm.Y}assignCrossLineArrayConstructor(t){hm(t,lm)}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:s}=this,n=t*s,a=Dm(i);return{translationX:e.x,translationY:e.y-t-n,rotation:a,rotationCenterX:0,rotationCenterY:t+n}}updateSelections(t,e,i){var s;super.updateSelections(t,e,i);const{gridLine:{enabled:n,style:a,width:o},shape:r}=this;if(!a)return;const l=this.prepareTickData(e),h=a.length,[c,d]=null!=(s=this.gridRange)?s:[0,2*Math.PI],u=Sm(d-c,2*Math.PI),p=(t,e)=>{const{path:i}=t;i.clear({trackChanges:!0});const s=this.getTickRadius(e);u?(i.moveTo(s,0),i.arc(0,0,s,0,2*Math.PI)):(i.moveTo(s*Math.cos(c),s*Math.sin(c)),i.arc(0,0,s,km(c),km(d))),u&&i.closePath()},g=(t,e)=>{const{path:i}=t,s=this.gridAngles;if(i.clear({trackChanges:!0}),!s||s.length<3)return;const n=this.getTickRadius(e);s.forEach((t,e)=>{const a=n*Math.cos(t),o=n*Math.sin(t);0===e?i.moveTo(a,o):i.lineTo(a,o),s.forEach((t,e)=>{const s=n*Math.cos(t),a=n*Math.sin(t);0===e?i.moveTo(s,a):i.lineTo(s,a)}),i.closePath()}),i.closePath()};this.gridPathSelection.update(n?l:[]).each((t,e,i)=>{((t,e)=>{const{stroke:i,lineDash:s}=a[e%h];t.stroke=i,t.strokeWidth=o,t.lineDash=s,t.fill=void 0})(t,i),"circle"===r?p(t,e):g(t,e)})}updateTitle(){var t;const e=t=>t.defaultValue,{title:i,_titleCaption:s,range:n,moduleCtx:{callbackCache:a}}=this,{formatter:o=e}=null!=(t=this.title)?t:{};if(!i)return void(s.enabled=!1);s.enabled=i.enabled,s.fontFamily=i.fontFamily,s.fontSize=i.fontSize,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.color=i.color,s.wrapping=i.wrapping;let r=!1;const l=s.node;i.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((n[0]+n[1])/2),l.y=-fm.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=a.call(o,this.getTitleFormatterParams())),l.visible=r}createTick(){return new Mm}updateCrossLines(){var t;null==(t=this.crossLines)||t.forEach(t=>{if(t instanceof lm){const{shape:e,gridAngles:i,range:s,innerRadiusRatio:n}=this,a=s[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=a,t.axisInnerRadius=a*n}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new Lm}};Ng([mm(pm),dm(0)],Am.prototype,"positionAngle",2);var{RATIO:wm,ProxyPropertyOnWrite:Nm,Validate:Cm}=rg,{BandScale:Im}=ag,Tm=class extends Am{constructor(t){super(t,new Im),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e}=this,i=e.range[0],s=i*this.innerRadiusRatio,n=(i-s)/e.domain.length;return i-t.translationY+s-n/2}};Tm.className="RadiusCategoryAxis",Tm.type="radius-category",Ng([Cm(wm)],Tm.prototype,"groupPaddingInner",2),Ng([Nm("scale","paddingInner"),Cm(wm)],Tm.prototype,"paddingInner",2),Ng([Nm("scale","paddingOuter"),Cm(wm)],Tm.prototype,"paddingOuter",2);var Em={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:Tm,themeTemplate:$y},{AND:Om,Default:Rm,GREATER_THAN:Pm,LESS_THAN:_m,NUMBER_OR_NAN:Fm,Validate:Bm}=rg,{LinearScale:zm}=ag,{normalisedExtentWithMetadata:Gm}=og,Km=class extends Am{constructor(t){super(t,new zm),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(t){var e;const{scale:i}=this,s=null==(e=i.getDomain)?void 0:e.call(i)[1];return t.filter(({tick:t})=>t!==s).sort((t,e)=>e.tick-t.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],s=i*this.innerRadiusRatio;return i-t.translationY+s}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=Gm(t,e,i);return{domain:s,clipped:n}}};Km.className="RadiusNumberAxis",Km.type="radius-number",Ng([Bm(Om(Fm,_m("max"))),Rm(NaN)],Km.prototype,"min",2),Ng([Bm(Om(Fm,Pm("min"))),Rm(NaN)],Km.prototype,"max",2);var Vm={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:Km,themeTemplate:$y},{BOOLEAN:Wm,POSITIVE_NUMBER:Ym,ActionOnSet:Um,Validate:jm}=rg,Hm=class extends rg.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.animationManager=t.animationManager,this.animationManager.skip(!1)}};Ng([Um({newValue(t){this.animationManager&&this.animationManager.skip(!t)}}),jm(Wm)],Hm.prototype,"enabled",2),Ng([Um({newValue(t){this.animationManager&&(this.animationManager.defaultDuration=t)}}),jm(Ym)],Hm.prototype,"duration",2);var Xm={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Hm,themeTemplate:{animation:{enabled:!0}}},{Image:$m}=$p,{BaseProperties:qm,ObserveChanges:Zm,ProxyProperty:Qm,Validate:Jm,NUMBER:tf,POSITIVE_NUMBER:ef,RATIO:sf}=rg,nf=class extends qm{constructor(t){super(),this.loadedSynchronously=!0,this.opacity=1,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var t;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),null==(t=this.onLoad)||t.call(this))},this.imageElement=t.document.createElement("img"),this.imageElement.onload=this.onImageLoad,this.node=new $m(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e,this.node.setProperties(this.complete?Lg({visible:!0,opacity:this.opacity},this.calculatePosition(this.imageElement.width,this.imageElement.height)):{visible:!1})}calculatePosition(t,e){let{top:i,right:s,bottom:n,left:a,width:o,height:r}=this;return null!=a?null!=o?s=this.containerWidth-a+o:null!=s&&(o=this.containerWidth-a-s):null!=s&&null!=o&&(a=this.containerWidth-s-o),null!=i?null!=r?n=this.containerHeight-i-r:null!=n&&(r=this.containerHeight-n-i):null!=n&&null!=r&&(i=this.containerHeight-n-r),null==o?null==r?(o=t,r=e):o=Math.ceil(t*r/e):null==r&&(r=Math.ceil(e*o/t)),null==a&&(a=null==s?Math.floor((this.containerWidth-o)/2):this.containerWidth-s-o),null==i&&(i=null==n?Math.floor((this.containerHeight-r)/2):this.containerHeight-r-n),{x:a,y:i,width:o,height:r}}};Ng([Jm(tf,{optional:!0})],nf.prototype,"top",2),Ng([Jm(tf,{optional:!0})],nf.prototype,"right",2),Ng([Jm(tf,{optional:!0})],nf.prototype,"bottom",2),Ng([Jm(tf,{optional:!0})],nf.prototype,"left",2),Ng([Jm(ef,{optional:!0})],nf.prototype,"width",2),Ng([Jm(ef,{optional:!0})],nf.prototype,"height",2),Ng([Jm(sf)],nf.prototype,"opacity",2),Ng([Qm("imageElement.src"),Zm(t=>t.loadedSynchronously=t.complete)],nf.prototype,"url",2);var{ActionOnSet:af,OBJECT:of,Validate:rf}=rg,lf=class extends rg.Background{constructor(t){super(t),this.image=new nf(t),this.updateService=t.updateService}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.updateService.update(rg.ChartUpdateType.SCENE_RENDER)}};Ng([rf(of,{optional:!0}),af({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],lf.prototype,"image",2);var hf={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:lf},{BOOLEAN:cf,Validate:df}=rg,uf=class t extends rg.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=e.highlightManager,this.interactionManager=e.interactionManager,this.registry=e.contextMenuRegistry,this.scene=e.scene;const{Default:i,ContextMenu:s,All:n}=rg.InteractionState,a=i|s;if(this.destroyFns.push(e.interactionManager.addListener("contextmenu",t=>this.onContextMenu(t),a),e.interactionManager.addListener("click",()=>this.onClick(),n)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=e.scene.canvas.element,this.container=e.document.body,this.element=this.container.appendChild(e.document.createElement("div")),this.element.classList.add("ag-chart-context-menu"),this.element.addEventListener("contextmenu",t=>t.preventDefault()),this.destroyFns.push(()=>{var t;return null==(t=this.element.parentNode)?void 0:t.removeChild(this.element)}),this.hide(),"undefined"!=typeof IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.hide()},{root:this.container});t.observe(this.canvasElement),this.intersectionObserver=t}if("undefined"!=typeof MutationObserver){const t=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});t.observe(this.element,{childList:!0}),this.mutationObserver=t}if(t.contextMenuDocuments.indexOf(e.document)<0){const i=e.document.createElement("style");i.innerHTML="\n.ag-chart-context-menu {\n    background: rgb(248, 248, 248);\n    border: 1px solid #babfc7;\n    border-radius: 5px;\n    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);\n    color: rgb(24, 29, 31);\n    font: 13px Verdana, sans-serif;\n    position: fixed;\n    transition: transform 0.1s ease;\n    white-space: nowrap;\n    z-index: 99999;\n}\n\n.ag-chart-context-menu.ag-charts-dark-context-menu {\n    color: white;\n    background: #15181c;\n}\n\n.ag-chart-context-menu__cover {\n    position: fixed;\n    left: 0px;\n    top: 0px;\n}\n\n.ag-chart-context-menu__menu {\n    display: flex;\n    flex-direction: column;\n    padding: 0.5em 0;\n}\n\n.ag-chart-context-menu__item {\n    background: none;\n    border: none;\n    box-sizing: border-box;\n    font: inherit;\n    padding: 0.5em 1em;\n    text-align: left;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n}\n\n.ag-chart-context-menu__item.ag-charts-dark-context-menu {\n    color: white;\n}\n\n.ag-chart-context-menu__item:hover {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.ag-chart-context-menu__item:hover.ag-charts-dark-context-menu {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.ag-chart-context-menu__item:active {\n    background: rgb(33, 150, 243, 0.2);\n}\n\n.ag-chart-context-menu__item:active.ag-charts-dark-context-menu {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.ag-chart-context-menu__item[disabled] {\n    border: none;\n    opacity: 0.5;\n    text-align: left;\n}\n\n.ag-chart-context-menu__item[disabled]:hover {\n    background: inherit;\n    cursor: inherit;\n}\n\n.ag-chart-context-menu__divider {\n    margin: 5px 0;\n    background: #babfc7;\n    height: 1px;\n}\n\n.ag-chart-context-menu__divider.ag-charts-dark-context-menu {\n    background: rgb(33, 150, 243, 0.1);\n}\n",e.document.head.insertBefore(i,e.document.head.querySelector("style")),t.contextMenuDocuments.push(e.document)}this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const t=e.chartService.title;let i="image";void 0!==t&&t.enabled&&void 0!==t.text&&(i=t.text),this.scene.download(i)}})}isShown(){return void 0!==this.menuElement}onClick(){this.isShown()&&this.hide()}onContextMenu(t){if(!this.enabled)return;this.showEvent=t.sourceEvent,this.x=t.pageX,this.y=t.pageY,this.groups.default=this.registry.copyDefaultAction(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:e,node:i,extra:s,extraNode:n}=this.groups;0!==e.length+i.length+s.length+n.length&&(t.consume(),t.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(rg.InteractionState.ContextMenu),this.element.classList.toggle("ag-charts-dark-context-menu",this.darkTheme);const t=this.renderMenu();this.menuElement?this.element.replaceChild(t,this.menuElement):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block"}hide(){this.interactionManager.popState(rg.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const t=this.ctx.document.createElement("div");return t.classList.add("ag-chart-context-menu__menu"),t.classList.toggle("ag-charts-dark-context-menu",this.darkTheme),this.groups.default.forEach(e=>{const i=this.renderItem(e);i&&t.appendChild(i)}),["node","extra","extraNode"].forEach(e=>{0===this.groups[e].length||["node","extraNode"].includes(e)&&!this.pickedNode||(t.appendChild(this.createDividerElement()),this.groups[e].forEach(e=>{const i=this.renderItem(e);i&&t.appendChild(i)}))}),t}renderItem(t){if(t&&"object"==typeof t&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=this.ctx.document.createElement("div");return t.classList.add("ag-chart-context-menu__divider"),t.classList.toggle("ag-charts-dark-context-menu",this.darkTheme),t}createActionElement({id:t,label:e,action:i}){return t&&this.registry.isDisabled(t)?this.createDisabledElement(e):this.createButtonElement(e,i)}createButtonElement(t,e){const i=this.ctx.document.createElement("button");return i.classList.add("ag-chart-context-menu__item"),i.classList.toggle("ag-charts-dark-context-menu",this.darkTheme),i.innerHTML=t,i.onclick=()=>{var t,i,s;const n={event:this.showEvent,datum:null==(t=this.pickedNode)?void 0:t.datum,itemId:null==(i=this.pickedNode)?void 0:i.itemId,seriesId:null==(s=this.pickedNode)?void 0:s.series.id};e(n),this.hide()},i}createDisabledElement(t){const e=this.ctx.document.createElement("button");return e.classList.add("ag-chart-context-menu__item"),e.classList.toggle("ag-charts-dark-context-menu",this.darkTheme),e.disabled=!0,e.innerHTML=t,e}reposition(){const{x:t,y:e,ctx:{window:i}}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",t+this.element.offsetWidth>i.innerWidth?this.element.style.right=`calc(100% - ${t-1}px)`:this.element.style.left=t+1+"px",e+this.element.offsetHeight>i.innerHeight?this.element.style.bottom=`calc(100% - ${e}px - 0.5em)`:this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){var t,e;super.destroy(),this.destroyFns.forEach(t=>t()),null==(t=this.intersectionObserver)||t.unobserve(this.canvasElement),null==(e=this.mutationObserver)||e.disconnect()}};uf.contextMenuDocuments=[],Ng([df(cf)],uf.prototype,"enabled",2),Ng([df(cf)],uf.prototype,"darkTheme",2);var pf={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],optionsKey:"contextMenu",instanceConstructor:uf,themeTemplate:{contextMenu:{enabled:!0,darkTheme:sg.IS_DARK_THEME}}},{ActionOnSet:gf,BaseProperties:yf,BOOLEAN:mf,FUNCTION:ff,NUMBER:xf,STRING:vf,Validate:bf}=rg,{BBox:Sf}=$p,kf=class t extends yf{constructor(e,i){if(super(),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0,this.element=i.appendChild(e.createElement("div")),this.element.classList.add("ag-crosshair-label"),this.labelRoot=i,t.labelDocuments.indexOf(e)<0){const i=e.createElement("style");i.innerHTML="\n.ag-crosshair-label {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    user-select: none;\n    pointer-events: none;\n    font: 12px Verdana, sans-serif;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    box-sizing: border-box;\n}\n\n.ag-crosshair-label-content {\n    padding: 0 7px;\n    border-radius: 2px;\n    line-height: 1.7em;\n    background-color: rgb(71,71,71);\n    color: rgb(255, 255, 255);\n}\n\n.ag-crosshair-label-hidden {\n    top: -10000px !important;\n}\n",e.head.insertBefore(i,e.head.querySelector("style")),t.labelDocuments.push(e)}}show(t){const{element:e}=this;let i=t.x+this.xOffset,s=t.y+this.yOffset;const n=(t,e,i)=>Math.max(Math.min(e,i),t),a=this.getContainerBoundingBox(),o=a.x+a.width-e.clientWidth-1,r=a.y+a.height-e.clientHeight;i=n(a.x+1,i,o),s=n(a.y,s,r),e.style.transform=`translate(${Math.round(i)}px, ${Math.round(s)}px)`,this.toggle(!0)}setLabelHtml(t){void 0!==t&&(this.element.innerHTML=t)}computeBBox(){const{element:t}=this;return new $p.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}getContainerBoundingBox(){const{width:t,height:e}=this.labelRoot.getBoundingClientRect();return new Sf(0,0,t,e)}toggle(t){this.element.classList.toggle("ag-crosshair-label-hidden",!t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}toLabelHtml(t,e){var i,s;if("string"==typeof t)return t;e=null!=e?e:{};const{text:n=(null!=(i=e.text)?i:""),color:a=e.color,backgroundColor:o=e.backgroundColor,opacity:r=(null!=(s=e.opacity)?s:1)}=t;return`<div class="ag-crosshair-label-content" style="${`opacity: ${r}; background-color: ${null==o?void 0:o.toLowerCase()}; color: ${a}`}">\n                    <span>${n}</span>\n                </div>`}};kf.labelDocuments=[],Ng([bf(mf)],kf.prototype,"enabled",2),Ng([bf(vf,{optional:!0}),gf({changeValue(t,e){t!==e&&(e&&this.element.classList.remove(e),t&&this.element.classList.add(t))}})],kf.prototype,"className",2),Ng([bf(xf)],kf.prototype,"xOffset",2),Ng([bf(xf)],kf.prototype,"yOffset",2),Ng([bf(vf,{optional:!0})],kf.prototype,"format",2),Ng([bf(ff,{optional:!0})],kf.prototype,"renderer",2);var Df=kf,{Group:Mf,Line:Lf,BBox:Af}=$p,{POSITIVE_NUMBER:wf,RATIO:Nf,BOOLEAN:Cf,COLOR_STRING:If,LINE_DASH:Tf,OBJECT:Ef,Validate:Of,Layers:Rf}=rg,Pf=class extends rg.BaseModuleInstance{constructor(t){var e,i;super(),this.ctx=t,this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.seriesRect=new Af(0,0,0,0),this.hoverRect=new Af(0,0,0,0),this.bounds=new Af(0,0,0,0),this.visible=!1,this.crosshairGroup=new Mf({layer:!0,zIndex:Rf.SERIES_CROSSHAIR_ZINDEX}),this.lineNode=this.crosshairGroup.appendChild(new Lf),this.activeHighlight=void 0,null==(e=t.scene.root)||e.appendChild(this.crosshairGroup),this.axisCtx=t.parent,this.crosshairGroup.visible=!1,this.label=new Df(t.document,null!=(i=t.scene.canvas.container)?i:t.document.body),this.destroyFns.push(t.interactionManager.addListener("hover",t=>this.onMouseMove(t)),t.interactionManager.addListener("leave",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",t=>this.onHighlightChange(t)),t.layoutService.addListener("layout-complete",t=>this.layout(t)),()=>{var e;return null==(e=t.scene.root)?void 0:e.removeChild(this.crosshairGroup)},()=>this.label.destroy())}layout({series:{rect:t,paddedRect:e,visible:i},axes:s}){var n;if(this.hideCrosshair(),!(i&&s&&this.enabled))return void(this.visible=!1);this.visible=!0,this.seriesRect=t,this.hoverRect=e;const{position:a="left",axisId:o}=this.axisCtx,r=s.find(t=>t.id===o);if(!r)return;this.axisLayout=r;const l=r.gridPadding+r.seriesAreaPadding;this.bounds=this.buildBounds(t,a,l);const{crosshairGroup:h,bounds:c}=this;h.translationX=Math.round(c.x),h.translationY=Math.round("top"===a||"bottom"===a?c.y+c.height:c.y);const d="top"===a||"bottom"===a?-Math.PI/2:0;h.rotation=d,this.updateLine();const u=null!=(n=this.label.format)?n:r.label.format;this.labelFormatter=u?this.axisCtx.scaleValueFormatter(u):void 0}buildBounds(t,e,i){const s=t.clone();return s.x+="left"===e?-i:0,s.y+="top"===e?-i:0,s.width+="left"===e||"right"===e?i:0,s.height+="top"===e||"bottom"===e?i:0,s}updateLine(){const{lineNode:t,bounds:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,axisCtx:r,axisLayout:l}=this;l&&(t.stroke=i,t.strokeWidth=s,t.strokeOpacity=n,t.lineDash=a,t.lineDashOffset=o,t.y1=t.y2=0,t.x1=0,t.x2="x"===r.direction?e.height:e.width)}formatValue(t){var e;const{labelFormatter:i,axisLayout:s,ctx:{callbackCache:n}}=this;if(i){const e=n.call(i,t);if(void 0!==e)return e}const a=t%1==0,o=(null!=(e=null==s?void 0:s.label.fractionDigits)?e:0)+(a?0:1);return"number"==typeof t?t.toFixed(o):String(t)}onMouseMove(t){if(!this.enabled||this.snap)return;const{crosshairGroup:e,seriesRect:i,hoverRect:s,axisCtx:n,activeHighlight:a}=this,{offsetX:o,offsetY:r}=t;if(this.visible&&s.containsPoint(o,r)){e.visible=!0;const t=a?this.getActiveHighlight(a):void 0;let s,l=0,h=0;"x"===n.direction?(l=Math.max(Math.min(i.x+i.width,o),i.x),e.translationX=Math.round(l),s=n.continuous?n.scaleInvert(o-i.x):null==t?void 0:t.value):(h=Math.max(Math.min(i.y+i.height,r),i.y),e.translationY=Math.round(h),s=n.continuous?n.scaleInvert(r-i.y):null==t?void 0:t.value),s&&this.label.enabled?this.showLabel(l,h,s):this.hideLabel()}else this.hideCrosshair()}onMouseOut(){this.hideCrosshair()}onHighlightChange(t){var e,i,s;if(!this.enabled)return;const{crosshairGroup:n,seriesRect:a,axisCtx:o}=this,{datum:r,series:l}=null!=(e=t.currentHighlight)?e:{},h=r&&((null==(i=null==l?void 0:l.axes.x)?void 0:i.id)===o.axisId||(null==(s=null==l?void 0:l.axes.y)?void 0:s.id)===o.axisId);if(this.activeHighlight=h?t.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight)return void this.hideCrosshair();const{value:t,position:e}=this.getActiveHighlight(this.activeHighlight);n.visible=!0;let i=0,s=0;"x"===o.direction?(i=e,n.translationX=Math.round(i+a.x)):(s=e,n.translationY=Math.round(s+a.y)),this.label.enabled?this.showLabel(i+a.x,s+a.y,t):this.hideLabel()}}getActiveHighlight(t){var e,i;const{axisCtx:s}=this,{datum:n,xKey:a="",yKey:o="",aggregatedValue:r,series:l,cumulativeValue:h,midPoint:c}=t,d=s.scaleBandwidth()/2;if(void 0!==r&&(null==(e=l.axes.y)?void 0:e.id)===s.axisId)return{value:r,position:s.scaleConvert(r)+d};const u=s.keys().indexOf(o)>=0;if(void 0!==h&&u)return{value:h,position:s.scaleConvert(h)+d};const p=u?o:a,g=null!=(i="x"===s.direction?null==c?void 0:c.x:null==c?void 0:c.y)?i:0;return{value:s.continuous?s.scaleInvert(g):n[p],position:g}}getLabelHtml(t){const{label:e,axisLayout:{label:{fractionDigits:i=0}={}}={}}=this,{renderer:s}=e,n={text:this.formatValue(t)};if(s){const a={value:t,fractionDigits:i};return e.toLabelHtml(s(a),n)}return e.toLabelHtml(n)}showLabel(t,e,i){const{axisCtx:s,bounds:n,label:a,axisLayout:o}=this;if(!o)return;const{label:{padding:r},tickSize:l}=o,h=r+l,c=this.getLabelHtml(i);a.setLabelHtml(c);const d=a.computeBBox();let u;if("x"===s.direction){const e=-d.width/2,i="bottom"===s.position?0:-d.height;u={x:t+e,y:("bottom"===s.position?n.y+n.height+h:n.y-h)+i}}else{const t=-d.height/2,i="right"===s.position?0:-d.width;u={x:("right"===s.position?n.x+n.width+h:n.x-h)+i,y:e+t}}a.show(u)}hideCrosshair(){this.crosshairGroup.visible=!1,this.hideLabel()}hideLabel(){this.label.toggle(!1)}};Ng([Of(Cf)],Pf.prototype,"enabled",2),Ng([Of(If,{optional:!0})],Pf.prototype,"stroke",2),Ng([Of(Tf,{optional:!0})],Pf.prototype,"lineDash",2),Ng([Of(wf)],Pf.prototype,"lineDashOffset",2),Ng([Of(wf)],Pf.prototype,"strokeWidth",2),Ng([Of(Nf)],Pf.prototype,"strokeOpacity",2),Ng([Of(Cf)],Pf.prototype,"snap",2),Ng([Of(Ef)],Pf.prototype,"label",2);var _f={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","number","log","time"],instanceConstructor:Pf,themeTemplate:{crosshair:{enabled:!0,snap:!0,stroke:sg.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:sg.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}}},{BOOLEAN:Ff,FUNCTION:Bf,ActionOnSet:zf,Validate:Gf}=rg,Kf=class extends rg.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&null!=e?this.dataService.updateCallback(e):this.dataService.clearCallback())}};Ng([zf({newValue(t){this.updateCallback(t,this.getData)}}),Gf(Ff)],Kf.prototype,"enabled",2),Ng([zf({newValue(t){this.updateCallback(this.enabled,t)}}),Gf(Bf)],Kf.prototype,"getData",2),Ng([zf({newValue(t){this.dataService.requestThrottle=t}})],Kf.prototype,"requestThrottle",2),Ng([zf({newValue(t){this.dataService.dispatchThrottle=t}})],Kf.prototype,"updateThrottle",2),Ng([zf({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],Kf.prototype,"updateDuringInteraction",2);var Vf={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar"],instanceConstructor:Kf,themeTemplate:{dataSource:{enabled:!1}}},{partialAssign:Wf,mergeDefaults:Yf}=rg,{BBox:Uf}=$p,jf=class extends $p.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new $p.Path,this.capsPath=new $p.Path,this.bboxes=new class{constructor(t){this.components=t,this.union=Uf.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}}([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:s}=t,{lengthRatioMultiplier:n,lengthMax:a}=e,o=null!=s?s:i*n;return Math.min(o,a)}getFormatterParams(t,e){const{datum:i}=this;if(void 0===i||void 0===t.formatter&&void 0===t.cap.formatter)return;const{xLowerKey:s,xLowerName:n,xUpperKey:a,xUpperName:o,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:c}=t;return{datum:i.datum,seriesId:i.datum.seriesId,xKey:i.xKey,yKey:i.yKey,xLowerKey:s,xLowerName:n,xUpperKey:a,xUpperName:o,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:c,highlighted:e}}formatStyles(t,e,i){let s=t,{cap:n}=s,a=wg(s,["cap"]);const o=this.getFormatterParams(e,i);if(void 0!==o){if(void 0!==e.formatter){const t=e.formatter(o);a=Yf(t,a),n=Yf(t,n),n=Yf(null==t?void 0:t.cap,n)}if(void 0!==e.cap.formatter){const t=e.cap.formatter(o);n=Yf(t,n)}}return{whiskerStyle:a,capsStyle:n}}applyStyling(t,e){Wf(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i){if(void 0===this.datum)return;const{whiskerStyle:s,capsStyle:n}=this.formatStyles(t,e,i),{xBar:a,yBar:o,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,s),l.path.clear(),void 0!==o&&(l.path.moveTo(o.lowerPoint.x,o.lowerPoint.y),l.path.lineTo(o.upperPoint.x,o.upperPoint.y)),void 0!==a&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(null!=n?n:{},r);const h=this.capLength/2,c=this.capsPath;this.applyStyling(c,n),c.path.clear(),void 0!==o&&(c.path.moveTo(o.lowerPoint.x-h,o.lowerPoint.y),c.path.lineTo(o.lowerPoint.x+h,o.lowerPoint.y),c.path.moveTo(o.upperPoint.x-h,o.upperPoint.y),c.path.lineTo(o.upperPoint.x+h,o.upperPoint.y)),void 0!==a&&(c.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-h),c.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+h),c.path.moveTo(a.upperPoint.x,a.upperPoint.y-h),c.path.lineTo(a.upperPoint.x,a.upperPoint.y+h)),c.path.closePath(),c.markDirtyTransform()}updateBBoxes(){var t;const{capLength:e,whiskerPath:i,capsPath:s}=this,{yBar:n,xBar:a}=null!=(t=this.datum)?t:{},o=e/2,r=[];if(void 0!==n){const t=n.lowerPoint.y-n.upperPoint.y;r.push(new Uf(n.lowerPoint.x,n.upperPoint.y,i.strokeWidth,t),new Uf(n.lowerPoint.x-o,n.lowerPoint.y,e,s.strokeWidth),new Uf(n.upperPoint.x-o,n.upperPoint.y,e,s.strokeWidth))}if(void 0!==a){const t=a.upperPoint.x-a.lowerPoint.x;r.push(new Uf(a.lowerPoint.x,a.upperPoint.y,t,i.strokeWidth),new Uf(a.lowerPoint.x,a.lowerPoint.y-o,s.strokeWidth,e),new Uf(a.upperPoint.x,a.upperPoint.y-o,s.strokeWidth,e))}this.bboxes.components=r,this.bboxes.union=Uf.merge(r)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e){const{bboxes:i}=this;if(i.union.distanceSquared(t)>e)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=Uf.nearestBox(t,i.components);return{nearest:this,distanceSquared:s}}},Hf=class extends $p.Group{get children(){return super.children}nearestSquared(t){const{nearest:e,distanceSquared:i}=$p.nearestSquaredInContainer(t,this);if(void 0!==e&&!isNaN(i))return{datum:e.datum,distanceSquared:i}}},{BaseProperties:Xf,Validate:$f,BOOLEAN:qf,COLOR_STRING:Zf,FUNCTION:Qf,LINE_DASH:Jf,NUMBER:tx,OBJECT:ex,POSITIVE_NUMBER:ix,RATIO:sx,STRING:nx}=rg,ax=class extends Xf{};Ng([$f(qf,{optional:!0})],ax.prototype,"visible",2),Ng([$f(Zf,{optional:!0})],ax.prototype,"stroke",2),Ng([$f(ix,{optional:!0})],ax.prototype,"strokeWidth",2),Ng([$f(sx,{optional:!0})],ax.prototype,"strokeOpacity",2),Ng([$f(Jf,{optional:!0})],ax.prototype,"lineDash",2),Ng([$f(ix,{optional:!0})],ax.prototype,"lineDashOffset",2),Ng([$f(tx,{optional:!0})],ax.prototype,"length",2),Ng([$f(sx,{optional:!0})],ax.prototype,"lengthRatio",2),Ng([$f(Qf,{optional:!0})],ax.prototype,"formatter",2);var ox=class extends Xf{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new ax}};Ng([$f(nx,{optional:!0})],ox.prototype,"yLowerKey",2),Ng([$f(nx,{optional:!0})],ox.prototype,"yLowerName",2),Ng([$f(nx,{optional:!0})],ox.prototype,"yUpperKey",2),Ng([$f(nx,{optional:!0})],ox.prototype,"yUpperName",2),Ng([$f(nx,{optional:!0})],ox.prototype,"xLowerKey",2),Ng([$f(nx,{optional:!0})],ox.prototype,"xLowerName",2),Ng([$f(nx,{optional:!0})],ox.prototype,"xUpperKey",2),Ng([$f(nx,{optional:!0})],ox.prototype,"xUpperName",2),Ng([$f(qf,{optional:!0})],ox.prototype,"visible",2),Ng([$f(Zf,{optional:!0})],ox.prototype,"stroke",2),Ng([$f(ix,{optional:!0})],ox.prototype,"strokeWidth",2),Ng([$f(sx,{optional:!0})],ox.prototype,"strokeOpacity",2),Ng([$f(Jf,{optional:!0})],ox.prototype,"lineDash",2),Ng([$f(ix,{optional:!0})],ox.prototype,"lineDashOffset",2),Ng([$f(Qf,{optional:!0})],ox.prototype,"formatter",2),Ng([$f(ex)],ox.prototype,"cap",2);var{fixNumericExtent:rx,groupAccumulativeValueProperty:lx,isDefined:hx,mergeDefaults:cx,valueProperty:dx,ChartAxisDirection:ux}=rg;var px=class t extends rg.BaseModuleInstance{constructor(t){super(),this.properties=new ox;const e=function(t){for(const e of D)if(e==t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${D.join(", ")}`)}(t),{annotationGroup:i,annotationSelections:s}=e;this.cartesianSeries=e,this.groupNode=new Hf({name:i.id+"-errorBars",zIndex:rg.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:e.getGroupZIndexSubOrder("annotation")}),i.appendChild(this.groupNode),this.selection=$p.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),this.destroyFns.push(e.addListener("data-processed",t=>this.onDataProcessed(t)),e.addListener("data-update",t=>this.onDataUpdate(t)),e.addListener("visibility-changed",t=>this.onToggleSeriesItem(t)),t.highlightManager.addListener("highlight-change",t=>this.onHighlightChange(t)),()=>i.removeChild(this.groupNode),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:s}=this.properties;return hx(t)&&hx(e)||hx(i)&&hx(s)}isStacked(){var t;const e=null==(t=this.cartesianSeries.seriesGrouping)?void 0:t.stackCount;return void 0!==e&&e>0}getUnstackPropertyDefinition(t){const e=[],{cartesianSeries:i}=this,{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{isContinuousX:h,isContinuousY:c}=t;return void 0!==a&&void 0!==o&&e.push(dx(i,a,c,{id:l}),dx(i,o,c,{id:l})),void 0!==s&&void 0!==n&&e.push(dx(i,s,h,{id:r}),dx(i,n,h,{id:r})),e}getStackPropertyDefinition(t){var e,i;const s=[],{cartesianSeries:n}=this,{xLowerKey:a,xUpperKey:o,yLowerKey:r,yUpperKey:l,xErrorsID:h,yErrorsID:c}=this.getMaybeFlippedKeys(),{isContinuousX:d,isContinuousY:u}=t,p=null!=(i=null==(e=n.seriesGrouping)?void 0:e.groupIndex)?i:n.id,g=Lg({invalidValue:null,missingValue:0,separateNegative:!0},n.visible?{}:{forceValue:0}),y=(t,e,i,s)=>lx(n,t,e,"normal","current",Lg({id:`${i}-${s}`,groupId:`errorGroup-${p}-${s}`},g)),m=(t,e,i,n)=>{s.push(...y(t,i,n,"lower"),...y(e,i,n,"upper"))};return void 0!==r&&void 0!==l&&m(r,l,u,c),void 0!==a&&void 0!==o&&m(a,o,d,h),s}getPropertyDefinitions(t){return this.isStacked()?this.getStackPropertyDefinition(t):this.getUnstackPropertyDefinition(t)}onDataProcessed(t){this.dataModel=t.dataModel,this.processedData=t.processedData}getDomain(t){const{xLowerKey:e,xUpperKey:i,xErrorsID:s,yLowerKey:n,yUpperKey:a,yErrorsID:o}=this.getMaybeFlippedKeys();if(t===ux.X?hx(e)&&hx(i):hx(n)&&hx(a)){const{dataModel:e,processedData:i,cartesianSeries:n}=this,a=n.axes[t],r={x:s,y:o}[t];if(void 0!==e&&void 0!==i){if(this.isStacked()){const t=e.getDomain(n,r+"-lower","value",i),s=e.getDomain(n,r+"-upper","value",i),o=[Math.min(...t,...s),Math.max(...t,...s)];return rx(o,a)}{const t=e.getDomain(n,r,"value",i);return rx(t,a)}}}return[]}onDataUpdate(t){this.dataModel=t.dataModel,this.processedData=t.processedData,hx(t.dataModel)&&hx(t.processedData)&&(this.createNodeData(),this.update())}getNodeData(){const{contextNodeData:t}=this.cartesianSeries;if(t.length>0)return t[0].nodeData}createNodeData(){var t,e;const i=this.getNodeData(),s=null==(t=this.cartesianSeries.axes[ux.X])?void 0:t.scale,n=null==(e=this.cartesianSeries.axes[ux.Y])?void 0:e.scale;if(this.hasErrorBars()&&s&&n&&i)for(let t=0;t<i.length;t++){const{midPoint:e,xLower:a,xUpper:o,yLower:r,yUpper:l}=this.getDatum(i,t);if(void 0!==e){let h,c;hx(a)&&hx(o)&&(h={lowerPoint:{x:this.convert(s,a),y:e.y},upperPoint:{x:this.convert(s,o),y:e.y}}),hx(r)&&hx(l)&&(c={lowerPoint:{x:e.x,y:this.convert(n,r)},upperPoint:{x:e.x,y:this.convert(n,l)}}),i[t].xBar=h,i[t].yBar=c}}}getMaybeFlippedKeys(){let{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:s}=this.properties,[n,a]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([t,i]=[i,t],[e,s]=[s,e],[n,a]=[a,n]),{xLowerKey:t,xUpperKey:e,xErrorsID:n,yLowerKey:i,yUpperKey:s,yErrorsID:a}}static getDatumKey(t,e,i){if(void 0===e)return;const s=t.datum[e];if(void 0!==s){if("number"==typeof s)return s+i;og.Logger.warnOnce(`Found [${e}] error value of type ${typeof s}. Expected number type`)}}getDatum(e,i){const{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o}=this.getMaybeFlippedKeys(),r=e[i],l=void 0!==r.cumulativeValue&&this.isStacked()?r.cumulativeValue-r.yValue:0,[h,c]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:t.getDatumKey(r,s,h),xUpper:t.getDatumKey(r,n,h),yLower:t.getDatumKey(r,a,c),yUpper:t.getDatumKey(r,o,c)}}convert(t,e){var i;const s=(null!=(i=t.bandwidth)?i:0)/2;return t.convert(e)+s}update(){const t=this.getNodeData();void 0!==t&&(this.selection.update(t),this.selection.each((t,e,i)=>this.updateNode(t,e,i)))}updateNode(t,e,i){t.datum=e,t.update(this.getDefaultStyle(),this.properties,!1),t.updateBBoxes()}pickNodeExact(t){const{x:e,y:i}=this.groupNode.transformPoint(t.x,t.y),s=this.groupNode.pickNode(e,i);if(void 0!==s)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(t){return this.groupNode.nearestSquared(t)}pickNodeMainAxisFirst(t){return this.groupNode.nearestSquared(t)}getTooltipParams(){const{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:s,xLowerName:n=t,xUpperName:a=e,yLowerName:o=i,yUpperName:r=s}=this.properties;return{xLowerKey:t,xLowerName:n,xUpperKey:e,xUpperName:a,yLowerKey:i,yLowerName:o,yUpperKey:s,yUpperName:r}}onToggleSeriesItem(t){this.groupNode.visible=t.enabled}makeStyle(t){return{visible:t.visible,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,cap:cx(this.properties.cap,t)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(t,e,i){const s=this.getNodeData();if(void 0!==s)for(let n=0;n<s.length;n++)if(t===s[n]){this.selection.nodes()[n].update(e,this.properties,i);break}}onHighlightChange(t){const{previousHighlight:e,currentHighlight:i}=t;(null==i?void 0:i.series)===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),(null==e?void 0:e.series)===this.cartesianSeries&&this.restyleHighlightChange(e,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new jf}getWhiskerProperties(){const{stroke:t,strokeWidth:e,visible:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}=this.properties;return{stroke:t,strokeWidth:e,visible:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}}},gx={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:D,instanceConstructor:px,themeTemplate:{series:{errorBar:{visible:!0,stroke:sg.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}}},{Validate:yx,BOOLEAN:mx,POSITIVE_NUMBER:fx,Layers:xx,ActionOnSet:vx,CategoryAxis:bx,GroupedCategoryAxis:Sx}=rg,{toRadians:kx,Padding:Dx,Logger:Mx}=og,{Text:Lx,Group:Ax,BBox:wx}=$p,Nx=class{constructor(){this.top=0,this.bottom=0}};Ng([yx(fx)],Nx.prototype,"top",2),Ng([yx(fx)],Nx.prototype,"bottom",2);var Cx=class extends rg.BaseModuleInstance{constructor(){super(...arguments),this.enabled=!1,this.padding=new Nx,this.root=new Ax({name:"root"}),this.seriesRoot=this.root.appendChild(new Ax({name:"Series-root",layer:!0,zIndex:xx.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Ax({name:"Axes-Grids",layer:!0,zIndex:xx.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Ax({name:"Axes-Grids",layer:!0,zIndex:xx.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){var i;const s=null!=(i=null==e?void 0:e.filter(e=>!t.includes(e)))?i:[];this.destroySeries(s);for(const i of t){if(null==e?void 0:e.includes(i))continue;null==i.rootGroup.parent&&this.seriesRoot.appendChild(i.rootGroup);const t=this;i.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return t.seriesRect},placeLabels:()=>new Map},i.resetAnimation("initial")}}destroySeries(t){null==t||t.forEach(t=>{t.destroy(),null!=t.rootGroup&&this.seriesRoot.removeChild(t.rootGroup),t.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const s=e.direction;(null!=(i=t[s])?i:t[s]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const s=t[i];if(!s)return void Mx.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=e.getKeys(i),a=this.findMatchingAxis(s,n);a?e.axes[i]=a:Mx.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e)for(const t of e)if(i.keys.includes(t))return i}}updateData(t){return Ig(this,null,(function*(){this.series.forEach(e=>e.setChartData(t.data))}))}processData(t){return Ig(this,null,(function*(){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=this.series.map(e=>e.processData(t.dataController));yield Promise.all(e)}))}computeAxisPadding(){const t=new Dx;return this.axes.forEach(e=>{var i;const{position:s,thickness:n=0,line:a,label:o}=e;if(null==s)return;let r;r=n>0?n:(a.enabled?a.width:0)+(o.enabled?(null!=(i=o.fontSize)?i:0)*Lx.defaultLineHeightRatio+o.padding:0),t[s]=Math.ceil(r)}),t}layout(t,e){return Ig(this,null,(function*(){const{padding:i}=this,s=null!=this.seriesRect,n=new wx(0,0,t,e-(i.top+i.bottom));this.seriesRect=n,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new wx(0,-i.top,t,e)));this.axes.forEach(i=>{const{position:a="left"}=i;switch(a){case"top":case"bottom":i.range=[0,n.width],i.gridLength=n.height;break;case"right":case"left":i.range=(t=>t instanceof bx||t instanceof Sx?[0,n.height]:[n.height,0])(i),i.gridLength=n.width}switch(a){case"top":case"left":i.translation.x=0,i.translation.y=0;break;case"bottom":i.translation.x=0,i.translation.y=e;break;case"right":i.translation.x=t,i.translation.y=0}i.gridPadding=0,i.calculateLayout(),i.updatePosition({rotation:kx(i.rotation),sideFlag:i.label.getSideFlag()}),i.update(void 0,s)}),yield Promise.all(this.series.map(t=>t.update({seriesRect:n})))}))}};Ng([yx(mx)],Cx.prototype,"enabled",2),Ng([vx({changeValue(t,e=[]){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)(null==e?void 0:e.includes(i))||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],Cx.prototype,"axes",2),Ng([vx({changeValue(t,e){this.onSeriesChange(t,e)}})],Cx.prototype,"series",2);var{ObserveChanges:Ix}=rg,Tx=class t extends rg.Navigator{constructor(){super(...arguments),this.miniChart=new Cx}updateData(t){return Ig(this,null,(function*(){yield this.miniChart.updateData(t)}))}processData(t){return Ig(this,null,(function*(){yield this.miniChart.processData(t)}))}performLayout(e){return Ig(this,null,(function*(){const{shrinkRect:i}=yield Cg(t.prototype,this,"performLayout").call(this,e);if(this.enabled){const{top:t,bottom:e}=this.miniChart.computeAxisPadding();i.shrink(t+e,"bottom"),this.y-=e}return{shrinkRect:i}}))}performCartesianLayout(e){return Ig(this,null,(function*(){yield Cg(t.prototype,this,"performCartesianLayout").call(this,e),yield this.miniChart.layout(this.width,this.height)}))}};Ng([Ix((t,e,i)=>{null!=i&&t.rs.background.removeChild(i.root),null!=e&&t.rs.background.appendChild(e.root)})],Tx.prototype,"miniChart",2);var Ex,Ox={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Tx,themeTemplate:Ag(Lg({},rg.NavigatorModule.themeTemplate),{navigator:Ag(Lg({},null==(Ex=rg.NavigatorModule.themeTemplate)?void 0:Ex.navigator),{miniChart:{enabled:!1,label:{color:sg.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:sg.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})},{BOOLEAN:Rx,STRING:Px,UNION:_x,BaseProperties:Fx,CartesianAxis:Bx,ChartUpdateType:zx,isDate:Gx,isFiniteNumber:Kx,ObserveChanges:Vx,Validate:Wx}=rg,{Logger:Yx}=og,Ux=class extends Fx{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(t,e=zx.UPDATE_DATA){t.updateService.update(e,{skipSync:!0})}updateSiblings(t){const{syncManager:e}=this.moduleContext;for(const i of e.getGroupSiblings(t))this.updateChart(i)}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{var e;for(const i of t.getGroupSiblings(this.groupId))(null==(e=i.modules.get("sync"))?void 0:e.zoom)&&i.zoomManager.updateZoom(this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",t=>{var i,s;for(const n of e.getGroupSiblings(this.groupId))if(null==(i=n.modules.get("sync"))?void 0:i.nodeInteraction)if(null==(s=t.currentHighlight)?void 0:s.datum)for(const e of n.axes){const i="xy"===this.axes?"x":this.axes;if(!Bx.is(e)||e.direction!==i)continue;const s=n.series.map(i=>{const s=i.getKeys(e.direction);if(e.keys.length&&!e.keys.some(t=>s.includes(t)))return;const[{nodeData:n}]=i.contextNodeData;if(!(null==n?void 0:n.length))return;const a=n[0][e.direction+"Key"];let o=t.currentHighlight.datum[a];const r=Gx(o);return r&&(o=o.getTime()),n.find(t=>{const e=t.datum[a];return r?e.getTime()===o:e===o})}).filter(Boolean);s.length<2&&s[0]!==n.highlightManager.getActiveHighlight()&&(n.highlightManager.updateHighlight(n.id,s[0]),this.updateChart(n,zx.SERIES_UPDATE))}else n.highlightManager.updateHighlight(n.id)})}syncAxes(t=!1){const{syncManager:e}=this.moduleContext,i=e.getChart(),s=e.getGroup(this.groupId).flatMap(t=>t.series),n=e.getGroupSiblings(this.groupId).flatMap(t=>t.axes);i.axes.forEach(t=>{if(!Bx.is(t)||"xy"!==this.axes&&this.axes!==t.direction)return;const{direction:e,min:i,max:a,nice:o,reverse:r}=t;for(const t of n)if(e===t.direction&&(o!==t.nice||r!==t.reverse||i!==t.min&&(Kx(i)||Kx(t.min))||a!==t.max&&(Kx(a)||Kx(t.max))))return void Yx.warnOnce("For axes sync, ensure matching `min`, `max`, `nice`, and `reverse` properties.");t.boundSeries=s.filter(e=>{const i=e.getKeys(t.direction);return!t.keys.length||t.keys.some(t=>i.includes(t))})}),t||setTimeout(()=>this.updateSiblings(this.groupId))}mergeZoom(t){var e,i;const{zoomManager:s}=this.moduleContext;if("xy"===this.axes)return s.getZoom();const n=null!=(e=t.zoomManager.getZoom())?e:{};return n[this.axes]=null==(i=s.getZoom())?void 0:i[this.axes],n}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){var t;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():null==(t=this.disableNodeInteractionSync)||t.call(this)}onZoomChange(){var t;this.enabled&&this.zoom?this.enabledZoomSync():null==(t=this.disableZoomSync)||t.call(this)}destroy(){var t;const{syncManager:e}=this.moduleContext;e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),null==(t=this.disableZoomSync)||t.call(this)}};Ux.className="Sync",Ng([Wx(Rx),Vx(t=>t.onEnabledChange())],Ux.prototype,"enabled",2),Ng([Wx(Px,{optional:!0}),Vx((t,e,i)=>t.onGroupIdChange(e,i))],Ux.prototype,"groupId",2),Ng([Wx(_x(["x","y","xy"],"an axis")),Vx(t=>t.onAxesChange())],Ux.prototype,"axes",2),Ng([Wx(Rx),Vx(t=>t.onNodeInteractionChange())],Ux.prototype,"nodeInteraction",2),Ng([Wx(Rx),Vx(t=>t.onZoomChange())],Ux.prototype,"zoom",2);var jx={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Ux,themeTemplate:{sync:{enabled:!1}}},{COLOR_STRING:Hx,RATIO:Xx,Validate:$x}=rg,qx=class extends $p.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};qx.className="ZoomRect",Ng([$x(Hx)],qx.prototype,"fill",2),Ng([$x(Xx)],qx.prototype,"fillOpacity",2);var{clamp:Zx}=rg,Qx={min:0,max:1},Jx=(t,e=Qx.min,i=Qx.max)=>Zx(e,t,i);function tv(){return{x:Lg({},Qx),y:Lg({},Qx)}}function ev(t){var e,i,s,n,a,o,r,l;return{x:{min:null!=(i=null==(e=null==t?void 0:t.x)?void 0:e.min)?i:Qx.min,max:null!=(n=null==(s=null==t?void 0:t.x)?void 0:s.max)?n:Qx.max},y:{min:null!=(o=null==(a=null==t?void 0:t.y)?void 0:a.min)?o:Qx.min,max:null!=(l=null==(r=null==t?void 0:t.y)?void 0:r.max)?l:Qx.max}}}function iv(t,e,i){if(!t)return{x:0,y:0};const s=Jx(e-t.x,0,t.x+t.width),n=Jx(i-t.y,0,t.y+t.height),a=1/t.width*s,o=1-1/t.height*n;return{x:Jx(a),y:Jx(o)}}function sv(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function nv(t,e,i){const s=t.x.max-t.x.min,n=t.y.max-t.y.min,a=t.x.min+s/2,o=t.y.min+n/2;return{x:{min:a-s*e/2,max:a+s*e/2},y:{min:o-n*i/2,max:o+n*i/2}}}function av(t,e,i,s){const{min:n,max:a}=e,o=n+(a-n)/2,r=t.max-t.min;switch(i){case"start":return{min:n,max:e.min+r};case"end":return{min:e.max-r,max:a};case"middle":return{min:o-r/2,max:o+r/2};case"pointer":return ov(t,e,null!=s?s:o);default:return{min:n,max:a}}}function ov(t,e,i){const s=i-i*(1-(e.max-e.min-(t.max-t.min)));return{min:t.min+s,max:t.max+s}}function rv(t){const e=tv();return e.x=lv(t.x),e.y=lv(t.y),e}function lv(t){const e=t.max-t.min;let i=t.max>Qx.max?Qx.max-e:t.min,s=t.min<Qx.min?e:t.max;return i=Math.max(Qx.min,i),s=Math.min(Qx.max,s),{min:i,max:s}}var{BOOLEAN:hv,NUMBER:cv,RATIO:dv,UNION:uv,ActionOnSet:pv,ChartAxisDirection:gv,ChartUpdateType:yv,Validate:mv,round:fv}=rg,xv=uv(["pointer","start","middle","end"],"an anchor cord"),vv=t=>fv(t,3),bv=class extends rg.BaseModuleInstance{constructor(t){var e;super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(Qx.max-Qx.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX="end",this.anchorPointY="middle",this.axisDragger=new class{constructor(){this.isAxisDragging=!1}update(t,e,i,s,n,a){return this.isAxisDragging=!0,null!=this.oldZoom||(this.oldZoom=ev(e===rg.ChartAxisDirection.X?Ag(Lg({},n),{x:a}):Ag(Lg({},n),{y:a}))),this.updateCoords(t.offsetX,t.offsetY),this.updateZoom(e,i,s)}stop(){this.isAxisDragging=!1,this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:s,oldZoom:n}=this;let a=ev(n);if(!s||!n)return t===rg.ChartAxisDirection.X?a.x:a.y;const o=iv(i,s.x1,s.y1),r=iv(i,s.x2,s.y2);if(t===rg.ChartAxisDirection.X){const t=(r.x-o.x)*(n.x.max-n.x.min);return a.x.max+=t,a.x=av(a.x,n.x,e,o.x),a=rv(a),a.x}const l=(r.y-o.y)*(n.y.max-n.y.min);return a.y.max-=l,a.y=av(a.y,n.y,e,o.y),a=rv(a),a.y}},this.panner=new class{constructor(){this.isPanning=!1,this.hscrollCoords={x1:0,x2:0,y1:0,y2:0}}updateDrag(t,e,i){this.isPanning=!0;const{offsetX:s,offsetY:n}=t;return this.dragCoords?(this.dragCoords.x1=this.dragCoords.x2,this.dragCoords.y1=this.dragCoords.y2,this.dragCoords.x2=s,this.dragCoords.y2=n):this.dragCoords={x1:s,y1:n,x2:s,y2:n},this.translateZooms(e,i,this.dragCoords)}updateHScroll(t,e,i){return this.isPanning=!0,this.hscrollCoords.x1=5*t,this.translateZooms(e,i,this.hscrollCoords)}stop(){this.isPanning=!1,this.dragCoords=void 0}translateZooms(t,e,i){const{x1:s,y1:n,x2:a,y2:o}=i,r=s<=a?a-s:s-a,l=n<=o?o-n:n-o,h=iv(t,t.x+r,t.y+t.height-l),c=s<=a?-h.x:h.x,d=n<=o?h.y:-h.y,u={};for(const[t,{direction:i,zoom:s}]of Object.entries(e)){let e;e=i===rg.ChartAxisDirection.X?ev({x:s}):ev({y:s});e=rv(sv(e,c*(e.x.max-e.x.min),d*(e.y.max-e.y.min))),i===rg.ChartAxisDirection.X?u[t]={direction:i,zoom:e.x}:u[t]={direction:i,zoom:e.y}}return u}},this.scroller=new class{update(t,e,i,s,n,a,o,r){const l=ev(r),h=t.sourceEvent,c=t.deltaY;let d=ev(l);return d.x.max+=n?e*c*(l.x.max-l.x.min):0,d.y.max+=a?e*c*(l.y.max-l.y.min):0,"pointer"===i&&n||"pointer"===s&&a?d=this.scaleZoomToPointer(h,n,a,o,l,d):(n&&(d.x=av(d.x,l.x,i)),a&&(d.y=av(d.y,l.y,s))),d=rv(d),d}scaleZoomToPointer(t,e,i,s,n,a){var o,r;const l=iv(s,null!=(o=t.offsetX)?o:t.clientX,null!=(r=t.offsetY)?r:t.clientY);return a.x=e?ov(a.x,n.x,l.x):a.x,a.y=i?ov(a.y,n.y,l.y):a.y,a}},this.isDragging=!1,this.minRatioX=0,this.minRatioY=0,this.enableSecondaryAxis=!1,this.scene=t.scene,this.cursorManager=t.cursorManager,this.highlightManager=t.highlightManager,this.tooltipManager=t.tooltipManager,this.zoomManager=t.zoomManager,this.dataService=t.dataService,this.updateService=t.updateService,this.contextMenuRegistry=t.contextMenuRegistry;const{Default:i,ZoomDrag:s,Animation:n}=rg.InteractionState,a=i|n|s,o=i|n;this.destroyFns.push(t.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t),o),t.interactionManager.addListener("drag",t=>this.onDrag(t),a),t.interactionManager.addListener("drag-start",t=>this.onDragStart(t),a),t.interactionManager.addListener("drag-end",()=>this.onDragEnd(),a),t.interactionManager.addListener("wheel",t=>this.onWheel(t),o),t.interactionManager.addListener("hover",()=>this.onHover(),o),t.chartEventManager.addListener("axis-hover",t=>this.onAxisHover(t)),t.gestureDetector.addListener("pinch-move",t=>this.onPinchMove(t)),t.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)),t.updateService.addListener("update-complete",t=>this.onUpdateComplete(t)));const r=new qx;this.selector=new class{constructor(t){this.rect=t,this.rect.visible=!1}update(t,e,i,s,n,a,o){this.rect.visible=!0,this.updateCoords(t.offsetX,t.offsetY,e,i,s,n,a,o),this.updateRect(a)}stop(t,e,i){let s=ev();if(!t||!e)return s;this.coords&&(s=this.createZoomFromCoords(e,i));return s=rv(function(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}(s,e.width/t.width,e.height/t.height)),this.reset(),s}reset(){this.coords=void 0,this.rect.visible=!1}updateCoords(t,e,i,s,n,a,o,r){if(!this.coords)return void(this.coords={x1:t,y1:e,x2:t,y2:e});if(this.coords.x2=t,this.coords.y2=e,!o)return;const l=ev(r),h=this.getNormalisedDimensions(),c=o.width/o.height,d=i/(l.x.max-l.x.min),u=s/(l.y.max-l.y.min);h.width/o.width<d&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-o.width*d:this.coords.x2=this.coords.x1+o.width*d),a&&!n?h.height/o.height<u&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-o.width*d:this.coords.y2=this.coords.y1+o.height*u):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-h.width/c,this.coords.y1-o.height*u):this.coords.y2=Math.max(this.coords.y1+h.width/c,this.coords.y1+o.height*u),n||(this.coords.x1=o.x,this.coords.x2=o.x+o.width),a||(this.coords.y1=o.y,this.coords.y2=o.y+o.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:s,height:n}=i;let{x:a,y:o}=i;a=Math.max(a,t.x),a-=Math.max(0,a+s-(t.x+t.width)),o=Math.max(o,t.y),o-=Math.max(0,o+n-(t.y+t.height)),e.x=a,e.y=o,e.width=s,e.height=n}createZoomFromCoords(t,e){const i=ev(e),s=this.getNormalisedDimensions(),n=iv(t,s.x,s.y+s.height);let a=function(t,e,i){const s=t.x.max-t.x.min,n=t.y.max-t.y.min;return{x:{min:t.x.min,max:t.x.min+s*e},y:{min:t.y.min,max:t.y.min+n*i}}}(i,s.width/t.width,s.height/t.height);return a=sv(a,n.x*(i.x.max-i.x.min),n.y*(i.y.max-i.y.min)),a=rv(a),a}getNormalisedDimensions(){var t;const{x1:e=0,y1:i=0,x2:s=0,y2:n=0}=null!=(t=this.coords)?t:{};return{x:e<=s?e:s,y:i<=n?i:n,width:e<=s?s-e:e-s,height:i<=n?n-i:i-n}}}(r),null==(e=this.scene.root)||e.appendChild(r),this.destroyFns.push(()=>{var t;return null==(t=this.scene.root)?void 0:t.removeChild(r)})}registerContextMenuActions(){this.contextMenuRegistry.registerDefaultAction({id:"zoom-action",label:"Zoom to here",action:t=>this.onContextMenuZoomToHere(t)}),this.contextMenuRegistry.registerDefaultAction({id:"pan-action",label:"Pan to here",action:t=>this.onContextMenuPanToHere(t)});const t=ev(this.zoomManager.getZoom());this.toggleContextMenuActions(t)}toggleContextMenuActions(t){this.isMinZoom(t)?this.contextMenuRegistry.disableAction("zoom-action"):this.contextMenuRegistry.enableAction("zoom-action"),this.isMaxZoom(t)?this.contextMenuRegistry.disableAction("pan-action"):this.contextMenuRegistry.enableAction("pan-action")}onDoubleClick(t){var e;if(this.enabled&&this.enableDoubleClickToReset)if(this.hoveredAxis){const{id:t,direction:e}=this.hoveredAxis;this.updateAxisZoom(t,e,Lg({},Qx))}else(null==(e=this.paddedRect)?void 0:e.containsPoint(t.offsetX,t.offsetY))&&void 0===this.highlightManager.getActivePicked()&&this.updateZoom(tv())}onDragStart(t){var e;this.canDragSelection=null==(e=this.paddedRect)?void 0:e.containsPoint(t.offsetX,t.offsetY)}onDrag(t){if(!this.enabled||!this.paddedRect||!this.seriesRect)return;this.ctx.interactionManager.pushState(rg.InteractionState.ZoomDrag);const e=t.sourceEvent;if(!(0===e.button))return;this.isDragging=!0,this.tooltipManager.updateTooltip("zoom-tooltip");const i=ev(this.zoomManager.getZoom());if(this.enableAxisDragging&&this.hoveredAxis){const{id:e,direction:s}=this.hoveredAxis,n=s===rg.ChartAxisDirection.X?this.anchorPointX:this.anchorPointY,a=this.zoomManager.getAxisZoom(e),o=this.axisDragger.update(t,s,n,this.seriesRect,i,a);this.updateAxisZoom(e,s,o)}else if(this.paddedRect.containsPoint(t.offsetX,t.offsetY))if(!this.enablePanning||this.enableSelecting&&!this.isPanningKeyPressed(e))!this.enableSelecting||!this.canDragSelection||this.isPanningKeyPressed(e)||this.panner.isPanning||this.isMinZoom(i)||(this.selector.update(t,this.minRatioX,this.minRatioY,this.isScalingX(),this.isScalingY(),this.paddedRect,i),this.updateService.update(yv.PERFORM_LAYOUT,{skipAnimations:!0}));else{const e=this.panner.updateDrag(t,this.seriesRect,this.zoomManager.getAxisZooms());for(const[t,{direction:i,zoom:s}]of Object.entries(e))this.updateAxisZoom(t,i,s);this.cursorManager.updateCursor("zoom-cursor","grabbing")}}onDragEnd(){if(this.ctx.interactionManager.popState(rg.InteractionState.ZoomDrag),!this.enabled||!this.isDragging)return;const t=ev(this.zoomManager.getZoom());if(this.cursorManager.updateCursor("zoom-cursor"),this.enableAxisDragging&&this.axisDragger.isAxisDragging)this.axisDragger.stop();else if(this.enablePanning&&this.panner.isPanning)this.panner.stop();else if(this.enableSelecting&&!this.isMinZoom(t)&&this.canDragSelection){const e=this.selector.stop(this.seriesRect,this.paddedRect,t);this.updateZoom(e)}this.isDragging=!1,this.tooltipManager.removeTooltip("zoom-tooltip")}onWheel(t){if(!(this.enabled&&this.enableScrolling&&this.paddedRect&&this.seriesRect))return;const e=this.zoomManager.getZoom(),i=this.paddedRect.containsPoint(t.offsetX,t.offsetY),s=this.enableAxisDragging&&null!=this.hoveredAxis;let n=this.isScalingX(),a=this.isScalingY();s&&(n=this.hoveredAxis.direction===rg.ChartAxisDirection.X,a=!n);const o=t.sourceEvent,{deltaX:r,deltaY:l}=o;if(this.enablePanning&&void 0!==r&&void 0!==l&&Math.abs(r)>Math.abs(l)){t.consume(),t.sourceEvent.preventDefault();const e=this.panner.updateHScroll(t.deltaX,this.seriesRect,this.zoomManager.getAxisZooms());for(const[t,{direction:i,zoom:s}]of Object.entries(e))this.updateAxisZoom(t,i,s)}else if(i||s){t.consume(),t.sourceEvent.preventDefault();const i=this.scroller.update(t,this.scrollingStep,this.getAnchorPointX(),this.getAnchorPointY(),n,a,this.seriesRect,e);this.updateZoom(i)}}onHover(){this.enabled&&(this.hoveredAxis=void 0,this.cursorManager.updateCursor("zoom-cursor"))}onAxisHover(t){this.enabled&&(this.hoveredAxis={id:t.axisId,direction:t.direction},this.enableAxisDragging&&this.cursorManager.updateCursor("zoom-cursor",t.direction===gv.X?"ew-resize":"ns-resize"))}onPinchMove(t){if(!(this.enabled&&this.enableScrolling&&this.paddedRect&&this.seriesRect))return;const e=this.zoomManager.getZoom(),i=ev(e),s=ev(e),n=-.01*t.deltaDistance,a=iv(this.seriesRect,t.origin.x,t.origin.y);this.isScalingX()&&(s.x.max+=n*(i.x.max-i.x.min),s.x=ov(s.x,i.x,a.x)),this.isScalingY()&&(s.y.max+=n*(i.y.max-i.y.min),s.y=ov(s.y,i.y,a.y)),this.updateZoom(rv(s))}onLayoutComplete(t){if(!this.enabled)return;const{series:{rect:e,paddedRect:i,shouldFlipXY:s}}=t;this.seriesRect=e,this.paddedRect=i,this.shouldFlipXY=s}onUpdateComplete({minRect:t}){if(!this.enabled||!this.paddedRect||!t)return;if(this.dataService.isLazy())return this.minRatioX=0,void(this.minRatioY=0);const e=ev(this.zoomManager.getZoom()),i=this.shouldFlipXY?this.minVisibleItemsY:this.minVisibleItemsX,s=this.shouldFlipXY?this.minVisibleItemsX:this.minVisibleItemsY,n=t.width*i/this.paddedRect.width,a=t.height*s/this.paddedRect.height,o=n*(e.x.max-e.x.min),r=a*(e.y.max-e.y.min);this.isScalingX()&&(this.minRatioX=Math.min(1,vv(o))),this.isScalingY()&&(this.minRatioY=Math.min(1,vv(r))),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onContextMenuZoomToHere({event:t}){if(!(this.enabled&&this.paddedRect&&t&&t.target))return;const e=ev(this.zoomManager.getZoom()),i=iv(this.paddedRect,t.clientX,t.clientY),s=i.x*(e.x.max-e.x.min),n=i.y*(e.y.max-e.y.min),a=Qx.max-Qx.min,o=a/2;let r={x:{min:i.x-o,max:i.x+o},y:{min:i.y-o,max:i.y+o}};r=nv(r,this.isScalingX()?this.minRatioX:a,this.isScalingY()?this.minRatioY:a),r=sv(r,e.x.min-i.x+s,e.y.min-i.y+n),this.updateZoom(rv(r))}onContextMenuPanToHere({event:t}){if(!(this.enabled&&this.paddedRect&&t&&t.target))return;const e=ev(this.zoomManager.getZoom()),i=iv(this.paddedRect,t.clientX,t.clientY),s=e.x.max-e.x.min,n=e.y.max-e.y.min,a=i.x*s,o=i.y*n,r=(Qx.max-Qx.min)/2;let l={x:{min:i.x-r,max:i.x+r},y:{min:i.y-r,max:i.y+r}};l=nv(l,s,n),l=sv(l,e.x.min-i.x+a,e.y.min-i.y+o),this.updateZoom(rv(l))}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return"xy"===this.axes||(this.shouldFlipXY?"y"===this.axes:"x"===this.axes)}isScalingY(){return"xy"===this.axes||(this.shouldFlipXY?"x"===this.axes:"y"===this.axes)}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(t){const e=this.enableScrolling?(t.x.max-t.x.min)*(1-this.scrollingStep):vv(t.x.max-t.x.min),i=this.enableScrolling?(t.y.max-t.y.min)*(1-this.scrollingStep):vv(t.y.max-t.y.min),s=!this.isScalingX()||e<=this.minRatioX,n=!this.isScalingY()||i<=this.minRatioX;return s&&n}isMaxZoom(t){return t.x.min===Qx.min&&t.x.max===Qx.max&&t.y.min===Qx.min&&t.y.max===Qx.max}updateZoom(t){const e=vv(t.x.max-t.x.min),i=vv(t.y.max-t.y.min);if(e<this.minRatioX||i<this.minRatioY)return this.contextMenuRegistry.disableAction("zoom-action"),void this.contextMenuRegistry.enableAction("pan-action");this.toggleContextMenuActions(t),this.zoomManager.updateZoom(t)}updateAxisZoom(t,e,i){if(!i)return;if(!this.enableSecondaryAxis){const t=ev(this.zoomManager.getZoom());return e===gv.X?t.x=i:t.y=i,void this.updateZoom(t)}const s=vv(i.max-i.min);e===gv.X&&s<this.minRatioX||e===gv.Y&&s<this.minRatioY||this.zoomManager.updateAxisZoom(t,i)}};Ng([pv({newValue(t){t&&this.registerContextMenuActions()}}),mv(hv)],bv.prototype,"enabled",2),Ng([mv(hv)],bv.prototype,"enableAxisDragging",2),Ng([mv(hv)],bv.prototype,"enableDoubleClickToReset",2),Ng([mv(hv)],bv.prototype,"enablePanning",2),Ng([mv(hv)],bv.prototype,"enableScrolling",2),Ng([mv(hv)],bv.prototype,"enableSelecting",2),Ng([mv(uv(["alt","ctrl","meta","shift"],"a pan key"))],bv.prototype,"panKey",2),Ng([mv(uv(["x","y","xy"],"an axis"))],bv.prototype,"axes",2),Ng([mv(dv)],bv.prototype,"scrollingStep",2),Ng([mv(cv.restrict({min:1}))],bv.prototype,"minVisibleItemsX",2),Ng([mv(cv.restrict({min:1}))],bv.prototype,"minVisibleItemsY",2),Ng([mv(xv)],bv.prototype,"anchorPointX",2),Ng([mv(xv)],bv.prototype,"anchorPointY",2);var Sv={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:bv,themeTemplate:{zoom:{enabled:!1}}},{BOOLEAN:kv,Layers:Dv,POSITION:Mv,Validate:Lv,Default:Av,MIN_SPACING:wv,POSITIVE_NUMBER:Nv,ProxyProperty:Cv,DeprecatedAndRenamedTo:Iv}=rg,{BBox:Tv,Group:Ev,Rect:Ov,LinearGradientFill:Rv,Triangle:Pv}=$p,{createId:_v,Logger:Fv}=og,Bv=class{constructor(){this.thickness=16,this.preferredLength=100}};Ng([Lv(Nv)],Bv.prototype,"thickness",2),Ng([Lv(Nv)],Bv.prototype,"preferredLength",2);var zv=class extends rg.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.maxSpacing=NaN}};Ng([Lv(wv),Av(NaN)],zv.prototype,"maxSpacing",2);var Gv=class extends rg.CartesianAxis{constructor(t){super(t,new ag.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}formatDatum(t){return"number"==typeof t?t.toFixed(2):(Fv.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new zv}},Kv=class{constructor(t){this.label=t}};Ng([Cv("label.fontStyle")],Kv.prototype,"fontStyle",2),Ng([Cv("label.fontWeight")],Kv.prototype,"fontWeight",2),Ng([Cv("label.fontSize")],Kv.prototype,"fontSize",2),Ng([Cv("label.fontFamily")],Kv.prototype,"fontFamily",2),Ng([Cv("label.color")],Kv.prototype,"color",2),Ng([Cv("label.format")],Kv.prototype,"format",2),Ng([Cv("label.formatter")],Kv.prototype,"formatter",2);var Vv=class{constructor(t){this.tick=t}};Ng([Cv("tick.values")],Vv.prototype,"values",2),Ng([Cv("tick.minSpacing")],Vv.prototype,"minSpacing",2),Ng([Cv("tick.maxSpacing")],Vv.prototype,"maxSpacing",2),Ng([Cv("tick.interval")],Vv.prototype,"step",2);var Wv=class{constructor(t){this.axis=t,this.label=new Kv(t.label),this.interval=new Vv(t.tick)}};Ng([Cv("axis.seriesAreaPadding")],Wv.prototype,"padding",2);var Yv=class{constructor(t){this.ctx=t,this.id=_v(this),this.group=new Ev({name:"legend",layer:!0,zIndex:Dv.LEGEND_ZINDEX}),this.gradient=new Bv,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=t.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",t=>this.update(t.shrinkRect))),this.highlightManager=t.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange())),this.gradientRect=new Ov,this.gradientFill=new Rv,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Pv,this.group.append(this.arrow),this.axisGridGroup=new Ev({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new Ev({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new Gv(t),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new Wv(this.axis),this.stop=this.scale,this.destroyFns.push(()=>this.detachLegend())}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.append(this.group)}detachLegend(){var t;null==(t=this.group.parent)||t.removeChild(this.group)}update(t){const e=this.data[0];if(!this.enabled||!e||!e.enabled)return this.group.visible=!1,{shrinkRect:t.clone()};const{colorRange:i}=this.normalizeColorArrays(e),s=this.updateGradientRect(t,i),n=this.updateAxis(e,s),{newShrinkRect:a,translateX:o,translateY:r}=this.getMeasurements(t,s,n);return this.updateArrow(s),this.group.visible=!0,this.group.translationX=o,this.group.translationY=r,this.latestGradientBox=s,{shrinkRect:a}}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const s=i.length;return e=i.map((t,i)=>{const[n,a]=e;return 0===i?n:i===s-1?a:n+(a-n)*i/(s-1)}),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{preferredLength:i,thickness:s}=this.gradient,n=new Tv(0,0,0,0),a="vertical"===this.getOrientation();if(a){const e=t.height,a=i;n.x=0,n.y=0,n.width=s,n.height=Math.min(e,a)}else{const e=t.width,a=i;n.x=0,n.y=0,n.width=Math.min(e,a),n.height=s}return this.reverseOrder&&(e=e.slice().reverse()),this.gradientFill.stops=e,this.gradientFill.direction=a?"to-bottom":"to-right",this.gradientRect.x=n.x,this.gradientRect.y=n.y,this.gradientRect.width=n.width,this.gradientRect.height=n.height,n}updateAxis(t,e){const{reverseOrder:i,axis:s}=this,n="vertical"===this.getOrientation();s.position=n?"right":"bottom",s.colorDomain=i?t.colorDomain.slice().reverse():t.colorDomain,s.calculateDomain(),s.range=n?[0,e.height]:[0,e.width],s.gridLength=0,s.translation.x=e.x+(n?e.width:0),s.translation.y=e.y+(n?0:e.height);const a=s.calculateLayout().bbox;return s.update(),a}updateArrow(t){var e;const{arrow:i,axis:{label:s,scale:n}}=this,a=this.highlightManager.getActiveHighlight(),o=null==a?void 0:a.colorValue;if(null==a||null==o)return void(i.visible=!1);const r="vertical"===this.getOrientation(),l=null!=(e=s.fontSize)?e:0,h=n.convert(o);let c,d,u;r?(c=t.x-l/2,d=t.y+h,u=Math.PI/2):(c=t.x+h,d=t.y-l/2,u=Math.PI),i.fill=s.color,i.size=l,i.translationX=c,i.translationY=d,i.rotation=u,i.visible=!0}getMeasurements(t,e,i){let s,n;"vertical"===this.getOrientation()?(s=e.width+i.width,n=e.height):(s=e.width,n=e.height+i.height);const{spacing:a}=this,o=t.clone();let r,l;return"left"===this.position?(r=t.x,l=t.y+t.height/2-n/2,o.shrink(s+a,"left")):"right"===this.position?(r=t.x+t.width-s,l=t.y+t.height/2-n/2,o.shrink(s+a,"right")):"top"===this.position?(r=t.x+t.width/2-s/2,l=t.y,o.shrink(n+a,"top")):(r=t.x+t.width/2-s/2,l=t.y+t.height-n,o.shrink(n+a,"bottom")),{translateX:r,translateY:l,gradientBox:e,newShrinkRect:o}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&null!=this.latestGradientBox&&this.updateArrow(this.latestGradientBox)}};Yv.className="GradientLegend",Ng([Lv(kv)],Yv.prototype,"enabled",2),Ng([Lv(Mv)],Yv.prototype,"position",2),Ng([Lv(kv,{optional:!0})],Yv.prototype,"reverseOrder",2),Ng([Lv(Nv)],Yv.prototype,"spacing",2),Ng([Iv("scale")],Yv.prototype,"stop",2);var Uv={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient",instanceConstructor:Yv,themeTemplate:{position:"bottom",spacing:20,scale:{padding:8,label:{color:sg.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}};function jv(t){return null==t||0===t.length}var Hv={"01":"GRID","02":"CHARTS","0102":"BOTH"},Xv=class t{constructor(t){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(t,e){let i=t[0],s=t[1],n=t[2],a=t[3];i=this.ff(i,s,n,a,e[0],7,-680876936),a=this.ff(a,i,s,n,e[1],12,-389564586),n=this.ff(n,a,i,s,e[2],17,606105819),s=this.ff(s,n,a,i,e[3],22,-1044525330),i=this.ff(i,s,n,a,e[4],7,-176418897),a=this.ff(a,i,s,n,e[5],12,1200080426),n=this.ff(n,a,i,s,e[6],17,-1473231341),s=this.ff(s,n,a,i,e[7],22,-45705983),i=this.ff(i,s,n,a,e[8],7,1770035416),a=this.ff(a,i,s,n,e[9],12,-1958414417),n=this.ff(n,a,i,s,e[10],17,-42063),s=this.ff(s,n,a,i,e[11],22,-1990404162),i=this.ff(i,s,n,a,e[12],7,1804603682),a=this.ff(a,i,s,n,e[13],12,-40341101),n=this.ff(n,a,i,s,e[14],17,-1502002290),s=this.ff(s,n,a,i,e[15],22,1236535329),i=this.gg(i,s,n,a,e[1],5,-165796510),a=this.gg(a,i,s,n,e[6],9,-1069501632),n=this.gg(n,a,i,s,e[11],14,643717713),s=this.gg(s,n,a,i,e[0],20,-373897302),i=this.gg(i,s,n,a,e[5],5,-701558691),a=this.gg(a,i,s,n,e[10],9,38016083),n=this.gg(n,a,i,s,e[15],14,-660478335),s=this.gg(s,n,a,i,e[4],20,-405537848),i=this.gg(i,s,n,a,e[9],5,568446438),a=this.gg(a,i,s,n,e[14],9,-1019803690),n=this.gg(n,a,i,s,e[3],14,-187363961),s=this.gg(s,n,a,i,e[8],20,1163531501),i=this.gg(i,s,n,a,e[13],5,-1444681467),a=this.gg(a,i,s,n,e[2],9,-51403784),n=this.gg(n,a,i,s,e[7],14,1735328473),s=this.gg(s,n,a,i,e[12],20,-1926607734),i=this.hh(i,s,n,a,e[5],4,-378558),a=this.hh(a,i,s,n,e[8],11,-2022574463),n=this.hh(n,a,i,s,e[11],16,1839030562),s=this.hh(s,n,a,i,e[14],23,-35309556),i=this.hh(i,s,n,a,e[1],4,-1530992060),a=this.hh(a,i,s,n,e[4],11,1272893353),n=this.hh(n,a,i,s,e[7],16,-155497632),s=this.hh(s,n,a,i,e[10],23,-1094730640),i=this.hh(i,s,n,a,e[13],4,681279174),a=this.hh(a,i,s,n,e[0],11,-358537222),n=this.hh(n,a,i,s,e[3],16,-722521979),s=this.hh(s,n,a,i,e[6],23,76029189),i=this.hh(i,s,n,a,e[9],4,-640364487),a=this.hh(a,i,s,n,e[12],11,-421815835),n=this.hh(n,a,i,s,e[15],16,530742520),s=this.hh(s,n,a,i,e[2],23,-995338651),i=this.ii(i,s,n,a,e[0],6,-198630844),a=this.ii(a,i,s,n,e[7],10,1126891415),n=this.ii(n,a,i,s,e[14],15,-1416354905),s=this.ii(s,n,a,i,e[5],21,-57434055),i=this.ii(i,s,n,a,e[12],6,1700485571),a=this.ii(a,i,s,n,e[3],10,-1894986606),n=this.ii(n,a,i,s,e[10],15,-1051523),s=this.ii(s,n,a,i,e[1],21,-2054922799),i=this.ii(i,s,n,a,e[8],6,1873313359),a=this.ii(a,i,s,n,e[15],10,-30611744),n=this.ii(n,a,i,s,e[6],15,-1560198380),s=this.ii(s,n,a,i,e[13],21,1309151649),i=this.ii(i,s,n,a,e[4],6,-145523070),a=this.ii(a,i,s,n,e[11],10,-1120210379),n=this.ii(n,a,i,s,e[2],15,718787259),s=this.ii(s,n,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(s,t[1]),t[2]=this.add32(n,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,s,n,a){return e=this.add32(this.add32(e,t),this.add32(s,a)),this.add32(e<<n|e>>>32-n,i)}ff(t,e,i,s,n,a,o){return this.cmn(e&i|~e&s,t,e,n,a,o)}gg(t,e,i,s,n,a,o){return this.cmn(e&s|i&~s,t,e,n,a,o)}hh(t,e,i,s,n,a,o){return this.cmn(e^i^s,t,e,n,a,o)}ii(t,e,i,s,n,a,o){return this.cmn(i^(e|~s),t,e,n,a,o)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=t.length;s+=64)this.md5cycle(i,this.md5blk(t.substring(s-64,s)));t=t.substring(s-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)n[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,n),s=0;s<16;s++)n[s]=0;return n[14]=8*e,this.md5cycle(i,n),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=e[t>>8*s+4&15]+e[t>>8*s&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}},this.md5.init()}validateLicense(){const e=this.getLicenseDetails(this.licenseKey,this.gridContext),i=`AG ${"BOTH"===e.currentLicenseType?"Grid and ":""}Charts Enterprise`,s=void 0===e.suppliedLicenseType?"":`AG ${"BOTH"===e.suppliedLicenseType?"Grid and AG Charts":"GRID"===e.suppliedLicenseType?"Grid":"Charts"} Enterprise`;if(e.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(e.expired){const i=t.getChartsReleaseDate(),n=t.formatDate(i);this.outputExpiredKey(e.expiry,n,s)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,s):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,s)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(t.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const s=i.length-32,n=i.substring(s),a=i.substring(0,s),[o,r,l]=t.extractBracketedInformation(i);return{md5:n,license:a,version:o,isTrial:r,type:l}}getLicenseDetails(e,i=!1){if(jv(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:"CHARTS"};const s=t.getChartsReleaseDate(),{md5:n,license:a,version:o,isTrial:r,type:l}=t.extractLicenseComponents(e);let h=n===this.md5.md5(a)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),c=void 0,d=void 0,u=null,p=!1,g=void 0;if(h&&(u=t.extractExpiry(a),h=!isNaN(u.getTime()),h))switch(d=s>u,o){case"legacy":case"2":h=!1;break;case"3":jv(l)?h=!1:(g=l,l!==Hv["02"]&&l!==Hv["0102"]?(h=!1,p=!0):r&&(c=u<new Date,d=void 0))}return h?{licenseKey:e,valid:h,expiry:t.formatDate(u),expired:d,version:o,isTrial:r,trialExpired:c,invalidLicenseTypeForCombo:i?"BOTH"!==g:void 0,incorrectLicenseType:p,currentLicenseType:"CHARTS",suppliedLicenseType:g}:{licenseKey:e,valid:h,incorrectLicenseType:p,currentLicenseType:"CHARTS",suppliedLicenseType:g}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!jv(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const t=this.document.defaultView||window;if(!t)return"localhost";const e=t.location,{hostname:i=""}=e;return i}isForceWatermark(){var t,e;if(!this.document)return!1;const i=(null!=(e=null==(t=this.document)?void 0:t.defaultView)?e:"undefined"!=typeof window)?window:void 0;if(!i)return!1;const{pathname:s}=i.location;return!!s&&-1!==s.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(t){const e=t.getDate(),i=t.getMonth(),s=t.getFullYear();return e+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+s}static getChartsReleaseDate(){return new Date(parseInt(t.decode(t.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,n,a,o,r,l,h,c="",d=0;const u=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;d<u.length;)o=i.indexOf(u.charAt(d++)),r=i.indexOf(u.charAt(d++)),l=i.indexOf(u.charAt(d++)),h=i.indexOf(u.charAt(d++)),s=o<<2|r>>4,n=(15&r)<<4|l>>2,a=(3&l)<<6|h,c+=String.fromCharCode(s),64!=l&&(c+=String.fromCharCode(n)),64!=h&&(c+=String.fromCharCode(a));return c=t.utf8_decode(c),c}static utf8_decode(t){t=t.replace(/rn/g,"n");let e="";for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);s<128?e+=String.fromCharCode(s):s>127&&s<2048?(e+=String.fromCharCode(s>>6|192),e+=String.fromCharCode(63&s|128)):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128),e+=String.fromCharCode(63&s|128))}return e}setLicenseKey(t,e=!1){this.gridContext=e,this.licenseKey=t}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const e=t.match(/\[(.*?)\]/g).map(t=>t.replace("[","").replace("]",""));if(!e||0===e.length)return["legacy",!1,void 0];const i=1===e.filter(t=>"TRIAL"===t).length,s=e.filter(t=>0===t.indexOf("v"))[0];return[s?s.replace("v",""):"legacy",i,Hv[e.filter(t=>Hv[t])[0]]]}centerPadAndOutput(t){const e=this.totalMessageLength-t.length;console.error(t.padStart(e/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,e="*",i=""){console.error(t.padEnd(this.totalMessageLength-i.length,e)+i)}outputInvalidLicenseKey(t,e,i){this.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${i} only and does not cover you for ${e}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,e,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${i} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,e,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${i} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${e}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};Xv.RELEASE_INFORMATION="MTcwODMyOTU2Mjk0OA==";var $v=Xv,{injectStyle:qv}=rg;function Zv(t,e,i){qv(t,"\n.ag-watermark {\n    position: absolute;\n    bottom: 20px;\n    right: 25px;\n    font-weight: bold;\n    font-family: Impact, sans-serif;\n    font-size: 19px;\n    opacity: 0.7;\n    animation: 1s ease-out 3s ag-watermark-fadeout;\n    color: #9B9B9B;\n\n    &::before {\n        content: '';\n        display: block;\n        height: 40px;\n        width: 170px;\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);\n        background-repeat: no-repeat;\n        background-size: 170px 40px;\n    }\n\n    > span {\n        padding-left: 0.7rem;\n    }\n}\n\n@keyframes ag-watermark-fadeout {\n    from { opacity: 0.5; }\n    to { opacity: 0; }\n}\n");const s=t.createElement("div"),n=t.createElement("span");n.innerText=i,s.addEventListener("animationend",()=>e.removeChild(s)),s.classList.add("ag-watermark"),s.appendChild(n),e.appendChild(s)}var Qv=class extends $p.Group{constructor(){super(),this.append([new $p.Rect({tag:0}),new $p.Rect({tag:0}),new $p.Rect({tag:2}),new $p.Rect({tag:1}),new $p.Line({tag:3}),new $p.Line({tag:3}),new $p.Line({tag:4}),new $p.Line({tag:4})])}updateDatumStyles(t,e,i,s){const{bandwidth:n,scaledValues:{xValue:a,medianValue:o}}=t;let{minValue:r,q1Value:l,q3Value:h,maxValue:c}=t.scaledValues;(i&&!s||!i&&s)&&([c,h,l,r]=[r,l,h,c]);const{fill:d,fillOpacity:u,stroke:p,strokeWidth:g,strokeOpacity:y,lineDash:m,lineDashOffset:f,cap:x,whisker:v}=e,b=$p.Selection.select(this,$p.Rect),S=b.selectByTag(0),[k]=b.selectByTag(2),[D]=b.selectByTag(1),M=b.selectByTag(3),L=b.selectByTag(4);v.strokeWidth>n&&(v.strokeWidth=n),k.setProperties({x:l,y:a,width:h-l,height:n}),S[0].setProperties({x:l,y:a,width:Math.round(o-l+g/2),height:n}),S[1].setProperties({x:Math.round(o-g/2),y:a,width:Math.floor(h-o+g/2),height:n});const A=Math.max(Math.round(o-g/2),l+g),w=Math.min(Math.round(o+g/2),h-g);D.setProperties({visible:A<w,x:A,y:a+g,width:w-A,height:Math.max(0,n-2*g)});const N=Math.floor(a+n*(1-x.lengthRatio)/2),C=Math.ceil(a+n*(1+x.lengthRatio)/2);L[0].setProperties({x:r,y1:N,y2:C}),L[1].setProperties({x:c,y1:N,y2:C}),M[0].setProperties({x1:Math.round(r+v.strokeWidth/2),x2:l,y:Math.floor(a+n/2)}),M[1].setProperties({x1:h,x2:Math.round(c-v.strokeWidth/2),y:Math.floor(a+n/2)}),i&&rg.invertShapeDirection(k,D,...S,...L,...M);for(const t of S)t.setProperties({fill:d,fillOpacity:u,strokeWidth:2*g,strokeOpacity:0});D.setProperties({fill:p,fillOpacity:y,strokeWidth:0});for(const t of[...M,...L])t.setProperties(v);k.setProperties({stroke:p,strokeWidth:g,strokeOpacity:y,lineDash:m,lineDashOffset:f,fillOpacity:0})}},{BaseProperties:Jv,AbstractBarSeriesProperties:tb,SeriesTooltip:eb,Validate:ib,COLOR_STRING:sb,FUNCTION:nb,LINE_DASH:ab,OBJECT:ob,POSITIVE_NUMBER:rb,RATIO:lb,STRING:hb,mergeDefaults:cb}=rg,db=class extends Jv{constructor(){super(...arguments),this.lengthRatio=.5}};Ng([ib(lb)],db.prototype,"lengthRatio",2);var ub=class extends Jv{};Ng([ib(sb,{optional:!0})],ub.prototype,"stroke",2),Ng([ib(rb)],ub.prototype,"strokeWidth",2),Ng([ib(lb)],ub.prototype,"strokeOpacity",2),Ng([ib(ab,{optional:!0})],ub.prototype,"lineDash",2),Ng([ib(rb)],ub.prototype,"lineDashOffset",2);var pb=class extends tb{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cap=new db,this.whisker=new ub,this.tooltip=new eb}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}=this,a=super.toJson();return a.whisker=cb(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}),a}};Ng([ib(hb)],pb.prototype,"xKey",2),Ng([ib(hb)],pb.prototype,"minKey",2),Ng([ib(hb)],pb.prototype,"q1Key",2),Ng([ib(hb)],pb.prototype,"medianKey",2),Ng([ib(hb)],pb.prototype,"q3Key",2),Ng([ib(hb)],pb.prototype,"maxKey",2),Ng([ib(hb,{optional:!0})],pb.prototype,"xName",2),Ng([ib(hb,{optional:!0})],pb.prototype,"yName",2),Ng([ib(hb,{optional:!0})],pb.prototype,"minName",2),Ng([ib(hb,{optional:!0})],pb.prototype,"q1Name",2),Ng([ib(hb,{optional:!0})],pb.prototype,"medianName",2),Ng([ib(hb,{optional:!0})],pb.prototype,"q3Name",2),Ng([ib(hb,{optional:!0})],pb.prototype,"maxName",2),Ng([ib(sb,{optional:!0})],pb.prototype,"fill",2),Ng([ib(lb)],pb.prototype,"fillOpacity",2),Ng([ib(sb)],pb.prototype,"stroke",2),Ng([ib(rb)],pb.prototype,"strokeWidth",2),Ng([ib(lb)],pb.prototype,"strokeOpacity",2),Ng([ib(ab)],pb.prototype,"lineDash",2),Ng([ib(rb)],pb.prototype,"lineDashOffset",2),Ng([ib(nb,{optional:!0})],pb.prototype,"formatter",2),Ng([ib(ob)],pb.prototype,"cap",2),Ng([ib(ob)],pb.prototype,"whisker",2),Ng([ib(ob)],pb.prototype,"tooltip",2);var{extent:gb,extractDecoratedProperties:yb,fixNumericExtent:mb,keyProperty:fb,mergeDefaults:xb,SeriesNodePickMode:vb,SMALLEST_KEY_INTERVAL:bb,valueProperty:Sb,diff:kb,animationValidation:Db,ChartAxisDirection:Mb}=rg,{motion:Lb}=$p,Ab=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},wb=class t extends rg.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[vb.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new pb,this.NodeClickEvent=Ab,this.groupScale=new ag.BandScale,this.smallestDataInterval=void 0}processData(t){return Ig(this,null,(function*(){var e,i,s,n;if(!this.properties.isValid())return;const{xKey:a,minKey:o,q1Key:r,medianKey:l,q3Key:h,maxKey:c}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=(null==(e=this.getCategoryAxis())?void 0:e.scale)instanceof ag.ContinuousScale,p=[];d&&this.processedData&&p.push(kb(this.processedData)),d&&p.push(Db(this));const{processedData:g}=yield this.requestDataModel(t,null!=(i=this.data)?i:[],{props:[fb(this,a,u,{id:"xValue"}),Sb(this,o,!0,{id:"minValue"}),Sb(this,r,!0,{id:"q1Value"}),Sb(this,l,!0,{id:"medianValue"}),Sb(this,h,!0,{id:"q3Value"}),Sb(this,c,!0,{id:"maxValue"}),...u?[bb]:[],...p],dataVisible:this.visible});this.smallestDataInterval={x:null!=(n=null==(s=g.reduced)?void 0:s.smallestKeyInterval)?n:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!i||!s)return[];if(t===this.getBarDirection()){const t=s.getDomain(this,"minValue","value",i),e=s.getDomain(this,"maxValue","value",i);return mb([Math.min(...t),Math.max(...e)],this.getValueAxis())}const{index:a,def:o}=s.resolveProcessedDataIndexById(this,"xValue"),r=i.domain.keys[a];if("key"===o.type&&"category"===o.valueType)return r;const l=this.getCategoryAxis(),h=null==l?void 0:l.isReversed(),c=null!=(e=gb(r))?e:[NaN,NaN],d=n&&isFinite(n.x)?n.x:0;if(t===Mb.Y){const t=c[0]+(h?0:-d),e=c[1]+(h?d:0);return mb([t,e],l)}const u=c[0]+(h?-d:0),p=c[1]+(h?0:d);return mb([u,p],l)}createNodeData(){return Ig(this,null,(function*(){var e;const{visible:i,dataModel:s}=this,n=this.getCategoryAxis(),a=this.getValueAxis();if(!(s&&i&&n&&a))return[];const{xKey:o,fill:r,fillOpacity:l,stroke:h,strokeWidth:c,strokeOpacity:d,lineDash:u,lineDashOffset:p,cap:g,whisker:y}=this.properties,{groupScale:m,smallestDataInterval:f,ctx:{seriesStateManager:x}}=this,v=n.scale instanceof ag.ContinuousScale?n.scale.calcBandwidth(null==f?void 0:f.x):n.scale.bandwidth,b=[],{index:S,visibleGroupCount:k}=x.getVisiblePeerGroupIndex(this);for(let t=0;t<k;t++)b.push(String(t));m.domain=b,m.range=[0,null!=v?v:0],n instanceof rg.CategoryAxis&&(m.paddingInner=n.groupPaddingInner);const D=m.bandwidth>=1?m.bandwidth:m.rawBandwidth,M=[],L=s.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]);return null==(e=this.processedData)||e.data.forEach(({datum:t,keys:e,values:i})=>{const{xValue:n,minValue:a,q1Value:f,medianValue:x,q3Value:v,maxValue:b}=s.resolveProcessedDataDefsValues(L,{keys:e,values:i});if([a,f,x,v,b].some(t=>"number"!=typeof t)||a>f||f>x||x>v||v>b)return;const k=this.convertValuesToScaleByDefs(L,{xValue:n,minValue:a,q1Value:f,medianValue:x,q3Value:v,maxValue:b});k.xValue+=Math.round(m.convert(String(S))),M.push({series:this,itemId:n,datum:t,xKey:o,bandwidth:Math.round(D),scaledValues:k,cap:g,whisker:y,fill:r,fillOpacity:l,stroke:h,strokeWidth:c,strokeOpacity:d,lineDash:u,lineDashOffset:p})}),[{itemId:o,nodeData:M,labelData:[],scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}getLegendData(t){var e;const{id:i,data:s}=this,{xKey:n,yName:a,fill:o,fillOpacity:r,stroke:l,strokeWidth:h,strokeOpacity:c,showInLegend:d,legendItemName:u,visible:p}=this.properties;return d&&(null==s?void 0:s.length)&&n&&"category"===t?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:p,label:{text:null!=(e=null!=u?u:a)?e:i},marker:{fill:o,fillOpacity:r,stroke:l,strokeOpacity:c,strokeWidth:h},legendItemName:u}]:[]}getTooltipHtml(t){const{xKey:e,minKey:i,q1Key:s,medianKey:n,q3Key:a,maxKey:o,xName:r,yName:l,minName:h,q1Name:c,medianName:d,q3Name:u,maxName:p,tooltip:g}=this.properties,{datum:y}=t,m=this.getCategoryAxis(),f=this.getValueAxis();if(!m||!f||!this.properties.isValid())return"";const x=og.sanitizeHtml(l),v=[[e,r,m],[i,h,f],[s,c,f],[n,d,f],[a,u,f],[o,p,f]].map(([t,e,i])=>og.sanitizeHtml(`${null!=e?e:t}: ${i.formatDatum(y[t])}`)).join(x?"<br/>":", "),{fill:b}=this.getFormattedStyles(t);return g.toTooltipHtml({title:x,content:v,backgroundColor:b},{seriesId:this.id,datum:y,fill:b,xKey:e,minKey:i,q1Key:s,medianKey:n,q3Key:a,maxKey:o,xName:r,minName:h,q1Name:c,medianName:d,q3Name:u,maxName:p})}animateEmptyUpdateReady({datumSelections:t}){const e=this.isVertical(),{from:i,to:s}=function(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}(e);Lb.resetMotion(t,function(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}(e)),Lb.staticFromToMotion(this.id,"datums",this.ctx.animationManager,t,i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){return Ig(this,null,(function*(){var e;const i=null!=(e=t.nodeData)?e:[];return t.datumSelection.update(i)}))}updateDatumNodes(t){return Ig(this,arguments,(function*({datumSelection:t,isHighlight:e}){var i;const s=this.isVertical(),n=null==(i=this.getValueAxis())?void 0:i.isReversed();t.each((t,i)=>{let a=this.getFormattedStyles(i,e);e&&(a=xb(this.properties.highlightStyle.item,a));const{stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:h,lineDashOffset:c}=a;a.whisker=xb(a.whisker,{stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:h,lineDashOffset:c}),t.updateDatumStyles(i,a,s,n)})}))}updateLabelNodes(t){return Ig(this,null,(function*(){}))}updateLabelSelection(t){return Ig(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)}))}nodeFactory(){return new Qv}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:s}}=this,{xKey:n,minKey:a,q1Key:o,medianKey:r,q3Key:l,maxKey:h,formatter:c}=this.properties,{datum:d,fill:u,fillOpacity:p,stroke:g,strokeWidth:y,strokeOpacity:m,lineDash:f,lineDashOffset:x,cap:v,whisker:b}=t,S={fill:u,fillOpacity:p,stroke:g,strokeWidth:y,strokeOpacity:m,lineDash:f,lineDashOffset:x,cap:yb(v),whisker:yb(b)};if(c){const t=s.call(c,Ag(Lg({datum:d,seriesId:i,highlighted:e},S),{xKey:n,minKey:a,q1Key:o,medianKey:r,q3Key:l,maxKey:h}));if(t)return xb(t,S)}return S}convertValuesToScaleByDefs(t,e){const i=this.getCategoryAxis(),s=this.getValueAxis();if(!i||!s)throw new Error("Axes must be defined");const n={};for(const[a,[{def:o}]]of t)if(Object.hasOwn(e,a)){const{scale:t}="key"===o.type?i:s;n[a]=Math.round(t.convert(e[a]))}return n}};wb.type="box-plot";var Nb=wb,Cb={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[sg.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[sg.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},Ib={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:Nb,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.NUMBER,position:sg.POSITION.LEFT},{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM}]},themeTemplate:Cb,groupable:!0,paletteFactory:({takeColors:t,userPalette:e,themeTemplateParameters:i})=>{var s;const n=i.properties.get(sg.DEFAULT_BACKGROUND_COLOUR),a=null!=(s=Array.isArray(n)?n[0]:n)?s:"white",{fills:[o],strokes:[r]}=t(1);return{fill:e?o:og.Color.interpolate(o,a)(.7),stroke:r}},swapDefaultAxesCondition:({direction:t})=>"horizontal"===t},{AbstractBarSeriesProperties:Tb,BaseProperties:Eb,PropertiesArray:Ob,SeriesTooltip:Rb,Validate:Pb,ARRAY:_b,COLOR_STRING:Fb,LINE_DASH:Bb,OBJECT:zb,POSITIVE_NUMBER:Gb,RATIO:Kb,STRING:Vb}=rg,Wb=class extends Eb{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};Ng([Pb(Fb)],Wb.prototype,"fill",2),Ng([Pb(Kb)],Wb.prototype,"fillOpacity",2),Ng([Pb(Fb)],Wb.prototype,"stroke",2),Ng([Pb(Gb)],Wb.prototype,"strokeWidth",2),Ng([Pb(Kb)],Wb.prototype,"strokeOpacity",2),Ng([Pb(Bb)],Wb.prototype,"lineDash",2),Ng([Pb(Gb)],Wb.prototype,"lineDashOffset",2),Ng([Pb(Kb)],Wb.prototype,"lengthRatio",2);var Yb=class extends Eb{};Ng([Pb(Gb,{optional:!0})],Yb.prototype,"max",2);var Ub=class extends Eb{constructor(){super(...arguments),this.color="lightgrey"}};Ng([Pb(Fb)],Ub.prototype,"color",2),Ng([Pb(Gb,{optional:!0})],Ub.prototype,"stop",2);var jb=class extends Tb{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new Ob(Ub),this.target=new Wb,this.scale=new Yb,this.tooltip=new Rb,this.backgroundFill="white"}};Ng([Pb(Vb)],jb.prototype,"valueKey",2),Ng([Pb(Vb,{optional:!0})],jb.prototype,"valueName",2),Ng([Pb(Vb,{optional:!0})],jb.prototype,"targetKey",2),Ng([Pb(Vb,{optional:!0})],jb.prototype,"targetName",2),Ng([Pb(Fb)],jb.prototype,"fill",2),Ng([Pb(Kb)],jb.prototype,"fillOpacity",2),Ng([Pb(Fb)],jb.prototype,"stroke",2),Ng([Pb(Gb)],jb.prototype,"strokeWidth",2),Ng([Pb(Kb)],jb.prototype,"strokeOpacity",2),Ng([Pb(Bb)],jb.prototype,"lineDash",2),Ng([Pb(Gb)],jb.prototype,"lineDashOffset",2),Ng([Pb(Kb)],jb.prototype,"widthRatio",2),Ng([Pb(_b.restrict({minLength:0}))],jb.prototype,"colorRanges",2),Ng([Pb(zb)],jb.prototype,"target",2),Ng([Pb(zb)],jb.prototype,"scale",2),Ng([Pb(zb)],jb.prototype,"tooltip",2),Ng([Pb(Fb)],jb.prototype,"backgroundFill",2);var{animationValidation:Hb,collapsedStartingBarPosition:Xb,diff:$b,keyProperty:qb,partialAssign:Zb,prepareBarAnimationFunctions:Qb,resetBarSelectionsFn:Jb,seriesLabelFadeInAnimation:tS,valueProperty:eS,createDatumId:iS}=rg,{fromToMotion:sS}=$p.motion,{sanitizeHtml:nS}=og,aS=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],oS=class t extends rg.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[rg.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:Jb}}),this.properties=new jb,this.normalizedColorRanges=[],this.colorRangesGroup=new $p.Group({name:this.id+"-colorRanges"}),this.colorRangesSelection=$p.Selection.select(this.colorRangesGroup,$p.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=$p.Selection.select(this.annotationGroup,$p.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(t){return Ig(this,null,(function*(){var e,i;if(!this.properties.isValid()||!this.data)return;const{valueKey:s,targetKey:n}=this.properties,a=ag.ContinuousScale.is(null==(e=this.getCategoryAxis())?void 0:e.scale),o=ag.ContinuousScale.is(null==(i=this.getValueAxis())?void 0:i.scale),r=[];void 0!==n&&r.push(eS(this,n,o,{id:"target"})),this.ctx.animationManager.isSkipped()||(void 0!==this.processedData&&r.push($b(this.processedData)),r.push(Hb(this))),yield this.requestDataModel(t,this.data.slice(0,1),{props:[qb(this,s,a,{id:"xValue"}),eS(this,s,o,{id:"value"}),...r],groupByKeys:!0,dataVisible:this.visible}),this.animationState.transition("updateData")}))}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var t,e;return Math.max(...null!=(e=null==(t=this.getValueAxis())?void 0:t.dataDomain.domain)?e:[0])}getSeriesDomain(t){var e,i;const{dataModel:s,processedData:n}=this;if(!s||!n)return[];const{valueKey:a,targetKey:o,valueName:r,scale:l}=this.properties;if(t===this.getCategoryDirection())return[null!=r?r:a];if(t==(null==(e=this.getValueAxis())?void 0:e.direction)){const t=s.getDomain(this,"value","value",n),e=void 0===o?[]:s.getDomain(this,"target","value",n);return[0,null!=(i=l.max)?i:Math.max(...t,...e)]}throw new Error("unknown direction "+t)}getKeys(t){return t===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(t)}createNodeData(){return Ig(this,null,(function*(){var e,i,s,n;const{dataModel:a,processedData:o}=this,{valueKey:r,targetKey:l,widthRatio:h,target:{lengthRatio:c}}=this.properties,d=null==(e=this.getCategoryAxis())?void 0:e.scale,u=null==(i=this.getValueAxis())?void 0:i.scale;if(!(r&&a&&o&&d&&u))return[];if(void 0===h||void 0===c)return[];const p=null!=(s=d.bandwidth)?s:NaN,g=this.getMaxValue(),y=a.resolveProcessedDataIndexById(this,"value").index,m=void 0===l?NaN:a.resolveProcessedDataIndexById(this,"target").index,f={itemId:r,nodeData:[],labelData:[],scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible};for(const{datum:t,values:e}of o.data){if(!Array.isArray(t)||t.length<1)continue;e[0][y]<0&&og.Logger.warnOnce("negative values are not supported, clipping to 0.");const i=null!=(n=this.properties.valueName)?n:this.properties.valueKey,s=Math.min(g,Math.max(0,e[0][y])),a=u.convert(s),o=h*p,l=u.convert(0),d=this.getBarDirection()===rg.ChartAxisDirection.X,x={x:p*(1-h)/2,y:Math.min(a,l),width:o,height:Math.abs(l-a)};let v;if(d&&([x.x,x.y,x.width,x.height]=[x.y,x.x,x.height,x.width]),e[0][m]<0&&og.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&e[0][m]>=0){const t=c*p,i=Math.min(g,e[0][m]);if(!isNaN(i)&&void 0!==i){const e=u.convert(i);let s=p*(1-c)/2,n=s+t,[a,o]=[e,e];d&&([s,n,a,o]=[a,o,s,n]),v={value:i,x1:s,x2:n,y1:a,y2:o}}}const b=Ag(Lg({series:this,datum:t[0],xKey:r,xValue:i,yKey:r,yValue:s,cumulativeValue:s,target:v},x),{midPoint:{x:x.x+x.width/2,y:x.y+x.height/2},opacity:1});f.nodeData.push(b)}const x=[...this.getColorRanges()].sort((t,e)=>(t.stop||g)-(e.stop||g));let v=0;return this.normalizedColorRanges=x.map(t=>{var e;const i=Math.min(g,null!=(e=t.stop)?e:1/0),s={color:t.color,start:v,stop:i};return v=i,s}),[f]}))}getColorRanges(){const{colorRanges:t,fill:e,backgroundFill:i}=this.properties;if(void 0!==t&&t.length>0)return t;const s=new Ub;return s.color=og.Color.interpolate(e,i)(.7),[s]}getLegendData(t){return[]}getTooltipHtml(t){const{valueKey:e,valueName:i,targetKey:s,targetName:n}=this.properties,a=this.getValueAxis(),{yValue:o,target:{value:r}={value:void 0},datum:l}=t;if(void 0===e||void 0===o||void 0===a)return"";const h=(t,e,i)=>`<b>${nS(null!=e?e:t)}</b>: ${nS(a.formatDatum(i))}`,c=void 0===s||void 0===r?h(e,i,o):`${h(e,i,o)}<br/>${h(s,n,r)}`;return this.properties.tooltip.toTooltipHtml({title:void 0,content:c,backgroundColor:this.properties.fill},{datum:l,title:void 0,seriesId:this.id,valueKey:e,valueName:i,targetKey:s,targetName:n})}isLabelEnabled(){return!1}nodeFactory(){return new $p.Rect}updateDatumSelection(t){return Ig(this,null,(function*(){return this.targetLinesSelection.update(t.nodeData,void 0,void 0),t.datumSelection.update(t.nodeData,void 0,void 0)}))}updateDatumNodes(t){return Ig(this,null,(function*(){for(const{node:e}of t.datumSelection){const t=this.properties;Zb(aS,e,t)}for(const{node:t,datum:e}of this.targetLinesSelection)if(void 0!==e.target){const i=this.properties.target;Zb(["x1","x2","y1","y2"],t,e.target),Zb(aS,t,i)}else t.visible=!1}))}updateColorRanges(){return Ig(this,null,(function*(){const t=this.getValueAxis(),e=this.getCategoryAxis();if(!t||!e)return;const[i,s]=[0,Math.max(...e.scale.range)],n=this.getBarDirection()===rg.ChartAxisDirection.Y?(e,n)=>{e.x=i,e.y=t.scale.convert(n.stop),e.height=t.scale.convert(n.start)-e.y,e.width=s}:(e,n)=>{e.x=t.scale.convert(n.start),e.y=i,e.height=s,e.width=t.scale.convert(n.stop)-e.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:t,datum:e}of this.colorRangesSelection)n(t,e),t.fill=e.color}))}updateNodes(e,i,s){return Ig(this,null,(function*(){Cg(t.prototype,this,"updateNodes").call(this,e,i,s),yield this.updateColorRanges()}))}updateLabelSelection(t){return Ig(this,null,(function*(){return t.labelSelection}))}updateLabelNodes(t){return Ig(this,null,(function*(){}))}animateEmptyUpdateReady(t){const{datumSelections:e,labelSelections:i,annotationSelections:s}=t,n=Qb(Xb(this.isVertical(),this.axes,"normal"));sS(this.id,"nodes",this.ctx.animationManager,e,n),tS(this,"labels",this.ctx.animationManager,i),tS(this,"annotations",this.ctx.animationManager,s)}animateWaitingUpdateReady(t){var e,i,s;const{datumSelections:n,labelSelections:a,annotationSelections:o}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,l=Qb(Xb(this.isVertical(),this.axes,"normal"));sS(this.id,"nodes",this.ctx.animationManager,n,l,(t,e)=>iS(e.xValue),r);(null==(s=null==r?void 0:r.changed)||s)&&(tS(this,"labels",this.ctx.animationManager,a),tS(this,"annotations",this.ctx.animationManager,o))}},rS={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[sg.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},lS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:oS,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.NUMBER,position:sg.POSITION.LEFT},{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM}]},themeTemplate:rS,swapDefaultAxesCondition:t=>"horizontal"===(null==t?void 0:t.direction),paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{var s;const{properties:n}=i,{fills:[a],strokes:[o]}=t(e),r=i.properties.get(sg.DEFAULT_BACKGROUND_COLOUR),l=null!=(s=Array.isArray(r)?r[0]:r)?s:"white";return{fill:a,stroke:o,target:{stroke:n.get(sg.DEFAULT_CROSS_LINES_COLOUR)},backgroundFill:l}}},{Validate:hS,NUMBER:cS,TEXT_WRAP:dS,OVERFLOW_STRATEGY:uS}=rg,{Logger:pS}=og,{Text:gS,Label:yS}=$p,mS=class extends yS{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(t){return Math.ceil(t*gS.defaultLineHeightRatio)}};Ng([hS(dS)],mS.prototype,"wrapping",2),Ng([hS(uS)],mS.prototype,"overflowStrategy",2),Ng([hS(cS,{optional:!0})],mS.prototype,"minimumFontSize",2);var fS=class extends mS{constructor(){super(...arguments),this.spacing=0}};Ng([hS(cS)],fS.prototype,"spacing",2);var xS=class extends mS{};function vS(t,e,i){if(t>e)return;let s,n=t,a=e;for(;a>=n;){const t=(a+n)/2|0,e=i(t);null!=e?(s=e,n=t+1):a=t-1}return s}function bS(t,e,{padding:i},s){var n;const a=2*i,o=Math.min(null!=(n=e.minimumFontSize)?n:e.fontSize,e.fontSize),r=new gS;r.setFont(e);const l={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return vS(o,e.fontSize,i=>{const n=fS.lineHeight(i),h=s(n+a),c=h.width-a,d=h.height-a;if(n>d)return;const u=i===o;l.fontSize=i;const{lines:p}=gS.wrapLines(t,c,d,l,e.wrapping,u?e.overflowStrategy:"hide");if(null==p)return;const g=p.join("\n");r.text=g,r.fontSize=i,r.lineHeight=n;const y=r.computeBBox(),m=r.computeBBox().width,f=n*p.length;return y.width>c||f>d?void 0:[{text:g,fontSize:i,lineHeight:n,width:m,height:f},h.meta]})}function SS(t){return null!=t&&null!=t.minimumFontSize&&t.fontSize&&t.minimumFontSize>t.fontSize}function kS(t,e,i,s,n,a){const o=e.enabled?t:void 0,r=s.enabled?i:void 0;let l,h,c;if((SS(e)||SS(s))&&pS.warnOnce("minimumFontSize should be set to a value less than or equal to the font size"),null!=o&&null!=r&&(l=function(t,e,i,s,{padding:n},a){var o,r;const{spacing:l}=e,h=2*n,c=2*n+l,d=(null!=(o=e.minimumFontSize)?o:e.fontSize)+(null!=(r=s.minimumFontSize)?r:s.fontSize);if(d>a(d+c).height-c)return;const u=function(t,e){const{fontSize:i,minimumFontSize:s=i}=t,{fontSize:n,minimumFontSize:a=n}=e,o=i-s,r=n-a;let l=t.fontSize,h=e.fontSize;const c=[{labelFontSize:i,secondaryLabelFontSize:n}];for(;l>s||h>a;){(o>0?(l-s)/o:-1)>(r>0?(h-a)/r:-1)?l--:h--,c.push({labelFontSize:l,secondaryLabelFontSize:h})}return c.reverse(),c}(e,s),p=new gS;p.setFont(e);const g={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},y=new gS;y.setFont(s);const m={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let f,x;return vS(0,u.length-1,n=>{const{labelFontSize:o,secondaryLabelFontSize:r}=u[n],d=0===n,v=fS.lineHeight(o),b=xS.lineHeight(r),S=a(v+b+c),k=S.width-h,D=S.height-c;if(v+b>D)return;if(null==f||f.fontSize!==o){g.fontSize=o;const{lines:i}=gS.wrapLines(t,k,D,g,e.wrapping,d?e.overflowStrategy:"hide");if(null!=i){const t=i.join("\n");p.text=t,p.fontSize=o,p.lineHeight=o;const e=p.computeBBox().width,s=i.length*v;f={text:t,fontSize:o,lineHeight:v,width:e,height:s}}else f=void 0}if(null==f||f.width>k||f.height>D)return;if(null==x||x.fontSize!==r){m.fontSize=r;const{lines:t}=gS.wrapLines(i,k,D,m,s.wrapping,d?s.overflowStrategy:"hide");if(null!=t){const e=t.join("\n");y.text=e,y.fontSize=r,y.lineHeight=b;const i=y.computeBBox().width,s=t.length*b;x={text:e,fontSize:r,lineHeight:b,width:i,height:s}}else x=void 0}if(null==x)return;const M=f.height+x.height;return x.width>k||M>D?void 0:{width:Math.max(f.width,x.width),height:M+l,meta:S.meta,label:f,secondaryLabel:x}})}(o,e,r,s,n,a)),null==l&&null!=o&&(h=bS(o,e,n,a)),null!=h){const[t,e]=h;l={width:t.width,height:t.height,meta:e,label:t,secondaryLabel:void 0}}if(null==l&&null==o&&null!=r&&(c=bS(r,s,n,a)),null!=c){const[t,e]=c;l={width:t.width,height:t.height,meta:e,label:void 0,secondaryLabel:t}}return l}var{CartesianSeriesProperties:DS,SeriesTooltip:MS,Validate:LS,AND:AS,ARRAY:wS,COLOR_STRING:NS,COLOR_STRING_ARRAY:CS,FUNCTION:IS,OBJECT:TS,POSITIVE_NUMBER:ES,RATIO:OS,STRING:RS,TEXT_ALIGN:PS,VERTICAL_ALIGN:_S}=rg,FS=class extends DS{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new fS,this.tooltip=new MS}};Ng([LS(RS,{optional:!0})],FS.prototype,"title",2),Ng([LS(RS)],FS.prototype,"xKey",2),Ng([LS(RS)],FS.prototype,"yKey",2),Ng([LS(RS,{optional:!0})],FS.prototype,"colorKey",2),Ng([LS(RS,{optional:!0})],FS.prototype,"xName",2),Ng([LS(RS,{optional:!0})],FS.prototype,"yName",2),Ng([LS(RS,{optional:!0})],FS.prototype,"colorName",2),Ng([LS(AS(CS,wS.restrict({minLength:1})))],FS.prototype,"colorRange",2),Ng([LS(NS,{optional:!0})],FS.prototype,"stroke",2),Ng([LS(OS,{optional:!0})],FS.prototype,"strokeOpacity",2),Ng([LS(ES,{optional:!0})],FS.prototype,"strokeWidth",2),Ng([LS(PS)],FS.prototype,"textAlign",2),Ng([LS(_S)],FS.prototype,"verticalAlign",2),Ng([LS(ES)],FS.prototype,"itemPadding",2),Ng([LS(IS,{optional:!0})],FS.prototype,"formatter",2),Ng([LS(TS)],FS.prototype,"label",2),Ng([LS(TS)],FS.prototype,"tooltip",2);var{SeriesNodePickMode:BS,getMissCount:zS,valueProperty:GS,ChartAxisDirection:KS}=rg,{Rect:VS,PointerEvents:WS}=$p,{ColorScale:YS}=ag,{sanitizeHtml:US,Color:jS,Logger:HS}=og,XS=class extends rg.CartesianSeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.colorKey=s.properties.colorKey}},$S={left:-.5,center:0,right:-.5},qS={top:-.5,middle:0,bottom:-.5},ZS=class t extends rg.CartesianSeries{constructor(t){super({moduleCtx:t,pickModes:[BS.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new FS,this.NodeClickEvent=XS,this.colorScale=new YS}processData(t){return Ig(this,null,(function*(){var e;const i=this.axes[KS.X],s=this.axes[KS.Y];if(!(i&&s&&this.properties.isValid()&&(null==(e=this.data)?void 0:e.length)))return;const{xKey:n,yKey:a,colorRange:o,colorKey:r}=this.properties,{isContinuousX:l,isContinuousY:h}=this.isContinuous(),{dataModel:c,processedData:d}=yield this.requestDataModel(t,this.data,{props:[GS(this,n,l,{id:"xValue"}),GS(this,a,h,{id:"yValue"}),...r?[GS(this,r,!0,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const t=c.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=d.domain.values[t],this.colorScale.range=o,this.colorScale.update()}}))}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue").index,n=i.data.length,a=zS(this,i.defs.values[s].missing);return!(0===n||n===a)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return e&&i?t===KS.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i):[]}createNodeData(){return Ig(this,null,(function*(){var e,i,s,n,a,o,r;const{data:l,visible:h,axes:c,dataModel:d}=this,u=c[KS.X],p=c[KS.Y];if(!(l&&d&&h&&u&&p))return[];if("category"!==u.type||"category"!==p.type)return HS.warnOnce(`Heatmap series expected axes to have "category" type, but received "${u.type}" and "${p.type}" instead.`),[];const{xKey:g,xName:y,yKey:m,yName:f,colorKey:x,colorName:v,textAlign:b,verticalAlign:S,itemPadding:k,colorRange:D,label:M}=this.properties,L=d.resolveProcessedDataIndexById(this,"xValue").index,A=d.resolveProcessedDataIndexById(this,"yValue").index,w=x?d.resolveProcessedDataIndexById(this,"colorValue").index:void 0,N=u.scale,C=p.scale,I=(null!=(e=N.bandwidth)?e:0)/2,T=(null!=(i=C.bandwidth)?i:0)/2,E=this.isColorScaleValid(),O=[],R=[],P=null!=(s=N.bandwidth)?s:10,_=null!=(n=C.bandwidth)?n:10,F=(P-2*k)*$S[b],B=(_-2*k)*qS[S],z=()=>({width:P,height:_,meta:null});for(const{values:t,datum:e}of null!=(o=null==(a=this.processedData)?void 0:a.data)?o:[]){const i=t[L],s=t[A],n=N.convert(i)+I,a=C.convert(s)+T,o=null!=w?t[w]:void 0,r=E&&null!=o?this.colorScale.convert(o):D[0],l=kS(null!=o?this.getLabelText(M,{value:o,datum:e,colorKey:x,colorName:v,xKey:g,yKey:m,xName:y,yName:f}):void 0,this.properties.label,void 0,this.properties.label,{padding:k},z),h={x:n,y:a,size:0};if(O.push({series:this,itemId:m,yKey:m,xKey:g,xValue:i,yValue:s,colorValue:o,datum:e,point:h,width:P,height:_,fill:r,midPoint:{x:n,y:a}}),null!=(null==l?void 0:l.label)){const{text:t,fontSize:i,lineHeight:s,height:n}=l.label,{fontStyle:a,fontFamily:o,fontWeight:r,color:c}=this.properties.label,d=h.x+F*(P-2*k),u=h.y+B*(_-2*k)-.5*(l.height-n);R.push({series:this,itemId:m,datum:e,text:t,fontSize:i,lineHeight:s,fontStyle:a,fontFamily:o,fontWeight:r,color:c,textAlign:b,verticalAlign:S,x:d,y:u})}}return[{itemId:null!=(r=this.properties.yKey)?r:this.id,nodeData:O,labelData:R,scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}nodeFactory(){return new VS}updateDatumSelection(t){return Ig(this,null,(function*(){const{nodeData:e,datumSelection:i}=t,s=null!=e?e:[];return i.update(s)}))}updateDatumNodes(t){return Ig(this,null,(function*(){var e;const{isHighlight:i}=t,{id:s,ctx:{callbackCache:n}}=this,{xKey:a,yKey:o,colorKey:r,formatter:l,highlightStyle:{item:{fill:h,stroke:c,strokeWidth:d,strokeOpacity:u,fillOpacity:p}}}=this.properties,g=this.axes[KS.X],[y,m]=null!=(e=null==g?void 0:g.visibleRange)?e:[],f=!(0!==y||1!==m);t.datumSelection.each((t,e)=>{var g,y,m,x,v;const{point:b,width:S,height:k}=e,D=i&&void 0!==h?jS.interpolate(e.fill,h)(null!=p?p:1):e.fill,M=i&&void 0!==c?c:this.properties.stroke,L=i&&void 0!==u?u:this.properties.strokeOpacity,A=i&&void 0!==d?d:this.properties.strokeWidth;let w;l&&(w=n.call(l,{datum:e.datum,fill:D,stroke:M,strokeOpacity:L,strokeWidth:A,highlighted:i,xKey:a,yKey:o,colorKey:r,seriesId:s})),t.crisp=f,t.x=Math.floor(b.x-S/2),t.y=Math.floor(b.y-k/2),t.width=Math.ceil(S),t.height=Math.ceil(k),t.fill=null!=(g=null==w?void 0:w.fill)?g:D,t.stroke=null!=(y=null==w?void 0:w.stroke)?y:M,t.strokeOpacity=null!=(x=null!=(m=null==w?void 0:w.strokeOpacity)?m:L)?x:1,t.strokeWidth=null!=(v=null==w?void 0:w.strokeWidth)?v:A})}))}updateLabelSelection(t){return Ig(this,null,(function*(){const{labelData:e,labelSelection:i}=t,{enabled:s}=this.properties.label,n=s?e:[];return i.update(n)}))}updateLabelNodes(t){return Ig(this,null,(function*(){t.labelSelection.each((t,e)=>{t.text=e.text,t.fontSize=e.fontSize,t.lineHeight=e.lineHeight,t.fontStyle=e.fontStyle,t.fontFamily=e.fontFamily,t.fontWeight=e.fontWeight,t.fill=e.color,t.textAlign=e.textAlign,t.textBaseline=e.verticalAlign,t.x=e.x,t.y=e.y,t.pointerEvents=WS.None})}))}getTooltipHtml(t){var e,i,s;const n=this.axes[KS.X],a=this.axes[KS.Y];if(!this.properties.isValid()||!n||!a)return"";const{xKey:o,yKey:r,colorKey:l,xName:h,yName:c,colorName:d,stroke:u,strokeWidth:p,colorRange:g,formatter:y,tooltip:m}=this.properties,{colorScale:f,id:x,ctx:{callbackCache:v}}=this,{datum:b,xValue:S,yValue:k,colorValue:D}=t,M=this.isColorScaleValid()?f.convert(D):g[0];let L;y&&(L=v.call(y,{datum:t,xKey:o,yKey:r,colorKey:l,fill:M,stroke:u,strokeWidth:p,highlighted:!1,seriesId:x}));const A=null!=(i=null!=(e=null==L?void 0:L.fill)?e:M)?i:"gray",w=null!=(s=this.properties.title)?s:c,N=US(n.formatDatum(S)),C=US(a.formatDatum(k));let I=`<b>${US(h||o)}</b>: ${N}<br><b>${US(c||r)}</b>: ${C}`;return l&&(I=`<b>${US(d||l)}</b>: ${US(D)}<br>`+I),m.toTooltipHtml({title:w,content:I,backgroundColor:A},{seriesId:x,datum:b,xKey:o,yKey:r,xName:h,yName:c,title:w,color:A,colorKey:l})}getLegendData(t){var e;return"gradient"===t&&(null==(e=this.data)?void 0:e.length)&&this.properties.isValid()&&this.isColorScaleValid()&&this.dataModel?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue").index],colorRange:this.properties.colorRange}]:[]}isLabelEnabled(){return this.properties.label.enabled&&Boolean(this.properties.colorKey)}getBandScalePadding(){return{inner:0,outer:0}}};ZS.className="HeatmapSeries",ZS.type="heatmap";var QS=ZS,JS={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,label:{__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS,enabled:!1,color:sg.DEFAULT_LABEL_COLOUR,fontSize:sg.FONT_SIZE.SMALL,fontFamily:sg.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},tk={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:QS,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.LEFT},{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM}]},themeTemplate:JS,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:s})=>{var n;const{properties:a}=s,o=a.get(sg.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),r=a.get(sg.DEFAULT_BACKGROUND_COLOUR),l=null!=(n=Array.isArray(r)?r[0]:r)?n:"white",{fills:h,strokes:c}=t(e);return{stroke:i?c[0]:l,colorRange:i?[h[0],h[1]]:o}}},{isDefined:ek,ChartAxisDirection:ik,PolarAxis:sk,diff:nk,fixNumericExtent:ak,groupAccumulativeValueProperty:ok,keyProperty:rk,normaliseGroupTo:lk,resetLabelFn:hk,seriesLabelFadeInAnimation:ck,seriesLabelFadeOutAnimation:dk,valueProperty:uk,animationValidation:pk}=rg,{BandScale:gk}=ag,{motion:yk}=$p,{isNumber:mk,normalizeAngle360:fk,sanitizeHtml:xk}=og,vk=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},bk=class extends rg.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:Ag(Lg({},e),{label:hk})}),this.NodeClickEvent=vk,this.nodeData=[],this.groupScale=new gk,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var t,e;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(t===ik.X)return i.getDomain(this,"angleValue","key",s);{const t=e[ik.Y],n=i.getDomain(this,"radiusValue-end","value",s),a=[n[0]>0?0:n[0],n[1]<0?0:n[1]];return ak(a,t)}}processData(t){return Ig(this,null,(function*(){var e;if(!this.properties.isValid())return;const i=this.getStackId(),s=i+"-trailing",{angleKey:n,radiusKey:a,normalizedTo:o,visible:r}=this.properties,l=[];ek(o)&&l.push(lk(this,[i,s],Math.abs(o),"range"));const h=!this.ctx.animationManager.isSkipped();h&&this.processedData&&l.push(nk(this.processedData)),h&&l.push(pk(this));const c=r||!h?{}:{forceValue:0};yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:[rk(this,n,!1,{id:"angleValue"}),uk(this,a,!0,Lg({id:"radiusValue-raw",invalidValue:null},c)),...ok(this,a,!0,"normal","current",Lg({id:"radiusValue-end",invalidValue:null,groupId:i},c)),...ok(this,a,!0,"trailing","current",Lg({id:"radiusValue-start",invalidValue:null,groupId:s},c)),...l],dataVisible:r||h}),this.animationState.transition("updateData")}))}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return(t!==s.r||e!==s.cx||i!==s.cy)&&(this.circleCache={r:t,cx:e,cy:i},!0)}isRadiusAxisReversed(){var t;return null==(t=this.axes[ik.Y])?void 0:t.isReversed()}maybeRefreshNodeData(){return Ig(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const t=this.axes[ik.Y];return t instanceof sk?this.radius*t.innerRadiusRatio:0}createNodeData(){return Ig(this,null,(function*(){var t;const{processedData:e,dataModel:i,groupScale:s}=this;if(!e||!i||!this.properties.isValid())return[];const n=this.axes[ik.X],a=this.axes[ik.Y],o=null==n?void 0:n.scale,r=null==a?void 0:a.scale;if(!o||!r)return[];const l=i.resolveProcessedDataIndexById(this,"radiusValue-start").index,h=i.resolveProcessedDataIndexById(this,"radiusValue-end").index,c=i.resolveProcessedDataIndexById(this,"radiusValue-raw").index;let d=0,u=0;n instanceof Cy&&(d=n.groupPaddingInner,u=n.paddingInner);const p=(null!=(t=o.bandwidth)?t:0)*(1-u),{index:g,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);s.domain=Array.from({length:y}).map((t,e)=>String(e)),s.range=[-p/2,p/2],s.paddingInner=y>1?d:0;const m=this.isRadiusAxisReversed(),f=m?this.radius:this.getAxisInnerRadius(),x=m?this.getAxisInnerRadius():this.radius,v=x+f,{angleKey:b,radiusKey:S,angleName:k,radiusName:D,label:M}=this.properties,L=(t,e,i,s)=>{const n=this.getLabelText(M,{value:e,datum:t,angleKey:b,radiusKey:S,angleName:k,radiusName:D},t=>mk(t)?t.toFixed(2):String(t));if(n)return{x:i,y:s,text:n,textAlign:"center",textBaseline:"middle"}},A=e.data.map((t,e,i)=>{const{datum:n,keys:a,values:d}=t,u=a[0],p=d[c],y=d[l],m=d[h];let b,S;if(1===i.length)b=-.5*Math.PI,S=1.5*Math.PI;else{const t=o.convert(u);b=fk(t+s.convert(String(g))),S=fk(b+s.bandwidth)}const k=b+s.bandwidth/2,D=v-r.convert(y),M=v-r.convert(m),A=(D+M)/2,w=Math.cos(k)*A,N=Math.sin(k)*A,C=this.properties.label.enabled?L(n,p,w,N):void 0,I=this.getColumnWidth(b,S);return{series:this,datum:n,point:{x:w,y:N,size:0},midPoint:{x:w,y:N},label:C,angleValue:u,radiusValue:p,innerRadius:D,outerRadius:M,startAngle:b,endAngle:S,axisInnerRadius:f,axisOuterRadius:x,columnWidth:I,index:e}});return[{itemId:S,nodeData:A,labelData:A}]}))}getColumnWidth(t,e){return NaN}update(t){return Ig(this,arguments,(function*({seriesRect:t}){const e=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}))}updateSectorSelection(t,e){var i,s,n,a,o;let r=[];if(e){const t=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==t?void 0:t.datum)&&t.series===this&&(r=[t])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0,h=null!=(s=null==l?void 0:l.fill)?s:this.properties.fill,c=null!=(n=null==l?void 0:l.fillOpacity)?n:this.properties.fillOpacity,d=null!=(a=null==l?void 0:l.stroke)?a:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(o=null==l?void 0:l.strokeWidth)?o:this.properties.strokeWidth;t.update(r,void 0,t=>t.angleValue).each((t,i)=>{var s,n,a,o;const r=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:d,strokeWidth:p,highlighted:e,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(t,i,e,r),t.fill=null!=(s=null==r?void 0:r.fill)?s:h,t.fillOpacity=null!=(n=null==r?void 0:r.fillOpacity)?n:c,t.stroke=null!=(a=null==r?void 0:r.stroke)?a:d,t.strokeOpacity=u,t.strokeWidth=null!=(o=null==r?void 0:r.strokeWidth)?o:p,t.lineDash=this.properties.lineDash,t.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();yk.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),ck(this,"labels",this.ctx.animationManager,[t])}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();yk.fromToMotion(this.id,"datums",e,[t],i),dk(this,"labels",e,[this.labelSelection])}getTooltipHtml(t){var e;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,radiusKey:o,angleName:r,radiusName:l,fill:h,stroke:c,strokeWidth:d,formatter:u,tooltip:p}=this.properties,{angleValue:g,radiusValue:y,datum:m}=t,f=s[ik.X],x=s[ik.Y];if(!this.properties.isValid()||!(f&&x&&mk(y))||!n)return"";const v=f.formatDatum(g),b=x.formatDatum(y),S=xk(l),k=xk(`${v}: ${b}`),{fill:D}=null!=(e=u&&this.ctx.callbackCache.call(u,{seriesId:i,datum:m,fill:h,stroke:c,strokeWidth:d,highlighted:!1,angleKey:a,radiusKey:o}))?e:{fill:h};return p.toTooltipHtml({title:S,backgroundColor:h,content:k},{seriesId:i,datum:m,color:D,title:S,angleKey:a,radiusKey:o,angleName:r,radiusName:l})}getLegendData(t){var e;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{radiusKey:i,radiusName:s,fill:n,stroke:a,fillOpacity:o,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!=s?s:i},marker:{fill:null!=n?n:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:null!=o?o:1,strokeOpacity:null!=r?r:1,strokeWidth:l}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,a=s.id===this.id||e&&1===n;this.toggleSeriesItem(i,a)}computeLabelsBBox(){return null}},{Label:Sk}=$p,{SeriesProperties:kk,SeriesTooltip:Dk,Validate:Mk,COLOR_STRING:Lk,DEGREE:Ak,FUNCTION:wk,LINE_DASH:Nk,NUMBER:Ck,OBJECT:Ik,POSITIVE_NUMBER:Tk,RATIO:Ek,STRING:Ok}=rg,Rk=class extends kk{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new Sk,this.tooltip=new Dk}};Ng([Mk(Ok)],Rk.prototype,"angleKey",2),Ng([Mk(Ok,{optional:!0})],Rk.prototype,"angleName",2),Ng([Mk(Ok)],Rk.prototype,"radiusKey",2),Ng([Mk(Ok,{optional:!0})],Rk.prototype,"radiusName",2),Ng([Mk(Lk)],Rk.prototype,"fill",2),Ng([Mk(Ek)],Rk.prototype,"fillOpacity",2),Ng([Mk(Lk)],Rk.prototype,"stroke",2),Ng([Mk(Tk)],Rk.prototype,"strokeWidth",2),Ng([Mk(Ek)],Rk.prototype,"strokeOpacity",2),Ng([Mk(Nk)],Rk.prototype,"lineDash",2),Ng([Mk(Tk)],Rk.prototype,"lineDashOffset",2),Ng([Mk(wk,{optional:!0})],Rk.prototype,"formatter",2),Ng([Mk(Ak)],Rk.prototype,"rotation",2),Ng([Mk(Ok,{optional:!0})],Rk.prototype,"stackGroup",2),Ng([Mk(Ck,{optional:!0})],Rk.prototype,"normalizedTo",2),Ng([Mk(Ik)],Rk.prototype,"label",2),Ng([Mk(Ik)],Rk.prototype,"tooltip",2);var{motion:Pk}=$p;function _k(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(e,i)=>({startAngle:t.startAngle.get(e)[i],endAngle:t.endAngle.get(e)[i]});return{calculate:(i,s,n)=>{e.forEach(e=>{var a,o;const r=t[e];let l=("removed"===n||"updated"===n?i:s)[e],h=("removed"===n?i:s)[e];isNaN(h)&&(h=null!=(o=null==(a=i.previousDatum)?void 0:a[e])?o:NaN);const c=l-h;Math.abs(c)>Math.PI&&(l-=2*Math.sign(c)*Math.PI),r.set(s,{from:l,to:h})})},from:t=>i(t,"from"),to:t=>i(t,"to")}}function Fk(t,e,i){if("updated"===i){if(null==t.previousDatum||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return"added"===i&&null!=t.previousDatum?"updated":i}function Bk(t,{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}}var{motion:zk}=$p;function Gk(t,{innerRadius:e,outerRadius:i,startAngle:s,endAngle:n}){return{innerRadius:e,outerRadius:i,startAngle:s,endAngle:n}}var{Sector:Kk}=$p,Vk=class extends bk{constructor(t){super(t,{animationResetFns:{item:Gk}}),this.properties=new Rk}getStackId(){var t,e;return`nightingale-stack-${null!=(e=null==(t=this.seriesGrouping)?void 0:t.groupIndex)?e:this.id}-yValues`}nodeFactory(){return new Kk}updateItemPath(t,e,i,s){t.centerX=0,t.centerY=0,i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle)}getColumnTransitionFunctions(){return function(t){const e=_k();return{toFn:(i,s,n)=>{const{startAngle:a,endAngle:o}=e.to(s);let r,l;return"removed"===n?(r=t,l=t):(r=isNaN(s.innerRadius)?t:s.innerRadius,l=isNaN(s.outerRadius)?t:s.outerRadius),{innerRadius:r,outerRadius:l,startAngle:a,endAngle:o}},fromFn:(i,s,n)=>{n=Fk(i,s,n),e.calculate(i,s,n);const{startAngle:a,endAngle:o}=e.from(s);let r,l;"removed"===n||"updated"===n?(r=i.innerRadius,l=i.outerRadius):(r=t,l=t);return{innerRadius:r,outerRadius:l,startAngle:a,endAngle:o,phase:zk.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}};Vk.className="NightingaleSeries",Vk.type="nightingale";var Wk={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_LABEL_COLOUR,__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:sg.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[sg.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:sg.POLAR_AXIS_SHAPE.CIRCLE}}},Yk={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:Vk,seriesDefaults:{axes:[{type:sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:sg.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:Wk,paletteFactory({takeColors:t,userPalette:e}){const{fills:[i],strokes:[s]}=t(1);return{fill:i,stroke:e?s:sg.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},Uk={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_LABEL_COLOUR,__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},jk=rg.mergeDefaults({series:{strokeWidth:2}},Uk),Hk=rg.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Uk),{Label:Xk}=$p,{SeriesMarker:$k,SeriesProperties:qk,SeriesTooltip:Zk,Validate:Qk,BOOLEAN:Jk,COLOR_STRING:tD,DEGREE:eD,FUNCTION:iD,LINE_DASH:sD,OBJECT:nD,POSITIVE_NUMBER:aD,RATIO:oD,STRING:rD}=rg,lD=class extends qk{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new $k,this.label=new Xk,this.tooltip=new Zk,this.connectMissingData=!1}};Ng([Qk(rD)],lD.prototype,"angleKey",2),Ng([Qk(rD)],lD.prototype,"radiusKey",2),Ng([Qk(rD,{optional:!0})],lD.prototype,"angleName",2),Ng([Qk(rD,{optional:!0})],lD.prototype,"radiusName",2),Ng([Qk(tD)],lD.prototype,"stroke",2),Ng([Qk(aD)],lD.prototype,"strokeWidth",2),Ng([Qk(oD)],lD.prototype,"strokeOpacity",2),Ng([Qk(sD)],lD.prototype,"lineDash",2),Ng([Qk(aD)],lD.prototype,"lineDashOffset",2),Ng([Qk(iD,{optional:!0})],lD.prototype,"formatter",2),Ng([Qk(eD)],lD.prototype,"rotation",2),Ng([Qk(nD)],lD.prototype,"marker",2),Ng([Qk(nD)],lD.prototype,"label",2),Ng([Qk(nD)],lD.prototype,"tooltip",2),Ng([Qk(Jk)],lD.prototype,"connectMissingData",2);var{ChartAxisDirection:hD,PolarAxis:cD,SeriesNodePickMode:dD,valueProperty:uD,fixNumericExtent:pD,seriesLabelFadeInAnimation:gD,markerFadeInAnimation:yD,resetMarkerFn:mD,animationValidation:fD}=rg,{BBox:xD,Group:vD,Path:bD,PointerEvents:SD,Selection:kD,Text:DD,getMarker:MD}=$p,{extent:LD,isNumber:AD,isNumberEqual:wD,sanitizeHtml:ND,toFixed:CD}=og,ID=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},TD=class extends rg.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[dD.NEAREST_NODE,dD.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:mD}}),this.properties=new lD,this.NodeClickEvent=ID,this.nodeData=[],this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const e=new vD;this.contentGroup.append(e),this.lineSelection=kD.select(e,bD),e.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:t}=this.properties.marker;return new(MD(t))}addChartEventListeners(){var t,e;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===hD.X)return e.getDomain(this,"angleValue","value",i);{const t=e.getDomain(this,"radiusValue","value",i),s=LD(0===t.length?t:[0].concat(t));return pD(s)}}processData(t){return Ig(this,null,(function*(){var e;if(!this.properties.isValid())return;const{angleKey:i,radiusKey:s}=this.properties,n=[];this.ctx.animationManager.isSkipped()||n.push(fD(this)),yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:[uD(this,i,!1,{id:"angleValue"}),uD(this,s,!1,{id:"radiusValue",invalidValue:void 0}),...n]}),this.animationState.transition("updateData")}))}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return(t!==s.r||e!==s.cx||i!==s.cy)&&(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[hD.Y];return t instanceof cD?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){return Ig(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}createNodeData(){return Ig(this,null,(function*(){var t,e;const{processedData:i,dataModel:s}=this;if(!i||!s||!this.properties.isValid())return[];const{angleKey:n,radiusKey:a,angleName:o,radiusName:r,marker:l,label:h}=this.properties,c=null==(t=this.axes[hD.X])?void 0:t.scale,d=null==(e=this.axes[hD.Y])?void 0:e.scale;if(!c||!d)return[];const u=s.resolveProcessedDataIndexById(this,"angleValue").index,p=s.resolveProcessedDataIndexById(this,"radiusValue").index,g=this.getAxisInnerRadius(),y=i.data.map(t=>{const{datum:e,values:i}=t,s=i[u],y=i[p],m=c.convert(s),f=this.radius+g-d.convert(y),x=Math.cos(m),v=Math.sin(m),b=x*f,S=v*f;let k;if(h.enabled){const t=this.getLabelText(h,{value:y,datum:e,angleKey:n,radiusKey:a,angleName:o,radiusName:r},t=>AD(t)?t.toFixed(2):String(t));t&&(k={x:b+x*l.size,y:S+v*l.size,text:t,textAlign:wD(x,0)?"center":x>0?"left":"right",textBaseline:wD(v,0)?"middle":v>0?"top":"bottom"})}return{series:this,datum:e,point:{x:b,y:S,size:l.size},midPoint:{x:b,y:S},label:k,angleValue:s,radiusValue:y}});return[{itemId:a,nodeData:y,labelData:y}]}))}update(t){return Ig(this,arguments,(function*({seriesRect:t}){var e,i;const s=this.checkResize(t),n=!this.ctx.animationManager.isSkipped(),{series:a}=null!=(i=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight())?i:{};this.highlightGroup.visible=(n||this.visible)&&!(a!==this),yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),s&&this.animationState.transition("resize"),this.animationState.transition("update")}))}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=kD.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){var e;return null!=(e=null==t?void 0:t.fill)?e:this.properties.marker.fill}updateMarkers(t,e){var i;const{angleKey:s,radiusKey:n,marker:a,visible:o}=this.properties;let r=[];if(o&&a.shape&&a.enabled)if(e){const t=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==t?void 0:t.datum)&&(r=[t])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0;t.update(r).each((t,i)=>{var r,h,c,d,u,p,g,y,m,f,x,v,b;const S=this.getMarkerFill(l),k=null!=(h=null!=(r=null==l?void 0:l.stroke)?r:a.stroke)?h:this.properties.stroke,D=null!=(u=null!=(d=null!=(c=null==l?void 0:l.strokeWidth)?c:a.strokeWidth)?d:this.properties.strokeWidth)?u:1,M=a.formatter?this.ctx.callbackCache.call(a.formatter,{datum:i.datum,angleKey:s,radiusKey:n,fill:S,stroke:k,strokeWidth:D,size:a.size,highlighted:e,seriesId:this.id}):void 0;t.fill=null!=(p=null==M?void 0:M.fill)?p:S,t.stroke=null!=(g=null==M?void 0:M.stroke)?g:k,t.strokeWidth=null!=(y=null==M?void 0:M.strokeWidth)?y:D,t.fillOpacity=null!=(f=null!=(m=null==l?void 0:l.fillOpacity)?m:a.fillOpacity)?f:1,t.strokeOpacity=null!=(v=null!=(x=a.strokeOpacity)?x:this.properties.strokeOpacity)?v:1,t.size=null!=(b=null==M?void 0:M.size)?b:a.size;const{x:L,y:A}=i.point;t.translationX=L,t.translationY=A,t.visible=o&&t.size>0&&!isNaN(L)&&!isNaN(A)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipHtml(t){var e;if(!this.properties.isValid())return"";const{id:i}=this,{angleKey:s,radiusKey:n,angleName:a,radiusName:o,marker:r,tooltip:l}=this.properties,{datum:h,angleValue:c,radiusValue:d}=t,u="number"==typeof c?CD(c):String(c),p="number"==typeof d?CD(d):String(d),g=ND(o),y=ND(`${u}: ${p}`),{formatter:m,fill:f,stroke:x,strokeWidth:v,size:b}=r,S=null!=v?v:this.properties.strokeWidth,{fill:k}=null!=(e=m&&this.ctx.callbackCache.call(m,{datum:h,angleKey:s,radiusKey:n,fill:f,stroke:x,strokeWidth:S,size:b,highlighted:!1,seriesId:i}))?e:{fill:f};return l.toTooltipHtml({title:g,content:y,backgroundColor:k},{datum:h,angleKey:s,angleName:a,radiusKey:n,radiusName:o,title:g,color:k,seriesId:i})}getLegendData(t){var e,i,s,n,a,o,r,l,h,c;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{radiusKey:d,radiusName:u,stroke:p,strokeWidth:g,strokeOpacity:y,lineDash:m,visible:f,marker:x}=this.properties;return[{legendType:"category",id:this.id,itemId:d,seriesId:this.id,enabled:f,label:{text:null!=u?u:d},marker:{shape:x.shape,fill:null!=(n=null!=(s=null!=(i=this.getMarkerFill())?i:x.stroke)?s:p)?n:"rgba(0, 0, 0, 0)",stroke:null!=(o=null!=(a=x.stroke)?a:p)?o:"rgba(0, 0, 0, 0)",fillOpacity:null!=(r=x.fillOpacity)?r:1,strokeOpacity:null!=(h=null!=(l=x.strokeOpacity)?l:y)?h:1,strokeWidth:null!=(c=x.strokeWidth)?c:0,enabled:x.enabled||g<=0},line:{stroke:p,strokeOpacity:y,strokeWidth:g,lineDash:m}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,a=s.id===this.id||e&&1===n;this.toggleSeriesItem(i,a)}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{rootGroup:a,nodeData:o,centerX:r,centerY:l}=this,h=a.transformPoint(s,n),c=this.radius;if(Math.sqrt(Dg(s-r,2)+Dg(n-l,2))>c+this.properties.marker.size)return;let d,u=1/0;for(const t of o){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i))continue;const s=Math.sqrt(Dg(h.x-e-r,2)+Dg(h.y-i-l,2));s<u&&(u=s,d=t)}if(d){return{datum:d,distance:Math.max(u-(null!=(i=null==(e=d.point)?void 0:e.size)?i:0),0)}}}computeLabelsBBox(){return Ig(this,null,(function*(){const{label:t}=this.properties;yield this.maybeRefreshNodeData();const e=[],i=new DD;return this.nodeData.forEach(s=>{if(!t.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(t),i.setAlign(s.label);const n=i.computeBBox();e.push(n)}),0===e.length?null:xD.merge(e)}))}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const t=this.getLineNode();t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=SD.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(0===t.length)return[];const s=this.axes[hD.Y],n=this.axes[hD.X],a=null==n?void 0:n.isReversed(),o=(null==s?void 0:s.isReversed())&&!a?[...t].reverse():t,r=[];let l,h=!1;return o.forEach((t,s)=>{let{x:n,y:a}=t.point;const o=isNaN(n)||isNaN(a);o||null!=l||(l=t),o&&!i&&(n=0,a=0);const c=0===s||!e&&!i&&(o||h);r.push({x:n,y:a,moveTo:c}),h=o}),void 0!==l&&r.push({x:l.point.x,y:l.point.y,moveTo:!1}),r}animateSinglePath(t,e,i){const{path:s}=t;s.clear({trackChanges:!0});const n=this.getAxisInnerRadius(),a=this.axes[hD.Y],o=(null==a?void 0:a.isReversed())?this.radius+n-(null==a?void 0:a.scale.convert(0)):n;e.forEach(t=>{const{x:e,y:n,arc:a,radius:r=0,startAngle:l=0,endAngle:h=0,moveTo:c}=t,d=Math.atan2(n,e),u=o*Math.cos(d),p=o*Math.sin(d),g=u*(1-i)+e*i,y=p*(1-i)+n*i;a?s.arc(e,n,r,l,h):c?s.moveTo(g,y):s.lineTo(g,y)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints();this.animateSinglePath(this.getLineNode(),e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:this.id+"_'path",groupId:this.id,from:0,to:1,phase:"initial",onUpdate:t=>this.animatePaths(t),onStop:()=>this.animatePaths(1)}),yD(this,i,[t],"added"),gD(this,"labels",i,[e])}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear({trackChanges:!0}),i.forEach(({x:t,y:i,moveTo:s})=>{s?e.moveTo(t,i):e.lineTo(t,i)}),t.checkPathDirty()}}};TD.className="RadarSeries";var{RATIO:ED,COLOR_STRING:OD,Validate:RD}=rg,PD=class extends lD{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};Ng([RD(OD)],PD.prototype,"fill",2),Ng([RD(ED)],PD.prototype,"fillOpacity",2);var{Group:_D,Path:FD,PointerEvents:BD,Selection:zD}=$p,{ChartAxisDirection:GD}=rg,KD=class extends TD{constructor(t){super(t),this.properties=new PD,this.resetInvalidToZero=!0;const e=new _D;e.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(e),this.areaSelection=zD.select(e,FD)}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(t){var e,i;return null!=(i=null!=(e=null==t?void 0:t.fill)?e:this.properties.marker.fill)?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.pointerEvents=BD.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){var t,e;const i=this.getLinePoints(),s=t=>{const e=this.axes[t];return e instanceof rg.PolarAxis?e:void 0},n=s(GD.Y),a=s(GD.X);if(!(null==n?void 0:n.isReversed()))return i;const{points:o=[]}=null!=(e=null==(t=null==a?void 0:a.getAxisLinePoints)?void 0:t.call(a))?e:{};return i.concat(...o)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear({trackChanges:!0}),i.forEach(({x:t,y:i,moveTo:s,arc:n,radius:a=0,startAngle:o=0,endAngle:r=0})=>{n?e.arc(t,i,a,o,r):s?e.moveTo(t,i):e.lineTo(t,i)}),e.closePath(),t.checkPathDirty()}}};KD.className="RadarAreaSeries",KD.type="radar-area";var{markerPaletteFactory:VD}=rg,WD={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:KD,seriesDefaults:{axes:[{type:sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:sg.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:Hk,paletteFactory:t=>{const{marker:e}=VD(t);return{stroke:e.stroke,fill:e.fill,marker:e}}},YD=class extends TD{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};YD.className="RadarLineSeries",YD.type="radar-line";var UD={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:YD,seriesDefaults:{axes:[{type:sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:sg.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:jk,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{stroke:e,marker:{fill:e,stroke:i}}}},{Label:jD}=$p,{SeriesProperties:HD,SeriesTooltip:XD,Validate:$D,COLOR_STRING:qD,DEGREE:ZD,FUNCTION:QD,LINE_DASH:JD,NUMBER:tM,OBJECT:eM,POSITIVE_NUMBER:iM,RATIO:sM,STRING:nM}=rg,aM=class extends HD{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new jD,this.tooltip=new XD}};Ng([$D(nM)],aM.prototype,"angleKey",2),Ng([$D(nM)],aM.prototype,"radiusKey",2),Ng([$D(nM,{optional:!0})],aM.prototype,"angleName",2),Ng([$D(nM,{optional:!0})],aM.prototype,"radiusName",2),Ng([$D(qD)],aM.prototype,"fill",2),Ng([$D(sM)],aM.prototype,"fillOpacity",2),Ng([$D(qD)],aM.prototype,"stroke",2),Ng([$D(iM)],aM.prototype,"strokeWidth",2),Ng([$D(sM)],aM.prototype,"strokeOpacity",2),Ng([$D(JD)],aM.prototype,"lineDash",2),Ng([$D(iM)],aM.prototype,"lineDashOffset",2),Ng([$D(QD,{optional:!0})],aM.prototype,"formatter",2),Ng([$D(ZD)],aM.prototype,"rotation",2),Ng([$D(nM,{optional:!0})],aM.prototype,"stackGroup",2),Ng([$D(tM,{optional:!0})],aM.prototype,"normalizedTo",2),Ng([$D(eM)],aM.prototype,"label",2),Ng([$D(eM)],aM.prototype,"tooltip",2);var{motion:oM}=$p;function rM(t){return{toFn:(e,i,s)=>{let n,a,o,r;return"removed"===s?(n=t,a=t,o=i.innerRadius,r=i.outerRadius):(n=i.startAngle,a=i.endAngle,o=isNaN(i.innerRadius)?e.innerRadius:i.innerRadius,r=isNaN(i.outerRadius)?e.outerRadius:i.outerRadius),{startAngle:n,endAngle:a,innerRadius:o,outerRadius:r}},fromFn:(e,i,s)=>{let n,a,o,r;"removed"===(s=function(t,e,i){if("updated"===i){if(null==t.previousDatum||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return"added"===i&&null!=t.previousDatum?"updated":i}(e,i,s))||"updated"===s?(n=e.startAngle,a=e.endAngle,o=e.innerRadius,r=e.outerRadius):(n=t,a=t,o=i.innerRadius,r=i.outerRadius);return{startAngle:n,endAngle:a,innerRadius:o,outerRadius:r,phase:oM.NODE_UPDATE_STATE_TO_PHASE_MAPPING[s]}}}}function lM(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle}}var{ChartAxisDirection:hM,PolarAxis:cM,diff:dM,isDefined:uM,groupAccumulativeValueProperty:pM,keyProperty:gM,normaliseGroupTo:yM,valueProperty:mM,fixNumericExtent:fM,resetLabelFn:xM,seriesLabelFadeInAnimation:vM,seriesLabelFadeOutAnimation:bM,animationValidation:SM}=rg,{BandScale:kM}=ag,{Sector:DM,motion:MM}=$p,{angleBetween:LM,isNumber:AM,sanitizeHtml:wM}=og,NM=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},CM=class extends rg.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:lM,label:xM}}),this.properties=new aM,this.NodeClickEvent=NM,this.nodeData=[],this.groupScale=new kM,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new DM}addChartEventListeners(){var t,e;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(t===hM.X){const t=e[hM.X],n=i.getDomain(this,"angleValue-end","value",s),a=[n[0]>0?0:n[0],n[1]<0?0:n[1]];return fM(a,t)}return i.getDomain(this,"radiusValue","key",s)}processData(t){return Ig(this,null,(function*(){var e;if(!this.properties.isValid())return;const i=this.getStackId(),s=i+"-trailing",{angleKey:n,radiusKey:a,normalizedTo:o,visible:r}=this.properties,l=[];uM(o)&&l.push(yM(this,[i,s],Math.abs(o),"range"));const h=!this.ctx.animationManager.isSkipped();h&&(this.processedData&&l.push(dM(this.processedData)),l.push(SM(this)));const c=this.visible||!h?{}:{forceValue:0};yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:[gM(this,a,!1,{id:"radiusValue"}),mM(this,n,!0,Lg({id:"angleValue-raw",invalidValue:null},c)),...pM(this,n,!0,"normal","current",Lg({id:"angleValue-end",invalidValue:null,groupId:i},c)),...pM(this,n,!0,"trailing","current",Lg({id:"angleValue-start",invalidValue:null,groupId:s},c)),...l],dataVisible:r||h}),this.animationState.transition("updateData")}))}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return(t!==s.r||e!==s.cx||i!==s.cy)&&(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){return Ig(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const t=this.axes[hM.Y];return t instanceof cM?this.radius*t.innerRadiusRatio:0}createNodeData(){return Ig(this,null,(function*(){var t,e;const{processedData:i,dataModel:s}=this;if(!i||!s||!this.properties.isValid())return[];const n=this.axes[hM.X],a=this.axes[hM.Y],o=null==n?void 0:n.scale,r=null==a?void 0:a.scale;if(!o||!r)return[];const l=s.resolveProcessedDataIndexById(this,"angleValue-start").index,h=s.resolveProcessedDataIndexById(this,"angleValue-end").index,c=s.resolveProcessedDataIndexById(this,"angleValue-raw").index;let d=0;a instanceof Tm&&(d=a.groupPaddingInner);const{groupScale:u}=this,{index:p,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:g}).map((t,e)=>String(e)),u.range=[0,Math.abs(null!=(t=r.bandwidth)?t:0)],u.paddingInner=g>1?d:0;const y=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,m=null==(e=this.axes[hM.Y])?void 0:e.isReversed(),f=m?this.radius:this.getAxisInnerRadius(),x=(m?this.getAxisInnerRadius():this.radius)+f,{angleKey:v,radiusKey:b,angleName:S,radiusName:k,label:D}=this.properties,M=(t,e,i,s)=>{const n=this.getLabelText(D,{value:e,datum:t,angleKey:v,radiusKey:b,angleName:S,radiusName:k},t=>AM(t)?t.toFixed(2):String(t));if(n)return{x:i,y:s,text:n,textAlign:"center",textBaseline:"middle"}},L=i.data.map((t,e)=>{const{datum:i,keys:s,values:n}=t,a=s[0],d=n[c],g=n[l],m=n[h];let f=Math.max(o.convert(g),o.range[0]),v=Math.min(o.convert(m),o.range[1]);f>v&&([f,v]=[v,f]),d<0&&([f,v]=[v,f]);const b=x-r.convert(a)+u.convert(String(p)),S=b+y,k=(b+S)/2,D=f+LM(f,v)/2,L=Math.cos(D)*k,A=Math.sin(D)*k;return{series:this,datum:i,point:{x:L,y:A,size:0},midPoint:{x:L,y:A},label:this.properties.label.enabled?M(i,d,L,A):void 0,angleValue:d,radiusValue:a,innerRadius:b,outerRadius:S,startAngle:f,endAngle:v,index:e}});return[{itemId:b,nodeData:L,labelData:L}]}))}update(t){return Ig(this,arguments,(function*({seriesRect:t}){const e=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")}))}updateSectorSelection(t,e){var i,s,n,a,o;let r=[];if(e){const t=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==t?void 0:t.datum)&&t.series===this&&(r=[t])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0,h=null!=(s=null==l?void 0:l.fill)?s:this.properties.fill,c=null!=(n=null==l?void 0:l.fillOpacity)?n:this.properties.fillOpacity,d=null!=(a=null==l?void 0:l.stroke)?a:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(o=null==l?void 0:l.strokeWidth)?o:this.properties.strokeWidth;t.update(r,void 0,t=>t.radiusValue).each((t,i)=>{var s,n,a,o,r;const l=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:d,strokeWidth:p,highlighted:e,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;t.fill=null!=(s=null==l?void 0:l.fill)?s:h,t.fillOpacity=null!=(n=null==l?void 0:l.fillOpacity)?n:c,t.stroke=null!=(a=null==l?void 0:l.stroke)?a:d,t.strokeOpacity=u,t.strokeWidth=null!=(o=null==l?void 0:l.strokeWidth)?o:p,t.lineDash=this.properties.lineDash,t.lineJoin="round",t.inset=null!=d?(null!=(r=null==l?void 0:l.strokeWidth)?r:p)/2:0,e&&(t.startAngle=i.startAngle,t.endAngle=i.endAngle,t.innerRadius=i.innerRadius,t.outerRadius=i.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){var t;const e=null==(t=this.axes[hM.X])?void 0:t.scale;let i=0;if(!e)return rM(i);const s=Math.min(e.domain[0],e.domain[1]),n=Math.max(e.domain[0],e.domain[1]);return s<=0&&n>=0&&(i=e.convert(0)),rM(i)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();MM.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),vM(this,"labels",this.ctx.animationManager,[t])}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();MM.fromToMotion(this.id,"datums",e,[t],i),bM(this,"labels",e,[this.labelSelection])}getTooltipHtml(t){var e;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,angleName:o,radiusKey:r,radiusName:l,fill:h,stroke:c,strokeWidth:d,formatter:u,tooltip:p}=this.properties,{angleValue:g,radiusValue:y,datum:m}=t,f=s[hM.X],x=s[hM.Y];if(!this.properties.isValid()||!(f&&x&&AM(g))||!n)return"";const v=f.formatDatum(g),b=x.formatDatum(y),S=wM(o),k=wM(`${b}: ${v}`),{fill:D}=null!=(e=u&&this.ctx.callbackCache.call(u,{datum:m,fill:h,stroke:c,strokeWidth:d,highlighted:!1,angleKey:a,radiusKey:r,seriesId:i}))?e:{fill:h};return p.toTooltipHtml({title:S,backgroundColor:h,content:k},{seriesId:i,datum:m,color:D,title:S,angleKey:a,radiusKey:r,angleName:o,radiusName:l})}getLegendData(t){var e;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{angleKey:i,angleName:s,fill:n,stroke:a,fillOpacity:o,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!=s?s:i},marker:{fill:null!=n?n:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:null!=o?o:1,strokeOpacity:null!=r?r:1,strokeWidth:l}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,a=s.id===this.id||e&&1===n;this.toggleSeriesItem(i,a)}computeLabelsBBox(){return null}getStackId(){var t,e;return`radialBar-stack-${null!=(e=null==(t=this.seriesGrouping)?void 0:t.groupIndex)?e:this.id}-xValues`}};CM.className="RadialBarSeries",CM.type="radial-bar";var IM={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_INVERTED_LABEL_COLOUR,__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[sg.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},TM={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:CM,seriesDefaults:{axes:[{type:sg.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:sg.POLAR_AXIS_TYPE.RADIUS_CATEGORY}]},themeTemplate:IM,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},{Validate:EM,RATIO:OM}=rg,RM=class extends Rk{};Ng([EM(OM,{optional:!0})],RM.prototype,"columnWidthRatio",2),Ng([EM(OM,{optional:!0})],RM.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:PM,PolarAxis:_M}=rg,{RadialColumnShape:FM,getRadialColumnWidth:BM}=$p,zM=class extends bk{constructor(t){super(t,{animationResetFns:{item:Bk}}),this.properties=new RM}getStackId(){var t,e;return`radarColumn-stack-${null!=(e=null==(t=this.seriesGrouping)?void 0:t.groupIndex)?e:this.id}-yValues`}nodeFactory(){return new FM}getColumnTransitionFunctions(){return function(t){const e=_k();return{toFn:(i,s,n)=>{const{startAngle:a,endAngle:o}=e.to(s);let r,l,h,c,d;return"removed"===n?(r=i.innerRadius,l=i.innerRadius,h=i.columnWidth,c=i.axisInnerRadius,d=i.axisOuterRadius):(r=isNaN(s.innerRadius)?t:s.innerRadius,l=isNaN(s.outerRadius)?t:s.outerRadius,h=isNaN(s.columnWidth)?i.columnWidth:s.columnWidth,c=s.axisInnerRadius,d=s.axisOuterRadius),{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:c,axisOuterRadius:d,startAngle:a,endAngle:o}},fromFn:(i,s,n)=>{n=Fk(i,s,n),e.calculate(i,s,n);const{startAngle:a,endAngle:o}=e.from(s);let r,l,h,c,d;"removed"===n||"updated"===n?(r=i.innerRadius,l=i.outerRadius,h=i.columnWidth,c=i.axisInnerRadius,d=i.axisOuterRadius):(r=t,l=t,h=s.columnWidth,c=s.axisInnerRadius,d=s.axisOuterRadius);return{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:c,axisOuterRadius:d,startAngle:a,endAngle:o,phase:Pk.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}isRadiusAxisCircle(){const t=this.axes[PM.Y];return t instanceof _M&&"circle"===t.shape}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return BM(t,e,this.radius,i,s)}};zM.className="RadialColumnSeries",zM.type="radial-column";var GM={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_LABEL_COLOUR,__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:sg.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[sg.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:sg.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},KM={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:zM,seriesDefaults:{axes:[{type:sg.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:sg.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:GM,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},{DropShadow:VM,Label:WM}=$p,{CartesianSeriesProperties:YM,SeriesMarker:UM,SeriesTooltip:jM,Validate:HM,BOOLEAN:XM,COLOR_STRING:$M,LINE_DASH:qM,OBJECT:ZM,PLACEMENT:QM,POSITIVE_NUMBER:JM,RATIO:tL,STRING:eL}=rg,iL=class extends WM{constructor(){super(...arguments),this.placement="outside",this.padding=6}};Ng([HM(QM)],iL.prototype,"placement",2),Ng([HM(JM)],iL.prototype,"padding",2);var sL=class extends YM{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=(new VM).set({enabled:!1}),this.marker=new UM,this.label=new iL,this.tooltip=new jM,this.connectMissingData=!1}};Ng([HM(eL)],sL.prototype,"xKey",2),Ng([HM(eL)],sL.prototype,"yLowKey",2),Ng([HM(eL)],sL.prototype,"yHighKey",2),Ng([HM(eL,{optional:!0})],sL.prototype,"xName",2),Ng([HM(eL,{optional:!0})],sL.prototype,"yName",2),Ng([HM(eL,{optional:!0})],sL.prototype,"yLowName",2),Ng([HM(eL,{optional:!0})],sL.prototype,"yHighName",2),Ng([HM($M)],sL.prototype,"fill",2),Ng([HM(tL)],sL.prototype,"fillOpacity",2),Ng([HM($M)],sL.prototype,"stroke",2),Ng([HM(JM)],sL.prototype,"strokeWidth",2),Ng([HM(tL)],sL.prototype,"strokeOpacity",2),Ng([HM(qM)],sL.prototype,"lineDash",2),Ng([HM(JM)],sL.prototype,"lineDashOffset",2),Ng([HM(ZM)],sL.prototype,"shadow",2),Ng([HM(ZM)],sL.prototype,"marker",2),Ng([HM(ZM)],sL.prototype,"label",2),Ng([HM(ZM)],sL.prototype,"tooltip",2),Ng([HM(XM)],sL.prototype,"connectMissingData",2);var{valueProperty:nL,trailingValueProperty:aL,keyProperty:oL,ChartAxisDirection:rL,mergeDefaults:lL,updateLabelNode:hL,fixNumericExtent:cL,AreaSeriesTag:dL,buildResetPathFn:uL,resetLabelFn:pL,resetMarkerFn:gL,resetMarkerPositionFn:yL,pathSwipeInAnimation:mL,resetMotion:fL,markerSwipeScaleInAnimation:xL,seriesLabelFadeInAnimation:vL,animationValidation:bL,diff:SL,updateClipPath:kL}=rg,{getMarker:DL,PointerEvents:ML}=$p,{sanitizeHtml:LL,extent:AL,isNumber:wL}=og,NL={[rg.ChartAxisDirection.X]:["xKey"],[rg.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},CL={[rL.X]:["xName"],[rL.Y]:["yLowName","yHighName","yName"]},IL=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},TL=class t extends rg.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:2,directionKeys:NL,directionNames:CL,animationResetFns:{path:uL({getOpacity:()=>this.getOpacity()}),label:pL,marker:(t,e)=>Lg(Lg({},gL(t)),yL(t,e))}}),this.properties=new sL,this.NodeClickEvent=IL}processData(t){return Ig(this,null,(function*(){var e;if(!this.properties.isValid())return;const{xKey:i,yLowKey:s,yHighKey:n}=this.properties,{isContinuousX:a,isContinuousY:o}=this.isContinuous(),r=[],l=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&r.push(SL(this.processedData)),l&&r.push(bL(this)),yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:[oL(this,i,a,{id:"xValue"}),nL(this,s,o,{id:"yLowValue",invalidValue:void 0}),nL(this,n,o,{id:"yHighValue",invalidValue:void 0}),aL(this,s,o,{id:"yLowTrailingValue",invalidValue:void 0}),aL(this,n,o,{id:"yHighTrailingValue",invalidValue:void 0}),...r],dataVisible:this.visible}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i)return[];const{domain:{keys:[n],values:a}}=e;if(t===rL.X){const t=i.resolveProcessedDataDefById(this,"xValue"),e=s[rL.X];return"key"===(null==t?void 0:t.def.type)&&"category"===t.def.valueType?n:cL(AL(n),e)}{const t=a[i.resolveProcessedDataIndexById(this,"yLowValue").index],e=a[i.resolveProcessedDataIndexById(this,"yHighValue").index],s=[t[0]>e[0]?e[0]:t[0],e[1]<t[1]?t[1]:e[1]];return cL(s)}}createNodeData(){return Ig(this,null,(function*(){var e,i;const{data:s,dataModel:n,axes:a,visible:o}=this,r=a[rL.X],l=a[rL.Y];if(!(s&&o&&r&&l&&n))return[];const h=r.scale,c=l.scale,{xKey:d,yLowKey:u,yHighKey:p,connectMissingData:g,marker:y}=this.properties,m=`${u}-${p}`,f=(null!=(e=h.bandwidth)?e:0)/2,x=n.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue","yHighTrailingValue","yLowTrailingValue"]),v=(t,e,i)=>{const s=h.convert(t)+f,n=c.convert(e),a=c.convert(i);return[{point:{x:s,y:n},size:y.size,itemId:"high",yValue:e,xValue:t},{point:{x:s,y:a},size:y.size,itemId:"low",yValue:i,xValue:t}]},b=t=>{const e=t,{point:i}=e,s=wg(e,["point"]);return Ag(Lg({},s),{point:Ag(Lg({},i),{moveTo:!0})})},S=[],k=[],D={itemId:m,points:[]},M={itemId:m,points:[]},L={itemId:m,labelData:S,nodeData:k,fillData:M,strokeData:D,scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible},A=M.points,w=[],N=D.points,C=[];let I,T=-1/0,E=-1/0;return null==(i=this.processedData)||i.data.forEach(({keys:t,datum:e,values:i},s)=>{const a=n.resolveProcessedDataDefsValues(x,{keys:t,values:i}),{xValue:o,yHighValue:r,yLowValue:l}=a,h=null==r||null==l?[]:v(o,r,l),c=l>r;h.forEach(({point:{x:t,y:i},size:n,itemId:a="",yValue:h})=>{k.push({index:s,series:this,itemId:a,datum:e,midPoint:{x:t,y:i},yHighValue:r,yLowValue:l,xValue:o,xKey:d,yLowKey:u,yHighKey:p,point:{x:t,y:i,size:n}});const g=this.createLabelData({point:{x:t,y:i},value:h,yLowValue:l,yHighValue:r,itemId:a,inverted:c,datum:e,series:this});S.push(g)});const y=null!=T&&null!=E,m=null!=I&&y,f=null!=o,D=null!=r&&null!=l;let[M,L]=v(o,null!=r?r:0,null!=l?l:0);if(!g)if(D){if(!y){const[t,e]=v(o,0,0);A.push(t),w.push(e)}}else{const[t,e]=v(I,0,0);A.push(t),w.push(e)}f&&D&&(A.push(M),w.push(L));f&&D&&!m&&!g&&s>0&&(M=b(M),L=b(L)),f&&D&&(N.push(M),C.push(L)),I=o,T=r,E=l}),A.length>0&&(A[0]=b(A[0])),A.push(...w.reverse()),C.length>0&&(C[0]=b(C[0])),N.push(...C),[L]}))}createLabelData({point:t,value:e,itemId:i,inverted:s,datum:n,series:a}){const{xKey:o,yLowKey:r,yHighKey:l,xName:h,yName:c,yLowName:d,yHighName:u,label:p}=this.properties,{placement:g,padding:y=10}=p,m=s?"low"===i?"high":"low":i,f="outside"===g&&"high"===m||"inside"===g&&"low"===m?-1:1;return{x:t.x,y:t.y+y*f,series:a,itemId:i,datum:n,text:this.getLabelText(p,{value:e,datum:n,itemId:i,xKey:o,yLowKey:r,yHighKey:l,xName:h,yLowName:d,yHighName:u,yName:c},t=>wL(t)?t.toFixed(2):String(t)),textAlign:"center",textBaseline:-1===f?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(DL(t))}updatePathNodes(t){return Ig(this,null,(function*(){const{opacity:e,visible:i}=t,[s,n]=t.paths,a=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({tag:dL.Stroke,fill:void 0,lineJoin:n.lineCap="round",pointerEvents:ML.None,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),s.setProperties({tag:dL.Fill,stroke:void 0,lineJoin:"round",pointerEvents:ML.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:a,opacity:e,visible:i}),kL(this,n),kL(this,s)}))}updatePaths(t){return Ig(this,null,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:e},i)=>{const[s]=t[i],{path:n}=s;n.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y);n.closePath(),s.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:e},i)=>{const[,s]=t[i],{path:n}=s;n.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y);s.checkPathDirty()})}updateMarkerSelection(t){return Ig(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return Ig(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yLowKey:n,yHighKey:a,marker:o,fill:r,stroke:l,strokeWidth:h,fillOpacity:c,strokeOpacity:d}=this.properties,u=lL(i&&this.properties.highlightStyle.item,o.getStyle(),{fill:r,fillOpacity:c,stroke:l,strokeWidth:h,strokeOpacity:d});e.each((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:s,yHighKey:a,yLowKey:n},u)}),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return Ig(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=dL.Label,t.pointerEvents=ML.None})}))}updateLabelNodes(t){return Ig(this,null,(function*(){t.labelSelection.each((t,e)=>{hL(t,this.properties.label,e)})}))}getHighlightLabelData(t,e){const i=t.filter(t=>t.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(t=>t.datum===e.datum);return i.length>0?i:void 0}getTooltipHtml(t){const e=this.axes[rL.X],i=this.axes[rL.Y];if(!this.properties.isValid()||!e||!i)return"";const{id:s}=this,{xKey:n,yLowKey:a,yHighKey:o,xName:r,yName:l,yLowName:h,yHighName:c,fill:d,tooltip:u}=this.properties,{datum:p,itemId:g,xValue:y,yLowValue:m,yHighValue:f}=t,x=null!=d?d:"gray",v=LL(e.formatDatum(y)),b=LL(i.formatDatum(m)),S=LL(i.formatDatum(f)),k=null!=r?r:n,D=null!=h?h:a,M=null!=c?c:o,L=LL(l),A=l?`<b>${LL(k)}</b>: ${v}<br><b>${LL(D)}</b>: ${b}<br><b>${LL(M)}</b>: ${S}<br>`:`${v}: ${b} - ${S}`;return u.toTooltipHtml({title:L,content:A,backgroundColor:x},{seriesId:s,itemId:g,datum:p,xKey:n,yLowKey:a,yHighKey:o,xName:r,yLowName:h,yHighName:c,yName:l,color:x})}getLegendData(t){var e,i;if("category"!==t)return[];const{yLowKey:s,yHighKey:n,yName:a,yLowName:o,yHighName:r,fill:l,stroke:h,strokeWidth:c,strokeOpacity:d,lineDash:u,visible:p,marker:g}=this.properties,y=null!=a?a:`${null!=o?o:s} - ${null!=r?r:n}`;return[{legendType:"category",id:this.id,itemId:`${s}-${n}`,seriesId:this.id,enabled:p,label:{text:""+y},marker:{shape:g.shape,fill:null!=(e=g.fill)?e:l,stroke:null!=(i=g.stroke)?i:h,fillOpacity:g.fillOpacity,strokeOpacity:g.strokeOpacity,strokeWidth:g.strokeWidth},line:{stroke:h,strokeOpacity:d,strokeWidth:c,lineDash:u}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new $p.Group}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),mL(this,a,n.flat()),fL(e,yL),xL(this,a,e),vL(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:e,paths:i}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(i,e)}};TL.className="RangeAreaSeries",TL.type="range-area";var EL=TL,OL={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:sg.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_LABEL_COLOUR,__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[sg.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:RL}=rg,PL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:EL,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.NUMBER,position:sg.POSITION.LEFT,crosshair:{enabled:!0,snap:!1}},{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM}]},themeTemplate:OL,paletteFactory:t=>{const{marker:e}=RL(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},{DropShadow:_L,Label:FL}=$p,{AbstractBarSeriesProperties:BL,SeriesTooltip:zL,Validate:GL,COLOR_STRING:KL,FUNCTION:VL,LINE_DASH:WL,OBJECT:YL,PLACEMENT:UL,POSITIVE_NUMBER:jL,RATIO:HL,STRING:XL}=rg,$L=class extends FL{constructor(){super(...arguments),this.placement="inside",this.padding=6}};Ng([GL(UL)],$L.prototype,"placement",2),Ng([GL(jL)],$L.prototype,"padding",2);var qL=class extends BL{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=(new _L).set({enabled:!1}),this.label=new $L,this.tooltip=new zL}};Ng([GL(XL)],qL.prototype,"xKey",2),Ng([GL(XL)],qL.prototype,"yLowKey",2),Ng([GL(XL)],qL.prototype,"yHighKey",2),Ng([GL(XL,{optional:!0})],qL.prototype,"xName",2),Ng([GL(XL,{optional:!0})],qL.prototype,"yName",2),Ng([GL(XL,{optional:!0})],qL.prototype,"yLowName",2),Ng([GL(XL,{optional:!0})],qL.prototype,"yHighName",2),Ng([GL(KL)],qL.prototype,"fill",2),Ng([GL(HL)],qL.prototype,"fillOpacity",2),Ng([GL(KL)],qL.prototype,"stroke",2),Ng([GL(jL)],qL.prototype,"strokeWidth",2),Ng([GL(HL)],qL.prototype,"strokeOpacity",2),Ng([GL(WL)],qL.prototype,"lineDash",2),Ng([GL(jL)],qL.prototype,"lineDashOffset",2),Ng([GL(jL)],qL.prototype,"cornerRadius",2),Ng([GL(VL,{optional:!0})],qL.prototype,"formatter",2),Ng([GL(YL)],qL.prototype,"shadow",2),Ng([GL(YL)],qL.prototype,"label",2),Ng([GL(YL)],qL.prototype,"tooltip",2);var{SeriesNodePickMode:ZL,valueProperty:QL,keyProperty:JL,ChartAxisDirection:tA,getRectConfig:eA,updateRect:iA,checkCrisp:sA,updateLabelNode:nA,CategoryAxis:aA,SMALLEST_KEY_INTERVAL:oA,diff:rA,prepareBarAnimationFunctions:lA,midpointStartingBarPosition:hA,resetBarSelectionsFn:cA,fixNumericExtent:dA,seriesLabelFadeInAnimation:uA,resetLabelFn:pA,animationValidation:gA,createDatumId:yA}=rg,{ContinuousScale:mA,BandScale:fA,Rect:xA,PointerEvents:vA,motion:bA}=$p,{sanitizeHtml:SA,isNumber:kA,extent:DA}=og,MA={[rg.ChartAxisDirection.X]:["xKey"],[rg.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},LA={[tA.X]:["xName"],[tA.Y]:["yLowName","yHighName","yName"]},AA=class extends rg.SeriesNodeClickEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},wA=class t extends rg.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[ZL.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:MA,directionNames:LA,datumSelectionGarbageCollection:!1,animationResetFns:{datum:cA,label:pA}}),this.properties=new qL,this.NodeClickEvent=AA,this.groupScale=new fA,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===tA.X?t===tA.X?tA.Y:tA.X:t}processData(t){return Ig(this,null,(function*(){var e,i,s,n,a;if(!this.properties.isValid())return;const{xKey:o,yLowKey:r,yHighKey:l}=this.properties,h=mA.is(null==(e=this.getCategoryAxis())?void 0:e.scale),c=mA.is(null==(i=this.getValueAxis())?void 0:i.scale),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(rA(this.processedData)),d.push(gA(this)));const u=this.visible?{}:{forceValue:0},{processedData:p}=yield this.requestDataModel(t,null!=(s=this.data)?s:[],{props:[JL(this,o,h,{id:"xValue"}),QL(this,r,c,Lg({id:"yLowValue"},u)),QL(this,l,c,Lg({id:"yHighValue"},u)),...h?[oA]:[],...d],groupByKeys:!0});this.smallestDataInterval={x:null!=(a=null==(n=p.reduced)?void 0:n.smallestKeyInterval)?a:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:s}=this;if(!i||!s)return[];const{domain:{keys:[n],values:a}}=i;if(t===this.getCategoryDirection()){const a=s.resolveProcessedDataDefById(this,"xValue");if("key"===(null==a?void 0:a.def.type)&&"category"===(null==a?void 0:a.def.valueType))return n;const{reduced:{[oA.property]:o}={}}=i,r=null!=o&&isFinite(o)?o:0,l=null!=(e=DA(n))?e:[NaN,NaN],h=this.getCategoryAxis(),c=null==h?void 0:h.isReversed();if(t===tA.Y){const t=l[0]+(c?0:-r),e=l[1]+(c?r:0);return dA([t,e],h)}const d=l[0]+(c?-r:0),u=l[1]+(c?0:r);return dA([d,u],h)}{const t=a[s.resolveProcessedDataIndexById(this,"yLowValue").index],e=a[s.resolveProcessedDataIndexById(this,"yHighValue").index],i=[t[0]>e[0]?e[0]:t[0],e[1]<t[1]?t[1]:e[1]];return dA(i)}}createNodeData(){return Ig(this,null,(function*(){const{data:e,dataModel:i,groupScale:s,processedData:n,smallestDataInterval:a,ctx:{seriesStateManager:o},properties:{visible:r}}=this,l=this.getCategoryAxis(),h=this.getValueAxis();if(!(e&&r&&l&&h&&i))return[];const c=l.scale,d=h.scale,u=this.getBarDirection()===tA.X,{xKey:p,yLowKey:g,yHighKey:y,fill:m,stroke:f,strokeWidth:x}=this.properties,v=`${g}-${y}`,b=[],S=[],{index:k,visibleGroupCount:D}=o.getVisiblePeerGroupIndex(this);for(let t=0;t<D;t++)S.push(String(t));const M=mA.is(c)?c.calcBandwidth(null==a?void 0:a.x):c.bandwidth;s.domain=S,s.range=[0,null!=M?M:0],l instanceof aA?s.paddingInner=l.groupPaddingInner:s.padding=0,s.round=0!==s.padding;const L=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,A=i.resolveProcessedDataIndexById(this,"yLowValue").index,w=i.resolveProcessedDataIndexById(this,"yHighValue").index,N=i.resolveProcessedDataIndexById(this,"xValue").index;return null==n||n.data.forEach(({keys:e,datum:i,values:n},a)=>{n.forEach((n,o)=>{null!=b[o]||(b[o]={itemId:v,nodeData:[],labelData:[],scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible});const r=e[N],l=Math.round(c.convert(r))+s.convert(String(k)),h=n[A],S=n[w],D=Math.min(h,S),M=Math.max(h,S),C=Math.round(d.convert(D)),I=Math.round(d.convert(M)),T=C,E=Math.max(x,Math.abs(T-I)),O={x:u?Math.min(I,T):l,y:u?l:Math.min(I,T),width:u?E:L,height:u?L:E},R={x:O.x+O.width/2,y:O.y+O.height/2},P=this.createLabelData({rect:O,barAlongX:u,yLowValue:D,yHighValue:M,datum:i[o],series:this}),_={index:a,series:this,itemId:v,datum:i[o],xValue:r,yLowValue:h,yHighValue:S,yLowKey:g,yHighKey:y,xKey:p,x:O.x,y:O.y,width:O.width,height:O.height,midPoint:R,fill:m,stroke:f,strokeWidth:x,opacity:1,labels:P};b[o].nodeData.push(_),b[o].labelData.push(...P)})}),b}))}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:s,datum:n,series:a}){const{xKey:o,yLowKey:r,yHighKey:l,xName:h,yLowName:c,yHighName:d,yName:u,label:p}=this.properties,g={datum:n,xKey:o,yLowKey:r,yHighKey:l,xName:h,yLowName:c,yHighName:d,yName:u},{placement:y,padding:m}=p,f=m*("outside"===y?1:-1),x={x:t.x+(e?-f:t.width/2),y:t.y+(e?t.height/2:t.height+f),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(p,Lg({itemId:"low",value:i},g),t=>kA(t)?t.toFixed(2):""),itemId:"low",datum:n,series:a},v={x:t.x+(e?t.width+f:t.width/2),y:t.y+(e?t.height/2:-f),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(p,Lg({itemId:"high",value:s},g),t=>kA(t)?t.toFixed(2):""),itemId:"high",datum:n,series:a};return"outside"===y&&(x.textAlign=e?"right":"center",x.textBaseline=e?"middle":"top",v.textAlign=e?"left":"center",v.textBaseline=e?"middle":"bottom"),[x,v]}nodeFactory(){return new xA}updateDatumSelection(t){return Ig(this,null,(function*(){const{nodeData:e,datumSelection:i}=t,s=null!=e?e:[];return i.update(s,void 0,t=>this.getDatumId(t))}))}updateDatumNodes(t){return Ig(this,null,(function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,ctx:n}=this,{yLowKey:a,yHighKey:o,highlightStyle:{item:r}}=this.properties,l=this.axes[tA.X],h=sA(null==l?void 0:l.visibleRange),c=this.getCategoryDirection()===tA.X;e.each((t,e)=>{const{fillOpacity:l,strokeOpacity:d,strokeWidth:u,lineDash:p,lineDashOffset:g,formatter:y,shadow:m}=this.properties,f={fill:e.fill,stroke:e.stroke,fillOpacity:l,strokeOpacity:d,lineDash:p,lineDashOffset:g,fillShadow:m,strokeWidth:this.getStrokeWidth(u),cornerRadius:this.properties.cornerRadius,cornerRadiusBbox:void 0},x=c?e.width>0:e.height>0,v=eA({datum:e,lowValue:e.yLowValue,highValue:e.yHighValue,isHighlighted:i,style:f,highlightStyle:r,formatter:y,seriesId:s,itemId:e.itemId,ctx:n,yLowKey:a,yHighKey:o});v.crisp=h,v.visible=x,iA({rect:t,config:v})})}))}getHighlightLabelData(t,e){const i=t.filter(t=>t.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){return Ig(this,null,(function*(){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,t=>{t.pointerEvents=vA.None})}))}updateLabelNodes(t){return Ig(this,null,(function*(){t.labelSelection.each((t,e)=>{nA(t,this.properties.label,e)})}))}getTooltipHtml(t){var e,i;const{id:s,ctx:{callbackCache:n}}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!this.properties.isValid()||!a||!o)return"";const{xKey:r,yLowKey:l,yHighKey:h,xName:c,yLowName:d,yHighName:u,yName:p,fill:g,strokeWidth:y,formatter:m,tooltip:f}=this.properties,{datum:x,itemId:v,xValue:b,yLowValue:S,yHighValue:k}=t;let D;m&&(D=n.call(m,{datum:x,xKey:r,yLowKey:l,yHighKey:h,fill:g,strokeWidth:y,highlighted:!1,seriesId:s,itemId:v}));const M=null!=(i=null!=(e=null==D?void 0:D.fill)?e:g)?i:"gray",L=SA(a.formatDatum(b)),A=SA(o.formatDatum(S)),w=SA(o.formatDatum(k)),N=null!=c?c:r,C=null!=d?d:l,I=null!=u?u:h,T={title:SA(p),content:p?`<b>${SA(N)}</b>: ${L}<br><b>${SA(C)}</b>: ${A}<br><b>${SA(I)}</b>: ${w}<br>`:`${L}: ${A} - ${w}`,backgroundColor:M};return f.toTooltipHtml(T,{datum:x,xKey:r,xName:c,yLowKey:l,yLowName:d,yHighKey:h,yHighName:u,yName:p,color:M,seriesId:s,itemId:v})}getLegendData(t){const{id:e,visible:i}=this;if("category"!==t)return[];const{fill:s,stroke:n,strokeWidth:a,fillOpacity:o,strokeOpacity:r,yName:l,yLowName:h,yHighName:c,yLowKey:d,yHighKey:u}=this.properties;return[{legendType:"category",id:e,itemId:`${d}-${u}`,seriesId:e,enabled:i,label:{text:""+(null!=l?l:`${null!=h?h:d} - ${null!=c?c:u}`)},marker:{fill:s,stroke:n,fillOpacity:o,strokeOpacity:r,strokeWidth:a}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=lA(hA(this.isVertical(),"normal"));bA.fromToMotion(this.id,"datums",this.ctx.animationManager,t,i),uA(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e;const{datumSelections:i,labelSelections:s}=t,{processedData:n}=this,a=null==(e=null==n?void 0:n.reduced)?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=lA(hA(this.isVertical(),"fade"));bA.fromToMotion(this.id,"datums",this.ctx.animationManager,i,o,(t,e)=>yA(e.xValue),a),uA(this,"labels",this.ctx.animationManager,s)}getDatumId(t){return""+t.xValue}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}};wA.className="RangeBarSeries",wA.type="range-bar";var NA=wA,CA={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:sg.DEFAULT_FONT_FAMILY,color:sg.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside",__overrides__:sg.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[sg.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},IA={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:NA,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM},{type:sg.CARTESIAN_AXIS_TYPE.NUMBER,position:sg.POSITION.LEFT}]},themeTemplate:CA,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},groupable:!0,swapDefaultAxesCondition:({direction:t})=>"horizontal"===t},{HierarchySeriesProperties:TA,HighlightStyle:EA,SeriesTooltip:OA,Validate:RA,COLOR_STRING:PA,FUNCTION:_A,NUMBER:FA,OBJECT:BA,POSITIVE_NUMBER:zA,RATIO:GA,STRING:KA}=rg,VA=class extends EA{constructor(){super(...arguments),this.label=new fS,this.secondaryLabel=new fS}};Ng([RA(KA,{optional:!0})],VA.prototype,"fill",2),Ng([RA(GA,{optional:!0})],VA.prototype,"fillOpacity",2),Ng([RA(PA,{optional:!0})],VA.prototype,"stroke",2),Ng([RA(zA,{optional:!0})],VA.prototype,"strokeWidth",2),Ng([RA(GA,{optional:!0})],VA.prototype,"strokeOpacity",2),Ng([RA(BA)],VA.prototype,"label",2),Ng([RA(BA)],VA.prototype,"secondaryLabel",2);var WA=class extends TA{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.highlightStyle=new VA,this.label=new fS,this.secondaryLabel=new xS,this.tooltip=new OA}};Ng([RA(KA,{optional:!0})],WA.prototype,"sizeName",2),Ng([RA(KA,{optional:!0})],WA.prototype,"labelKey",2),Ng([RA(KA,{optional:!0})],WA.prototype,"secondaryLabelKey",2),Ng([RA(GA)],WA.prototype,"fillOpacity",2),Ng([RA(zA)],WA.prototype,"strokeWidth",2),Ng([RA(GA)],WA.prototype,"strokeOpacity",2),Ng([RA(FA,{optional:!0})],WA.prototype,"sectorSpacing",2),Ng([RA(FA,{optional:!0})],WA.prototype,"padding",2),Ng([RA(_A,{optional:!0})],WA.prototype,"formatter",2),Ng([RA(BA)],WA.prototype,"highlightStyle",2),Ng([RA(BA)],WA.prototype,"label",2),Ng([RA(BA)],WA.prototype,"secondaryLabel",2),Ng([RA(BA)],WA.prototype,"tooltip",2);var{fromToMotion:YA}=rg,{Sector:UA,Group:jA,Selection:HA,Text:XA}=$p,{sanitizeHtml:$A}=og,qA=(t,e=0,i=2*Math.PI/t.sumSize,s=Array.from(t,()=>{}))=>{let n=e;for(const e of t.children){const t=n,a=n+e.sumSize*i;s[e.index]={start:t,end:a},qA(e,t,i,s),n=a}return s},ZA=class t extends rg.HierarchySeries{constructor(){super(...arguments),this.properties=new WA,this.groupSelection=HA.select(this.contentGroup,jA),this.highlightSelection=HA.select(this.highlightGroup,jA),this.angleData=[]}processData(){return Ig(this,null,(function*(){const{childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r}=this.properties;Cg(t.prototype,this,"processData").call(this),this.angleData=qA(this.rootNode);const l=t=>"number"==typeof t?t.toFixed(2):"string"==typeof t?t:"";this.labelData=Array.from(this.rootNode,({datum:t,depth:h})=>{let c,d;if(null!=t&&null!=h&&null!=n){const d=t[n];c=this.getLabelText(this.properties.label,{depth:h,datum:t,childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r,value:d},l)}if(""===c&&(c=void 0),null!=t&&null!=h&&null!=a){const c=t[a];d=this.getLabelText(this.properties.secondaryLabel,{depth:h,datum:t,childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r,value:c},l)}return""===d&&(d=void 0),null!=c||null!=d?{label:c,secondaryLabel:d}:void 0})}))}updateSelections(){return Ig(this,null,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(null==t)return;if(null==t.seriesRect)return;const e=Array.from(this.rootNode),i=t=>{t.append([new UA,new XA({tag:0}),new XA({tag:1})])};this.groupSelection.update(e,i,t=>this.getDatumId(t)),this.highlightSelection.update(e,i,t=>this.getDatumId(t))}))}updateNodes(){return Ig(this,null,(function*(){var t;const{chart:e,data:i,maxDepth:s,labelData:n}=this;if(null==e||null==i||null==n)return;const{width:a,height:o}=e.seriesRect,{sectorSpacing:r=0,padding:l=0,highlightStyle:h}=this.properties;this.contentGroup.translationX=a/2,this.contentGroup.translationY=o/2,this.highlightGroup.translationX=a/2,this.highlightGroup.translationY=o/2;const c=.5*r,d=Math.min(a,o)/2/(s+1),u=-Math.PI/2,p=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight();(new XA).setFont(this.properties.label),this.rootNode.walk(t=>{const e=this.angleData[t.index];if(null!=t.depth&&null!=e){const i=e.end-e.start,s=(t.depth+.5)*d;t.midPoint.x=Math.cos(i)*s,t.midPoint.y=Math.sin(i)*s}});const g=(t,e,i)=>{var s,n,a,o,r,l,p,g,y,m;const{depth:f}=t,x=this.angleData[t.index];if(null==f||null==x)return void(e.visible=!1);let v,b,S,k,D;e.visible=!0,i&&(v=h.fill,b=h.fillOpacity,S=h.stroke,k=h.strokeWidth,D=h.strokeOpacity);const M=this.getSectorFormat(t,i),L=null!=(n=null!=(s=null==M?void 0:M.fill)?s:v)?n:t.fill,A=null!=(o=null!=(a=null==M?void 0:M.fillOpacity)?a:b)?o:this.properties.fillOpacity,w=null!=(l=null!=(r=null==M?void 0:M.stroke)?r:S)?l:t.stroke,N=null!=(g=null!=(p=null==M?void 0:M.strokeWidth)?p:k)?g:this.properties.strokeWidth,C=null!=(m=null!=(y=null==M?void 0:M.strokeOpacity)?y:D)?m:this.properties.strokeOpacity;e.fill=L,e.fillOpacity=A,e.stroke=w,e.strokeWidth=N,e.strokeOpacity=C,e.centerX=0,e.centerY=0,e.innerRadius=f*d,e.outerRadius=(f+1)*d,e.angleOffset=u,e.startAngle=x.start,e.endAngle=x.end,e.inset=c+.5*N};this.groupSelection.selectByClass(UA).forEach(t=>{g(t.datum,t,!1)}),this.highlightSelection.selectByClass(UA).forEach(t=>{const e=t.datum,i=p===e;t.visible=i,t.visible&&g(t.datum,t,i)});const y=Array.from(this.rootNode,(t,e)=>{const{depth:i}=t,s=n[e],a=this.angleData[e];if(null==i||null==a)return;const o=i*d+c,r=(i+1)*d-c,h=o>c?c/o:c,p=r>c?c/r:c,g=a.start+h,y=a.end+h-g,m=a.start+p,f=a.end+p-m,x=kS(null==s?void 0:s.label,this.properties.label,null==s?void 0:s.secondaryLabel,this.properties.secondaryLabel,{padding:l},e=>{var s;if(0===i&&(null==(s=t.parent)?void 0:s.sumSize)===t.sumSize){return{width:2*Math.sqrt(Dg(r,2)-Dg(.5*e,2)),height:e,meta:0}}const n=e,a=2*Math.sqrt(Dg(r,2)-Dg(o+n,2)),l=y<Math.PI?2*o*Math.tan(.5*y):1/0,h=Math.min(a,l);let c,d;return 0===i?(c=e,d=Math.sqrt(Dg(r,2)-Dg(c/2,2))-e/(2*Math.tan(.5*f))):(c=2*o*Math.tan(.5*y),d=Math.sqrt(Dg(r,2)-Dg(c/2,2))-o),h>=d?{width:h,height:n,meta:1}:{width:d,height:c,meta:2}});if(null==x)return;const{width:v,height:b,meta:S,label:k,secondaryLabel:D}=x,M=u+(a.start+a.end)/2,L=(Math.sin(M)>=0?3:12)&(Math.cos(M)>=0?6:9);let A;switch(S){case 0:A=0;break;case 1:{const t=r-(d-b)*.58,e=Math.sqrt(Dg(r-l,2)-Dg(v/2,2));A=Math.min(t,e);break}case 2:if(0===i){A=.5*(b/(2*Math.tan(.5*y))+.5*v+(Math.sqrt(Dg(r,2)-Dg(.5*b,2))-.5*v))}else A=.5*(o+r)}return{width:v,height:b,labelPlacement:S,circleQuarter:L,radius:A,theta:M,label:k,secondaryLabel:D}}),m=(t,e,i,s)=>{const{index:n,depth:a}=t,o=null==y?void 0:y[n],r=0===i?this.properties.label:this.properties.secondaryLabel,l=0===i?null==o?void 0:o.label:null==o?void 0:o.secondaryLabel;if(null==a||null==o||null==l)return void(e.visible=!1);const{height:h,labelPlacement:c,circleQuarter:d,radius:u,theta:p}=o;let g;if(s){g=(0===i?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color}switch(e.text=l.text,e.fontSize=l.fontSize,e.lineHeight=l.lineHeight,e.fontStyle=r.fontStyle,e.fontFamily=r.fontFamily,e.fontWeight=r.fontWeight,e.fill=null!=g?g:r.color,c){case 0:e.textAlign="center",e.textBaseline="top",e.translationX=0,e.translationY=(0===i?0:h-l.height)-.5*h,e.rotation=0;break;case 1:{const t=0!=(3&d),s=0===i==!t?u:u-(h-l.height);e.textAlign="center",e.textBaseline=t?"bottom":"top",e.translationX=Math.cos(p)*s,e.translationY=Math.sin(p)*s,e.rotation=t?p-.5*Math.PI:p+.5*Math.PI;break}case 2:{const t=0!=(6&d),s=0===i==!t?.5*(h-l.height):.5*(l.height-h);e.textAlign="center",e.textBaseline="middle",e.translationX=Math.cos(p)*u+Math.cos(p+Math.PI/2)*s,e.translationY=Math.sin(p)*u+Math.sin(p+Math.PI/2)*s,e.rotation=t?p:p+Math.PI;break}}e.visible=!0};this.groupSelection.selectByClass(XA).forEach(t=>{m(t.datum,t,t.tag,!1)}),this.highlightSelection.selectByClass(XA).forEach(t=>{const e=t.datum,i=p===e;t.visible=i,t.visible&&m(t.datum,t,t.tag,i)})}))}getSectorFormat(t,e){const{datum:i,fill:s,stroke:n,depth:a}=t,{ctx:{callbackCache:o},properties:{formatter:r}}=this;if(!r||null==i||null==a)return{};const{colorKey:l,labelKey:h,sizeKey:c,strokeWidth:d}=this.properties,u=o.call(r,{seriesId:this.id,depth:a,datum:i,colorKey:l,labelKey:h,sizeKey:c,fill:s,stroke:n,strokeWidth:d,highlighted:e});return null!=u?u:{}}getTooltipHtml(t){var e;const{id:i}=this,{tooltip:s,colorKey:n,colorName:a=n,labelKey:o,secondaryLabelKey:r,sizeKey:l,sizeName:h=l}=this.properties,{datum:c,depth:d}=t;if(null==c||null==d)return"";const u=null!=o?c[o]:void 0,p=this.getSectorFormat(t,!1),g=null!=(e=null==p?void 0:p.fill)?e:t.fill;if(!s.renderer&&!u)return"";const y=[],m=null!=r?c[r]:void 0;null!=m&&r!==n&&r!==l&&y.push($A(m));const f=null!=l?c[l]:void 0;null!=f&&y.push(`${h}: ${$A(f)}`);const x=null!=n?c[n]:void 0;null!=x&&y.push(`${a}: ${$A(x)}`);const v=y.join("<br>"),b={title:u,color:this.properties.label.color,backgroundColor:g,content:v};return s.toTooltipHtml(b,{depth:d,datum:c,colorKey:n,labelKey:o,secondaryLabelKey:r,sizeKey:l,title:u,color:g,seriesId:i})}createNodeData(){return Ig(this,null,(function*(){return[]}))}animateEmptyUpdateReady({datumSelections:t}){YA(this.id,"nodes",this.ctx.animationManager,t,{toFn:(t,e,i)=>({scalingX:1,scalingY:1}),fromFn:(t,e,i)=>"unknown"===i&&null!=e&&null==t.previousDatum?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}})}};ZA.className="SunburstSeries",ZA.type="sunburst";var QA=ZA,{EXTENDS_SERIES_DEFAULTS:JA,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:tw}=sg,ew={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:QA,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:JA,label:{fontSize:14,minimumFontSize:9,color:tw,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:tw,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:tw},secondaryLabel:{color:tw},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{properties:s}=i,{fills:n,strokes:a}=t(e);return{fills:n,strokes:a,colorRange:s.get(sg.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE)}}},{Label:iw}=$p,{BaseProperties:sw,HierarchySeriesProperties:nw,HighlightStyle:aw,SeriesTooltip:ow,Validate:rw,BOOLEAN:lw,COLOR_STRING:hw,FUNCTION:cw,NUMBER:dw,OBJECT:uw,POSITIVE_NUMBER:pw,RATIO:gw,STRING:yw,STRING_ARRAY:mw,TEXT_ALIGN:fw,VERTICAL_ALIGN:xw}=rg,vw=class extends iw{constructor(){super(...arguments),this.spacing=0}};Ng([rw(dw)],vw.prototype,"spacing",2);var bw=class extends sw{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new vw}};Ng([rw(yw,{optional:!0})],bw.prototype,"fill",2),Ng([rw(gw)],bw.prototype,"fillOpacity",2),Ng([rw(hw,{optional:!0})],bw.prototype,"stroke",2),Ng([rw(pw)],bw.prototype,"strokeWidth",2),Ng([rw(gw)],bw.prototype,"strokeOpacity",2),Ng([rw(fw)],bw.prototype,"textAlign",2),Ng([rw(pw)],bw.prototype,"gap",2),Ng([rw(pw)],bw.prototype,"padding",2),Ng([rw(lw)],bw.prototype,"interactive",2),Ng([rw(uw)],bw.prototype,"label",2);var Sw=class extends sw{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new fS,this.secondaryLabel=new xS}};Ng([rw(yw,{optional:!0})],Sw.prototype,"fill",2),Ng([rw(gw)],Sw.prototype,"fillOpacity",2),Ng([rw(hw,{optional:!0})],Sw.prototype,"stroke",2),Ng([rw(pw,{optional:!0})],Sw.prototype,"strokeWidth",2),Ng([rw(gw)],Sw.prototype,"strokeOpacity",2),Ng([rw(fw)],Sw.prototype,"textAlign",2),Ng([rw(xw)],Sw.prototype,"verticalAlign",2),Ng([rw(pw)],Sw.prototype,"gap",2),Ng([rw(pw)],Sw.prototype,"padding",2),Ng([rw(uw)],Sw.prototype,"label",2),Ng([rw(uw)],Sw.prototype,"secondaryLabel",2);var kw=class extends sw{constructor(){super(...arguments),this.label=new fS}};Ng([rw(yw,{optional:!0})],kw.prototype,"fill",2),Ng([rw(gw,{optional:!0})],kw.prototype,"fillOpacity",2),Ng([rw(hw,{optional:!0})],kw.prototype,"stroke",2),Ng([rw(pw,{optional:!0})],kw.prototype,"strokeWidth",2),Ng([rw(gw,{optional:!0})],kw.prototype,"strokeOpacity",2),Ng([rw(uw)],kw.prototype,"label",2);var Dw=class extends sw{constructor(){super(...arguments),this.label=new fS,this.secondaryLabel=new xS}};Ng([rw(yw,{optional:!0})],Dw.prototype,"fill",2),Ng([rw(gw,{optional:!0})],Dw.prototype,"fillOpacity",2),Ng([rw(hw,{optional:!0})],Dw.prototype,"stroke",2),Ng([rw(pw,{optional:!0})],Dw.prototype,"strokeWidth",2),Ng([rw(gw,{optional:!0})],Dw.prototype,"strokeOpacity",2),Ng([rw(uw)],Dw.prototype,"label",2),Ng([rw(uw)],Dw.prototype,"secondaryLabel",2);var Mw=class extends aw{constructor(){super(...arguments),this.group=new kw,this.tile=new Dw}};Ng([rw(uw)],Mw.prototype,"group",2),Ng([rw(uw)],Mw.prototype,"tile",2);var Lw=class extends nw{constructor(){super(...arguments),this.highlightStyle=new Mw,this.tooltip=new ow,this.group=new bw,this.tile=new Sw,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};Ng([rw(yw,{optional:!0})],Lw.prototype,"sizeName",2),Ng([rw(yw,{optional:!0})],Lw.prototype,"labelKey",2),Ng([rw(yw,{optional:!0})],Lw.prototype,"secondaryLabelKey",2),Ng([rw(cw,{optional:!0})],Lw.prototype,"formatter",2),Ng([rw(uw)],Lw.prototype,"highlightStyle",2),Ng([rw(uw)],Lw.prototype,"tooltip",2),Ng([rw(uw)],Lw.prototype,"group",2),Ng([rw(uw)],Lw.prototype,"tile",2),Ng([rw(mw)],Lw.prototype,"undocumentedGroupFills",2),Ng([rw(mw)],Lw.prototype,"undocumentedGroupStrokes",2);var{Rect:Aw,Group:ww,BBox:Nw,Selection:Cw,Text:Iw}=$p,{Color:Tw,Logger:Ew,isEqual:Ow,sanitizeHtml:Rw}=og,Pw=new Iw;function _w(t){if("string"==typeof t&&!Tw.validColorString(t)){const e="black";return Ew.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),e}return t}function Fw(t){return t.children.length>0?t.sumSize-t.size:t.size}var Bw={left:0,center:.5,right:1},zw={top:0,middle:.5,bottom:1},Gw=class t extends rg.HierarchySeries{constructor(){super(...arguments),this.properties=new Lw,this.groupSelection=Cw.select(this.contentGroup,ww),this.highlightSelection=Cw.select(this.highlightGroup,ww)}groupTitleHeight(t,e){var i,s;const n=null==(s=null==(i=this.labelData)?void 0:i[t.index])?void 0:s.label,{label:a}=this.properties.group;if(null!=n&&!(a.fontSize>e.width/3||a.fontSize>e.height/3)){const{height:t}=function(t,e){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a}=e;Pw.setProperties({text:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:o,height:r}=Pw.computeBBox();return{width:o,height:r}}(n,a);return Math.max(t,a.fontSize)}}getNodePadding(t,e){if(0===t.index)return{top:0,right:0,bottom:0,left:0};if(0===t.children.length){const{padding:t}=this.properties.tile;return{top:t,right:t,bottom:t,left:t}}const{label:{spacing:i},padding:s}=this.properties.group,n=this.groupTitleHeight(t,e);return{top:s+(null!=n?n+i:0),right:s,bottom:s,left:s}}processData(){return Ig(this,null,(function*(){var e;yield Cg(t.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,tile:h,group:c}=this.properties;if(!(null==(e=this.data)?void 0:e.length))return void(this.labelData=void 0);const d=t=>"number"==typeof t?t.toFixed(2):"string"==typeof t?t:"";this.labelData=Array.from(this.rootNode,({datum:t,depth:e,children:u})=>{const p=0===u.length,g=p?h.label:c.label;let y,m;if(null!=t&&null!=e&&null!=a){const h=t[a];y=this.getLabelText(g,{depth:e,datum:t,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:h},d)}if(""===y&&(y=void 0),p&&null!=t&&null!=e&&null!=o){const c=t[o];m=this.getLabelText(h.secondaryLabel,{depth:e,datum:t,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:c},d)}return""===m&&(m=void 0),null!=y||null!=m?{label:y,secondaryLabel:m}:void 0})}))}squarify(t,e,i){const{index:s,datum:n,children:a}=t;if(e.width<=0||e.height<=0)return void(i[s]=void 0);i[s]=0!==s?e:void 0;const o=Array.from(a,(t,e)=>e).filter(t=>Fw(a[t])>0).sort((t,e)=>Fw(a[e])-Fw(a[t])),r=t=>{const e=o[t];return a[e]},l=o.every(t=>0===a[t].children.length),h=null!=n?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0},c=e.width-h.left-h.right,d=e.height-h.top-h.bottom;if(c<=0||d<=0)return;const u=o.length;let p=0,g=0,y=1/0,m=o.reduce((t,e)=>t+Fw(a[e]),0);const f=new Nw(e.x+h.left,e.y+h.top,c,d),x=f.clone();for(let t=0;t<u;t++){const e=Fw(r(t)),s=Fw(r(g)),n=x.width<x.height;p+=e;const a=n?x.height:x.width,o=n?x.width:x.height,h=o*s/p;let c=a*p/m;const d=Math.max(h,c)/Math.min(h,c),u=Math.abs(1-d);if(u<y){y=u;continue}p-=e,c=a*p/m;let v=n?x.x:x.y;for(let e=g;e<t;e++){const t=r(e),s=Fw(t),a=n?v:x.x,h=n?x.y:v,d=o*s/p,u=new Nw(a,h,n?d:c,n?c:d);this.applyGap(f,u,l),this.squarify(t,u,i),m-=s,v+=d}n?(x.y+=c,x.height-=c):(x.x+=c,x.width-=c),g=t,p=0,y=1/0,t--}const v=x.width<x.height;let b=v?x.x:x.y;for(let t=g;t<u;t++){const e=r(t),s=v?b:x.x,n=v?x.y:b,a=Fw(e)/m,o=x.width*(v?a:1),h=x.height*(v?1:a),c=new Nw(s,n,o,h);this.applyGap(f,c,l),this.squarify(e,c,i),b+=v?o:h}}applyGap(t,e,i){const s=i?.5*this.properties.tile.gap:.5*this.properties.group.gap,n=t=>({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),a=n(t),o=n(e);["top","right","bottom","left"].forEach(t=>{Ow(a[t],o[t])||e.shrink(s,t)})}createNodeData(){return Ig(this,null,(function*(){return[]}))}updateSelections(){return Ig(this,null,(function*(){var t;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=null!=(t=this.chart)?t:{};if(!e)return;const i=Array.from(this.rootNode),s=t=>{t.append([new Aw,new Iw({tag:0}),new Iw({tag:1})])};this.groupSelection.update(i,s,t=>this.getDatumId(t)),this.highlightSelection.update(i,s,t=>this.getDatumId(t))}))}getTileFormat(t,e){var i,s;const{datum:n,depth:a,children:o}=t,{colorKey:r,labelKey:l,secondaryLabelKey:h,sizeKey:c,tile:d,group:u,formatter:p}=this.properties;if(!p||null==n||null==a)return{};const g=0===o.length,y=null!=(i=g?d.fill:u.fill)?i:t.fill,m=null!=(s=g?d.stroke:u.stroke)?s:t.stroke,f=g?d.strokeWidth:u.strokeWidth,x=this.ctx.callbackCache.call(p,{seriesId:this.id,depth:a,datum:n,colorKey:r,labelKey:l,secondaryLabelKey:h,sizeKey:c,fill:y,stroke:m,strokeWidth:f,highlighted:e});return null!=x?x:{}}getNodeFill(t){var e,i,s;if(0===t.children.length)return null!=(e=this.properties.tile.fill)?e:t.fill;const{undocumentedGroupFills:n}=this.properties,a=n[Math.min(null!=(i=t.depth)?i:0,n.length)];return null!=(s=this.properties.group.fill)?s:a}getNodeStroke(t){var e,i,s;if(0===t.children.length)return null!=(e=this.properties.tile.stroke)?e:t.stroke;const{undocumentedGroupStrokes:n}=this.properties,a=n[Math.min(null!=(i=t.depth)?i:0,n.length)];return null!=(s=this.properties.group.stroke)?s:a}updateNodes(){return Ig(this,null,(function*(){var t,e;const{rootNode:i,data:s}=this,{highlightStyle:n,tile:a,group:o}=this.properties,{seriesRect:r}=null!=(t=this.chart)?t:{};if(!r||!s)return;const{width:l,height:h}=r,c=Array.from(this.rootNode,()=>{});this.squarify(i,new Nw(0,0,l,h),c);let d=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();null==d||this.properties.group.interactive||0===d.children.length||(d=void 0),this.updateNodeMidPoint(c);const u=(t,e,i)=>{var s,r,l,h,d,u,p,g,y,m;const f=c[t.index];if(null==f)return void(e.visible=!1);const x=0===t.children.length;let v,b,S,k,D;if(i){const{tile:t,group:e}=n;v=x?t.fill:e.fill,b=x?t.fillOpacity:e.fillOpacity,S=x?t.stroke:e.stroke,k=x?t.strokeWidth:e.strokeWidth,D=x?t.strokeOpacity:e.strokeOpacity}const M=this.getTileFormat(t,i),L=null!=(r=null!=(s=null==M?void 0:M.fill)?s:v)?r:this.getNodeFill(t),A=null!=(h=null!=(l=null==M?void 0:M.fillOpacity)?l:b)?h:x?a.fillOpacity:o.fillOpacity,w=null!=(u=null!=(d=null==M?void 0:M.stroke)?d:S)?u:this.getNodeStroke(t),N=null!=(g=null!=(p=null==M?void 0:M.strokeWidth)?p:k)?g:x?a.strokeWidth:o.strokeWidth,C=null!=(m=null!=(y=null==M?void 0:M.strokeOpacity)?y:D)?m:x?a.strokeOpacity:o.strokeOpacity;e.fill=_w(L),e.fillOpacity=A,e.stroke=_w(w),e.strokeWidth=N,e.strokeOpacity=C,e.crisp=!0,e.x=f.x,e.y=f.y,e.width=f.width,e.height=f.height,e.visible=!0};this.groupSelection.selectByClass(Aw).forEach(t=>u(t.datum,t,!1)),this.highlightSelection.selectByClass(Aw).forEach(t=>{var e;const i=t.datum===d;t.visible=i||null!=(e=null==d?void 0:d.contains(t.datum))&&e,t.visible&&u(t.datum,t,i)});const p=Array.from(this.rootNode,t=>{var e,i,s,n;const{index:r,children:l}=t,h=c[r],d=null==(e=this.labelData)?void 0:e[r];if(null!=h&&null!=d){if(0===l.length){const t={width:h.width,height:h.height,meta:null},e=kS(d.label,this.properties.tile.label,d.secondaryLabel,this.properties.tile.secondaryLabel,{padding:a.padding},()=>t);if(null==e)return;const{height:n,label:o,secondaryLabel:r}=e,{textAlign:l,verticalAlign:c,padding:u}=a,p=null!=(i=Bw[l])?i:.5,g=h.x+u+(h.width-2*u)*p,y=null!=(s=zw[c])?s:.5,m=h.y+u+.5*n+(h.height-2*u-n)*y;return{label:null!=o?{text:o.text,fontSize:o.fontSize,lineHeight:o.lineHeight,style:this.properties.tile.label,x:g,y:m-.5*(n-o.height)}:void 0,secondaryLabel:null!=r?{text:r.text,fontSize:r.fontSize,lineHeight:r.fontSize,style:this.properties.tile.secondaryLabel,x:g,y:m+.5*(n-r.height)}:void 0,verticalAlign:"middle",textAlign:l}}if(null!=(null==d?void 0:d.label)){const{padding:e,textAlign:i}=o,s=this.groupTitleHeight(t,h);if(null==s)return;const a=h.width-2*e,{text:r}=Iw.wrap(d.label,h.width-2*e,1/0,o.label,"never"),l=null!=(n=Bw[i])?n:.5;return{label:{text:r,fontSize:o.label.fontSize,lineHeight:fS.lineHeight(o.label.fontSize),style:this.properties.group.label,x:h.x+e+a*l,y:h.y+e+.5*s},secondaryLabel:void 0,verticalAlign:"middle",textAlign:i}}}}),g=(t,e,i,s)=>{const a=0===t.children.length,o=p[t.index],r=0===i?null==o?void 0:o.label:null==o?void 0:o.secondaryLabel;if(null==o||null==r)return void(e.visible=!1);let l;if(s){const{tile:t,group:e}=n;l=a?0===i?t.label.color:t.secondaryLabel.color:e.label.color}e.text=r.text,e.fontSize=r.fontSize,e.lineHeight=r.lineHeight,e.fontStyle=r.style.fontStyle,e.fontFamily=r.style.fontFamily,e.fontWeight=r.style.fontWeight,e.fill=null!=l?l:r.style.color,e.textAlign=o.textAlign,e.textBaseline=o.verticalAlign,e.x=r.x,e.y=r.y,e.visible=!0};this.groupSelection.selectByClass(Iw).forEach(t=>{g(t.datum,t,t.tag,!1)}),this.highlightSelection.selectByClass(Iw).forEach(t=>{var e;const i=t.datum===d;t.visible=i||null!=(e=null==d?void 0:d.contains(t.datum))&&e,t.visible&&g(t.datum,t,t.tag,i)})}))}updateNodeMidPoint(t){this.rootNode.walk(e=>{const i=t[e.index];null!=i&&(e.midPoint.x=i.x+i.width/2,e.midPoint.y=i.y)})}getTooltipHtml(t){var e;const{datum:i,depth:s}=t,{id:n}=this,{tooltip:a,colorKey:o,colorName:r=o,labelKey:l,secondaryLabelKey:h,sizeKey:c,sizeName:d=c}=this.properties,u=0===t.children.length,p=u||this.properties.group.interactive;if(null==i||null==s||!p)return"";const g=null!=l?i[l]:void 0,y=this.getTileFormat(t,!1),m=null!=(e=null==y?void 0:y.fill)?e:this.getNodeFill(t);if(!a.renderer&&!g)return"";const f=[],x=null!=h?i[h]:void 0;null!=x&&h!==o&&h!==c&&f.push(Rw(x));const v=null!=c?i[c]:void 0;null!=v&&f.push(`${d}: ${Rw(v)}`);const b=null!=o?i[o]:void 0;null!=b&&f.push(`${r}: ${Rw(b)}`);const S=f.join("<br>"),k={title:g,color:u?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:m,content:S};return a.toTooltipHtml(k,{depth:s,datum:i,colorKey:o,labelKey:l,secondaryLabelKey:h,sizeKey:c,title:g,color:m,seriesId:n})}};Gw.className="TreemapSeries",Gw.type="treemap";var Kw=Gw,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Vw,DEFAULT_FONT_FAMILY:Ww,DEFAULT_HIERARCHY_FILLS:Yw,DEFAULT_HIERARCHY_STROKES:Uw,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:jw,EXTENDS_SERIES_DEFAULTS:Hw,DEFAULT_LABEL_COLOUR:Xw,FONT_WEIGHT:$w}=sg,qw={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:Kw,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:Hw,group:{label:{enabled:!0,color:Xw,fontStyle:void 0,fontWeight:$w.NORMAL,fontSize:12,fontFamily:Ww,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:jw,fontStyle:void 0,fontWeight:$w.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:Ww,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:jw,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:Ww,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:Xw},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:jw},secondaryLabel:{color:jw},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{properties:s}=i,{fills:n,strokes:a}=t(e);return{fills:n,strokes:a,colorRange:s.get(Vw),undocumentedGroupFills:s.get(Yw),undocumentedGroupStrokes:s.get(Uw)}}},{DropShadow:Zw,Label:Qw}=$p,{AbstractBarSeriesProperties:Jw,BaseProperties:tN,PropertiesArray:eN,SeriesTooltip:iN,Validate:sN,BOOLEAN:nN,COLOR_STRING:aN,FUNCTION:oN,LINE_DASH:rN,NUMBER:lN,OBJECT:hN,OBJECT_ARRAY:cN,POSITIVE_NUMBER:dN,RATIO:uN,STRING:pN,UNION:gN}=rg,yN=class extends tN{};Ng([sN(gN(["subtotal","total"],"a total type"))],yN.prototype,"totalType",2),Ng([sN(lN)],yN.prototype,"index",2),Ng([sN(pN)],yN.prototype,"axisLabel",2);var mN=class extends tN{};Ng([sN(oN,{optional:!0})],mN.prototype,"renderer",2);var fN=class extends Qw{constructor(){super(...arguments),this.placement="end",this.padding=6}};Ng([sN(gN(["start","end","inside"],"a placement"))],fN.prototype,"placement",2),Ng([sN(dN)],fN.prototype,"padding",2);var xN=class extends tN{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=(new Zw).set({enabled:!1}),this.label=new fN,this.tooltip=new mN}};Ng([sN(pN,{optional:!0})],xN.prototype,"name",2),Ng([sN(aN)],xN.prototype,"fill",2),Ng([sN(aN)],xN.prototype,"stroke",2),Ng([sN(uN)],xN.prototype,"fillOpacity",2),Ng([sN(uN)],xN.prototype,"strokeOpacity",2),Ng([sN(rN)],xN.prototype,"lineDash",2),Ng([sN(dN)],xN.prototype,"lineDashOffset",2),Ng([sN(dN)],xN.prototype,"strokeWidth",2),Ng([sN(dN)],xN.prototype,"cornerRadius",2),Ng([sN(oN,{optional:!0})],xN.prototype,"formatter",2),Ng([sN(hN)],xN.prototype,"shadow",2),Ng([sN(hN)],xN.prototype,"label",2),Ng([sN(hN)],xN.prototype,"tooltip",2);var vN=class extends tN{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};Ng([sN(nN)],vN.prototype,"enabled",2),Ng([sN(aN)],vN.prototype,"stroke",2),Ng([sN(uN)],vN.prototype,"strokeOpacity",2),Ng([sN(rN)],vN.prototype,"lineDash",2),Ng([sN(dN)],vN.prototype,"lineDashOffset",2),Ng([sN(dN)],vN.prototype,"strokeWidth",2);var bN=class extends tN{constructor(){super(...arguments),this.positive=new xN,this.negative=new xN,this.total=new xN}};Ng([sN(hN)],bN.prototype,"positive",2),Ng([sN(hN)],bN.prototype,"negative",2),Ng([sN(hN)],bN.prototype,"total",2);var SN=class extends Jw{constructor(){super(...arguments),this.item=new bN,this.totals=new eN(yN),this.line=new vN,this.tooltip=new iN}};Ng([sN(pN)],SN.prototype,"xKey",2),Ng([sN(pN)],SN.prototype,"yKey",2),Ng([sN(pN,{optional:!0})],SN.prototype,"xName",2),Ng([sN(pN,{optional:!0})],SN.prototype,"yName",2),Ng([sN(hN)],SN.prototype,"item",2),Ng([sN(cN)],SN.prototype,"totals",2),Ng([sN(hN)],SN.prototype,"line",2),Ng([sN(hN)],SN.prototype,"tooltip",2);var{adjustLabelPlacement:kN,SeriesNodePickMode:DN,fixNumericExtent:MN,valueProperty:LN,keyProperty:AN,accumulativeValueProperty:wN,trailingAccumulatedValueProperty:NN,ChartAxisDirection:CN,getRectConfig:IN,updateRect:TN,checkCrisp:EN,updateLabelNode:ON,prepareBarAnimationFunctions:RN,collapsedStartingBarPosition:PN,resetBarSelectionsFn:_N,seriesLabelFadeInAnimation:FN,resetLabelFn:BN,animationValidation:zN}=rg,{ContinuousScale:GN,Rect:KN,motion:VN}=$p,{sanitizeHtml:WN,isContinuous:YN,isNumber:UN}=og,jN=class t extends rg.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[DN.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:_N,label:BN}}),this.properties=new SN,this.seriesItemTypes=new Set(["positive","negative","total"]),this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===CN.X?t===CN.X?CN.Y:CN.X:t}processData(t){return Ig(this,null,(function*(){var e,i,s;const{xKey:n,yKey:a,totals:o}=this.properties,{data:r=[]}=this;if(!this.properties.isValid())return;const l={missingValue:void 0,invalidValue:void 0},h=[],c=o.reduce((t,e)=>{const i=t.get(e.index);return i?i.push(e):t.set(e.index,[e]),t},new Map);r.forEach((t,e)=>{var i;h.push(t),null==(i=c.get(e))||i.forEach(t=>h.push(Ag(Lg({},t.toJson()),{[n]:t.axisLabel})))});const d=GN.is(null==(e=this.getCategoryAxis())?void 0:e.scale),u=[];this.ctx.animationManager.isSkipped()||u.push(zN(this));const{processedData:p}=yield this.requestDataModel(t,h,{props:[AN(this,n,d,{id:"xValue"}),wN(this,a,!0,Ag(Lg({},l),{id:"yCurrent"})),wN(this,a,!0,Ag(Lg({},l),{missingValue:0,id:"yCurrentTotal"})),wN(this,a,!0,Ag(Lg({},l),{id:"yCurrentPositive",validation:t=>YN(t)&&t>=0})),wN(this,a,!0,Ag(Lg({},l),{id:"yCurrentNegative",validation:t=>YN(t)&&t<0})),NN(this,a,!0,Ag(Lg({},l),{id:"yPrevious"})),LN(this,a,!0,{id:"yRaw"}),LN(this,"totalType",!1,{id:"totalTypeValue",missingValue:void 0,validation:t=>"total"===t||"subtotal"===t}),...d?[rg.SMALLEST_KEY_INTERVAL]:[],...u],dataVisible:this.visible});this.smallestDataInterval={x:null!=(s=null==(i=p.reduced)?void 0:i.smallestKeyInterval)?s:1/0,y:1/0},this.updateSeriesItemTypes(),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:s}=this;if(!i||!s)return[];const{domain:{keys:[n],values:a},reduced:{[rg.SMALLEST_KEY_INTERVAL.property]:o}={}}=i,r=s.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if("key"===(null==r?void 0:r.def.type)&&"category"===(null==r?void 0:r.def.valueType))return n;const i=null!=o&&isFinite(o)?o:0,s=null!=(e=rg.extent(n))?e:[NaN,NaN],a=this.getCategoryAxis(),l=null==a?void 0:a.isReversed();if(t===CN.Y){const t=s[0]+(l?0:-i),e=s[1]+(l?i:0);return MN([t,e],a)}const h=s[0]+(l?-i:0),c=s[1]+(l?0:i);return MN([h,c],a)}{const t=a[s.resolveProcessedDataIndexById(this,"yCurrent").index],e=[t[0]>0?0:t[0],t[1]<0?0:t[1]];return MN(e)}}createNodeData(){return Ig(this,null,(function*(){var e,i,s;const{data:n,dataModel:a,smallestDataInterval:o}=this,{visible:r,line:l}=this.properties,h=this.getCategoryAxis(),c=this.getValueAxis();if(!(n&&r&&h&&c&&a))return[];const d=h.scale,u=c.scale,p=h.isReversed(),g=this.getBarDirection()===CN.X,y=null!=(e=GN.is(d)?d.calcBandwidth(null==o?void 0:o.x):d.bandwidth)?e:10;if("ungrouped"!==(null==(i=this.processedData)?void 0:i.type))return[];const m=[],f=a.resolveProcessedDataIndexById(this,"yRaw").index,x=a.resolveProcessedDataIndexById(this,"xValue").index,v=a.resolveProcessedDataIndexById(this,"totalTypeValue").index,b=new Map,S=[],k=a.resolveProcessedDataIndexById(this,"yCurrent").index,D=a.resolveProcessedDataIndexById(this,"yPrevious").index,M=a.resolveProcessedDataIndexById(this,"yCurrentTotal").index;let L=0;const{xKey:A,yKey:w,xName:N,yName:C}=this.properties;null==(s=this.processedData)||s.data.forEach(({keys:e,datum:i,values:s},n)=>{const a=s[v],o=this.isSubtotal(a),r=this.isTotal(a),h=r||o,c=e[x],I=Math.round(d.convert(c)),T=s[f],{cumulativeValue:E,trailingValue:O}=function(t,e,i){return t||e?{cumulativeValue:i[M],trailingValue:e?L:0}:{cumulativeValue:i[k],trailingValue:i[D]}}(r,o,s);h&&(L=null!=E?E:0);const R=Math.round(u.convert(E)),P=Math.round(u.convert(O)),_=function(t,e,i,s,n){return t?s:e?(null!=s?s:0)-(null!=n?n:0):i}(r,o,T,E,O),F=(null!=_?_:0)>=0,B=this.getSeriesItemType(F,a),{fill:z,stroke:G,strokeWidth:K,label:V}=this.getItemConfig(B),W=F?R:P,Y=F?P:R,U=Math.max(K,Math.abs(Y-W)),j=B;let H=b.get(j);void 0===H&&(H=m.length,b.set(j,H)),null!=m[H]||(m[H]={itemId:j,nodeData:[],labelData:[],pointData:[],scales:Cg(t.prototype,this,"calculateScaling").call(this),visible:this.visible});const X={x:g?Math.min(W,Y):I,y:g?I:Math.min(W,Y),width:g?U:y,height:g?y:U},$={x:X.x+X.width/2,y:X.y+X.height/2},q=h?R:P,Z=Math.floor(l.strokeWidth)%2/2,Q=p?R:q,J=p?q:R;let tt,et;g?(tt={x:Q+Z,y:X.y},et={x:J+Z,y:X.y+X.height}):(tt={x:X.x,y:Q+Z},et={x:X.x+X.width,y:J+Z});const it={x:p?et.x:tt.x,y:p?et.y:tt.y,x2:p?tt.x:et.x,y2:p?tt.y:et.y,size:0};S.push(it);const st=this.getLabelText(V,{itemId:"subtotal"===j?"total":j,value:_,datum:i,xKey:A,yKey:w,xName:N,yName:C},t=>UN(t)?t.toFixed(2):String(t)),nt={index:n,series:this,itemId:j,datum:i,cumulativeValue:null!=E?E:0,xValue:c,yValue:_,yKey:w,xKey:A,x:X.x,y:X.y,width:X.width,height:X.height,midPoint:$,fill:z,stroke:G,strokeWidth:K,opacity:1,label:Lg({text:st},kN({isPositive:(null!=_?_:-1)>=0,isVertical:!g,placement:V.placement,padding:V.padding,rect:X}))};m[H].nodeData.push(nt),m[H].labelData.push(nt)});const I=this.properties.line.enabled;return m.length>0&&void 0!==k&&I&&(m[0].pointData=S),m}))}updateSeriesItemTypes(){var t,e;const{dataModel:i,seriesItemTypes:s,processedData:n}=this;if(!i||!n)return;s.clear();const a=i.resolveProcessedDataIndexById(this,"yCurrentPositive").index,o=i.resolveProcessedDataIndexById(this,"yCurrentNegative").index,r=i.resolveProcessedDataIndexById(this,"totalTypeValue").index,l=null!=(t=n.domain.values[a])?t:[],h=null!=(e=n.domain.values[o])?e:[];l.length>0&&s.add("positive"),h.length>0&&s.add("negative");const c=null==n?void 0:n.domain.values[r];c&&c.forEach(t=>{"total"!==t&&"subtotal"!==t||s.add("total")})}isSubtotal(t){return"subtotal"===t}isTotal(t){return"total"===t}nodeFactory(){return new KN}getSeriesItemType(t,e){return null!=e?e:t?"positive":"negative"}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){return Ig(this,null,(function*(){const{nodeData:e,datumSelection:i}=t,s=null!=e?e:[];return i.update(s)}))}updateDatumNodes(t){return Ig(this,null,(function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,ctx:n}=this,{yKey:a,highlightStyle:{item:o}}=this.properties,r=this.getCategoryAxis(),l=EN(null==r?void 0:r.visibleRange),h=this.getCategoryDirection()===CN.X;e.each((t,e)=>{const r=e.itemId,{fillOpacity:c,strokeOpacity:d,strokeWidth:u,lineDash:p,lineDashOffset:g,cornerRadius:y,formatter:m,shadow:f}=this.getItemConfig(r),x={fill:e.fill,stroke:e.stroke,fillOpacity:c,strokeOpacity:d,lineDash:p,lineDashOffset:g,fillShadow:f,strokeWidth:this.getStrokeWidth(u),cornerRadius:y,cornerRadiusBbox:void 0},v=h?e.width>0:e.height>0,b=IN({datum:e,isHighlighted:i,style:x,highlightStyle:o,formatter:m,seriesId:s,itemId:e.itemId,ctx:n,value:e.yValue,yKey:a});b.crisp=l,b.visible=v,TN({rect:t,config:b})})}))}updateLabelSelection(t){return Ig(this,null,(function*(){const{labelData:e,labelSelection:i}=t;if(0===e.length)return i.update([]);const s=e[0].itemId,{label:n}=this.getItemConfig(s),a=n.enabled?e:[];return i.update(a)}))}updateLabelNodes(t){return Ig(this,null,(function*(){t.labelSelection.each((t,e)=>{ON(t,this.getItemConfig(e.itemId).label,e.label)})}))}getTooltipHtml(t){var e,i,s;const n=this.getCategoryAxis(),a=this.getValueAxis();if(!this.properties.isValid()||!n||!a)return"";const{id:o}=this,{xKey:r,yKey:l,xName:h,yName:c,tooltip:d}=this.properties,{datum:u,itemId:p,xValue:g,yValue:y}=t,{fill:m,strokeWidth:f,name:x,formatter:v}=this.getItemConfig(p);let b;v&&(b=this.ctx.callbackCache.call(v,{datum:u,value:y,xKey:r,yKey:l,fill:m,strokeWidth:f,highlighted:!1,seriesId:o,itemId:t.itemId}));const S=null!=(i=null!=(e=null==b?void 0:b.fill)?e:m)?i:"gray",k=WN(n.formatDatum(g)),D=WN(a.formatDatum(y)),M=this.isTotal(p),L=this.isSubtotal(p),A=M?"Total":L?"Subtotal":null!=(s=null!=x?x:c)?s:l,w=WN(c),N=`<b>${WN(null!=h?h:r)}</b>: ${k}<br/><b>${WN(A)}</b>: ${D}`;return d.toTooltipHtml({title:w,content:N,backgroundColor:S},{seriesId:o,itemId:p,datum:u,xKey:r,yKey:l,xName:h,yName:c,color:S})}getLegendData(t){if("category"!==t)return[];const{id:e,seriesItemTypes:i}=this,s=[];return i.forEach(t=>{const{fill:i,stroke:n,fillOpacity:a,strokeOpacity:o,strokeWidth:r,name:l}=this.getItemConfig(t);var h;s.push({legendType:"category",id:e,itemId:t,seriesId:e,enabled:!0,label:{text:null!=l?l:(h=t,h.charAt(0).toUpperCase()+h.substring(1))},marker:{fill:i,stroke:n,fillOpacity:a,strokeOpacity:o,strokeWidth:r}})}),s}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,contextData:i,paths:s}){const n=RN(PN(this.isVertical(),this.axes,"normal"));VN.fromToMotion(this.id,"datums",this.ctx.animationManager,t,n),FN(this,"labels",this.ctx.animationManager,e),i.forEach(({pointData:t},e)=>{if(0!==e||!t)return;const[i]=s[e];this.isVertical()?this.animateConnectorLinesVertical(i,t):this.animateConnectorLinesHorizontal(i,t)})}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),n=null==s?void 0:s.isReversed(),a=n?(t,e)=>t<e:(t,e)=>t>e,o=null==s?void 0:s.scale.convert(0),r=e.reduce((t,e)=>(a(e.x,t)&&(t=e.x),t),n?1/0:0),l=(t,e,i,s,n)=>(t-e)/(i-e)*(n-s)+s;this.ctx.animationManager.animate({id:this.id+"_datums",groupId:this.id,phase:"initial",from:o,to:r,ease:rg.Motion.easeOut,onUpdate(s){i.clear({trackChanges:!0}),e.forEach((t,e)=>{const n=l(s,o,r,o,t.x),a=l(s,o,r,o,t.x2);0!==e&&i.lineTo(n,t.y),i.moveTo(a,t.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),n=null==s?void 0:s.isReversed(),a=n?(t,e)=>t>e:(t,e)=>t<e,o=null==s?void 0:s.scale.convert(0),r=e.reduce((t,e)=>(a(e.y,t)&&(t=e.y),t),n?0:1/0),l=(t,e,i,s,n)=>(t-e)/(i-e)*(n-s)+s;this.ctx.animationManager.animate({id:this.id+"_datums",groupId:this.id,phase:"initial",from:o,to:r,ease:rg.Motion.easeOut,onUpdate(s){i.clear({trackChanges:!0}),e.forEach((t,e)=>{const n=l(s,o,r,o,t.y),a=l(s,o,r,o,t.y2);0!==e&&i.lineTo(t.x,n),i.moveTo(t.x2,a)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){return Ig(this,null,(function*(){this.resetConnectorLinesPath({contextData:[t.contextData],paths:[t.paths]})}))}resetConnectorLinesPath({contextData:t,paths:e}){if(0===e.length)return;const[i]=e[0];this.updateLineNode(i);const{path:s}=i;s.clear({trackChanges:!0});const{pointData:n}=t[0];n&&(n.forEach((t,e)=>{0!==e&&s.lineTo(t.x,t.y),s.moveTo(t.x2,t.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:n,lineDashOffset:a,lineJoin:"round",pointerEvents:$p.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}};jN.className="WaterfallSeries",jN.type="waterfall";var HN={series:{__extends__:sg.EXTENDS_SERIES_DEFAULTS,item:{positive:{strokeWidth:0,label:{enabled:!1}},negative:{strokeWidth:0,label:{enabled:!1}},total:{strokeWidth:0,label:{enabled:!1}}},line:{stroke:sg.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},XN={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:jN,seriesDefaults:{axes:[{type:sg.CARTESIAN_AXIS_TYPE.CATEGORY,position:sg.POSITION.BOTTOM},{type:sg.CARTESIAN_AXIS_TYPE.NUMBER,position:sg.POSITION.LEFT}]},themeTemplate:HN,swapDefaultAxesCondition:({direction:t})=>"horizontal"===t,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:s})=>{const{properties:n}=s,{fills:a,strokes:o}=t(e);return i?{item:{positive:{fill:a[0],stroke:o[0]},negative:{fill:a[1],stroke:o[1]},total:{fill:a[2],stroke:o[2]}}}:{item:{positive:n.get(sg.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:n.get(sg.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:n.get(sg.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};rg.registerModule(Iy),rg.registerModule(Xy),rg.registerModule(Xm),rg.registerModule(hf),rg.registerModule(Ib),rg.registerModule(lS),rg.registerModule(pf),rg.registerModule(_f),rg.registerModule(Vf),rg.registerModule(gx),rg.registerModule(Ox),rg.registerModule(Uv),rg.registerModule(tk),rg.registerModule(Yk),rg.registerModule(WD),rg.registerModule(UD),rg.registerModule(TM),rg.registerModule(KM),rg.registerModule(Em),rg.registerModule(Vm),rg.registerModule(IA),rg.registerModule(PL),rg.registerModule(ew),rg.registerModule(jx),rg.registerModule(qw),rg.registerModule(XN),rg.registerModule(Sv),rg.enterpriseModule.isEnterprise=!0,rg.enterpriseModule.licenseManager=t=>{var e,i;return new $v(null!=(i=null==(e=t.container)?void 0:e.ownerDocument)?i:"undefined"!=typeof document?document:void 0)},rg.enterpriseModule.injectWatermark=Zv,jp.setGridContext(!0),t.LicenseManager.setChartsLicenseManager(jp),Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));