/**
          * @ag-grid-enterprise/sparklines - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/sparklines - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@ag-grid-community/core"),e=require("@ag-grid-enterprise/core");class i{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),s=this._encode(i?this.floor(t):this.ceil(t)),r=this._encode(i?this.ceil(e):this.floor(e));if(r<s)return[];const a=[];for(let t=s;t<=r;t++){const e=this._decode(t);a.push(e)}return null==o||o(),a}}class n extends i{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let n,o=0;const{snapTo:s="start"}=null!=e?e:{};if("string"==typeof s){const e=o;n=(i,n)=>{const r="start"===s?i:n;return o=this.getOffset(r,t),()=>o=e}}else"number"==typeof s?o=this.getOffset(new Date(s),t):s instanceof Date&&(o=this.getOffset(s,t));return new i(e=>{const i=this._encode(e);return Math.floor((i-o)/t)},e=>this._decode(e*t+o),n)}}const o=new n((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const s=6e4*(new Date).getTimezoneOffset();const r=new n((function(t){return Math.floor((t.getTime()-s)/1e3)}),(function(t){return new Date(s+1e3*t)})),a=6e4*(new Date).getTimezoneOffset();const l=new n((function(t){return Math.floor((t.getTime()-a)/6e4)}),(function(t){return new Date(a+6e4*t)})),h=6e4*(new Date).getTimezoneOffset();const c=new n((function(t){return Math.floor((t.getTime()-h)/36e5)}),(function(t){return new Date(h+36e5*t)}));const d=new n((function(t){const e=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor(e/864e5)}),(function(t){const e=new Date(0);return e.setDate(e.getDate()+t),e.setHours(0,0,0,0),e})),u=new Date(2023,0,1);function p(t){const e=Date.UTC(u.getFullYear(),u.getMonth(),u.getDate())+864e5*t;return new n((function(t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const g=p(0);p(1),p(2),p(3),p(4),p(5),p(6);const f=new n((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const y=new n((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));new n((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)})),new n((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)})),new n((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e})),new n((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))})),new n((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));const m=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function v(){const t=navigator.userAgent;return!m.some(e=>e.test(t))}class b{constructor({document:t=window.document,width:e=600,height:i=300,domLayer:n=!1,zIndex:o=0,name:s,overrideDevicePixelRatio:r}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=t,this.element=t.createElement("canvas"),this.element.width=e,this.element.height=i,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:a}=this.element;a.userSelect="none",a.display="block",n&&(a.position="absolute",a.zIndex=String(o),a.top="0",a.left="0",a.pointerEvents="none",a.opacity="1",s&&(this.element.id=s)),this.setPixelRatio(r),this.resize(e,i)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=i,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;v()||(e=1),b.overrideScale(this.context,e),this._pixelRatio=e}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,i=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const o=this.textMeasuringContext;return o.font=e,o.textBaseline=i,o.textAlign=n,o.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const e=n[t];if(e)return e}else i[e]={};const o=this.svgText;o.style.font=e,o.textContent=t;const s=o.getBBox(),r={width:s.width,height:s.height};return i[e][t]=r,r}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,n,o,s,r){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,n*e,o*e,s*e,r*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=n[e])}}b.textSizeCache={};class x{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new x(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;default:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>o&&(o=t.y+t.height)}),new x(e,i,n-e,o-i)}}class k{constructor(t=[1,0,0,1,0,0]){this.elements=t}get e(){return[...this.elements]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],s=t[0]*e[2]+t[2]*e[3],r=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=o,i[2]=s,i[3]=r,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new k(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const s=t[4],r=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,new k([o,-i,-n,e,n*r-o*s,i*s-e*r])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],s=e[3];const r=e[4],a=e[5],l=1/(i*s-n*o);return i*=l,n*=l,o*=l,s*=l,t.setElements([s,-n,-o,i,o*a-s*r,n*r-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const s=t[4],r=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*r-o*s,t[5]=i*s-e*r,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],s=i[2],r=i[3],a=.5*t.width,l=.5*t.height,h=t.x+a,c=t.y+l,d=Math.abs(a*n)+Math.abs(l*s),u=Math.abs(a*o)+Math.abs(l*r);return e||(e=new x(0,0,0,0)),e.x=h*n+c*s+i[4]-d,e.y=h*o+c*r+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return k.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,s,r){const[a,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==r?void 0:r.scalingCenterX)?a:null==r?void 0:r.scalingCenterX,u=null==(null==r?void 0:r.scalingCenterY)?l:null==r?void 0:r.scalingCenterY);const p=n,g=Math.cos(p),f=Math.sin(p);let y,m;0===p?(y=0,m=0):(y=null==(null==r?void 0:r.rotationCenterX)?a:null==r?void 0:r.rotationCenterX,m=null==(null==r?void 0:r.rotationCenterY)?l:null==r?void 0:r.rotationCenterY);const v=o,b=s,x=d*(1-h)-y,k=u*(1-c)-m;return t.setElements([g*h,f*h,-f*c,g*c,g*x-f*k+y+v,f*x+g*k+m+b]),t}static fromContext(t){const e=t.getTransform();return new k([e.a,e.b,e.c,e.d,e.e,e.f])}}k.instance=new k;const S={};function w(t){var e;const i=t.constructor,n=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!n)throw new Error(`The ${i} is missing the 'className' property.`);const o=(null!==(e=S[n])&&void 0!==e?e:0)+1;return S[n]=o,n+"-"+o}var D;!function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(D||(D={}));const O=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function M(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,o){const s="__"+o;n[o]||(O&&null==e&&null==i?function(t,e,i,n){const{redraw:o=D.TRIVIAL,type:s="normal",checkDirtyOnAssignment:r=!1}=null!=n?n:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===s?`this.markDirty(this, ${o});`:""}\n            ${"transform"===s?`this.markDirtyTransform(${o});`:""}\n            ${"path"===s?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${o}); }`:""}\n            ${"font"===s?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${o}); }`:""}\n        }\n        ${r?`if (value != null && value._dirty > ${D.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(n,o,s,t):function(t,e,i,n){const{redraw:o=D.TRIVIAL,type:s="normal",changeCb:r,convertor:a,checkDirtyOnAssignment:l=!1}=null!=n?n:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===s&&this.markDirty(this,o),"transform"===s&&this.markDirtyTransform(o),"path"!==s||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,o)),"font"!==s||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,o)),r&&r(this)),l&&null!=t&&t._dirty>D.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(n,o,s,t))}}class C{constructor(){this._dirty=D.MAJOR}markDirty(t,e=D.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=D.NONE}isDirty(){return this._dirty>D.NONE}}var N,E=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t[t.All=0]="All",t[t.None=1]="None"}(N||(N={}));const L=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class R extends C{constructor(){super(...arguments),this.serialNumber=R._nextSerialNumber++,this.id=w(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new k,this.inverseMatrix=new k,this._dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=N.All}get datum(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum}set datum(t){this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this.children)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){return this._children}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,D.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){if(t.parent===this){const e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,D.MAJOR),t}throw new Error("The node to be removed is not a child of this node.")}insertBefore(t,e){const i=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){const n=this.children.indexOf(e);if(!(n>=0))throw new Error(`${e} has ${i} as the parent, but is not in its list of children.`);this._children.splice(n,0,t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager),this.dirtyZIndex=!0,this.markDirty(t,D.MAJOR)}else this.append(t);return t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=k.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this._dirtyTransform=!0,this.markDirty(this,D.MAJOR)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===N.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const s=n[o],r=(null===(i=s.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?s.pickNode(t,e):void 0;if(r)return r}else if(n.length)for(let i=n.length-1;i>=0;i--){const o=n[i].pickNode(t,e);if(o)return o}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=k.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this._dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:s,scalingCenterX:r,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}=this;k.updateTransformMatrix(t,e,i,n,o,s,{scalingCenterX:r,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}),t.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=D.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:s}=e,r=this.transformPoint(i,n),a=this.transformPoint(i+o,n+s);t.clearRect(r.x,r.y,a.x-r.x,a.y-r.y)}markDirty(t,e=D.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if((this._dirty!==D.NONE||e)&&(this._dirty=D.NONE,i))for(const t of this.children)t.markClean()}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=D.NONE||this._dirtyTransform?1:0,i=this.visible?1:0;for(const n of this._children){const{count:o,visibleCount:s,dirtyCount:r}=n.nodeCount;t+=o,i+=s,e+=r}return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}function I(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function T(t,e,i){const n=t=>"function"==typeof t?t():t;for(const o in t){const s=i(n(t[o]),n(e[o]));if(0!==s)return s}return 0}R._nextSerialNumber=0,E([M({type:"transform"})],R.prototype,"scalingX",void 0),E([M({type:"transform"})],R.prototype,"scalingY",void 0),E([M({type:"transform"})],R.prototype,"scalingCenterX",void 0),E([M({type:"transform"})],R.prototype,"scalingCenterY",void 0),E([M({type:"transform"})],R.prototype,"rotationCenterX",void 0),E([M({type:"transform"})],R.prototype,"rotationCenterY",void 0),E([M({type:"transform"})],R.prototype,"rotation",void 0),E([M({type:"transform"})],R.prototype,"translationX",void 0),E([M({type:"transform"})],R.prototype,"translationY",void 0),E([M({redraw:D.MAJOR,changeCb:t=>t.visibilityChanged()})],R.prototype,"visible",void 0),E([M({redraw:D.TRIVIAL,changeCb:L})],R.prototype,"zIndex",void 0),E([M({redraw:D.TRIVIAL,changeCb:L})],R.prototype,"zIndexSubOrder",void 0);const _={};function A(t,e){_[e]||(t(),_[e]=!0)}const P={debug(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},warnOnce(t,...e){A(()=>P.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){A(()=>P.error(t,...e),"Logger.warn: "+t)}};var F=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class B extends R{constructor(t){var e;super(),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:n,name:o}=null!==(i=this.opts)&&void 0!==i?i:{},s=()=>this.getComputedOpacity(),r=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:n,name:o,getComputedOpacity:s,getVisibility:r})}}getComputedOpacity(){let t=1,e=this;do{e instanceof B&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=D.TRIVIAL){const i=e<=D.MINOR?D.TRIVIAL:e;super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),B.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={}}=this,{_debug:{consoleLog:o=!1}={}}=this,{dirty:s,dirtyZIndex:r,layer:a,children:l,clipRect:h}=this;let{ctx:c,forceRender:d,clipBBox:u}=t;const{resized:p,stats:g}=t,f=c.getTransform(),y=s>=D.MINOR||r||p,m=y||l.some(t=>t.dirty>=D.TRIVIAL);if(n&&o&&P.debug({name:n,group:this,isDirty:y,isChildDirty:m,renderCtx:t,forceRender:d}),a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)?t.isInfinite()||(d=!1):(d=!0,this.lastBBox=t)}if(!y&&!m&&!d){if(n&&o&&g){const e=this.nodeCount;P.debug({name:n,result:"skipping",renderCtx:t,counts:e,group:this})}return a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}const v=this.visible;if(a){if(c=a.context,c.save(),c.resetTransform(),d=!0,a.clear(),u){const{width:e,height:i,x:s,y:r}=u;o&&P.debug({name:n,clipBBox:u,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,s,r,e,i)}c.setTransform(f)}else c.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(c),h){const{x:e,y:i,width:s,height:r}=h;c.save(),o&&P.debug({name:n,clipRect:h,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,e,i,s,r),u=this.matrix.inverse().transformBBox(h)}r&&(this.sortChildren(),d=!0);const b=d!==t.forceRender||u!==t.clipBBox||c!==t.ctx?Object.assign(Object.assign({},t),{ctx:c,forceRender:d,clipBBox:u}):t;let x=0;for(const t of l)t.visible&&v?d||t.dirty!==D.NONE?(c.save(),t.render(b),c.restore()):g&&(x+=t.nodeCount.count):(t.markClean(),g&&(x+=t.nodeCount.count));if(g&&(g.nodesSkipped+=x),super.render(t),h&&c.restore(),a&&(g&&g.layersRendered++,c.restore(),a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),n&&o&&g){const e=this.nodeCount;P.debug({name:n,result:"rendered",skipped:x,renderCtx:t,counts:e,group:this})}}sortChildren(){this.dirtyZIndex=!1,this.children.sort((t,e)=>{var i,n;return T([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],I)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(t=>{if(!t.visible)return;const s=t.computeTransformedBBox();if(!s)return;const r=s.x,a=s.y;r<e&&(e=r),a<n&&(n=a),r+s.width>i&&(i=r+s.width),a+s.height>o&&(o=a+s.height)}),new x(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}B.className="Group",F([M({convertor:t=>Math.min(1,Math.max(0,t))})],B.prototype,"opacity",void 0);class z{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return null!=window.OffscreenCanvas}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;v()||(e=1),b.overrideScale(this.context,e),this._pixelRatio=e}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}function j(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}var W=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class K{constructor(t){var e,i,n;this.id=w(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,sceneNodeHighlight:[]};const{document:o=window.document,mode:s=(null!==(e=j("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite"),width:r,height:a,overrideDevicePixelRatio:l}=t;this.overrideDevicePixelRatio=l,this.opts={document:o,mode:s},this.debug.consoleLog=!0===j("agChartsDebug"),this.debug.stats=null!==(i=j("agChartsSceneStats"))&&void 0!==i&&i,this.debug.dirtyTree=null!==(n=j("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=function(){var t;let e=null!==(t=j("agChartsSceneDebug"))&&void 0!==t?t:[];"string"==typeof e&&(e=[e]);const i=[];return e.forEach(t=>{"layout"===t?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(t)}),i}(),this.canvas=new b({document:o,width:r,height:a,overrideDevicePixelRatio:l})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(i))return;const{zIndex:n=this._nextZIndex++,name:o,zIndexSubOrder:s,getComputedOpacity:r,getVisibility:a}=t,{width:l,height:h,overrideDevicePixelRatio:c}=this,d="dom-composite"===i,u="adv-composite"===i&&z.isSupported()?new z({width:l,height:h,overrideDevicePixelRatio:c}):new b({document:this.opts.document,width:l,height:h,domLayer:d,zIndex:n,name:o,overrideDevicePixelRatio:c}),p={id:this._nextLayerId++,name:o,zIndex:n,zIndexSubOrder:s,canvas:u,getComputedOpacity:r,getVisibility:a};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(p),this.sortLayers(),d){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof b),i=t.findIndex(t=>t===u);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",u.element)}return this.debug.consoleLog&&P.debug({layers:this.layers}),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&P.debug({layers:this.layers}))}moveLayer(t,e,i){const n=this.layers.find(e=>e.canvas===t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&P.debug({layers:this.layers}))}sortLayers(){this.layers.sort((t,e)=>{var i,n;return T([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],I)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager(this)),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e;return W(this,void 0,void 0,(function*(){const{debugSplitTimes:i=[performance.now()],extraDebugStats:n={}}=null!=t?t:{},{canvas:o,canvas:{context:s},root:r,layers:a,pendingSize:l,opts:{mode:h}}=this;if(l&&(this.canvas.resize(...l),this.layers.forEach(t=>t.canvas.resize(...l)),this.pendingSize=void 0),r&&!r.visible)return void(this._dirty=!1);if(r&&!this.dirty)return this.debug.consoleLog&&P.debug("no-op",{redrawType:D[r.dirty],tree:this.buildTree(r)}),void this.debugStats(i,s,void 0,n);const c={ctx:s,forceRender:!0,resized:!!l,debugNodes:{}};"detailed"===this.debug.stats&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!r||r.dirty>=D.TRIVIAL)&&(d=!0,o.clear()),r&&this.debug.dirtyTree){const{dirtyTree:t,paths:e}=this.buildDirtyTree(r);P.debug({dirtyTree:t,paths:e})}r&&d&&(this.debug.consoleLog&&P.debug("before",{redrawType:D[r.dirty],canvasCleared:d,tree:this.buildTree(r)}),r.visible&&(s.save(),r.render(c),s.restore())),"dom-composite"!==h&&a.length>0&&d&&(this.sortLayers(),s.save(),s.setTransform(1/o.pixelRatio,0,0,1/o.pixelRatio,0,0),a.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:n})=>{e&&n()&&(s.globalAlpha=i(),s.drawImage(t,0,0))}),s.restore()),null===(e=s.verifyDepthZero)||void 0===e||e.call(s),this._dirty=!1,this.debugStats(i,s,c.stats,n),this.debugSceneNodeHighlight(s,this.debug.sceneNodeHighlight,c.debugNodes),r&&this.debug.consoleLog&&P.debug("after",{redrawType:D[r.dirty],canvasCleared:d,tree:this.buildTree(r)})}))}debugStats(t,e,i,n={}){const o=performance.now();if(this.debug.stats){const s=t[0];t.push(o);const r=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e)=>Math.round(100*(e-t))/100+"ms",{layersRendered:l=0,layersSkipped:h=0,nodesRendered:c=0,nodesSkipped:d=0}=null!=i?i:{},u=t.map((e,i)=>i>0?a(t[i-1],e):null).filter(t=>null!=t).join(" + "),p=Object.entries(n).map(([t,e])=>`${t}: ${e}`).join(" ; "),g=[`${a(s,o)} (${u})`,""+p,"detailed"===this.debug.stats?"Layers: "+r(l,h):null,"detailed"===this.debug.stats?"Nodes: "+r(c,d):null].filter(t=>null!=t).map(t=>[t,b.getTextSize(t,e.font)]),f=Math.max(...g.map(([,{width:t}])=>t)),y=g.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,f,y),e.fillStyle="black";let m=0;for(const[t,i]of g)m+=i.height,e.fillText(t,2,m);e.restore()}}debugSceneNodeHighlight(t,e,i){var n;const o=t=>e=>!!t.test(e.id)||e instanceof B&&null!=e.name&&t.test(e.name),s=t=>e=>t===e.id||e instanceof B&&null!=e.name&&t===e.name;for(const t of e){if("string"==typeof t&&null!=i[t])continue;const e="string"==typeof t?s(t):o(t),r=null===(n=this.root)||void 0===n?void 0:n.findNodes(e);if(r&&0!==r.length)for(const t of r)t instanceof B&&t.name?i[t.name]=t:i[t.id]=t;else P.debug(`no debugging node with id [${t}] in scene graph.`)}t.save();for(const[e,n]of Object.entries(i)){const i=n.computeTransformedBBox();i?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(i.x,i.y,i.width,i.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(e,i.x,i.y,i.width),t.fillText(e,i.x,i.y,i.width)):P.debug(`no bbox for debugged node [${e}].`)}t.restore()}buildTree(t){var e;const i=null!==(e=t instanceof B?t.name:null)&&void 0!==e?e:t.id;return Object.assign({name:i,node:t,dirty:D[t.dirty]},t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:o,zIndex:s,zIndexSubOrder:r},node:a}=e;(!n||o<=0)&&(i=`(${i})`),a instanceof B&&a.isLayer()&&(i=`*${i}*`);return t[[""+(null!=i?i:"<unknown>"),"z: "+s,r&&"zo: "+r.join(" / ")].filter(t=>!!t).join(" ")]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===D.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),n=null!==(e=t instanceof B?t.name:null)&&void 0!==e?e:t.id,o=0===i.length?[n]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${n}.${t}`);return{dirtyTree:Object.assign({name:n,node:t,dirty:D[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:o}}}K.className="Scene";const G=2*Math.PI;function X(t){return t%=G,t+=G,t%=G}function Y(t){return t/180*Math.PI}class H extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:n}=this,o=X(Y(n+90)),s=Math.cos(o),r=Math.sin(o),a=e.width,l=e.height,h=e.x+.5*a,c=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,n=Math.atan2(l,a);let d;d=o<Math.PI/2?o:o<Math.PI?Math.PI-o:o<3*Math.PI/2?o-Math.PI:2*Math.PI-o;const u=e*Math.abs(Math.cos(d-n)),p=t.createLinearGradient(h+s*u,c+r*u,h-s*u,c-r*u);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}var V=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};const $=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class U extends R{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=U.defaultStyles.fill,this.stroke=U.defaultStyles.stroke,this.strokeWidth=U.defaultStyles.strokeWidth,this.lineDash=U.defaultStyles.lineDash,this.lineDashOffset=U.defaultStyles.lineDashOffset,this.lineCap=U.defaultStyles.lineCap,this.lineJoin=U.defaultStyles.lineJoin,this.opacity=U.defaultStyles.opacity,this.fillShadow=U.defaultStyles.fillShadow}static createInstance(t){const e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const n=e[i];this[n]=t[n]}}restoreAllStyles(){const t=this.constructor.defaultStyles;for(const e in t)this[e]=t[e]}restoreOverriddenStyles(){const t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=t[i])}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=$.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let s;for(;s=o.exec(n);)i.push(s[0]);this.gradient=new H,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,n,o;const s=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,r=Math.round(t*s)/s;return null==e?r:0===e?0:e<1?Math.ceil(e*s)/s:Math.round((e+t)*s)/s-r}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;(null==o?void 0:o.enabled)&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}U.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),V([M({redraw:D.MINOR})],U.prototype,"fillOpacity",void 0),V([M({redraw:D.MINOR})],U.prototype,"strokeOpacity",void 0),V([M({redraw:D.MINOR,changeCb:t=>t.updateGradient()})],U.prototype,"fill",void 0),V([M({redraw:D.MINOR})],U.prototype,"stroke",void 0),V([M({redraw:D.MINOR})],U.prototype,"strokeWidth",void 0),V([M({redraw:D.MINOR})],U.prototype,"lineDash",void 0),V([M({redraw:D.MINOR})],U.prototype,"lineDashOffset",void 0),V([M({redraw:D.MINOR})],U.prototype,"lineCap",void 0),V([M({redraw:D.MINOR})],U.prototype,"lineJoin",void 0),V([M({redraw:D.MINOR,convertor:t=>Math.min(1,Math.max(0,t))})],U.prototype,"opacity",void 0),V([M({redraw:D.MINOR,checkDirtyOnAssignment:!0})],U.prototype,"fillShadow",void 0);var Z=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};function q(t){const{redraw:e=D.MAJOR,changeCb:i}=null!=t?t:{};return M({redraw:e,type:"font",changeCb:i})}class J extends U{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=J.defaultStyles.textAlign,this.textBaseline=J.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=ot(this.text)}get font(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=Q(this)),this._font}computeBBox(){return b.has.textMetrics?et(this.lines,this.x,this.y,this):it(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(b.has.textMetrics){const n=b.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return b.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===D.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:s,strokeWidth:r}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(o){e.fillStyle=o,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,n)=>e.fillText(t,i,n))}if(s&&r){e.strokeStyle=s,e.lineWidth=r,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:o}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),o&&(e.lineJoin=o),this.renderLines((t,i,n)=>e.strokeText(t,i,n))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(t=>this.getLineHeight(t));let s=-(o.reduce((t,e)=>t+e,0)-o[0])*nt(this.textBaseline);for(let r=0;r<e.length;r++)t(e[r],i,n+s),s+=o[r]}static wrap(t,e,i,n,o){const s=function(t){const e=new Map,i=e=>b.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:n}=i(t);return e.set(t,n),n}}}(Q(n)),r=t.split(/\r?\n/g);if(0===r.length)return"";if("never"===o)return J.truncateLine(r[0],e,s,!1);const a=[];let l=0;for(const t of r){const r=J.wrapLine(t,e,i,s,n,o,l);if(a.push(r.result),l=r.cumulativeHeight,r.truncated)break}return a.join("\n").trim()}static wrapLine(t,e,i,n,o,s,r){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:r};const a=n.size(t);if(a.width<=e)return{result:t,truncated:!1,cumulativeHeight:r+a.height};if(a.height>i||n.width("W")>e)return{result:"",truncated:!0,cumulativeHeight:r};const l=t.split(/\s+/g),h=J.wrapLineSequentially(l,e,i,n,o,s,r);r=h.cumulativeHeight;let{lines:c}=h;if(!h.wordsBrokenOrTruncated&&!h.linesTruncated){const t=h.lines.length,i=J.wrapLineBalanced(l,e,n,t);i.length===c.length&&(c=i)}return{result:c.map(t=>t.join(" ")).join("\n"),truncated:h.linesTruncated,cumulativeHeight:r}}static breakWord(t,e,i,n,o){const s=e=>J.punctuationMarks.includes(t[e]),r=n?o.width("-"):0,a=[];let l=0,h=0;for(let n=0;n<t.length;n++){const s=t[n],c=o.width(s);l+c+r>(0===h?e:i)&&(a.push(n),l=0,h++),l+=c}const c=[];let d=0;for(const e of a){let i=t.substring(d,e);n&&i.length>0&&!s(e-1)&&!s(e)&&(i+="-"),c.push(i),d=e}return c.push(t.substring(d)),c}static truncateLine(t,e,i,n){const o=i.width(t);if(o<e&&!n)return t;const s=i.width("\u2026");if(o+s<=e)return t+"\u2026";let r,a,l=Math.floor(t.length*e/o)+1;do{r=t.substring(0,l),a=i.width(r)}while(--l>=0&&a+s>e);return r+"\u2026"}static wrapLineSequentially(t,e,i,n,o,s,r){const{fontSize:a,lineHeight:l=a*J.defaultLineHeightRatio}=o,h="always"===s||"hyphenate"===s,c="hyphenate"===s,d=n.width(" ");let u=!1,p=!1;const g=[];let f=[],y=0;const m=()=>{const t=r+l;if(t>=i){const t=f.join(" "),i=J.truncateLine(t,e,n,!0);return f.splice(0,f.length,i),p=!0,!1}return f=[],y=0,r=t,g.push(f),!0};if(!m())return{lines:g,linesTruncated:!0,wordsBrokenOrTruncated:u,cumulativeHeight:r};for(let i=0;i<t.length;i++){const o=t[i],s=n.width(o),r=0===f.length?0:d,a=y+r+s;if(a<=e)f.push(o),y=a;else if(s<=e){if(!m())break;f.push(o),y=s}else{if(u=!0,!h){if(!m())break;const s=J.truncateLine(o,e,n,!0);f.push(s),i<t.length-1&&(p=!0);break}{const t=e-y-r,i=J.breakWord(o,t,e,c,n);let s=!1;for(let t=0;t<i.length;t++){const e=i[t];if(e&&f.push(e),t===i.length-1)y=n.width(e);else if(!m()){s=!0;break}}if(s)break}}}return{lines:g,linesTruncated:p,wordsBrokenOrTruncated:u,cumulativeHeight:r}}static wrapLineBalanced(t,e,i,n){const o=t.reduce((t,e)=>t+i.width(e),0),s=i.width(" "),r=(o+s*(t.length-n-2))/n,a=[];let l=[],h=i.width(t[0]),c=!0;for(const n of t){const t=i.width(n);if(c){l=[],l.push(n),h=t,c=!1,a.push(l);continue}const o=h+s+t;o<=r?(l.push(n),h=o):o<=e?(l.push(n),c=!0):(l=[n],h=t,a.push(l))}return a}}function Q(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:o}=t;return[null!=n?n:"",null!=o?o:"",i+"px",e].join(" ").trim()}function tt(t,e,i,n){return b.has.textMetrics?et(t,e,i,n):it(t,e,i,n)}function et(t,e,i,n){var o,s;let r=0,a=0,l=0,h=0,c=0;const d=Q(n),{lineHeight:u,textBaseline:p=J.defaultStyles.textBaseline,textAlign:g=J.defaultStyles.textAlign}=n;for(let e=0;e<t.length;e++){const i=b.measureText(t[e],d,p,g);r=Math.max(r,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,h+=i.actualBoundingBoxAscent):c+=null!==(o=i.fontBoundingBoxAscent)&&void 0!==o?o:i.emHeightAscent,e==t.length-1?h+=i.actualBoundingBoxDescent:c+=null!==(s=i.fontBoundingBoxDescent)&&void 0!==s?s:i.emHeightDescent}return void 0!==u&&(c=(t.length-1)*u),h+=c,a+=c*nt(p),new x(e-r,i-a,l,h)}function it(t,e,i,n){let o=0,s=0,r=0;const a=Q(n),{lineHeight:l,textBaseline:h=J.defaultStyles.textBaseline,textAlign:c=J.defaultStyles.textAlign}=n;if(t.length>0){const e=b.getTextSize(t[0],a);o=e.width,s=e.height}for(let e=1;e<t.length;e++){const i=b.getTextSize(t[e],a);o=Math.max(o,i.width),r+=null!=l?l:i.height}switch(c){case"end":case"right":e-=o;break;case"center":e-=o/2}switch(h){case"alphabetic":i-=.7*s+.5*r;break;case"middle":i-=.45*s+.5*r;break;case"ideographic":i-=s+r;break;case"hanging":i-=.2*s+.5*r;break;case"bottom":i-=s+r}return new x(e,i,o,s+r)}function nt(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function ot(t){return"string"==typeof t?t.split(/\r?\n/g):[]}J.className="Text",J.defaultLineHeightRatio=1.15,J.defaultStyles=Object.assign({},U.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),J.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],Z([M({redraw:D.MAJOR})],J.prototype,"x",void 0),Z([M({redraw:D.MAJOR})],J.prototype,"y",void 0),Z([M({redraw:D.MAJOR,changeCb:t=>t._setLines()})],J.prototype,"text",void 0),Z([q()],J.prototype,"fontStyle",void 0),Z([q()],J.prototype,"fontWeight",void 0),Z([q()],J.prototype,"fontSize",void 0),Z([q()],J.prototype,"fontFamily",void 0),Z([M({redraw:D.MAJOR})],J.prototype,"textAlign",void 0),Z([M({redraw:D.MAJOR})],J.prototype,"textBaseline",void 0),Z([M({redraw:D.MAJOR})],J.prototype,"lineHeight",void 0);class st{constructor(){this.allEventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let n=i.get(t);n||(n=new Set,i.set(t,n)),n.has(e)||n.add(e)}removeEventListener(t,e){const{allEventListeners:i}=this,n=i.get(t);n&&(n.delete(e),0===n.size&&i.delete(t))}hasEventListener(t){return this.allEventListeners.has(t)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(t){const e=this.allEventListeners.get(t.type);null==e||e.forEach(e=>e(t))}}const rt=t=>"string"==typeof t,at=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&rt(t.toString());function lt(t){return rt(t)||at(t)}function ht(t){return dt(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&dt(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function ct(t,e){return e&&ht(t)?t:e?void 0:lt(t)?t:String(t)}const dt=t=>"number"==typeof t&&Number.isFinite(t);class ut{constructor(t,e,i,n=1){this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,n||0))}static validColorString(t){return t.indexOf("#")>=0?!!ut.parseHex(t):t.indexOf("rgb")>=0?!!ut.stringToRgba(t):!!ut.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return ut.fromHexString(t);const e=ut.nameToHex[t.toLowerCase()];if(e)return ut.fromHexString(e);if(t.indexOf("rgb")>=0)return ut.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return ut.fromString(t)}catch(e){return P.warnOnce(`invalid color string: '${t}'.`),ut.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=ut.parseHex(t);if(e){const[t,i,n,o]=e;return new ut(t/255,i/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let n=0;n<t.length;n++){const o=t[n];if(e||"("!==o){if(")"===o){i=n;break}}else e=n}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),s=[];for(let t=0;t<o.length;t++){const e=o[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),s.push(i)}return s}static fromRgbaString(t){const e=ut.stringToRgba(t);if(e){if(3===e.length)return new ut(e[0],e[1],e[2]);if(4===e.length)return new ut(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new ut(t[0],t[1],t[2],t[3]);if(3===t.length)return new ut(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=ut.HSBtoRGB(t,e,i);return new ut(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+ut.padHex(Math.round(255*this.r).toString(16))+ut.padHex(Math.round(255*this.g).toString(16))+ut.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=ut.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return ut.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let s=NaN;if(n!==o){const r=o-n,a=(o-t)/r,l=(o-e)/r,h=(o-i)/r;s=t===o?h-l:e===o?2+a-h:4+l-a,s/=6,s<0&&(s+=1)}return[360*s,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,s=0;if(0===e)n=o=s=i;else{const r=6*(t-Math.floor(t)),a=r-Math.floor(r),l=i*(1-e),h=i*(1-e*a),c=i*(1-e*(1-a));switch(r>>0){case 0:n=i,o=c,s=l;break;case 1:n=h,o=i,s=l;break;case 2:n=l,o=i,s=c;break;case 3:n=l,o=h,s=i;break;case 4:n=c,o=l,s=i;break;case 5:n=i,o=l,s=h}}return[n,o,s]}derive(t,e,i,n){const o=ut.RGBtoHSB(this.r,this.g,this.b);let s=o[2];0==s&&i>1&&(s=.05);const r=((o[0]+t)%360+360)%360,a=Math.max(Math.min(o[1]*e,1),0);s=Math.max(Math.min(s*i,1),0);const l=Math.max(Math.min(this.a*n,1),0),h=ut.HSBtoRGB(r,a,s);return h.push(l),ut.fromArray(h)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=ut.tryParseFromString(t),n=ut.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new ut(e(i.r,n.r),e(i.g,n.g),e(i.b,n.b),e(i.a,n.a)).toString()}}}ut.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const pt=Symbol("BREAK");function gt(t,e){return(i,n)=>{const o=n.toString(),s="__"+o,{getters:r,setters:a}=function(t,e,i,n){null==Object.getOwnPropertyDescriptor(t,"__decorator_config")&&Object.defineProperty(t,"__decorator_config",{value:{}});const o=t.__decorator_config;if(null!=o[i])return o[i];o[i]={setters:[],getters:[]};const s=Object.getOwnPropertyDescriptor(t,e),r=null==s?void 0:s.set,a=null==s?void 0:s.get;return Object.defineProperty(t,e,{set:function(t){var s,l;const h=null!==(l=null===(s=o[i])||void 0===s?void 0:s.setters)&&void 0!==l?l:[];let c;h.some(t=>t.length>2)&&(c=a?a.call(this):this[n]);for(const i of h)if((t=i(this,e,t,c))===pt)return;r?r.call(this,t):this[n]=t},get:function(){var t,s;let r=a?a.call(this):this[n];for(const n of null!==(s=null===(t=o[i])||void 0===t?void 0:t.getters)&&void 0!==s?s:[])if(r=n(this,e,r),r===pt)return;return r},enumerable:!0,configurable:!1}),o[i]}(i,n,o,s);a.push(t),e&&r.splice(0,0,e)}}function ft(t){return gt((e,i,n)=>{var o,s,r;if(t(n,{target:e}))return n;const a=i.toString().replace(/^_*/,"");let l=null!==(s=null===(o=e.constructor)||void 0===o?void 0:o.className)&&void 0!==s?s:null===(r=e.constructor)||void 0===r?void 0:r.name;(null==l?void 0:l.length)<3&&(l=null);const h=l?`of [${l}] `:"";return t.message?P.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(n)}]; ${t.message}, ignoring.`):P.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(n)}], ignoring.`),pt})}function yt(t,e){return t.message=e,t}const mt=(t,e,i)=>void 0===t||i(t,e),vt=(t,e)=>yt((i,n)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,n))),"expecting an Array"),bt=t=>yt((e,i)=>mt(e,i,vt(t)),"expecting an optional Array"),xt=(...t)=>yt((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),kt=t=>null!=t&&!isNaN(t),St=t=>yt((e,i)=>!kt(e)||!kt(i.target[t])||e<i.target[t],"expected to be less than "+t),wt=t=>yt((e,i)=>!kt(e)||!kt(i.target[t])||e>i.target[t],"expected to be greater than "+t),Dt=yt(t=>"function"==typeof t,"expecting a Function"),Ot=yt((t,e)=>mt(t,e,Dt),"expecting an optional Function"),Mt=yt(t=>!0===t||!1===t,"expecting a Boolean"),Ct=yt((t,e)=>mt(t,e,Mt),"expecting an optional Boolean"),Nt=yt(t=>"string"==typeof t,"expecting a String"),Et=yt((t,e)=>mt(t,e,Nt),"expecting an optional String"),Lt=yt(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),Rt=yt((t,e)=>mt(t,e,Lt),"expecting an optional Date");yt(vt(void 0,Lt),"expecting an Array of Date objects");const It=zt(0),Tt=((...t)=>yt((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Rt,yt((t,e)=>mt(t,e,It),"expecting an optional number")),_t="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",At=yt(t=>"string"==typeof t&&ut.validColorString(t),"expecting a color String. "+_t),Pt=yt((t,e)=>mt(t,e,At),"expecting an optional color String. "+_t),Ft=yt(vt(void 0,At),"expecting an Array of color strings. "+_t),Bt=yt((t,e)=>mt(t,e,Ft),"expecting an optional Array of color strings. "+_t);function zt(t,e){return yt(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function jt(t,e){return yt((i,n)=>mt(i,n,zt(t,e)),"expecting an optional finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Wt(t,e){return yt(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}const Kt=yt(vt(void 0,zt()),"expecting an Array of numbers"),Gt=yt((t,e)=>mt(t,e,Kt),"expecting an optional Array of numbers"),Xt=yt(vt(void 0,Nt),"expecting an Array of strings");function Yt(...t){return yt(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}yt((t,e)=>mt(t,e,Xt),"expecting an optional Array of strings");const Ht=yt(vt(void 0,Mt),"expecting an Array of boolean values");yt((t,e)=>mt(t,e,Ht),"expecting an optional Array of boolean values");const Vt=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],$t=yt(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Ut=yt((t,e)=>mt(t,e,$t),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Zt=yt(t=>Vt.includes(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),qt=yt((t,e)=>mt(t,e,Zt),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Jt=yt(vt(void 0,zt(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Qt=yt((t,e)=>mt(t,e,Jt),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),te=["butt","round","square"],ee=yt(t=>te.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");yt((t,e)=>mt(t,e,ee),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const ie=["round","bevel","miter"],ne=yt(t=>ie.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");yt((t,e)=>mt(t,e,ne),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const oe=["top","right","bottom","left"],se=yt(t=>oe.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),re=["exact","nearest"],ae=yt(t=>"number"==typeof t&&Number.isFinite(t)||re.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),le=["never","always","hyphenate","on-space"],he=yt(t=>le.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var ce,de;function ue(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function pe(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function ge(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),dt(e)&&dt(i)?[e,i]:[])}!function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(ce||(ce={})),function(t){t.X="x",t.Y="y"}(de||(de={}));const fe=Symbol("invalid");class ye{constructor(t){var e;const{props:i}=t;let n=!0;for(const t of i){if("key"===t.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=i.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.values=i.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.aggregates=i.filter(t=>"aggregate"===t.type),this.groupProcessors=i.filter(t=>"group-value-processor"===t.type),this.propertyProcessors=i.filter(t=>"property-value-processor"===t.type),this.reducers=i.filter(t=>"reducer"===t.type),this.processors=i.filter(t=>"processor"===t.type);for(const{properties:t}of null!==(e=this.aggregates)&&void 0!==e?e:[])if(0!==t.length)for(const e of t){if("string"==typeof e&&!this.values.some(t=>t.property===e))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`);if("string"!=typeof e&&!this.values.some(t=>t.id===e.id))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`)}}resolveProcessedDataIndexById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return"key"===(null==n?void 0:n.type)||"value"===(null==n?void 0:n.type)?{type:n.type,index:n.index}:void 0}resolveProcessedDataDefById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return n}getDomain(t,e){const i=this.resolveProcessedDataIndexById(t);return i?e.domain["key"===i.type?"keys":"values"][i.index]:[]}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:o,reducers:s,processors:r,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=!1;if(e&&0===this.keys.length)return;let h=this.extractData(t);e?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),o.length>0&&this.postProcessGroups(h),n.length>0&&this.aggregateData(h),a.length>0&&this.postProcessProperties(h),s.length>0&&this.reduceData(h),r.length>0&&this.postProcessData(h);for(const t of[...this.keys,...this.values])t.missing&&P.warnOnce(`the key '${t.property}' was not found in at least one data element.`);const c=performance.now();return h.time=c-l,ye.DEBUG()&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(console.log(t),console.table(e))};if(console.log({processedData:t}),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,n;const o=null!==(i=e.keys)&&void 0!==i?i:[],s=null!==(n=e.aggValues)&&void 0!==n?n:[],r=e.keys.map(()=>{}),a=null==s?void 0:s.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?o:r,...null!=t?t:[],...0==e?s:a])),t},[]);n("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const n=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...n]),t},[]);n("Values",e)}}(h),h}valueIdxLookup(t){let e;if(e="string"==typeof t?this.values.findIndex(e=>e.property===t):this.values.findIndex(e=>e.id===t.id),e>=0)return e;throw new Error("AG Charts - configuration error, unknown property: "+t)}extractData(t){const{keys:e,values:i,opts:{dataVisible:n}}=this,{dataDomain:o,processValue:s}=this.initDataDomainProcessor(),r=new Array(n?t.length:0);let a=0;for(const o of t){const t=n?new Array(e.length):void 0;let l,h=0;for(const i of e){if(l=s(i,o,l),l===fe)break;t&&(t[h++]=l)}if(l===fe)continue;const c=n&&i.length>0?new Array(i.length):void 0;let d,u=0;for(const t of i){if(d=s(t,o,d),d===fe)break;c&&(c[u++]=d)}d!==fe&&(n&&(r[a++]={datum:o,keys:t,values:c}))}r.length=a;const l=t=>{var e;const i=o.get(null!==(e=t.id)&&void 0!==e?e:t.property).domain;return Array.isArray(i)&&i[0]>i[1]?[]:[...i]};return{type:"ungrouped",data:r,domain:{keys:e.map(t=>l(t)),values:i.map(t=>l(t))},indices:{keys:e.reduce((t,{property:e,index:i})=>(t[e]=i,t),{}),values:i.reduce((t,{property:e,index:i})=>(t[e]=i,t),{})},defs:{keys:e,values:i},time:0}}groupData(t,e){const i=new Map;for(const n of t.data){const{keys:t,values:o,datum:s}=n,r=e?e(n):t,a=pe(r);if(i.has(a)){const t=i.get(a);t.values.push(o),t.datum.push(s)}else i.set(a,{keys:r,values:[o],datum:[s]})}const n=new Array(i.size),o=new Array(i.size);let s=0;for(const[,{keys:t,values:e,datum:r}]of i.entries())o[s]=t,n[s++]={keys:t,values:e,datum:r};return Object.assign(Object.assign({},t),{type:"grouped",data:n,domain:Object.assign(Object.assign({},t.domain),{groups:o})})}aggregateData(t){var e,i,n,o,s,r,a;const{aggregates:l}=this;if(!l)return;const h=l.map(()=>[1/0,-1/0]),c=l.map(t=>t.properties.map(t=>this.valueIdxLookup(t))),d=l.map(t=>t.aggregateFunction),u=l.map(t=>t.groupAggregateFunction),p=l.map(t=>t.finalFunction);for(const l of t.data){let{values:g}=l;null!==(e=l.aggValues)&&void 0!==e||(l.aggValues=new Array(c.length)),"ungrouped"===t.type&&(g=[g]);let f=0;for(const t of c){let e=null!==(n=null===(i=u[f])||void 0===i?void 0:i.call(u))&&void 0!==n?n:ue([]);for(const i of g){const n=t.map(t=>i[t]),r=d[f](n,l.keys);r&&(e=null!==(s=null===(o=u[f])||void 0===o?void 0:o.call(u,r,e))&&void 0!==s?s:ue(r,e))}const c=(null!==(a=null===(r=p[f])||void 0===r?void 0:r.call(p,e))&&void 0!==a?a:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});ue(c,h[f]),l.aggValues[f++]=c}}t.domain.aggValues=h}postProcessGroups(t){const{groupProcessors:e}=this;if(e)for(const i of e){const e=i.properties.map(t=>this.valueIdxLookup(t)),n=i.adjust();if("grouped"===t.type)for(const i of t.data)for(const t of i.values)t&&n(t,e);else for(const i of t.data)i.values&&n(i.values,e)}}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n}of e)i()(t,this.valueIdxLookup(n))}reduceData(t){var e;const{reducers:i}=this,n=i.map(t=>t.reducer()),o=i.map(t=>t.initialValue);for(const e of t.data){let t=0;for(const i of n)o[t]=i(o[t],e),t++}for(let n=0;n<o.length;n++)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[i[n].property]=o[n]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Map,n=new Map,o=(t,e,i)=>{"category"===e?i.set(t,{type:e,domain:new Set}):i.set(t,{type:e,domain:[1/0,-1/0]})},s=(n=i)=>(t.forEach(t=>{var e;return o(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),e.forEach(t=>{var e;return o(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),n);s();return{dataDomain:i,processValue:(t,e,o)=>{var r,a,l,h,c;const d=t.property in e,u="missingValue"in t;t.missing||d||u||(t.missing=!0),i.has(null!==(r=t.id)&&void 0!==r?r:t.property)||s(i);let p=d?e[t.property]:t.missingValue;if(d){if(!(null===(l=null===(a=t.validation)||void 0===a?void 0:a.call(t,p))||void 0===l||l)){if(!("invalidValue"in t))return fe;p=t.invalidValue}}t.processor&&(n.has(t)||n.set(t,t.processor()),p=null===(h=n.get(t))||void 0===h?void 0:h(p,o!==fe?o:void 0));const g=i.get(null!==(c=t.id)&&void 0!==c?c:t.property);return"category"===(null==g?void 0:g.type)?g.domain.add(p):"range"===(null==g?void 0:g.type)&&(g.domain[0]>p&&(g.domain[0]=p),g.domain[1]<p&&(g.domain[1]=p)),p},initDataDomain:s}}}function me(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(t=>null!=t).join(" ");P.warnOnce(i)}}ye.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(j("agChartsDebug")))&&void 0!==t&&t};var ve=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};function be(t,e){var i,n,o,s;if("string"==typeof t)return t;e=null!=e?e:{};const{content:r=(null!==(i=e.content)&&void 0!==i?i:""),title:a=(null!==(n=e.title)&&void 0!==n?n:void 0),color:l=(null!==(o=e.color)&&void 0!==o?o:"white"),backgroundColor:h=(null!==(s=e.backgroundColor)&&void 0!==s?s:"#888")}=t;return`${a?`<div class="ag-chart-tooltip-title"\n        style="color: ${l}; background-color: ${h}">${a}</div>`:""}<div class="ag-chart-tooltip-content">${r}</div>`}const xe=["pointer","node"],ke=yt(t=>xe.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class Se{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}ve([ft(ke)],Se.prototype,"type",void 0),ve([ft(zt())],Se.prototype,"xOffset",void 0),ve([ft(zt())],Se.prototype,"yOffset",void 0);class we{constructor(t,e,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new Se,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,window.IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}if(we.tooltipDocuments.indexOf(e)<0){const t=e.createElement("style");t.innerHTML='\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',e.head.insertBefore(t,e.head.querySelector("style")),we.tooltipDocuments.push(e)}}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:s}=this,r=(t,e)=>{const n="ag-chart-tooltip-"+t;e?i.classList.add(n):i.classList.remove(n)};r("no-animation",!this.isVisible()&&!!t),r("no-interaction",!s),r("hidden",!t),r("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,s,r,a,l,h;const{element:c,canvasElement:d}=this;if(void 0!==e)c.innerHTML=e;else if(!c.innerHTML)return;const u=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,g=null!==(r=null===(s=t.position)||void 0===s?void 0:s.yOffset)&&void 0!==r?r:0,f=d.getBoundingClientRect(),y=f.left+t.offsetX-c.clientWidth/2+p,m=f.top+t.offsetY-c.clientHeight-8+g,v=this.getWindowBoundingBox(),b=v.x+v.width-c.clientWidth-1,x=v.y+v.height-c.clientHeight,k=u(v.x,y,b),S=u(v.y,m,x),w=!(k!==y||S!==m)&&!p&&!g,D=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(D),c.style.transform=`translate(${Math.round(k)}px, ${Math.round(S)}px)`,this.enableInteraction=null!==(h=t.enableInteraction)&&void 0!==h&&h,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new x(0,0,window.innerWidth,window.innerHeight)}toggle(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}}function De(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Oe(t){return{properties:t,type:"aggregate",aggregateFunction:t=>De(t)}}function Me(t,e){const i={properties:t,type:"aggregate",aggregateFunction:(t,i=[])=>{const n=i[1]-i[0];return e.aggregateFunction(t).map(t=>t/n)}};return e.groupAggregateFunction&&(i.groupAggregateFunction=e.groupAggregateFunction),i}we.tooltipDocuments=[],ve([ft(Mt)],we.prototype,"enabled",void 0),ve([ft(Ct)],we.prototype,"showArrow",void 0),ve([ft(Et)],we.prototype,"class",void 0),ve([ft(zt(0))],we.prototype,"delay",void 0),ve([function(t,e){const i=me();return gt((n,o,s)=>(s!==n[t]&&(i(o.toString(),`Use [${t}] instead.`),n[t]=e?e(s):s),pt),(e,n)=>(i(n.toString(),`Use [${t}] instead.`),e[t]))}("range",t=>t?"nearest":"exact")],we.prototype,"tracking",void 0),ve([ft(ae)],we.prototype,"range",void 0);var Ce,Ne=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Ee=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i};function Le(t,e,i={}){return Object.assign({property:t,type:"key",valueType:e?"range":"category",validation:t=>null!=ct(t,e)},i)}function Re(t,e,i={}){return Object.assign({property:t,type:"value",valueType:e?"range":"category",validation:t=>null!=ct(t,e)},i)}function Ie(t,e,i={}){return Object.assign(Object.assign({},Re(t,e,i)),{processor:()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=e,t)}})}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Ce||(Ce={}));class Te{constructor(t,e,i){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=i.id}}class _e extends Te{}class Ae extends Te{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Pe{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}Ne([ft(Pt)],Pe.prototype,"fill",void 0),Ne([ft(jt(0,1))],Pe.prototype,"fillOpacity",void 0),Ne([ft(Pt)],Pe.prototype,"stroke",void 0),Ne([ft(jt(0))],Pe.prototype,"strokeWidth",void 0);class Fe{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}Ne([ft(jt(0))],Fe.prototype,"strokeWidth",void 0),Ne([ft(jt(0,1))],Fe.prototype,"dimOpacity",void 0),Ne([ft(Ct)],Fe.prototype,"enabled",void 0);class Be{constructor(){this.color="black"}}Ne([ft(Pt)],Be.prototype,"color",void 0);class ze{constructor(){this.item=new Pe,this.series=new Fe,this.text=new Be}}class je{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new We,this.position=new Se}}Ne([ft(Mt)],je.prototype,"enabled",void 0),Ne([ft(Ct)],je.prototype,"showArrow",void 0);class We{constructor(){this.enabled=!1}}Ne([ft(Mt)],We.prototype,"enabled",void 0);class Ke extends st{constructor(t){super(),this.id=w(this),this.rootGroup=new B({name:"seriesRoot"}),this.directions=[de.X,de.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this._declarationOrder=-1,this.highlightStyle=new ze,this.ctx=t.moduleCtx;const{useSeriesGroupLayer:e=!0,useLabelLayer:i=!1,pickModes:n=[Ce.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:o={},directionNames:s={}}=t,{rootGroup:r}=this;this.directionKeys=o,this.directionNames=s,this.contentGroup=r.appendChild(new B({name:this.id+"-content",layer:e,zIndex:ce.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,0]})),this.highlightGroup=r.appendChild(new B({name:this.id+"-highlight",layer:!0,zIndex:ce.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,15e3]})),this.highlightNode=this.highlightGroup.appendChild(new B({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new B({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=n,i&&(this.labelGroup=r.appendChild(new B({name:this.id+"-series-labels",layer:!0,zIndex:ce.SERIES_LABEL_ZINDEX})))}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}getBandScalePadding(){return{inner:1,outer:0}}addChartEventListeners(){}destroy(){}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],o=[],s=(...t)=>{for(const e of t)r(e)},r=t=>{Array.isArray(t)?s(...t):"object"==typeof t?s(Object.values(t)):o.push(t)};return n?(n.forEach(t=>{const e=this[t];r(e)}),o):o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){}getOpacity(t){const{highlightStyle:{series:{dimOpacity:e=1,enabled:i=!0}}}=this;if(!1===i||1===e)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return e}}getStrokeWidth(t,e){const{highlightStyle:{series:{strokeWidth:i,enabled:n=!0}}}=this;if(!1===n||void 0===i)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}}isItemIdHighlighted(t){var e;const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),{series:n,itemId:o}=null!=i?i:{};return null!=n?n!==this?"other-highlighted":void 0===o?"highlighted":t&&i!==t&&o!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const n of i){if(e&&!e.includes(n))continue;let i=void 0;switch(n){case Ce.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case Ce.NEAREST_BY_MAIN_AXIS_FIRST:case Ce.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,n===Ce.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Ce.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:n,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){const i=this.getNodeClickEvent(t,e);this.fireEvent(i)}fireNodeDoubleClickEvent(t,e){const i=this.getNodeDoubleClickEvent(t,e);this.fireEvent(i)}getNodeClickEvent(t,e){return new _e(t,e,this)}getNodeDoubleClickEvent(t,e){return new Ae(t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(t,e){var i;const n=ge(t);if(0===n.length)return n;let[o,s]=n;if(o===s){const t=null!==(i=null==e?void 0:e.calculatePadding(o,s))&&void 0!==i?i:1;o-=t,s+=t}return[o,s]}}Ke.highlightedZIndex=1e12,Ne([ft(Nt)],Ke.prototype,"id",void 0),Ne([ft(Mt)],Ke.prototype,"_visible",void 0),Ne([ft(Mt)],Ke.prototype,"showInLegend",void 0),Ne([ft(Nt)],Ke.prototype,"cursor",void 0),Ne([ft(ae)],Ke.prototype,"nodeClickRange",void 0);var Ge=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Xe{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}Ge([ft(zt(0))],Xe.prototype,"top",void 0),Ge([ft(zt(0))],Xe.prototype,"right",void 0),Ge([ft(zt(0))],Xe.prototype,"bottom",void 0),Ge([ft(zt(0))],Xe.prototype,"left",void 0);class Ye{static init(){const t=window.ResizeObserver;if(t)this.resizeObserver=new t(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};window.setInterval(t,100)}this.ready=!0}static checkSize(t,e,i,n){t&&(t.size&&i===t.size.width&&n===t.size.height||(t.size={width:i,height:n},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})}static unobserve(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,n)}}function He(t,e,i,n,o){let s=t.x;t.x<e?s=e:t.x>e+n&&(s=e+n);let r=t.y;t.y<i?r=i:t.y>i+o&&(r=i+o);const a=t.x-s,l=t.y-r;return Math.sqrt(a*a+l*l)<=.5*t.size}function Ve(t,e,i,n,o){const s=t.x+t.width>e&&t.x<e+n,r=t.y+t.height>i&&t.y<i+o;return s&&r}Ye.elements=new Map,Ye.ready=!1;var $e,Ue=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};function Ze(t,e){let i,n,o=0,s=!1;const r=()=>s,a=()=>{s=!1,null==n||n(),n=void 0,i=void 0,o>0&&t(l)},l=()=>{const t=o;o=0,s=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(){0!==o||r()||t(l),o++},await(){return Ue(this,void 0,void 0,(function*(){if(r())for(i||(i=new Promise(t=>{n=t}));r();)yield i}))}}}function qe(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,o=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&o.push(i)}else if(n>0){const i=Math.sqrt(n),s=(-e-i)/(2*t),r=(-e+i)/(2*t);s>=0&&s<=1&&o.push(s),r>=0&&r<=1&&o.push(r)}return o}(e,i,n);const o=e/t,s=i/t,r=(3*s-o*o)/9,a=(9*o*s-27*(n/t)-2*o*o*o)/54,l=r*r*r+a*a,h=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),n=Math.abs(Math.sqrt(3)*(e-i)/2),s=-1/3*o+(e+i);if(s>=0&&s<=1&&h.push(s),0===n){const t=-1/3*o-(e+i)/2;t>=0&&t<=1&&h.push(t)}}else{const t=Math.acos(a/Math.sqrt(-r*r*r)),e=1/3*o,i=2*Math.sqrt(-r),n=i*Math.cos(1/3*t)-e,s=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;n>=0&&n<=1&&h.push(n),s>=0&&s<=1&&h.push(s),l>=0&&l<=1&&h.push(l)}return h}function Je(t,e,i,n,o,s,r,a){const l=(i-t)*(a-s)-(n-e)*(r-o);if(0===l)return null;const h=((r-o)*(e-s)-(t-o)*(a-s))/l,c=((i-t)*(e-s)-(n-e)*(t-o))/l;return h>=0&&h<=1&&c>=0&&c<=1?{x:t+h*(i-t),y:e+h*(n-e)}:null}function Qe(t,e,i,n,o,s,r,a,l,h,c,d){const u=[],p=h-d,g=c-l,f=l*(d-h)-h*(c-l),y=ti(t,i,o,r),m=ti(e,n,s,a),v=qe(p*y[0]+g*m[0],p*y[1]+g*m[1],p*y[2]+g*m[2],p*y[3]+g*m[3]+f);for(const t of v){const e=t*t,i=t*e,n=y[0]*i+y[1]*e+y[2]*t+y[3],o=m[0]*i+m[1]*e+m[2]*t+m[3];let s;s=l!==c?(n-l)/(c-l):(o-h)/(d-h),s>=0&&s<=1&&u.push({x:n,y:o})}return u}function ti(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function ei(t,e,i,n,o,s,r,a,l,h){const c=(h-a)/(l-r),d=a-c*r,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*u*g;if(f<0)return[];const y=(-p+Math.sqrt(f))/2/u,m=(-p-Math.sqrt(f))/2/u,v=[];return[y,m].forEach(t=>{if(!(t>=Math.min(r,l)&&t<=Math.max(r,l)))return;const e=c*t,i=X(s?o:n);let a=X(s?n:o),h=X(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),h<i&&(h+=2*Math.PI),h>=i&&h<=a&&v.push({x:t,y:e})}),v}!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}($e||($e={}));class ii{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case $e.Move:t.moveTo(i[n++],i[n++]);break;case $e.Line:t.lineTo(i[n++],i[n++]);break;case $e.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case $e.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case $e.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push($e.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push($e.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,s=!1){const r=t+i*Math.cos(o),a=e+i*Math.sin(o);this.xy?(this.xy[0]=r,this.xy[1]=a):this.xy=[r,a],this.commands.push($e.Arc),this.params.push(t,e,i,n,o,s?1:0)}cubicCurveTo(t,e,i,n,o,s){this.xy||this.moveTo(t,e),this.commands.push($e.Curve),this.params.push(t,e,i,n,o,s),this.xy[0]=o,this.xy[1]=s}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push($e.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,s=-1e4,r=-1e4;let a=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<o;u++)switch(i[u]){case $e.Move:isNaN(a)||Je(a,l,h,c,s,r,t,e)&&d++,h=n[p++],a=h,c=n[p++],l=c;break;case $e.Line:Je(h,c,n[p++],n[p++],s,r,t,e)&&d++,h=n[p-2],c=n[p-1];break;case $e.Curve:d+=Qe(h,c,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],s,r,t,e).length,h=n[p-2],c=n[p-1];break;case $e.Arc:d+=ei(n[p++],n[p++],n[p++],n[p++],n[p++],Boolean(n[p++]),s,r,t,e).length,h=n[p-2],c=n[p-1];break;case $e.ClosePath:isNaN(a)||Je(a,l,h,c,s,r,t,e)&&d++}return d%2==1}}var ni=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};function oi(t){const{redraw:e=D.MAJOR,changeCb:i,convertor:n}=null!=t?t:{};return M({redraw:e,type:"path",convertor:n,changeCb:i})}class si extends U{constructor(){super(...arguments),this.path=new ii,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,D.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i;const{ctx:n,forceRender:o,stats:s}=t;if(this.dirty!==D.NONE||o){if(this.computeTransformMatrix(),this.matrix.toContext(n),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(n.save(),"normal"===this.clipMode&&(this.clipPath.draw(n),n.clip()),this.path.draw(n),this.fillStroke(n),"punch-out"===this.clipMode){this.clipPath.draw(n),n.clip();const{x:t=-1e4,y:i=-1e4,width:o=2e4,height:s=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};n.clearRect(t,i,o,s)}n.restore()}else this.path.draw(n),this.fillStroke(n);null===(i=this.fillShadow)||void 0===i||i.markClean(),super.render(t)}else s&&(s.nodesSkipped+=this.nodeCount.count)}}si.className="Path",ni([oi()],si.prototype,"clipPath",void 0),ni([oi()],si.prototype,"clipMode",void 0);var ri=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class ai extends si{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new x(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:s,y:r,t:a}of e)n+=s*t,o+=r*t,"move"===a?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}ri([oi()],ai.prototype,"x",void 0),ri([oi()],ai.prototype,"y",void 0),ri([oi({convertor:Math.abs})],ai.prototype,"size",void 0);class li extends ai{updatePath(){const{x:t,y:e,path:i,size:n}=this,o=n/2;i.clear(),i.arc(t,e,o,0,2*Math.PI),i.closePath()}}li.className="Circle";var hi=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};const ci=["circle","cross","diamond","heart","plus","square","triangle"],di=yt(t=>ci.includes(t)||Object.getPrototypeOf(t)===ai,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class ui extends C{constructor(){super(...arguments),this.enabled=!0,this.shape=li,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}hi([ft(Mt),M({redraw:D.MAJOR})],ui.prototype,"enabled",void 0),hi([ft(di),M({redraw:D.MAJOR})],ui.prototype,"shape",void 0),hi([ft(zt(0)),M({redraw:D.MAJOR})],ui.prototype,"size",void 0),hi([ft(zt(0)),M({redraw:D.MAJOR})],ui.prototype,"maxSize",void 0),hi([ft(Gt),M({redraw:D.MAJOR})],ui.prototype,"domain",void 0),hi([ft(Pt),M({redraw:D.MAJOR})],ui.prototype,"fill",void 0),hi([ft(Pt),M({redraw:D.MAJOR})],ui.prototype,"stroke",void 0),hi([ft(jt(0)),M({redraw:D.MAJOR})],ui.prototype,"strokeWidth",void 0),hi([ft(jt(0,1)),M({redraw:D.MAJOR})],ui.prototype,"fillOpacity",void 0),hi([ft(jt(0,1)),M({redraw:D.MAJOR})],ui.prototype,"strokeOpacity",void 0);class pi{constructor(t,e){this._nodes=[],this._data=[],this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(R,e)?()=>new e:e}static select(t,e){return new pi(t,e)}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}update(t,e){const i=this._data,n=this._parent,o=this._factory;t.length>i.length?t.slice(i.length).forEach(t=>{const i=o(t);i.datum=t,null==e||e(i),n.appendChild(i),this._nodes.push(i)}):t.length<i.length&&this._nodes.splice(t.length).forEach(t=>{n.removeChild(t)}),this._data=t.slice(0);for(let e=0;e<t.length;e++)this._nodes[e].datum=this._data[e];return this}clear(){return this.update([]),this}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(t,e){return pi.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return pi.selectAll(t,t=>t.tag===e)}select(t){return pi.selectAll(this._parent,t)}selectByClass(t){return this.select(e=>e instanceof t)}selectByTag(t){return this.select(e=>e.tag===t)}nodes(){return this._nodes}}function gi(t,e,i){return Math.max(e,Math.min(i,t))}class fi{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=gi(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=gi(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=gi(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,s]=this.range,r=s-o,a=r/Math.max(1,t+2*n-i),l=e?Math.floor(a):a,h=o+(r-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=a*(1-i),g=[];for(let e=0;e<t;e++)g.push(c+l*e);this._bandwidth=u,this._rawBandwidth=p,this.ordinalRange=g}}var yi=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class mi extends U{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new x(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===D.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let s=this.x1,r=this.y1,a=this.x2,l=this.y2;if(s===a){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,a=t}else if(r===l){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,l=t}i.beginPath(),i.moveTo(s,r),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function vi(t,e,i=1e-10){return Math.abs(t-e)<i}function bi(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}mi.className="Line",mi.defaultStyles=Object.assign({},U.defaultStyles,{fill:void 0,strokeWidth:1}),yi([M({redraw:D.MAJOR})],mi.prototype,"x1",void 0),yi([M({redraw:D.MAJOR})],mi.prototype,"y1",void 0),yi([M({redraw:D.MAJOR})],mi.prototype,"x2",void 0),yi([M({redraw:D.MAJOR})],mi.prototype,"y2",void 0);var xi,ki=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(xi||(xi={}));class Si extends si{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=xi.Open,this.restoreOwnStyles()}get fullPie(){return vi(X(this.startAngle),X(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===xi.Chord?t.closePath():this.type!==xi.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new x(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==xi.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}function wi(t,e){return gt((i,n,o)=>(i[t][null!=e?e:n]=o,o))}function Di(t){const{newValue:e,oldValue:i,changeValue:n}=t;return gt((t,o,s,r)=>(s!==r&&(void 0!==r&&(null==i||i.call(t,r)),void 0!==s&&(null==e||e.call(t,s)),null==n||n.call(t,s,r)),s))}Si.className="Arc",Si.defaultStyles=Object.assign({},U.defaultStyles,{lineWidth:1,fillStyle:null}),ki([oi()],Si.prototype,"centerX",void 0),ki([oi()],Si.prototype,"centerY",void 0),ki([oi()],Si.prototype,"radius",void 0),ki([oi()],Si.prototype,"startAngle",void 0),ki([oi()],Si.prototype,"endAngle",void 0),ki([oi()],Si.prototype,"counterClockwise",void 0),ki([oi()],Si.prototype,"type",void 0);var Oi=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Mi{constructor(){this.node=new J,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=Mi.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=N.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:s}=this,r=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(r)&&!isFinite(a))return void(this.node.text=o);const l=J.wrap(null!=o?o:"",r,a,this,s);this.node.text=l}}function Ci(t,e){return t.length===e.length&&t.every((t,i)=>{const n=e[i];return Array.isArray(t)&&Array.isArray(n)?Ci(t,n):t===n})}function Ni(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}Mi.PADDING=10,Oi([ft(Mt)],Mi.prototype,"enabled",void 0),Oi([ft(Et),wi("node")],Mi.prototype,"text",void 0),Oi([ft(Ut),wi("node")],Mi.prototype,"fontStyle",void 0),Oi([ft(qt),wi("node")],Mi.prototype,"fontWeight",void 0),Oi([ft(zt(0)),wi("node")],Mi.prototype,"fontSize",void 0),Oi([ft(Nt),wi("node")],Mi.prototype,"fontFamily",void 0),Oi([ft(Pt),wi("node","fill")],Mi.prototype,"color",void 0),Oi([ft(jt(0))],Mi.prototype,"spacing",void 0),Oi([ft(jt(0))],Mi.prototype,"lineHeight",void 0),Oi([ft(jt(0))],Mi.prototype,"maxWidth",void 0),Oi([ft(jt(0))],Mi.prototype,"maxHeight",void 0),Oi([ft(he)],Mi.prototype,"wrapping",void 0);class Ei{constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=Ei.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(t,e){var i;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=null!==(i=null==e?void 0:e.strict)&&void 0!==i?i:this.strictClampByDefault,o=this.getDomain().map(t=>this.transform(t)),[s,r]=o,{range:a}=this,[l,h]=a;return(t=this.transform(t))<s?n?NaN:l:t>r?n?NaN:h:s===r?(l+h)/2:t===s?l:t===r?h:l+(this.fromDomain(t)-this.fromDomain(s))/(this.fromDomain(r)-this.fromDomain(s))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,n]=e,{range:o}=this,[s,r]=o,a=s>r;let l;return t<(a?r:s)?a?n:i:t>(a?s:r)?a?i:n:(l=s===r?this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):this.toDomain(this.fromDomain(i)+(t-s)/(r-s)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}isDenseInterval({start:t,stop:e,interval:i,count:n}){const{range:o}=this,s=e-t,r=Math.min(o[0],o[1]);return null!=n||(n=s/("number"==typeof i?i:1)),n>=Math.max(o[0],o[1])-r&&(P.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}function Li(t,e,i,n,o){if(i<2)return _i(t,e,e-t);const s=Ii(t,e,i,n,o);return isNaN(s)?new Ti(0):_i(t=Math.ceil(t/s)*s,e=Math.floor(e/s)*s,s)}Ei.defaultTickCount=5,Ei.defaultMaxTickCount=6;const Ri=[1,2,5,10];function Ii(t,e,i,n=0,o=1/0){const s=(e-t)/i,r=Math.floor(Math.log10(s)),a=Math.pow(10,r),l=Ri.map(s=>{const r=s*a,l=Math.ceil((e-t)/r);return{multiplier:s,isWithinBounds:l>=n&&l<=o,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class Ti extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function _i(t,e,i){const n=(t=>{var e,i;const n=t.split("e");return Math.max((null!==(i=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(n[1]),0)})((i%1).toExponential()),o=Math.pow(10,n),s=Math.ceil((e-t)/i),r=new Ti(n);for(let e=0;e<=s;e++){const n=t+i*e;r.push(Math.round(n*o)/o)}return r}const Ai={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Pi(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function Fi(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(Pi(t,n)/7)+1:0}const Bi={a:t=>Ai.shortDays[t.getDay()],A:t=>Ai.days[t.getDay()],b:t=>Ai.shortMonths[t.getMonth()],B:t=>Ai.months[t.getMonth()],c:"%x, %X",d:(t,e)=>ji(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>ji(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>ji(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":ji(i,2,null!=e?e:"0")},j:(t,e)=>ji(Pi(t)+1,3,null!=e?e:"0"),m:(t,e)=>ji(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>ji(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>ji(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>ji(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>ji(Fi(t,0),2,null!=e?e:"0"),V:(t,e)=>ji(function t(e,i=e.getFullYear()){const n=new Date(i,0,1).getDay(),o=new Date(i,0,(4-n+7)%7-3+1);return o<=e?Math.floor(Pi(e,o)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>ji(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>ji(Fi(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>ji(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>ji(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${ji(Math.floor(i/60),2,"0")}${ji(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},zi={_:" ",0:"0","-":""};function ji(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:`${i.repeat(e-n.length)}${n}`}function Wi(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],o=zi[n];null!=o&&i++;const s=t[i+1],r=Bi[s];if("function"==typeof r)e.push([r,o]);else if("string"==typeof r){const t=Wi(r);e.push([t,o])}else e.push(`${null!=o?o:""}${s}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}var Ki;!function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(Ki||(Ki={}));const Gi={[Ki.MILLISECOND]:".%L",[Ki.SECOND]:":%S",[Ki.MINUTE]:"%I:%M",[Ki.HOUR]:"%I %p",[Ki.WEEK_DAY]:"%a",[Ki.SHORT_MONTH]:"%b %d",[Ki.MONTH]:"%B",[Ki.SHORT_YEAR]:"%y",[Ki.YEAR]:"%Y"};function Xi(t){return t instanceof Date?t.getTime():t}class Yi extends Ei{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=y,this.month=f,this.week=g,this.day=d,this.hour=c,this.minute=l,this.second=r,this.millisecond=o,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=Ki.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const n=Xi(t[0]),o=Xi(t[t.length-1]),s=new Date(n).getFullYear(),r=new Date(o).getFullYear()-s>0;return this.buildFormatString(e,r)}buildFormatString(t,e){let i=[Gi[t]],n=0;const o=this.getDomain(),s=Math.min(...o.map(Xi)),r=Math.max(...o.map(Xi))-s;switch(t){case Ki.SECOND:r/6e4>1&&i.push(Gi[Ki.MINUTE]);case Ki.MINUTE:r/36e5>1&&i.push(Gi[Ki.HOUR]);case Ki.HOUR:n=i.length,r/864e5>1&&i.push(Gi[Ki.WEEK_DAY]);case Ki.WEEK_DAY:if(r/6048e5>1||e){const t=i.indexOf(Gi[Ki.WEEK_DAY]);t>-1&&i.splice(t,1,Gi[Ki.SHORT_MONTH])}case Ki.SHORT_MONTH:case Ki.MONTH:(r/31536e6>1||e)&&i.push(Gi[Ki.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?Ki.MILLISECOND:this.minute.floor(t)<t?Ki.SECOND:this.hour.floor(t)<t?Ki.MINUTE:this.day.floor(t)<t?Ki.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?Ki.WEEK_DAY:Ki.SHORT_MONTH:this.year.floor(t)<t?Ki.MONTH:Ki.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Wi(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:s}=this;let r,a;const l=null!=i?i:Ei.defaultTickCount,h=Math.abs(e-t)/Math.max(l,1);let c=0;for(;c<s.length&&h>s[c][2];)c++;if(0===c)a=Math.max(Ii(t,e,l,n,o),1),r=this.millisecond;else if(c===s.length){a=Ii(t/31536e6,e/31536e6,l,n,o),r=this.year}else{const t=h-s[c-1][2]<s[c][2]-h?c-1:c;[r,a]=s[t]}return r.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Xi);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:n,tickIntervals:o}=this;if(!n)return[];if(n instanceof i){const i=n.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:n,count:i.length})?this.getDefaultTicks({start:t,stop:e}):i}const s=Math.abs(n);if(this.isDenseInterval({start:t,stop:e,interval:s}))return this.getDefaultTicks({start:t,stop:e});const r=[...o];r.reverse();const a=r.find(t=>s%t[2]==0);if(a){return a[0].every(s/(a[2]/a[1])).range(new Date(t),new Date(e))}let l=new Date(t);const h=new Date(e),c=[];for(;l<=h;)c.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+s);return c}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):Wi(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(Xi(t)===Xi(i)&&Xi(e)===Xi(n))break;t=i,e=n}}updateNiceDomainIteration(t,e){const n=Xi(t),o=Xi(e),{interval:s}=this;let r;if(s instanceof i)r=s;else{const t="number"==typeof s?(o-n)/Math.max(s,1):this.tickCount;r=this.getTickInterval({start:n,stop:o,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),n=i[0],o=i[i.length-1];this.niceDomain=[n,o]}}}const Hi=t=>`(${t})`,Vi=t=>Hi(t)+"?",$i=t=>Vi("?:"+t),Ui=new RegExp(["^",$i(`${Vi(".")}${Hi("[<>=^]")}`),Vi("[+\\-( ]"),Vi("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),Vi("0"),Vi("\\d+"),Vi(","),$i("\\."+Hi("\\d+")),Vi("~"),Vi("[%a-z]"),"$"].join(""),"i"),Zi=new RegExp(["^",Hi(".*?"),`#\\{${Hi(".+?")}\\}`,Hi(".*?"),"$"].join(""));function qi(t){let e,i;const n=Zi.exec(t);n&&([,e,t,i]=n);const o=Ui.exec(t);if(!o)throw new Error("The number formatter is invalid: "+t);const[,s,r,a,l,h,c,d,u,p,g]=o;return{fill:s,align:r,sign:a,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function Ji(t){const e="string"==typeof t?qi(t):t,{fill:i,align:n,sign:o="-",symbol:s,zero:r,width:a,comma:l,type:h,prefix:c="",suffix:d=""}=e;let u,{precision:p,trim:g}=e;if(h)if(h in en&&h in tn)u=isNaN(p)?tn[h]:en[h];else if(h in en)u=en[h];else{if(!(h in tn))throw new Error("The number formatter type is invalid: "+h);u=tn[h]}else u=en.g,g=!0;return isNaN(p)&&(p=h?6:12),t=>{let e=u(t,p);return g&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),o=t.substring(i);for(let t=n.length-3;t>0;t-=3)n.splice(t,0,e);return`${n.join("")}${o}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const n="+"===i?"+":"";return`${t>=0?n:"\u2212"}${e}`}(t,e,o),s&&"#"!==s&&(e=`${s}${e}`),"#"===s&&"x"===h&&(e="0x"+e),"s"===h&&(e=`${e}${function(t){return rn[nn(t)]}(t)}`),"%"!==h&&"p"!==h||(e+="%"),isNaN(a)||(e=function(t,e,i=" ",n=">"){let o=t;if(">"!==n&&n){if("<"===n)o=o.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-o.length),n=Math.ceil(t/2),s=Math.floor(t/2);o=o.padStart(n+o.length,i),o=o.padEnd(s+o.length,i)}}else o=o.padStart(e,i);return o}(e,a,null!=i?i:r,n)),e=`${c}${e}${d}`,e}}const Qi=t=>Math.floor(Math.abs(t)),tn={b:t=>Qi(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>Qi(t).toString(8),x:t=>Qi(t).toString(16),X:t=>tn.x(t).toUpperCase(),n:t=>tn.d(t),"%":t=>""+Qi(100*t).toFixed(0)},en={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>en.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>en.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>en.g(t,e).toUpperCase(),n:(t,e)=>en.g(t,e),p:(t,e)=>en.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const o=Math.pow(10,n);return(Math.round(i/o)*o).toFixed()},s:(t,e)=>{const i=nn(t);return en.r(t/Math.pow(10,i),e)},"%":(t,e)=>en.f(100*t,e)};function nn(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(on,Math.min(sn,i))}const on=-24,sn=24,rn={[on]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[sn]:"Y"};var an=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};const ln=t=>t;class hn extends Ei{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=ln,this.basePow=ln,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t)}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?hn.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let s=this.log(n),r=this.log(o);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(r-s),i=_i(s,r,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=n&&t<=o);if(!this.isDenseInterval({start:n,stop:o,interval:t,count:i.length}))return i}if(!(i%1==0)||r-s>=e)return Li(s,r,Math.min(r-s,e)).map(t=>this.pow(t));const a=[],l=n>0;s=Math.floor(s)-1,r=Math.round(r)+1;const h=Math.min(...this.range),c=(Math.max(...this.range)-h)/e;let d=1/0;for(let t=s;t<=r;t++){const e=this.convert(this.pow(t+1));for(let s=1;s<i;s++){const r=l?s:i-s+1,h=this.pow(t)*r,u=this.convert(h),p=Math.abs(d-u),g=Math.abs(u-e),f=p>=c&&g>=c;h>=n&&h<=o&&(1===s||f)&&(a.push(h),d=u)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"function"!=typeof i&&(i=Ji(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}function cn(t,e=[void 0]){return gt((i,n,o)=>e.includes(o)?t:o)}function dn(t){const{length:e}=t;if(0===e)return;let i=1/0,n=-1/0;for(let o=0;o<e;o++){let e=t[o];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>n&&(n=e))}const o=[i,n];return o.some(t=>!isFinite(t))?void 0:o}an([ft(zt(0))],hn.prototype,"base",void 0);var un=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class pn{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return Q(this)}}function gn(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?X(Y(t.rotation)):0,o=!n&&e>=0&&e<=Math.PI?-1:1,s=!n&&i>=0&&i<=Math.PI?-1:1;let r=0;return t.parallel?r=o*Math.PI/2:-1===s&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:o,regularFlipFlag:s}}function fn(t,e,i,n,o){const s=e>0&&e<=Math.PI,r=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(s||r?-1:1)==-1)return"end"}else if(n*o==-1)return"end";return"start"}function yn(t,e,i,n,o){const{width:s,height:r}=e,a=new x(i,n,0,0);o.transformBBox(a,e);const{x:l=0,y:h=0}=e;return e.width=s,e.height=r,{point:{x:l,y:h,size:0},label:{width:s,height:r,text:t}}}un([ft(Mt)],pn.prototype,"enabled",void 0),un([ft(zt(0))],pn.prototype,"fontSize",void 0),un([ft(Nt)],pn.prototype,"fontFamily",void 0),un([ft(Ut)],pn.prototype,"fontStyle",void 0),un([ft(qt)],pn.prototype,"fontWeight",void 0),un([ft(At)],pn.prototype,"color",void 0);var mn=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},vn=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i};const bn=yt((t,e)=>zt(0)(t,e)||t instanceof i,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),xn=yt((t,e)=>mt(t,e,bn),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),kn=yt((t,e)=>mt(t,e,(t,e)=>0!==t&&zt(0)(t,e)||t instanceof i),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Sn=["stroke","lineDash"],wn=yt(vt(void 0,t=>{for(const e in t)if(!Sn.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var Dn,On;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(Dn||(Dn={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(On||(On={}));class Mn{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}mn([ft(zt(0))],Mn.prototype,"width",void 0),mn([ft(Pt)],Mn.prototype,"color",void 0);class Cn{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}mn([ft(Mt)],Cn.prototype,"enabled",void 0),mn([ft(zt(0))],Cn.prototype,"width",void 0),mn([ft(zt(0))],Cn.prototype,"size",void 0),mn([ft(Pt)],Cn.prototype,"color",void 0),mn([ft(xn),function(t,e){const i=null==e?void 0:e.default,n=me();return gt((e,o,s)=>(s!==i&&n(o.toString(),t),s))}("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],Cn.prototype,"count",void 0),mn([ft(kn)],Cn.prototype,"interval",void 0),mn([ft(bt())],Cn.prototype,"values",void 0),mn([ft(xt(Wt(1),St("maxSpacing"))),cn(NaN)],Cn.prototype,"minSpacing",void 0);class Nn{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Q(this)}}mn([ft(Mt)],Nn.prototype,"enabled",void 0),mn([ft(Ct)],Nn.prototype,"autoWrap",void 0),mn([ft(jt(0))],Nn.prototype,"maxWidth",void 0),mn([ft(jt(0))],Nn.prototype,"maxHeight",void 0),mn([ft(Ut)],Nn.prototype,"fontStyle",void 0),mn([ft(qt)],Nn.prototype,"fontWeight",void 0),mn([ft(zt(1))],Nn.prototype,"fontSize",void 0),mn([ft(Nt)],Nn.prototype,"fontFamily",void 0),mn([ft(zt(0))],Nn.prototype,"padding",void 0),mn([ft(Wt()),cn(NaN)],Nn.prototype,"minSpacing",void 0),mn([ft(Pt)],Nn.prototype,"color",void 0),mn([ft(jt(-360,360))],Nn.prototype,"rotation",void 0),mn([ft(Ct)],Nn.prototype,"autoRotate",void 0),mn([ft(zt(-360,360))],Nn.prototype,"autoRotateAngle",void 0),mn([ft(Mt)],Nn.prototype,"avoidCollisions",void 0),mn([ft(Mt)],Nn.prototype,"mirrored",void 0),mn([ft(Mt)],Nn.prototype,"parallel",void 0),mn([ft(Et)],Nn.prototype,"format",void 0);class En{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}mn([ft(Mt)],En.prototype,"enabled",void 0),mn([ft(Et)],En.prototype,"text",void 0),mn([ft(Ut)],En.prototype,"fontStyle",void 0),mn([ft(qt)],En.prototype,"fontWeight",void 0),mn([ft(zt(0))],En.prototype,"fontSize",void 0),mn([ft(Nt)],En.prototype,"fontFamily",void 0),mn([ft(Pt)],En.prototype,"color",void 0),mn([ft(he)],En.prototype,"wrapping",void 0),mn([ft(Ot)],En.prototype,"formatter",void 0);class Ln{constructor(t,e){this.moduleCtx=t,this.id=w(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new B({name:this.id+"-axis",zIndex:ce.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new mi),this.tickLineGroup=this.axisGroup.appendChild(new B({name:this.id+"-Axis-tick-lines",zIndex:ce.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new B({name:this.id+"-Axis-tick-labels",zIndex:ce.AXIS_ZINDEX})),this.crossLineGroup=new B({name:this.id+"-CrossLines"}),this.gridGroup=new B({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new B({name:this.id+"-gridLines",zIndex:ce.AXIS_GRID_ZINDEX})),this.gridArcGroup=this.gridGroup.appendChild(new B({name:this.id+"-gridArcs",zIndex:ce.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=pi.select(this.tickLineGroup,mi),this.tickLabelGroupSelection=pi.select(this.tickLabelGroup,J),this.gridLineGroupSelection=pi.select(this.gridLineGroup,mi),this.gridArcGroupSelection=pi.select(this.gridArcGroup,Si),this._crossLines=[],this.line=new Mn,this.tick=this.createTick(),this.label=new Nn,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Mi,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.thickness=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node)}get scale(){return this._scale}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),s=o*i[0],r=e[0]-s;n.range=[r,r+o],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){t.insertBefore(this.gridGroup,e),t.insertBefore(this.axisGroup,e),t.insertBefore(this.crossLineGroup,e)}detachAxis(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){return 0===this.inRangeEx(t,e,i)}inRangeEx(t,e=0,i=0){const{range:n}=this,o=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return t+e<o-i?-1:t>s+i?1:0}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,o=!(i instanceof hn)&&n>0?t=>"number"==typeof t?t.toFixed(n):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=o,P.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setDomain(){var t;const{scale:e,dataDomain:i,tick:{values:n}}=this;if(n&&e instanceof Ei){const[o,s]=null!==(t=dn(n))&&void 0!==t?t:[1/0,-1/0],r=Math.min(e.fromDomain(i[0]),o),a=Math.max(e.fromDomain(i[1]),s);e.domain=[e.toDomain(r),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&n instanceof Ei)return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof Yi&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}set radialGrid(t){this._radialGrid!==t&&(this._radialGrid=t,this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear())}get radialGrid(){return this._radialGrid}createTick(){return new Cn}update(t){const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag(),s=o*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:e,sideFlag:o}),this.updateLine();const r=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:n,labelX:s,sideFlag:o}),{tickData:a,combinedRotation:l,textBaseline:h,textAlign:c}=r,d=vn(r,["tickData","combinedRotation","textBaseline","textAlign"]);return this.updateSelections(a.ticks),this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:l,textBaseline:h,textAlign:c,labelX:s}),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(o),this.updateTitle({anyTickVisible:a.ticks.length>0,sideFlag:o}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n,sideFlag:o}),this.updateLayoutState(),t=d.primaryTickCount}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;t instanceof Ei&&(this.setTickCount(this.tick.count),t.nice=e,t.update())}calculateRotations(){const t=Y(this.rotation);return{rotation:t,parallelFlipRotation:X(t),regularFlipRotation:X(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var s;const{scale:r,tick:a,label:{parallel:l,rotation:h,fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p}}=this,g=void 0!==t,{defaultRotation:f,configuredRotation:y,parallelFlipFlag:m,regularFlipFlag:v}=gn({rotation:h,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=y+f,x=new k,{maxTickCount:S}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(s=a.maxSpacing)&&void 0!==s?s:NaN}),w=r instanceof Ei,D=a.count||!w||isNaN(S)?10:S;let O=fn(l,y,0,o,v);const M=function(t,e,i,n){return t&&!e?i*n==-1?"hanging":"bottom":"middle"}(l,y,o,m),C={fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p,textBaseline:M,textAlign:O};let N={rawTicks:[],ticks:[],labelCount:0},E=0,L=0,R=!0,I=!1;for(;R&&E<=D&&!I;){L=0,O=fn(l,y,0,o,v);const e=this.getTickStrategies({secondaryAxis:g,index:E});for(const i of e){({tickData:N,index:E,autoRotation:L,terminate:I}=i({index:E,tickData:N,textProps:C,labelOverlap:R,terminate:I,primaryTickCount:t}));const e=N.ticks;O=fn(l,y,L,o,v);const s=0!==y||0!==L,r=b+L;R=this.checkLabelOverlap(r,s,x,e,n,Object.assign(Object.assign({},C),{textAlign:O}))}}const T=f+y+L;return!g&&N.rawTicks.length>0&&(t=N.rawTicks.length),{tickData:N,primaryTickCount:t,combinedRotation:T,textBaseline:M,textAlign:O}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,s=i instanceof Ei,r=n.enabled&&n.avoidCollisions,a=!(s&&void 0===this.tick.count)&&0!==t&&r,l=!0===n.autoRotate&&void 0===n.rotation,h=[];let c;c=this.tick.values?On.VALUES:e?On.CREATE_SECONDARY:a?On.FILTER:On.CREATE;if(h.push(({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(c,t,e,n,i)),!s&&!isNaN(o.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(On.FILTER,t,e,n,i);h.push(t)}if(!r)return h;if(n.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);h.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:n})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:n});h.push(t)}return h}createTickData(t,e,i,n,o){var s,r,a;const{scale:l,tick:h}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:h.minSpacing,maxSpacing:null!==(s=h.maxSpacing)&&void 0!==s?s:NaN}),p=l instanceof Ei,g=h.count||!p||isNaN(c)?10:c;let f=null!==(r=h.count)&&void 0!==r?r:p?Math.max(u-e,d):c;const y=void 0===h.interval&&void 0===h.values&&void 0===h.count&&f>d&&(p||t===On.FILTER);let m=!0;for(;m&&e<=g;){const n=i.rawTicks;f=null!==(a=h.count)&&void 0!==a?a:p?Math.max(u-e,d):c;const{rawTicks:s,ticks:r,labelCount:l}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:f,minTickCount:d,maxTickCount:c,primaryTickCount:o});i.rawTicks=s,i.ticks=r,i.labelCount=l,m=!!y&&Ni(s,n),e++}const v=void 0!==h.interval||void 0!==h.values;return n||(n=v),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,s){k.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const o=t[n],{point:{x:s,y:r},label:{text:a}}=o;let{label:{width:l,height:h}}=o;l+=null!=e?e:0,h+=null!=e?e:0;if(i.some(t=>Ve(t,s,r,l,h)))return!0;i.push({index:n,text:a,x:s,y:r,width:l,height:h,datum:o})}return!1}(this.createLabelData(n,o,s,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,n){const o=[];for(const s of t){const{tickLabel:t,translationY:r}=s;if(""===t||null==t)continue;const a=ot(t),{width:l,height:h}=tt(a,e,r,i),c=yn(t,new x(e,r,l,h),e,r,n);o.push(c)}return o}getAutoRotation(t){return t?X(Y(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:s}){var r;const{scale:a}=this;let l=[];switch(t){case On.VALUES:l=this.tick.values;break;case On.CREATE_SECONDARY:l=this.updateSecondaryAxisTicks(s);break;case On.FILTER:l=this.filterTicks(e,i);break;default:l=this.createTicks(i,n,o)}this.onLabelFormatChange(l,this.label.format),this.fractionDigits=l.fractionDigits>=0?l.fractionDigits:0;const h=(null!==(r=this.scale.bandwidth)&&void 0!==r?r:0)/2,c=[];let d=0;for(let t=0;t<l.length;t++){const e=l[t],i=a.convert(e)+h,n=this.formatTick(e,t);c.push({tick:e,tickLabel:n,translationY:i}),""!==n&&null!=n&&d++}return{rawTicks:l,ticks:c,labelCount:d}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%n==0)}createTicks(t,e,i){return this.setTickCount(t,e,i),this.scale.ticks()}estimateTickCount({minSpacing:t,maxSpacing:e}){const i=this.calculateAvailableRange(),n=Math.max(Ln.defaultTickMinSpacing,i/Ei.defaultMaxTickCount);isNaN(t)&&isNaN(e)?(t=n)>(e=i)&&(e=t):isNaN(t)?(t=n)>e&&(t=e):isNaN(e)&&t>(e=i)&&(e=t);const o=Math.max(1,Math.floor(i/t)),s=Math.min(o,Math.ceil(i/e));let r=Ei.defaultTickCount;return r>o?r=o:r<s&&(r=s),{minTickCount:s,maxTickCount:o,defaultTickCount:r}}updateVisibility(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),n=t=>{const n=Math.floor(e),o=Math.ceil(i);if(n===o)return void(t.visible=!1);t.translationY>=n-1&&t.translationY<n&&(t.translationY=n),t.translationY>o&&t.translationY<=o+1&&(t.translationY=o);const s=t.translationY>=n&&t.translationY<=o;t.visible=s},{gridLineGroupSelection:o,gridArcGroupSelection:s,tickLineGroupSelection:r,tickLabelGroupSelection:a}=this;o.each(n),s.each(n),r.each(n),a.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i,sideFlag:n}){var o;const s=this.isAnySeriesActive();null===(o=this.crossLines)||void 0===o||o.forEach(o=>{var r;o.sideFlag=-n,o.direction=t===-Math.PI/2?de.X:de.Y,o.label.parallel=null!==(r=o.label.parallel)&&void 0!==r?r:this.label.parallel,o.parallelFlipRotation=e,o.regularFlipRotation=i,o.update(s)})}updateTickLines(t){const{tick:e}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=e.width,i.stroke=e.color,i.x1=t*e.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateDomain(){}updatePosition({rotation:t,sideFlag:e}){const{crossLineGroup:i,axisGroup:n,gridGroup:o,translation:s,gridLineGroupSelection:r,gridPadding:a,gridLength:l}=this,h=Math.floor(s.x),c=Math.floor(s.y);i.translationX=h,i.translationY=c,i.rotation=t,n.translationX=h,n.translationY=c,n.rotation=t,o.translationX=h,o.translationY=c,o.rotation=t,r.each(t=>{t.x1=a,t.x2=-e*l+a,t.y1=0,t.y2=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t){const e=this.gridLength?t:[],i=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(e,t=>{const e=new mi;e.tag=Dn.GridLine,t.append(e)}),n=this.radialGrid?this.gridArcGroupSelection.update(e,t=>{const e=new Si;e.tag=Dn.GridArc,t.append(e)}):this.gridArcGroupSelection,o=this.tickLineGroupSelection.update(t,t=>{const e=new mi;e.tag=Dn.TickLine,t.appendChild(e)}),s=this.tickLabelGroupSelection.update(t,t=>{const e=new J;e.tag=Dn.TickLabel,t.appendChild(e)}),r=t=>t.translationY=Math.round(t.datum.translationY);i.each(r),n.each(r),o.each(r),s.each(r),this.tickLineGroupSelection=o,this.tickLabelGroupSelection=s,this.gridLineGroupSelection=i,this.gridArcGroupSelection=n}updateGridLines(t){var e;const{gridStyle:i,scale:n,tick:o,gridPadding:s,gridLength:r}=this;if(r&&i.length){const l=i.length;let h;if(this.radialGrid){const t=(a=Y(r),a%=G,(a+=G)!==G&&(a%=G),a),i=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2;h=this.gridArcGroupSelection.each((e,o)=>{const s=Math.round(n.convert(o)+i);e.centerX=0,e.centerY=n.range[0]-s,e.endAngle=t,e.radius=s})}else h=this.gridLineGroupSelection.each(e=>{e.x1=s,e.x2=-t*r+s,e.y1=0,e.y2=0});h.each((t,e,n)=>{const s=i[n%l];t.stroke=s.stroke,t.strokeWidth=o.width,t.lineDash=s.lineDash,t.fill=void 0})}var a}updateLabels({tickLabelGroupSelection:t,combinedRotation:e,textBaseline:i,textAlign:n,labelX:o}){const{label:s,label:{enabled:r}}=this;if(!r)return{labelData:[],rotated:!1};t.each((t,r)=>{const{tickLabel:a}=r;t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.fontSize=s.fontSize,t.fontFamily=s.fontFamily,t.fill=s.color,t.text=a;""===t.text||null==t.text?t.visible=!1:(t.textBaseline=i,t.textAlign=n,t.x=o,t.rotationCenterX=o,t.rotation=e,t.visible=!0)})}wrapLabels(t,e,i){const{label:{parallel:n,maxWidth:o,maxHeight:s}}=this,r=n?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,a=null!=o?o:r,l=n?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),h=null!=s?s:l;return t.ticks.forEach(t=>{const{tickLabel:e}=t,n=J.wrap(e,a,h,i,"hyphenate");t.tickLabel=n}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:t,range:e}=this;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0}updateTitle({anyTickVisible:t,sideFlag:e}){var i;const n=t=>t.defaultValue,{rotation:o,title:s,_titleCaption:r,lineNode:a,range:l,tickLineGroup:h,tickLabelGroup:c,moduleCtx:{callbackCache:d}}=this,{formatter:u=n}=null!==(i=this.title)&&void 0!==i?i:{};if(!s)return void(r.enabled=!1);r.enabled=s.enabled,r.fontFamily=s.fontFamily,r.fontSize=s.fontSize,r.fontStyle=s.fontStyle,r.fontWeight=s.fontWeight,r.color=s.color,r.wrapping=s.wrapping;let p=!1;const g=r.node;if(s.enabled&&a.visible){p=!0;const i=X(o),n=Mi.PADDING,s=-1===e&&i>Math.PI&&i<2*Math.PI?-1:1;g.rotation=s*e*Math.PI/2,g.x=Math.floor(s*e*(l[0]+l[1])/2);let r=0;if(t){const t=B.computeBBox([h,c]),e=0===o?t.width:t.height;Math.abs(e)<1/0&&(r+=e)}g.y=-1===e?Math.floor(s*(-n-r)):Math.floor(-n-r),g.textBaseline=1===s?"bottom":"top",g.text=d.call(u,this.getTitleFormatterParams())}g.visible=p}formatTick(t,e){var i,n;const{label:o,labelFormatter:s,fractionDigits:r,moduleCtx:{callbackCache:a}}=this;if(o.formatter){const n=r>0?t:String(t);return null!==(i=a.call(o.formatter,{value:n,index:e,fractionDigits:r,formatter:s}))&&void 0!==i?i:n}return s&&null!==(n=a.call(s,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return!1}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new x(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new x(t,e,i,n))}calculatePadding(t,e){return Math.abs(.01*t)}}Ln.defaultTickMinSpacing=50,mn([ft(Mt)],Ln.prototype,"nice",void 0),mn([ft(wn)],Ln.prototype,"gridStyle",void 0),mn([ft(zt(0))],Ln.prototype,"thickness",void 0);class Rn extends Ei{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:Ei.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const t=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:t}))return _i(i,n,t)}return Li(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var t,e;const i=null!==(t=this.tickCount)&&void 0!==t?t:Ei.defaultTickCount;let[n,o]=this.domain;if(i<1)return void(this.niceDomain=[n,o]);if(1===i)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),n=Math.pow(10,i);return Ri.map(i=>{const o=i*n,s=Math.floor(t/o)*o,r=Math.ceil(e/o)*o;return{error:1-(e-t)/(r-s),domain:[s,r]}}).sort((t,e)=>t.error-e.error)[0].domain}(n,o));let s=n,r=o;for(let t=0;t<4;t++){const t=null!==(e=this.interval)&&void 0!==e?e:Ii(n,o,i,this.minTickCount,this.maxTickCount),[a,l]=this.domain;if(t>=1)n=Math.floor(a/t)*t,o=Math.ceil(l/t)*t;else{const e=1/t;n=Math.floor(a*e)/e,o=Math.ceil(l*e)/e}if(n===s&&o===r)break;s=n,r=o}this.niceDomain=[n,o]}tickFormat({ticks:t,specifier:e}){return function(t,e){const i=qi(null!=e?e:",f");isNaN(i.precision)&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,o=t.toExponential(n-1).replace(/\.?0+e/,"e"),s=o.indexOf(".");if(s<0)return e>=0?0:-e;const r=o.indexOf("e")-s;return Math.max(0,r-e-1)})):i.type&&!(i.type in en)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const n=Ji(i);return t=>n(Number(t))}(null!=t?t:this.ticks(),e)}}var In=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Tn extends Ln{constructor(t,e){super(t,e),this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.modules={},this.position="left"}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}get direction(){return["top","bottom"].includes(this.position)?de.X:de.Y}useCalculatedTickCount(){return this.scale instanceof Rn}update(t){return this.updateDirection(),super.update(t)}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateDomain(){const{direction:t,boundSeries:e,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const n=[],o=e.filter(t=>i||t.isEnabled());for(const e of o)n.push(e.getDomain(t));const s=(new Array).concat(...n);this.dataDomain=this.normaliseDataDomain(s)}}normaliseDataDomain(t){return t}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(null==this.axisContext){const t=()=>this.boundSeries.map(t=>t.getKeys(this.direction)).reduce((t,e)=>(t.push(...e),t),[]);this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof Ei,keys:t,scaleValueFormatter:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t}))&&void 0!==n?n:void 0},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:void 0}}}const e=new t.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}destroy(){super.destroy();for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:n[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}}In([ft(Xt)],Tn.prototype,"keys",void 0),In([ft(se)],Tn.prototype,"position",void 0);var _n=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class An extends Tn{constructor(t){super(t,new fi),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=new Set(t);return new Array(...e.values())}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:t}=this,e=t.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}}An.className="CategoryAxis",An.type="category",_n([ft(zt(0,1))],An.prototype,"groupPaddingInner",void 0);const Pn=Symbol("<delete-property>"),Fn=Symbol("<unspecified-property>");function Bn(t,e){var i;const n=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>jn(t)).some(t=>"array"===t)){const i=t[t.length-1];return i instanceof Array?i.map(t=>{const i=jn(t);return"array"===i?Bn([[],t],e):"object"===i?Bn([{},t],e):t}):i}const o={},s=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of s){const s=t.map(t=>null!=t&&i in t?t[i]:Fn).filter(t=>t!==Fn);if(0===s.length)continue;const r=s[s.length-1];if(r===Pn)continue;const a=s.map(t=>jn(t)),l=a[0];a.some(t=>t!==l)?o[i]=r:"array"!==l&&"object"!==l||n.includes(i)?o[i]="array"===l?[...r]:r:o[i]=Bn(s,e)}return o}const zn="undefined"!=typeof window;function jn(t){return null==t?null:zn&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}class Wn extends ai{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}}Wn.className="Square";class Kn extends ai{updatePath(){const t=this.size/4.2;super.applyPath(t,Kn.moves)}}Kn.className="Cross",Kn.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class Gn extends ai{updatePath(){const t=this.size/2;super.applyPath(t,Gn.moves)}}Gn.className="Diamond",Gn.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class Xn extends ai{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,o=i/4,s=this.y+o/2;e.clear(),e.arc(t-o,s-o,o,n(130),n(330)),e.arc(t+o,s-o,o,n(220),n(50)),e.lineTo(t,s+o),e.closePath()}}Xn.className="Heart";class Yn extends ai{updatePath(){const t=this.size/3;super.applyPath(t,Yn.moves)}}Yn.className="Plus",Yn.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class Hn extends ai{updatePath(){const t=1.1*this.size;super.applyPath(t,Hn.moves)}}function Vn(t=Wn){if("string"==typeof t)switch(t){case"circle":return li;case"cross":return Kn;case"diamond":return Gn;case"heart":return Xn;case"plus":return Yn;case"triangle":return Hn;default:return Wn}return"function"==typeof t?t:Wn}Hn.className="Triangle",Hn.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];class $n{constructor(t,e){this.debug=!1,this.state=t,this.states=e,this.debug&&P.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n,o,s,r;const a=this.states[this.state],l=null===(i=null==a?void 0:a.on)||void 0===i?void 0:i[t];if(!l)return void(this.debug&&P.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey"));const h=l.target,c=this.states[h];return this.debug&&P.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${h}`,"color: green"),l.action(e),null===(o=null===(n=null==a?void 0:a.actions)||void 0===n?void 0:n.onExit)||void 0===o||o.call(n),null===(r=null===(s=null==c?void 0:c.actions)||void 0===s?void 0:s.onEnter)||void 0===r||r.call(s),this.state=h,this.state}}var Un=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Zn=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const qn={[de.X]:["xKey"],[de.Y]:["yKey"]},Jn={[de.X]:["xName"],[de.Y]:["yName"]};class Qn extends Te{constructor(t,e,i,n,o){super(i,n,o),this.xKey=t,this.yKey=e}}class to extends Qn{constructor(){super(...arguments),this.type="nodeClick"}}class eo extends Qn{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class io extends $n{}class no extends Ke{constructor(t){var e,i;super(Object.assign(Object.assign({},t),{useSeriesGroupLayer:!0,directionKeys:null!==(e=t.directionKeys)&&void 0!==e?e:qn,directionNames:null!==(i=t.directionNames)&&void 0!==i?i:Jn})),this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=pi.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=pi.select(this.highlightLabel,J),this.subGroups=[],this.subGroupId=0,this.seriesItemEnabled=new Map;const{pathsPerSeries:n=1,hasMarkers:o=!1,pathsZIndexSubOrderOffset:s=[]}=t;this.opts={pathsPerSeries:n,hasMarkers:o,pathsZIndexSubOrderOffset:s},this.animationState=new io("empty",{empty:{on:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}}},ready:{on:{update:{target:"ready",action:t=>this.animateReadyUpdate(t)},highlight:{target:"ready",action:t=>this.animateReadyHighlight(t)},highlightMarkers:{target:"ready",action:t=>this.animateReadyHighlightMarkers(t)},resize:{target:"ready",action:t=>this.animateReadyResize(t)}}}})}get contextNodeData(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()}addChartEventListeners(){var t,e;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null===(e=this.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(t,e,i,n){return(i&&ht(t)||!i&&lt(t))&&(n&&ht(e)||!n&&lt(e))?[t,e]:void 0}checkRangeXY(t,e,i,n){return!isNaN(t)&&!isNaN(e)&&i.inRange(t)&&n.inRange(e)}update({seriesRect:t}){var e,i;return Zn(this,void 0,void 0,(function*(){const{seriesItemEnabled:n,visible:o}=this,{series:s}=null!==(i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},r=s?s===this:void 0,a=o&&0===n.size||[...n.values()].some(t=>!0===t),l={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height};null!=function t(e,i){const n=jn(e),o=jn(i);if("array"===o){const o=i;return"array"!==n||e.length!==o.length||o.some((i,n)=>{var o;return null!=t(null===(o=e)||void 0===o?void 0:o[n],i)})?[...o]:null}if("primitive"===o)return"primitive"!==n?Object.assign({},i):e!==i?i:null;const s=e||{},r=i||{},a=new Set([...Object.keys(s),...Object.keys(r)]);let l=0;const h={};for(const e of a){if(s[e]===r[e])continue;const i=t=>{h[e]=t,l++},n=jn(s[e]),o=jn(r[e]);if(n!==o){i(r[e]);continue}if("primitive"===o||null===o){i(r[e]);continue}if("array"===o&&s[e].length!==r[e].length){i(r[e]);continue}if("class-instance"===o){i(r[e]);continue}if("function"===o&&s[e]!==r[e]){i(r[e]);continue}const a=t(s[e],r[e]);null!==a&&i(a)}return 0===l?null:h}(this.nodeDataDependencies,l)&&(this.nodeDataDependencies=l,this.markNodeDataDirty(),this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t)})),yield this.updateSelections(r,a),yield this.updateNodes(r,a),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t})}))}updateSelections(t,e){return Zn(this,void 0,void 0,(function*(){yield this.updateHighlightSelection(t),e&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())&&(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e))))}))}updateSeriesGroupSelections(t,e){return Zn(this,void 0,void 0,(function*(){const{datumSelection:i,labelSelection:n,markerSelection:o}=t,s=this._contextNodeData[e],{nodeData:r,labelData:a}=s;t.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:i,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:n,seriesIdx:e}),o&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:r,markerSelection:o,seriesIdx:e}))}))}nodeFactory(){return new B}markerFactory(){return new(Vn())}updateSeriesGroups(){var t;return Zn(this,void 0,void 0,(function*(){const{_contextNodeData:e,contentGroup:i,subGroups:n,opts:{pathsPerSeries:o,hasMarkers:s,pathsZIndexSubOrderOffset:r}}=this;if(e.length===n.length)return;e.length<n.length&&n.splice(e.length).forEach(({dataNodeGroup:t,markerGroup:e,labelGroup:n,paths:o})=>{i.removeChild(t),e&&i.removeChild(e),n&&i.removeChild(n);for(const t of o)i.removeChild(t)});const a=e.length;for(;a>n.length;){const e=!1,a=this.subGroupId++,l=a,h=new B({name:`${this.id}-series-sub${a}-dataNodes`,layer:e,zIndex:ce.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,l]}),c=s?new B({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:e,zIndex:ce.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,1e4+a]}):void 0,d=new B({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:e,zIndex:ce.SERIES_LABEL_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,a]});i.appendChild(h),i.appendChild(d),c&&i.appendChild(c);const u=[];for(let e=0;e<o;e++)u[e]=new si,u[e].zIndex=ce.SERIES_LAYER_ZINDEX,u[e].zIndexSubOrder=[()=>this._declarationOrder,(null!==(t=r[e])&&void 0!==t?t:0)+l],i.appendChild(u[e]);n.push({paths:u,dataNodeGroup:h,markerGroup:c,labelGroup:d,labelSelection:pi.select(d,J),datumSelection:pi.select(h,()=>this.nodeFactory()),markerSelection:c?pi.select(c,()=>this.markerFactory()):void 0})}}))}updateNodes(t,e){var i;return Zn(this,void 0,void 0,(function*(){const{highlightSelection:n,highlightLabelSelection:o,_contextNodeData:s,seriesItemEnabled:r,opts:{hasMarkers:a}}=this,l=this.visible&&(null===(i=this._contextNodeData)||void 0===i?void 0:i.length)>0&&e;this.rootGroup.visible=l,this.contentGroup.visible=l,this.highlightGroup.visible=l&&!!t;const h=this.getOpacity(),c=this.subGroups.map((t,e)=>{const{itemId:i}=s[e];return this.getOpacity({itemId:i})}),d=c.some(t=>t!==h);this.contentGroup.opacity=d?1:h,a?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),yield this.updateLabelNodes({labelSelection:o,seriesIdx:-1}),yield Promise.all(this.subGroups.map((t,e)=>Zn(this,void 0,void 0,(function*(){var i;const{dataNodeGroup:n,markerGroup:o,datumSelection:h,labelSelection:u,markerSelection:p,paths:g,labelGroup:f}=t,{itemId:y}=s[e],m=l&&(null===(i=r.get(y))||void 0===i||i),v=d?c[e]:1;n.opacity=v,n.visible=m,f.visible=m,o&&(o.opacity=v,o.zIndex=n.zIndex>=ce.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,o.visible=m),f&&(f.opacity=v);for(const t of g)t.opacity=v,t.visible=m;n.visible&&(yield this.updateDatumNodes({datumSelection:h,isHighlight:!1,seriesIdx:e}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:e}),a&&p&&(yield this.updateMarkerNodes({markerSelection:p,isHighlight:!1,seriesIdx:e})))}))))}))}updateHighlightSelection(t){var e;return Zn(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,s=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),r=t&&(null==s?void 0:s.datum)?s:void 0;let a;if(this.highlightSelection=yield this.updateHighlightSelectionItem({item:r,highlightSelection:i}),this.isLabelEnabled()&&null!=r){const{itemId:t}=r;for(const{labelData:e}of o)if(a=e.find(e=>e.datum===r.datum&&e.itemId===t),null!=a)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:a,highlightLabelSelection:n})}))}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:n}=t,{opts:{hasMarkers:o}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let s=t.pickNode(i,n);if(!s&&o&&(s=null==e?void 0:e.pickNode(i,n)),s)return{datum:s.datum,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{xAxis:s,yAxis:r,rootGroup:a,_contextNodeData:l}=this,h=a.transformPoint(n,o);let c,d=1/0;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==s?void 0:s.inRange(t))&&(null==r?void 0:r.inRange(i))))continue;const n=Math.max(Math.pow(h.x-t,2)+Math.pow(h.y-i,2),0);n<d&&(d=n,c=e)}if(c){return{datum:c,distance:Math.max(Math.sqrt(d)-(null!==(i=null===(e=c.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:s}=t,{xAxis:r,yAxis:a,rootGroup:l,_contextNodeData:h}=this,c=[r,a].filter(t=>t instanceof An).map(t=>t.direction);if(e&&0===c.length)return;const[d=de.X]=c,u=l.transformPoint(o,s),p=d===de.X?[u.x,u.y]:[u.y,u.x],g=[1/0,1/0];let f=void 0;for(const t of h)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==r?void 0:r.inRange(t))&&(null==a?void 0:a.inRange(i))))continue;const n=d===de.X?[t,i]:[i,t];let o=!0;for(let t=0;t<n.length;t++){const e=Math.abs(n[t]-p[t]);if(e>g[t]){o=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}o&&(f=e)}if(f){return{datum:f,distance:Math.max(Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))-(null!==(n=null===(i=f.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o}=t,s=Object.values(o).reduce((t,e)=>t+e,0),r=n.id===this.id||e&&1===s;this.toggleSeriesItem(i,r)}toggleSeriesItem(t,e){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(t,e),this.nodeDataRefresh=!0):super.toggleSeriesItem(t,e)}isEnabled(){if(this.seriesItemEnabled.size>0){for(const[,t]of this.seriesItemEnabled)if(t)return!0;return!1}return super.isEnabled()}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}isAnySeriesVisible(){for(const t of this.seriesItemEnabled.values())if(t)return!0;return!1}updateHighlightSelectionItem(t){return Zn(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{item:i,highlightSelection:n}=t,o=i?[i]:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:o,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return Zn(this,void 0,void 0,(function*(){const{item:e,highlightLabelSelection:i}=t,n=e?[e]:[];return this.updateLabelSelection({labelData:n,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return Zn(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return Zn(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return Zn(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return Zn(this,void 0,void 0,(function*(){}))}animateEmptyUpdateReady(t){}animateReadyUpdate(t){}animateReadyHighlight(t){}animateReadyHighlightMarkers(t){}animateReadyResize(t){}}class oo extends ui{constructor(){super(...arguments),this.formatter=void 0}}function so(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}Un([ft(Ot),M({redraw:D.MAJOR})],oo.prototype,"formatter",void 0);var ro=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class ao{constructor(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}show(t){var e,i;let n=this.element;if(this.element||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)this.element.innerHTML=this.renderer();else{const t=document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(t)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}ro([ft(Ot)],ao.prototype,"renderer",void 0),ro([ft(Et)],ao.prototype,"text",void 0);class lo{constructor(t){this.noData=new ao("ag-chart-no-data-overlay",t)}}class ho{constructor(){this.registeredListeners={}}addListener(t,e){var i;const n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(i=this.registeredListeners[t])||void 0===i||i.push({symbol:n,handler:e}),n}dispatch(t,...e){var i;const n=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],o=[];for(const t of n)try{o.push(t.handler(...e))}catch(t){P.errorOnce(t),o.push(void 0)}return o}cancellableDispatch(t,e,...i){var n;const o=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],s=[];for(const t of o){if(e())break;s.push(t.handler(...i))}return s}reduceDispatch(t,e,...i){var n;const o=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[];let s=void 0;for(const t of o)s=t.handler(...i),i=e(s,...i);return s}removeListener(t){for(const e in this.registeredListeners){const i=this.registeredListeners[e],n=null==i?void 0:i.findIndex(e=>e.symbol===t);null!=n&&n>=0&&(null==i||i.splice(n,1)),null!=n&&0===(null==i?void 0:i.length)&&delete this.registeredListeners[e]}}}class co{constructor(){this.listeners=new ho}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}}function uo(t,e){return t=+t,e=+e,i=>t*(1-i)+e*i}function po(t,e){if("string"==typeof t)try{t=ut.fromString(t)}catch(e){t=ut.fromArray([0,0,0])}if("string"==typeof e)try{e=ut.fromString(e)}catch(t){e=ut.fromArray([0,0,0])}const i=uo(t.r,e.r),n=uo(t.g,e.g),o=uo(t.b,e.b),s=uo(t.a,e.a);return function(t){return ut.fromArray([i(t),n(t),o(t),s(t)]).toRgbaString()}}function go(t,e){const i=typeof e;let n;if("number"===i)return uo(t,e);if("string"===i)try{return n=ut.fromString(e),po(t,e=n)}catch(t){}throw new Error("Unable to interpolate values")}function fo({from:t,to:e}){return go(t,e)}const yo=(mo=t=>Math.sin(t*Math.PI/2),({from:t,to:e})=>{const i=go(t,e);return t=>i(mo(t))});var mo,vo;function bo({driver:t,duration:e,from:i,to:n,autoplay:o=!0,delay:s=0,ease:r=fo,repeat:a=1/0,repeatType:l=vo.Loop,onComplete:h,onPlay:c,onRepeat:d,onStop:u,onUpdate:p}){let g,f=0,y=0,m=0,v=!0,b=!1;const x=r({from:i,to:n}),k={isPlaying:!1,play:w,pause:function(){return k.isPlaying=!1,k},stop:D,reset:function(){return b=!1,y=0,m=0,S.reset(),k}},S=t((function(t){v||(t=-t);if(!(f>=s))return void(f+=t);y+=t;b||(g=x(Math.min(1,Math.max(0,y/e))),b=v?y>=e:y<=0);null==p||p(g),b&&(m<a?function(){m++,l===vo.Reverse?(v=m%2==0,y=v?y%e:e-y%e):y%=e;b=!1,null==d||d()}():(D(),null==h||h()))}));function w(){return k.isPlaying=!0,S.start(),null==c||c(),k}function D(){return k.isPlaying=!1,S.stop(),null==u||u(),k}return o&&w(),k}!function(t){t.Loop="loop",t.Reverse="reverse"}(vo||(vo={}));class xo extends co{constructor(t){super(),this.controllers={},this.debouncers={},this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.skipAnimations=!1,this.interactionManager=t,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0;for(const t in this.controllers)this.controllers[t].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].stop()}animate(t,e){var i,n;const o=bo(Object.assign(Object.assign({},e),{autoplay:!!this.isPlaying&&e.autoplay,driver:this.createDriver(t,e.disableInteractions)}));return this.controllers[t]&&(this.controllers[t].stop(),delete this.controllers[t]),this.controllers[t]=o,this.skipAnimations?(null===(i=e.onUpdate)||void 0===i||i.call(e,e.to),o.stop()):null===(n=e.onUpdate)||void 0===n||n.call(e,e.from),o}animateMany(t,e,i){const n=e.map(t=>t.from);let o=0,s=0;const r=t=>s=>{var r;n[t]=s,++o>=e.length&&(null===(r=i.onUpdate)||void 0===r||r.call(i,n),o=0)},a=()=>{var t;++s>=e.length&&(null===(t=i.onComplete)||void 0===t||t.call(i))},l=e.map((e,n)=>{const o=`${t}-${n}`;return this.animate(o,Object.assign(Object.assign(Object.assign({},i),e),{onUpdate:r(n),onComplete:a}))}),h={get isPlaying(){return l.some(t=>t.isPlaying)},play:()=>(l.forEach(t=>t.play()),h),pause:()=>(l.forEach(t=>t.pause()),h),stop:()=>(l.forEach(t=>t.stop()),h),reset:()=>(l.forEach(t=>t.reset()),h)};return h}debouncedAnimate(t,e){var i;return this.debouncers[t]&&Date.now()-this.debouncers[t]<(null!==(i=e.duration)&&void 0!==i?i:300)?this.controllers[t]:(this.debouncers[t]=Date.now(),this.animate(t,e))}tween(t){const e="tween-"+btoa(JSON.stringify(t));return function(t){let e;const i=bo(Object.assign(Object.assign({},t),{repeat:0,autoplay:!1,onUpdate:t=>{null==e||e(t)}})),n={start:t=>(i.stop(),i.reset(),i.play(),e=t,n),stop:()=>(i.stop(),n)};return n}(Object.assign(Object.assign({},t),{driver:this.createDriver(e)}))}createDriver(t,e){return i=>({start:()=>{this.updaters.push([t,i]),null==this.requestId&&this.startAnimationCycle(),e&&this.interactionManager.pause("animation_"+t)},stop:()=>{this.updaters=this.updaters.filter(([e])=>e!==t),this.updaters.length<=0&&this.cancelAnimationFrame(),e&&this.interactionManager.resume("animation_"+t)},reset:()=>{}})}startAnimationCycle(){const t=e=>{if(this.requestId=requestAnimationFrame(t),!this.readyToPlay)return;void 0===this.lastTime&&(this.lastTime=e);const i=e-this.lastTime;this.lastTime=e,this.updaters.forEach(([t,e])=>{e(i)}),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(t)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0)}}class ko{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}}class So extends co{legendItemClick(t,e,i){const n={type:"legend-item-click",series:t,itemId:e,enabled:i};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,n){const o={type:"legend-item-double-click",series:t,itemId:e,enabled:i,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",o)}}class wo extends co{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const t=this.activeHighlight;let e=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(([t,{highlightedDatum:i}])=>e=i),this.activeHighlight=e;var i,n;if(i=t,n=this.activeHighlight,!(i===n||(null==i?void 0:i.series)===(null==n?void 0:n.series)&&(null==i?void 0:i.itemId)===(null==n?void 0:n.itemId)&&(null==i?void 0:i.datum)===(null==n?void 0:n.datum))){const e={type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",e)}}}var Do=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const Oo=["pagehide","mousemove","mouseup","wheel"],Mo=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];class Co extends co{constructor(t,e=document){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=e.body,this.element=t;for(const e of Mo)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):t.addEventListener(e,this.eventHandler);for(const t of Oo)"wheel"===t?window.addEventListener(t,this.eventHandler,{passive:!1}):window.addEventListener(t,this.eventHandler);if(Co.interactionDocuments.indexOf(e)<0){const t=document.createElement("style");t.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(t,document.head.querySelector("style")),Co.interactionDocuments.push(e)}}destroy(){for(const t of Oo)window.removeEventListener(t,this.eventHandler);for(const t of Mo)this.element.removeEventListener(t,this.eventHandler)}resume(t){return this.pausers=this.pausers.filter(e=>e!==t),this.enabled=this.pausers.length<=0,this.enabled}pause(t){this.enabled=!1,this.pausers.push(t)}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch(t=>P.errorOnce(t))}dispatchEvent(t,e){return Do(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const n of e){const e=this.buildEvent(Object.assign(Object.assign({event:t},i),{type:n}));this.listeners.cancellableDispatch(n,()=>e.consumed,e)}}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:s,offsetY:r}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:s,offsetY:r})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:s,pageY:r}=i;return Object.assign(Object.assign({},Co.NULL_COORDS),{clientX:n,clientY:o,pageX:s,pageY:r})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return Co.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o}=t;let{offsetX:s,offsetY:r,pageX:a,pageY:l}=t;if(!dt(s)||!dt(r)){const t=this.element.getBoundingClientRect();s=n-t.left,r=o-t.top}if(!dt(a)||!dt(l)){const t=this.rootElement.getBoundingClientRect();a=n-t.left,l=o-t.top}const h={type:e,offsetX:s,offsetY:r,pageX:a,pageY:l,sourceEvent:i,consumed:!1,consume:()=>h.consumed=!0};return h}}Co.interactionDocuments=[],Co.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class No{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;const i=e.addListener("hover",t=>this.checkExclusiveRects(t));this.destroyFns.push(()=>e.removeListener(i))}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),i?this.states[t]={content:i,meta:e}:delete this.states[t],this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i=void 0,n=void 0;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:o,meta:s}=null!==(e=this.states[t])&&void 0!==e?e:{};i=o,n=s}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(n,void 0,t)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}}class Eo extends co{constructor(){super(),this.states={},this.currentZoom=void 0}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e)),this.applyStates()}getZoom(){return this.currentZoom}applyStates(){const t=this.currentZoom,e={};for(const[t,{x:i,y:n}]of Object.entries(this.states))e.x=null!=i?i:e.x,e.y=null!=n?n:e.y;this.currentZoom=null!=e.x||null!=e.y?e:void 0;var i,n,o,s,r,a,l,h,c,d;if(!(i=t,n=this.currentZoom,!(i===n||(null===(o=null==i?void 0:i.x)||void 0===o?void 0:o.min)===(null===(s=null==n?void 0:n.x)||void 0===s?void 0:s.min)&&(null===(r=null==i?void 0:i.x)||void 0===r?void 0:r.max)===(null===(a=null==n?void 0:n.x)||void 0===a?void 0:a.max)&&(null===(l=null==i?void 0:i.y)||void 0===l?void 0:l.max)===(null===(h=null==n?void 0:n.y)||void 0===h?void 0:h.max)&&(null===(c=null==i?void 0:i.y)||void 0===c?void 0:c.min)===(null===(d=null==n?void 0:n.y)||void 0===d?void 0:d.min))))return;const u=Object.assign({type:"zoom-change"},null!=t?t:{});this.listeners.dispatch("zoom-change",u)}}class Lo{constructor(){this.layoutProcessors=new ho,this.listeners=new ho}addListener(t,e){if("layout-complete"!==t)return this.layoutProcessors.addListener(t,e);if(function(t){return"layout-complete"===t}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}removeListener(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)}dispatchPerformLayout(t,e){const i=this.layoutProcessors.reduceDispatch(t,({shrinkRect:t},e)=>[Object.assign(Object.assign({},e),{shrinkRect:t})],e);return null!=i?i:e}dispatchLayoutComplete(t){this.listeners.dispatch("layout-complete",t)}}class Ro{constructor(t){this.getSeries=t}}var Io;!function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Io||(Io={}));class To{constructor(t){this.updateCallback=t}update(t=Io.FULL,{forceNodeDataRefresh:e=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e})}}var _o=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Ao{constructor(){this.range="tooltip"}}_o([ft(Yt("tooltip","node"))],Ao.prototype,"range",void 0);var Po=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Fo extends B{constructor(){super({name:"markerLabelGroup"}),this.label=new J,this._marker=new Wn,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=b.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}function Bo({orientation:t,bboxes:e,maxHeight:i,maxWidth:n,itemPaddingY:o=0,itemPaddingX:s=0,forceResult:r=!1}){const a="horizontal"===t,l={max:a?n:i,fn:a?t=>t.width:t=>t.height,padding:a?s:o},h={max:a?i:n,fn:a?t=>t.height:t=>t.width,padding:a?o:s};let c=0;const d=[];for(;c<e.length;){const t=zo(e.slice(c),c,l,h,r);if(!t)return;c+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,n,o){let s=0,r=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,n)=>{e[n][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let s=0,r=0;return e.forEach(t=>{s+=t.height+n,r=Math.max(r,t.width+o)}),{indices:t,bboxes:e,columnHeight:s,columnWidth:r}});let h=0,c=0;return l.forEach(t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)}),s=Math.max(h,s),r=Math.max(c,r),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:h,pageHeight:c}}),maxPageWidth:s,maxPageHeight:r}}(d,t,e,o,s)}function zo(t,e,i,n,o){let s=function(t,e){const i=t.length;let n=0;for(let o=0;o<i;o++)if(n+=e.fn(t[o])+e.padding,n>e.max){return i/o<2?Math.ceil(i/2):o}return i}(t,i);if(s<1){if(!o)return;s=1}for(let r=s;r>=1;r--){const s=jo(t,e,r,i,n,o);if(null==s&&r<=1)return;if(null==s)continue;if("number"==typeof s){if(s<=1)return;r=s<r&&s>1?s:r;continue}return{processedBBoxCount:s.length*s[0].length,pageIndices:s}}}function jo(t,e,i,n,o,s){var r;const a=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&a.push(c),c=[]);const g=n.fn(t[u])+n.padding;d[p]=Math.max(null!==(r=d[p])&&void 0!==r?r:0,g),h=Math.max(h,o.fn(t[u])+o.padding);const f=l+h,y=!s||a.length>0;if(f>o.max&&y){c=[];break}if(d.reduce((t,e)=>t+e,0)>n.max&&!s)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&a.push(c),a.length>0?a:void 0}Fo.className="MarkerLabel",Po([wi("label")],Fo.prototype,"text",void 0),Po([wi("label")],Fo.prototype,"fontStyle",void 0),Po([wi("label")],Fo.prototype,"fontWeight",void 0),Po([wi("label")],Fo.prototype,"fontSize",void 0),Po([wi("label")],Fo.prototype,"fontFamily",void 0),Po([wi("label","fill")],Fo.prototype,"color",void 0),Po([wi("marker","fill")],Fo.prototype,"markerFill",void 0),Po([wi("marker","stroke")],Fo.prototype,"markerStroke",void 0),Po([wi("marker","strokeWidth")],Fo.prototype,"markerStrokeWidth",void 0),Po([wi("marker","fillOpacity")],Fo.prototype,"markerFillOpacity",void 0),Po([wi("marker","strokeOpacity")],Fo.prototype,"markerStrokeOpacity",void 0);var Wo=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Ko{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}Wo([ft(At)],Ko.prototype,"color",void 0),Wo([ft(Ut)],Ko.prototype,"fontStyle",void 0),Wo([ft(qt)],Ko.prototype,"fontWeight",void 0),Wo([ft(zt(0))],Ko.prototype,"fontSize",void 0),Wo([ft(Nt)],Ko.prototype,"fontFamily",void 0);class Go{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}Wo([ft(zt(0))],Go.prototype,"size",void 0),Wo([ft(Pt)],Go.prototype,"fill",void 0),Wo([ft(jt(0,1))],Go.prototype,"fillOpacity",void 0),Wo([ft(Pt)],Go.prototype,"stroke",void 0),Wo([ft(zt(0))],Go.prototype,"strokeWidth",void 0),Wo([ft(zt(0,1))],Go.prototype,"strokeOpacity",void 0);class Xo{constructor(){this.size=15,this._shape=Hn,this.padding=8}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Wo([ft(zt(0))],Xo.prototype,"size",void 0),Wo([ft(zt(0))],Xo.prototype,"padding",void 0);class Yo{constructor(t,e,i,n){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=n,this.id=w(this),this.group=new B({name:"pagination"}),this.labelNode=new J,this.marker=new Xo,this.activeStyle=new Go,this.inactiveStyle=new Go,this.highlightStyle=new Go,this.label=new Ko,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Hn,this._previousButton=new Hn;const{labelNode:o}=this;o.textBaseline="middle",o.fontSize=12,o.fontFamily="Verdana, sans-serif",o.fill="black",o.y=b.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,o]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=n,i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:o,inactiveStyle:s,highlightStyle:r,highlightActive:a}=this,l=(t,e)=>e?s:t===a?r:o;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,o=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=o||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Io.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Vn(this.marker.shape||Hn);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Io.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}Yo.className="Pagination";var Ho=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};const Vo=["horizontal","vertical"],$o=yt((t,e)=>mt(t,e,t=>Vo.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class Uo{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}Ho([ft(jt(0))],Uo.prototype,"maxLength",void 0),Ho([ft(At)],Uo.prototype,"color",void 0),Ho([ft(Ut)],Uo.prototype,"fontStyle",void 0),Ho([ft(qt)],Uo.prototype,"fontWeight",void 0),Ho([ft(zt(0))],Uo.prototype,"fontSize",void 0),Ho([ft(Nt)],Uo.prototype,"fontFamily",void 0),Ho([ft(Ot)],Uo.prototype,"formatter",void 0);class Zo{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Ho([ft(zt(0))],Zo.prototype,"size",void 0),Ho([ft(zt(0))],Zo.prototype,"padding",void 0),Ho([ft(zt(0))],Zo.prototype,"strokeWidth",void 0);class qo{constructor(){this.marker=new Zo,this.label=new Uo,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}Ho([ft(jt(0))],qo.prototype,"maxWidth",void 0),Ho([ft(zt(0))],qo.prototype,"paddingX",void 0),Ho([ft(zt(0))],qo.prototype,"paddingY",void 0),Ho([ft(Mt)],qo.prototype,"toggleSeriesVisible",void 0);class Jo{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}Ho([ft(Ot)],Jo.prototype,"legendItemClick",void 0);class Qo{constructor(t){this.ctx=t,this.id=w(this),this.group=new B({name:"legend",layer:!0,zIndex:ce.LEGEND_ZINDEX}),this.itemSelection=pi.select(this.group,Fo),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new qo,this.listeners=new Jo,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Yo(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=[t.interactionManager.addListener("click",t=>this.checkLegendClick(t)),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t)),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t))],i=[t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect))];this.destroyFns.push(...e.map(e=>()=>t.interactionManager.removeListener(e)),...i.map(e=>()=>t.layoutService.removeListener(e)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,D.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":b.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:s,marker:{size:r,padding:a,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const f=[],y=Q(o),m=null!=s?s:.8*t,v=r+a+i;if(this.itemSelection.each((t,e)=>{var i;const n=Vn(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof n||(t.marker=new n),t.markerSize=r,t.spacing=a,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const o=null!==(i=e.itemId)&&void 0!==i?i:e.id,s=this.getItemLabel(e),g=(null!=s?s:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(g,h,m,v,y,o),f.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,x=this.oldSize;b[0]=t,b[1]=e,b[0]===x[0]&&b[1]===x[1]||(x[0]=b[0],x[1]=b[1]);const{pages:k,maxPageHeight:S,maxPageWidth:w}=this.updatePagination(f,t,e);this.pages=k,this.maxPageSize=[w-i,S-n];const D=this.pagination.currentPage,O=this.pages[D];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(D),this.update())}truncate(t,e,i,n,o,s){const r=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(n+b.getTextSize(t,o).width)>i){let e="";const s=this.getCharacterWidths(o);let l=n+s["..."];for(const t of r){if(s[t]||(s[t]=b.getTextSize(t,o).width),l+=s[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(s)):this.truncatedItems.delete(s),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:s,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=s.findIndex(t=>t.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(c,0),s.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,g=r-u;let f=0,y=-l.y-this.item.marker.size/2;return h?y+=g+8:(f+=-l.x+p+8,y+=(g-l.height)/2),this.pagination.translationX=f,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:r,maxPageWidth:a,pages:s}}calculatePagination(t,e,i){var n,o,s;const{paddingX:r,paddingY:a}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new x(0,0,0,0),u=[],p=0,g=0,f=0;const y=t=>{const{width:e,height:i}=t;return e===c.width&&i===c.height},m=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(f++>10){P.warn("unable to find stable legend layout.");break}c=d;const y=e-(h?0:c.width),v=Bo({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:y,itemPaddingY:a,itemPaddingX:r,forceResult:m});u=null!==(n=null==v?void 0:v.pages)&&void 0!==n?n:[],p=null!==(o=null==v?void 0:v.maxPageWidth)&&void 0!==o?o:0,g=null!==(s=null==v?void 0:v.maxPageHeight)&&void 0!==s?s:0;const b=u.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!y(d));return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:s,endIndex:r}=n[t];let a=0,l=0;const h=o.length,c=o[0].indices.length,d="horizontal"===this.getOrientation(),u=o[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var n,g;if(i<s||i>r)return void(t.visible=!1);const f=i-s;let y=0,m=0;d?(y=f%h,m=Math.floor(f/h)):(y=Math.floor(f/c),m=f%c),t.visible=!0;const v=o[y];v&&(l=u*m,a=null!==(n=p[m])&&void 0!==n?n:0,p[m]=(null!==(g=p[m])&&void 0!==g?g:0)+v.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Io.SCENE_RENDER)}update(){const{marker:{strokeWidth:t},label:{color:e}}=this.item;this.itemSelection.each((i,n)=>{const o=n.marker;i.markerFill=o.fill,i.markerStroke=o.stroke,i.markerStrokeWidth=t,i.markerFillOpacity=o.fillOpacity,i.markerStrokeOpacity=o.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=e})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const o of this.group.children){if(!o.visible)continue;if(!(o instanceof Fo))continue;const s=o.computeBBox();if(s.grow(this.item.paddingX/2,"horizontal"),s.grow(this.item.paddingY/2,"vertical"),s.containsPoint(t,e))return o.datum;const r=t-s.x-this.item.paddingX/2,a=e-s.y-this.item.paddingY/2,l=Math.pow(r,2)+Math.pow(a,2);r>=0&&a>=0&&l<n.dist&&(n.dist=l,n.datum=o.datum),i.push(s)}if(x.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:s,offsetY:r}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(s,r),h=this.getDatumForPoint(s,r);if(!l||!h)return;const{id:c,itemId:d,enabled:u}=h,p=i.getSeries().find(t=>t.id===c);if(!p)return;t.consume();let g=u;o&&(g=!u,this.ctx.chartEventManager.legendItemClick(p,d,g)),g?n.updateHighlight(this.id,{series:p,itemId:d,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(Io.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:g,itemId:d,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:s,offsetY:r}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(s,r),h=this.getDatumForPoint(s,r);if(!l||!h)return;const{id:c,itemId:d,seriesId:u}=h,p=n.getSeries(),g=p.find(t=>t.id===c);if(g){if(t.consume(),o){const t=p.reduce((t,e)=>[...t,...e.getLegendData().filter(t=>"category"===t.legendType)],[]),i={};t.forEach(t=>{var e,n;null!==(e=i[n=t.seriesId])&&void 0!==e||(i[n]=0),t.enabled&&i[t.seriesId]++});const n=t.find(t=>t.itemId===d&&t.seriesId===u);this.ctx.chartEventManager.legendItemDoubleClick(g,d,null!==(e=null==n?void 0:n.enabled)&&void 0!==e&&e,i)}this.ctx.updateService.update(Io.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:d,seriesId:g.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const s=this.computeBBox(),{pageX:r,pageY:a,offsetX:l,offsetY:h}=t,c=this.group.visible&&s.containsPoint(l,h);if(!c)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const d=this.getDatumForPoint(l,h);if(!(c&&void 0!==d))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const u=d?this.ctx.dataService.getSeries().find(t=>t.id===(null==d?void 0:d.id)):void 0;if(d&&this.truncatedItems.has(null!==(e=d.itemId)&&void 0!==e?e:d.id)){const e=this.getItemLabel(d);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:r,pageY:a,offsetX:l,offsetY:h,event:t,showArrow:!1},be({content:e}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==d?void 0:d.enabled)&&u?this.ctx.highlightManager.updateHighlight(this.id,{series:u,itemId:null==d?void 0:d.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),s=()=>{switch(this.position){case"top":return 0;case"bottom":return t.height-o.height;case"left":return 0;case"right":default:return t.width-o.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-o.width)/2,n=s(),e.shrink(o.height,this.position);break;case"left":case"right":default:i=s(),n=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+i),this.group.translationY=Math.floor(-o.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=o.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let o=0,s=0;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,e):e,s=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const r=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*r),s=this.maxHeight?Math.min(this.maxHeight,i):i}return[o,s]}}Qo.className="Legend",Ho([ft(Mt)],Qo.prototype,"_enabled",void 0),Ho([ft(se)],Qo.prototype,"position",void 0),Ho([ft(jt(0))],Qo.prototype,"maxWidth",void 0),Ho([ft(jt(0))],Qo.prototype,"maxHeight",void 0),Ho([ft(Ct)],Qo.prototype,"reverseOrder",void 0),Ho([ft($o)],Qo.prototype,"orientation",void 0),Ho([ft(zt(0))],Qo.prototype,"spacing",void 0);const ts={category:Qo};class es{constructor(){this.cache=new Map}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const o=t(...e);return n&&null!=i&&n.set(i,o),o}catch(t){return void P.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new Map}}var is=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},ns=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class os extends st{constructor(t=window.document,e,i){var n;super(),this.id=w(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new B({name:this.id+"-Series-root"}),this.extraDebugStats={},this._container=void 0,this.data=[],this.padding=new Xe(20),this.seriesAreaPadding=new Xe(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=Io.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=Ze(t=>setTimeout(t,0),({count:t})=>ns(this,void 0,void 0,(function*(){if(!this._destroyed)try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,P.error("update error",t)}}))),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return Ze(t=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)};const o=null==i?void 0:i.scene,s=null!==(n=null==i?void 0:i.element)&&void 0!==n?n:t.createElement("div"),r=null==i?void 0:i.container,a=new B({name:"root"});a.visible=!1,a.append(this.seriesRoot),this.axisGroup=new B({name:"Axes",layer:!0,zIndex:ce.AXIS_ZINDEX}),a.appendChild(this.axisGroup),this.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",this.scene=null!=o?o:new K({document:t,overrideDevicePixelRatio:e}),this.debug=!1,this.scene.debug.consoleLog=!1,this.scene.root=a,this.scene.container=s,this.autoSize=!0,this.chartEventManager=new So,this.cursorManager=new ko(s),this.highlightManager=new wo,this.interactionManager=new Co(s),this.zoomManager=new Eo,this.dataService=new Ro(()=>this.series),this.layoutService=new Lo,this.updateService=new To((t=Io.FULL,{forceNodeDataRefresh:e})=>this.update(t,{forceNodeDataRefresh:e})),this.callbackCache=new es,this.animationManager=new xo(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new we(this.scene.canvas.element,t,t.body),this.tooltipManager=new No(this.tooltip,this.interactionManager),this.overlays=new lo(this.element),this.highlight=new Ao,this.container=r,Ye.observe(this.element,t=>{var e;const{width:i,height:n}=t;if(!this.autoSize)return;if(0===i&&0===n)return;const[o=0,s=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];o===i&&s===n||(this._lastAutoSize=[i,n],this.resize())}),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)),this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(Io.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(Io.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var t;const{queuedUserOptions:e}=this;return Bn([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}set container(t){if(this._container!==t){const{parentNode:e}=this.element;null!=e&&e.removeChild(this.element),t&&!this.destroyed&&t.appendChild(this.element),this._container=t}}get container(){return this._container}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:s,tooltipManager:r,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}=this;return{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:s,tooltipManager:r,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}}destroy(t){var e;if(this._destroyed)return;const i=null==t?void 0:t.keepTransferableResources;let n=void 0;this._performUpdateType=Io.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(e=this.legend)||void 0===e||e.destroy(),this.overlays.noData.hide(),Ye.unobserve(this.element);for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t];return this.interactionManager.destroy(),i?(this.scene.strip(),n={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.series.forEach(t=>t.destroy()),this.series=[],this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,n}log(t){this.debug&&P.debug(t)}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){const e=this._pendingFactoryUpdates,i=e.length;0===i?(e.push(t),this._processCallbacks().catch(t=>P.errorOnce(t))):e.splice(1,i-1,t)}_processCallbacks(){return ns(this,void 0,void 0,(function*(){const t=this._pendingFactoryUpdates;for(;t.length>0;)if(this.updatePending)yield so(1);else{try{yield t[0](),this.callbackCache.invalidateCache()}catch(t){P.error("update error",t)}t.shift()}}))}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==Io.NONE||null!=this.lastInteractionEvent}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return ns(this,void 0,void 0,(function*(){yield this.performUpdateTrigger.await()}))}update(t=Io.FULL,e){const{forceNodeDataRefresh:i=!1,seriesToUpdate:n=this.series}=null!=e?e:{};i&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of n)this.seriesToUpdate.add(t);t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())}performUpdate(t){var e;return ns(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:n}=this,o=[performance.now()];switch(i){case Io.FULL:case Io.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),o.push(performance.now());case Io.PERFORM_LAYOUT:if(this.autoSize&&!this._lastAutoSize){if(this._performUpdateNoRenderCount++<5){this._performUpdateType=Io.PERFORM_LAYOUT,this.performUpdateTrigger.schedule();break}}this._performUpdateNoRenderCount=0,yield this.performLayout(),this.handleOverlays(),o.push(performance.now());case Io.SERIES_UPDATE:const{seriesRect:t}=this,s=[...this.seriesToUpdate].map(e=>e.update({seriesRect:t}));this.seriesToUpdate.clear(),yield Promise.all(s),o.push(performance.now());case Io.TOOLTIP_RECALCULATION:const r=this.tooltipManager.getTooltipMeta(this.id);i<Io.SERIES_UPDATE&&"hover"===(null===(e=null==r?void 0:r.event)||void 0===e?void 0:e.type)&&this.handlePointer(r.event);case Io.SCENE_RENDER:yield this.scene.render({debugSplitTimes:o,extraDebugStats:n}),this.extraDebugStats={};case Io.NONE:this._performUpdateType=Io.NONE}const s=performance.now();this.log({chart:this,durationMs:Math.round(100*(s-o[0]))/100,count:t,performUpdateType:Io[i]})}))}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup),e.delete(t)}),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t,e){const{series:i,seriesRoot:n}=this;if(i.indexOf(t)<0){const o=e?i.indexOf(e):-1;return o>=0?(i.splice(o,0,t),n.insertBefore(t.rootGroup,e.rootGroup)):(i.push(t),n.append(t.rootGroup)),this.initSeries(t),!0}return!1}initSeries(t){t.chart=this,t.highlightManager=this.highlightManager,t.animationManager=this.animationManager,t.data||(t.data=this.data),this.addSeriesListeners(t),t.chartEventManager=this.chartEventManager,t.addChartEventListeners()}freeSeries(t){t.chart=void 0,t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}removeAllSeries(){this.series.forEach(t=>{this.freeSeries(t),this.seriesRoot.removeChild(t.rootGroup)}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>(t.direction===de.X?e.xAxis:e.yAxis)===t)})}assignAxesToSeries(t=!1){const e={};this.axes.forEach(t=>{var i;const n=t.direction;(null!==(i=e[n])&&void 0!==i?i:e[n]=[]).push(t)}),this.series.forEach(i=>{i.directions.forEach(n=>{if((n===de.X?i.xAxis:i.yAxis)&&!t)return;const o=e[n];if(!o)return void P.warn(`no available axis for direction [${n}]; check series and axes configuration.`);const s=i.getKeys(n),r=this.findMatchingAxis(o,i.getKeys(n));r?n===de.X?i.xAxis=r:i.yAxis=r:P.warn(`no matching axis for direction [${n}] and keys [${s}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const n of e)if(t.indexOf(n)>=0)return i}}resize(t,e){var i,n,o,s;null!=t||(t=null!==(i=this.width)&&void 0!==i?i:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!=e||(e=null!==(o=this.height)&&void 0!==o?o:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(Io.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return ns(this,void 0,void 0,(function*(){(this.axes.length>0||this.series.some(t=>t instanceof no))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),yield Promise.all(this.series.map(t=>t.processData())),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const n of this.series){if(!n.visible)continue;const o=n.getLabelData();o&&(null!=(i=o[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(o),t.push(n))}var i;const{seriesRect:n}=this,o=n&&e.length>0?function(t,e,i=5){const n=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const h=n[l]=[],c=t[l];if((null==c?void 0:c.length)&&c[0].label)for(let l=0,d=c.length;l<d;l++){const d=c[l],u=d.label,p=.5*d.point.size,g=d.point.x-.5*u.width,f=d.point.y-p-u.height-i,{width:y,height:m}=u;if(!(!e||(r=f,a=m,(s=g)+y<(o=e).x+o.width&&s>o.x&&r>o.y&&r+a<o.y+o.height)))continue;if(t.some(t=>t.some(t=>He(t.point,g,f,y,m))))continue;n.some(t=>t.some(t=>Ve(t,g,f,y,m)))||h.push({index:l,text:u.text,x:g,y:f,width:y,height:m,datum:d})}}var o,s,r,a;return n}(e,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(o.map((e,i)=>[t[i],e]))}attachLegend(t){var e;if(this.legendType===t)return;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;const i=this.getModuleContext();this.legend=function(t,e){if(ts[t])return new ts[t](e);throw new Error("AG Charts - unknown legend type: "+t)}(t,i),this.legend.attachLegend(this.scene.root),this.legendType=t}setLegendInit(t){this.applyLegendOptions=t}updateLegend(){var t;return ns(this,void 0,void 0,(function*(){const e=[];this.series.filter(t=>t.showInLegend).forEach(t=>{const i=t.getLegendData();e.push(...i)});const i=e.length>0?e[0].legendType:"category";this.attachLegend(i),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,this.legend),"category"===i&&this.validateLegendData(e),this.legend.data=e}))}validateLegendData(t){const e={};t.forEach(t=>{var i,n,o,s,r;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;if(!a)return;const l=t;null!==(n=e[a])&&void 0!==n||(e[a]={[l.label.text]:new Set}),null!==(o=(s=e[a])[r=l.label.text])&&void 0!==o||(s[r]=new Set),null!=l.marker.fill&&e[a][l.label.text].add(l.marker.fill)}),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i].size>1&&P.warnOnce(`legend item '${i}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return ns(this,void 0,void 0,(function*(){this.scene.root.visible=!0;const{scene:{width:t,height:e}}=this;let i=new x(0,0,t,e);return({shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i})),({shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i})),i}))}positionPadding(t){const{padding:e}=this;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e;const{title:i,subtitle:n,footnote:o}=this,s=t.clone(),r=e=>{var i;const n=t.height/10,o=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*J.defaultLineHeightRatio,s=t.width,r=Math.max(o,n);e.computeTextWrap(s,r)},a=t=>{var e;const i=s.y;t.node.x=s.x+s.width/2,t.node.y=i,t.node.textBaseline="top",r(t);const n=t.node.computeBBox(),o=Math.ceil(n.y-i+n.height+(null!==(e=t.spacing)&&void 0!==e?e:0));s.shrink(o,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&a(i)),n&&(n.node.visible=null!==(e=(null==i?void 0:i.enabled)&&n.enabled)&&void 0!==e&&e,n.node.visible&&a(n)),o&&(o.node.visible=o.enabled,o.node.visible&&(t=>{var e;const i=s.y+s.height;t.node.x=s.x+s.width/2,t.node.y=i,t.node.textBaseline="bottom",r(t);const n=t.node.computeBBox(),o=Math.ceil(i-n.y+(null!==(e=t.spacing)&&void 0!==e?e:0));s.shrink(o,"bottom")})(o)),{shrinkRect:s}}getSeriesRect(){return this.seriesRect}pickSeriesNode(t,e,i){var n,o;const s=performance.now(),r=e?[Ce.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l=void 0;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:o,distance:s}=null!==(n=e.pickNode(t,r))&&void 0!==n?n:{};if(o&&null!=s&&((!l||l.distance>s)&&s<=(null!=i?i:1/0)&&(l={series:e,distance:s,datum:o}),0===s))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-s)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Io.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,s=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(n,o))?(this.handlePointerTooltip(t,s),this.handlePointerNode(t)):s()}handlePointerTooltip(t,e){var i,n;const{lastPick:o,tooltip:s}=this,{range:r}=s,{pageX:a,pageY:l,offsetX:h,offsetY:c}=t;let d;"number"==typeof r&&Number.isFinite(r)&&(d=r);const u=this.pickSeriesNode({x:h,y:c},"exact"===r,d);if(!u)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const p="node"===this.highlight.range||!o||o.datum!==u.datum;let g;p?(g=u.series.getTooltipHtml(u.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,u.datum)):o&&(o.event=t.sourceEvent);const f=null!=d,y=this.tooltip.enabled&&u.series.tooltip.enabled,m="exact"===r&&0===u.distance,v=y&&("nearest"===r||f||m)&&(!p||void 0!==g),b={xOffset:u.datum.series.tooltip.position.xOffset,yOffset:u.datum.series.tooltip.position.yOffset},x=this.mergePointerDatum({pageX:a,pageY:l,offsetX:h,offsetY:c,event:t,showArrow:u.series.tooltip.showArrow,position:b},u.datum);x.enableInteraction=null!==(n=null===(i=u.series.tooltip.interaction)||void 0===i?void 0:i.enabled)&&void 0!==n&&n,v&&this.tooltipManager.updateTooltip(this.id,x,g)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Io.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Io.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==i?void 0:i.datum,o=null==n?void 0:n.series.nodeClickRange;if(n&&"nearest"===o)return e(n.series,n),!0;let s;"number"==typeof o&&Number.isFinite(o)&&(s=o);const r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===o,s);if(!r)return!1;const a=null!=s,l="exact"===o&&0===r.distance;return!(!a&&!l)&&(e(r.series,r.datum),!0)}mergePointerDatum(t,e){const{type:i}=e.series.tooltip.position;if("node"===i&&e.nodeMidPoint){const{x:i,y:n}=e.nodeMidPoint,{canvas:o}=this.scene,s=e.series.rootGroup.inverseTransformPoint(i,n),r=o.element.getBoundingClientRect();return Object.assign(Object.assign({},t),{pageX:Math.round(r.left+window.scrollX+s.x),pageY:Math.round(r.top+window.scrollY+s.y),offsetX:Math.round(s.x),offsetY:Math.round(s.y)})}return t}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:s}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:r,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};r&&n.add(r),o&&n.add(o),(null==r?void 0:r.cursor)&&a&&this.cursorManager.updateCursor(r.id),(null==o?void 0:o.cursor)&&s&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==o||null==r?this.update(Io.SERIES_UPDATE):this.update(Io.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return ns(this,void 0,void 0,(function*(){const e=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield so(5)}yield this.awaitUpdateCompletion()}))}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const t=!this.series.some(t=>t.hasData()),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()}}is([Di({newValue(t){this.scene.debug.consoleLog=t}})],os.prototype,"debug",void 0),is([Di({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>e.data=t)}})],os.prototype,"data",void 0),is([Di({newValue(t){this.resize(t)}})],os.prototype,"width",void 0),is([Di({newValue(t){this.resize(void 0,t)}})],os.prototype,"height",void 0),is([Di({changeValue(t){this.autoSizeChanged(t)}}),ft(Mt)],os.prototype,"autoSize",void 0),is([Di({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],os.prototype,"title",void 0),is([Di({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],os.prototype,"subtitle",void 0),is([Di({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],os.prototype,"footnote",void 0),is([ft(Yt("standalone","integrated"))],os.prototype,"mode",void 0);class ss{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function rs(t,e=!0){const i=new ss;let n=0;return e&&t.forEach(t=>n=Math.max(n,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach((e,i)=>{const o=t.children,s=o.find(t=>t.label===e),r=i!==n;if(s&&r)t=s;else{const i=new ss(e,t);i.number=o.length,o.push(i),r&&(t=i)}})}(i,t)}),i}function as(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function ls(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function hs(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach(t=>{hs(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let o=t,s=t,r=n,a=s.getLeftmostSibling(),l=s.mod,h=o.mod,c=r.mod,d=a.mod;for(;r.nextRight()&&s.nextLeft();){r=r.nextRight(),s=s.nextLeft(),a=a.nextLeft(),o=o.nextRight(),o.ancestor=t;const n=r.prelim+c-(s.prelim+l)+i;n>0&&(as(ls(r,t,e),t,n),l+=n,h+=n),c+=r.mod,l+=s.mod,d+=a.mod,h+=o.mod}r.nextRight()&&!o.nextRight()?(o.thread=r.nextRight(),o.mod+=c-h):(s.nextLeft()&&!a.nextLeft()&&(a.thread=s.nextLeft(),a.mod+=l-d),e=t)}return e}(t,n,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o.prelim+=t,o.mod+=t,i+=o.change,t+=o.shift+i}}}(t);const o=(i[0].prelim+i[i.length-1].prelim)/2,s=t.getLeftSibling();s?(t.prelim=s.prelim+e,t.mod=t.prelim-o):t.prelim=o}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class cs{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function ds(t){const e=new us;return hs(t,1),function t(e,i,n){e.x=e.prelim+i,e.y=e.depth,n.update(e),e.children.forEach(o=>t(o,i+e.mod,n))}(t,-t.prelim,e),function t(e){const i=e.children;let n=0;i.forEach(e=>{t(e),e.children.length?n+=e.leafCount:n++}),e.leafCount=n,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class us{constructor(){this.dimensions=new cs,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const s=this.leafCount-1,r=this.depth,a=this.dimensions;let l=1,h=1;if(t>0&&s){const e=(a.right-a.left)/s;l=t/s/e,o&&(l=-l)}if(e>0&&r){const t=(a.bottom-a.top)/r;h=e/r/t}const c=new cs;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,t=>({x:t.screenX,y:t.screenY}))});const d=-c.left,u=-c.top;this.nodes.forEach(t=>{t.screenX+=d+i,t.screenY+=u+n})}}var ps=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class gs extends Nn{constructor(){super(...arguments),this.grid=!1}}ps([ft(Mt)],gs.prototype,"grid",void 0);class fs extends Tn{constructor(t){super(t,new fi),this.tickScale=new fi,this.translation={x:0,y:0},this.line=new Mn,this.label=new gs,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:s}=this;s.paddingOuter=.1,s.paddingInner=2*s.paddingOuter,this.range=s.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=pi.select(n,mi),this.axisLineSelection=pi.select(e,mi),this.separatorSelection=pi.select(e,mi),this.labelSelection=pi.select(i,J)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),o=n*e[0],s=t[0]-o;this.tickScale.range=i.range=[s,s+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e,boundSeries:i}=this,n=[];let o=void 0;i.filter(t=>t.visible).forEach(t=>{if(e===de.X)if(void 0===o){const i=t.getDomain(e);n.push(i),o="number"==typeof i[0]}else o&&n.push(t.getDomain(e));else n.push(t.getDomain(e))});const s=(new Array).concat(...n),r=null!==(t=dn(s))&&void 0!==t?t:s;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=rs(e);this.tickTreeLayout=ds(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e}update(t){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:i,label:{parallel:n},moduleCtx:{callbackCache:o},tickScale:s,range:r,title:a,title:{formatter:l=(t=>t.defaultValue)}={},_titleCaption:h}=this,c=e.range[0],d=e.range[1],u=Math.abs(d-c)/e.domain.length||0,p=Y(this.rotation),g=Math.abs(Math.cos(p))<1e-8,f=i.getSideFlag();this.updatePosition({rotation:p,sideFlag:f}),h.node.visible=!1;const y=this.lineHeight,m=this.tickTreeLayout,v=e.ticks(),b=m?m.nodes:[],x=!!m&&m.depth>1,k=s.ticks(),{defaultRotation:S,configuredRotation:w,parallelFlipFlag:D}=gn({rotation:i.rotation,parallel:n,regularFlipRotation:X(p-Math.PI/2),parallelFlipRotation:X(p)}),O=this.gridLineSelection.update(this.gridLength?k:[]),M=this.labelSelection.update(b),C=i.formatter,N=new Map;let E=0;M.each((t,e,n)=>{var s;t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fill=i.color,t.textBaseline=-1===D?"bottom":"hanging",t.textAlign="center",t.translationX=e.screenY-.25*i.fontSize,t.translationY=e.screenX,0===n?(null==a?void 0:a.enabled)&&v.length>0?(t.visible=!0,t.text=o.call(l,this.getTitleFormatterParams()),t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.fontWeight=a.fontWeight,t.fontFamily=a.fontFamily,t.textBaseline="hanging"):t.visible=!1:C?(t.text=null!==(s=o.call(C,{value:String(e.label),index:n}))&&void 0!==s?s:String(e.label),t.visible=e.screenX>=r[0]&&e.screenX<=r[1]):(t.text=String(e.label),t.visible=e.screenX>=r[0]&&e.screenX<=r[1]);const h=t.computeBBox();N.set(t.id,h),h.width>E&&(E=h.width)});const L=f*i.padding,R=this.label.grid,I=[];M.each((t,e,i)=>{if(t.x=L,t.rotationCenterX=L,e.children.length){t.translationX-=E-y+this.label.padding;const i=e.leafCount*u,n=N.get(t.id);n&&n.width>i?t.visible=!1:t.rotation=g?S:-Math.PI/2}else{t.rotation=w,t.textAlign="end",t.textBaseline="middle";const e=N.get(t.id);e&&e.height>u&&(t.visible=!1)}if(e.parent&&x){const t=e.children.length?e.screenX-e.leafCount*u/2:e.screenX-u/2;if(e.children.length){const n=-E-2*this.label.padding+e.screenY;I.push({y:t,x1:n+y,x2:n,toString:()=>String(i)})}else(e.number!==e.children.length-1||R)&&I.push({y:t,x1:0,x2:-E-2*this.label.padding,toString:()=>String(i)})}});let T=0;I.forEach(t=>T=Math.min(T,t.x2)),I.push({y:Math.max(c,d),x1:0,x2:T,toString:()=>String(I.length)});const _=this.separatorSelection.update(I);_.each((t,e)=>{t.x1=e.x1,t.x2=e.x2,t.y1=e.y,t.y2=e.y,t.visible=e.y>=r[0]-1e-7&&e.y<=r[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}),this.gridLineSelection=O,this.labelSelection=M;const A=m?m.depth+1:1,P=[];for(let t=0;t<A;t++)P.push(t);if(this.axisLineSelection.update(P).each((t,e,i)=>{const n=i>0?-E-2*this.label.padding-(i-1)*y:0;t.x1=n,t.x2=n,t.y1=r[0],t.y2=r[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=v.length>0&&(0===i||R&&x)}),this.gridLength){const t=this.gridStyle,e=t.length;O.each((i,n,o)=>{const a=Math.round(s.convert(n));i.x1=0,i.x2=-f*this.gridLength,i.y1=a,i.y2=a,i.visible=a>=r[0]&&a<=r[1];const l=t[o%e];i.stroke=l.stroke,i.strokeWidth=this.tick.width,i.lineDash=l.lineDash,i.fill=void 0})}return t}}fs.className="GroupedCategoryAxis",fs.type="groupedCategory",ps([ft(Pt)],fs.prototype,"labelColor",void 0);var ys=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const ms=["top","right","bottom","left"];class vs extends os{constructor(t=window.document,e,i){super(t,e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return ys(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesRect:i,visibility:n,clipSeries:o}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=i,this.series.forEach(t=>{t.rootGroup.translationX=Math.floor(i.x),t.rootGroup.translationY=Math.floor(i.y)});const{seriesRoot:s,seriesAreaPadding:r}=this,a=i.clone().grow(r),l=a.clone().grow(20);return this.hoverRect=l,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:a,hoverRect:l,visible:n.series},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),o?s.setClipRectInGroupCoordinateSpace(a):s.setClipRectInGroupCoordinateSpace(),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),n=Object.assign({},this._lastVisibility),o=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))o.has(t)||delete i[t];const s=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(i).every(([e,i])=>{const n=t[e];return null==i&&null==n||i===n}));let r={},a={},l=!1,h=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),c=0;do{Object.assign(i,r),Object.assign(n,a);const e=this.updateAxesPass(i,t.clone(),h);if(d=e.axisWidths,r=Object.entries(d).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,h=e.seriesRect,c++>10){P.warn("unable to find stable axis layout.");break}}while(!s(r,a));var d;return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),h)switch(e.clipGrid(h.x,h.y,h.width+5,h.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,h.y,t.width+5,h.height+5);break;case"top":case"bottom":e.clipTickLines(h.x,t.y,h.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=n,{seriesRect:h,visibility:n,clipSeries:l}}updateAxesPass(t,e,i){const{axes:n}=this,o={},s={},r={series:!0,crossLines:!0};let a=!1;const l={},h=this.applySeriesPadding(e),c=i?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(h,t,c,r),u=this.buildSeriesRect(d,t);return n.forEach(e=>{var i,n;const{position:r}=e,{clipSeries:c,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:u,paddedBounds:h,axisWidths:t,newAxisWidths:s,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=o[r])&&void 0!==i?i:0)>0});o[r]=(null!==(n=o[r])&&void 0!==n?n:0)+1,a=a||c,this.positionAxis({axis:e,axisBound:d,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:u})}),{clipSeries:a,seriesRect:u,axisWidths:s,visibility:r}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[n,o=0]of Object.entries(i))i[n]=Math.max(o-(null!==(e=t[n])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return ms.forEach(t=>{const n=this.seriesAreaPadding[t],o=i.find(e=>e.position===t);o?o.seriesAreaPadding=n:e.shrink(n,t)}),e}buildAxisBound(t,e,i,n){var o,s,r,a;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,f=(null!==(o=e.left)&&void 0!==o?o:0)+(null!==(s=e.right)&&void 0!==s?s:0)+p,y=(null!==(r=e.top)&&void 0!==r?r:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+g;return l.width<=f||l.height<=y?(n.crossLines=!1,n.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:o,left:s,right:r}=e;return i.x+=null!=s?s:0,i.y+=null!=n?n:0,i.width-=(null!=s?s:0)+(null!=r?r:0),i.height-=(null!=n?n:0)+(null!=o?o:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:o,y:s,width:r,height:a}=t,l=[o,s,o+r,s+a];return(1===n?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(t){var e,i,n,o,s,r;const{axis:a,seriesRect:l,paddedBounds:h,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:p}=t;let{clipSeries:g}=t;const{position:f,direction:y}=a,m=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":a.range=[0,l.width],a.gridLength=l.height;break;case"right":case"left":a.range=(t=>t instanceof An||t instanceof fs?[0,l.height]:[l.height,0])(a),a.gridLength=l.width}const v=null===(i=this.zoomManager.getZoom())||void 0===i?void 0:i[a.direction],{min:b=0,max:x=1}=null!=v?v:{};a.visibleRange=[b,x],!g&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(g=!0);let k=a.nice?u[y]:void 0;a.thickness>0?a.maxThickness=a.thickness:y===de.Y?a.maxThickness=.3*h.width:a.maxThickness=.3*h.height,k=a.update(k),u[y]=null!==(n=u[y])&&void 0!==n?n:k;let S=0;if(a.thickness)S=a.thickness;else{const t=a.computeBBox();S=y===de.X?t.height:t.width}return p&&(S+=15),S=Math.ceil(S),d[f]=(null!==(o=d[f])&&void 0!==o?o:0)+S,a.gridPadding=(null!==(s=c[f])&&void 0!==s?s:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:g,axisThickness:S,axisOffset:m}}positionAxis(t){var e,i,n,o;const{axis:s,axisBound:r,axisWidths:a,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=s;switch(d){case"top":s.translation.x=r.x+(null!==(e=a.left)&&void 0!==e?e:0),s.translation.y=this.clampToOutsideSeriesRect(l,r.y+1+h+c,"y",1);break;case"bottom":s.translation.x=r.x+(null!==(i=a.left)&&void 0!==i?i:0),s.translation.y=this.clampToOutsideSeriesRect(l,r.y+r.height+1-c-h,"y",-1);break;case"left":s.translation.y=r.y+(null!==(n=a.top)&&void 0!==n?n:0),s.translation.x=this.clampToOutsideSeriesRect(l,r.x+h+c,"x",1);break;case"right":s.translation.y=r.y+(null!==(o=a.top)&&void 0!==o?o:0),s.translation.x=this.clampToOutsideSeriesRect(l,r.x+r.width-c-h,"x",-1)}s.updatePosition({rotation:Y(s.rotation),sideFlag:s.label.getSideFlag()})}}vs.className="CartesianChart",vs.type="cartesian";class bs extends Ke{constructor({moduleCtx:t,useLabelLayer:e=!1,pickModes:i=[Ce.EXACT_SHAPE_MATCH]}){super({moduleCtx:t,useLabelLayer:e,pickModes:i,directionKeys:{[de.X]:["angleKey"],[de.Y]:["radiusKey"]},directionNames:{[de.X]:["angleName"],[de.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}}function xs(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:o,outerRadius:s}=i;if(n<Math.min(o,s)||n>Math.max(o,s))return!1;let r=Math.atan2(e,t);r<-Math.PI/2&&(r+=2*Math.PI);const{startAngle:a,endAngle:l}=i;return l===-Math.PI/2?r<a:a===3*Math.PI/2?r>l:r<=l&&r>=a}function ks(t,e){const{startAngle:i,endAngle:n,innerRadius:o,outerRadius:s}=e,r={x:s*Math.cos(i),y:s*Math.sin(i)},a={x:s*Math.cos(n),y:s*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(i),y:o*Math.sin(i)},h=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return null!=Je(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,l.x,l.y)||null!=Je(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,h.x,h.y)||ei(0,0,s,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var Ss=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class ws extends si{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0}computeBBox(){const t=this.outerRadius;return new x(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,e=this.angleOffset,i=Math.min(this.startAngle,this.endAngle)+e,n=Math.max(this.startAngle,this.endAngle)+e,o=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),r=vi(X(this.startAngle),X(this.endAngle)),a=this.centerX,l=this.centerY;t.clear(),r?(t.arc(a,l,s,i,n),o>0&&(t.moveTo(a+o*Math.cos(n),l+o*Math.sin(n)),t.arc(a,l,o,n,i,!0))):(t.moveTo(a+o*Math.cos(i),l+o*Math.sin(i)),t.arc(a,l,s,i,n),o>0?t.arc(a,l,o,n,i,!0):t.lineTo(a,l)),t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,s=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return xs(a.x,a.y,{startAngle:n,endAngle:o,innerRadius:s,outerRadius:r})}}ws.className="Sector",Ss([oi()],ws.prototype,"centerX",void 0),Ss([oi()],ws.prototype,"centerY",void 0),Ss([oi()],ws.prototype,"innerRadius",void 0),Ss([oi()],ws.prototype,"outerRadius",void 0),Ss([oi()],ws.prototype,"startAngle",void 0),Ss([oi()],ws.prototype,"endAngle",void 0),Ss([oi()],ws.prototype,"angleOffset",void 0);const Ds={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e,i)=>{const n=i.keys[0],o=Math.abs(n-t);return t=n,!isNaN(o)&&o>0&&o<e?o:e}}},Os={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,n,o;const s=[...null!==(i=null===(e=t.domain.aggValues)||void 0===e?void 0:e[0])&&void 0!==i?i:[0,0]];for(const[e,i]of null!==(o=null===(n=t.domain.aggValues)||void 0===n?void 0:n.slice(1))&&void 0!==o?o:[])e<s[0]&&(s[0]=e),i>s[1]&&(s[1]=i);return s}},Ms={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function Cs(t,e,i="sum"){const n=(t,i)=>{const n=t*e/i;return n>=0?Math.min(e,n):Math.max(-e,n)};return{type:"group-value-processor",properties:t,adjust:()=>(t,e)=>{const o=[0,0];for(const n of e){const e=t[n],s=e<0?0:1;"sum"===i?o[s]+=e:o[s]=0===s?Math.min(o[s],e):Math.max(o[s],e)}const s=Math.max(Math.abs(o[0]),o[1]);for(const i of e)t[i]=n(t[i],s)}}}function Ns(t,e,i,n){const o=e[1]-e[0],s=(t,i,n)=>{const s=e[0]+(t-i)/n*o;return 0===n||s>=e[1]?e[1]:s<e[0]?e[0]:s};return{type:"property-value-processor",property:t,adjust:()=>(t,o)=>{let[r,a]=t.domain.values[o];null!=i&&(r=i),null!=n&&(a=n);const l=a-r;t.domain.values[o]=[e[0],e[1]];for(const e of t.data){let i=e.values;"ungrouped"===t.type&&(i=[i]);for(const t of i)t[o]=s(t[o],r,l)}}}}var Es,Ls=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Rs=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Is extends Te{constructor(t,e,i,n,o,s,r){super(o,s,r),this.angleKey=t,this.calloutLabelKey=e,this.sectorLabelKey=i,this.radiusKey=n}}class Ts extends Is{constructor(){super(...arguments),this.type="nodeClick"}}class _s extends Is{constructor(){super(...arguments),this.type="nodeDoubleClick"}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(Es||(Es={}));class As extends pn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50}}Ls([ft(zt(0))],As.prototype,"offset",void 0),Ls([ft(zt(0))],As.prototype,"minAngle",void 0),Ls([ft(Ot)],As.prototype,"formatter",void 0),Ls([ft(zt(0))],As.prototype,"minSpacing",void 0),Ls([ft(zt(0))],As.prototype,"maxCollisionOffset",void 0);class Ps extends pn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}Ls([ft(zt())],Ps.prototype,"positionOffset",void 0),Ls([ft(zt(0,1))],Ps.prototype,"positionRatio",void 0),Ls([ft(Ot)],Ps.prototype,"formatter",void 0);class Fs{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}Ls([ft(Bt)],Fs.prototype,"colors",void 0),Ls([ft(zt(0))],Fs.prototype,"length",void 0),Ls([ft(zt(0))],Fs.prototype,"strokeWidth",void 0);class Bs extends je{constructor(){super(...arguments),this.renderer=void 0}}Ls([ft(Ot)],Bs.prototype,"renderer",void 0);Ls([ft(Mt)],class extends Mi{constructor(){super(...arguments),this.showInLegend=!1}}.prototype,"showInLegend",void 0);class zs extends pn{constructor(){super(...arguments),this.text="",this.margin=2}}Ls([ft(Nt)],zs.prototype,"text",void 0),Ls([ft(zt())],zs.prototype,"margin",void 0);class js{constructor(){this.fill="transparent",this.fillOpacity=1}}Ls([ft(At)],js.prototype,"fill",void 0),Ls([ft(jt(0,1))],js.prototype,"fillOpacity",void 0);class Ws extends $n{}class Ks extends bs{constructor(t){super({moduleCtx:t,useLabelLayer:!0}),this.radiusScale=new Rn,this.groupSelection=pi.select(this.contentGroup,B),this.highlightSelection=pi.select(this.highlightGroup,B),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new As,this.sectorLabel=new Ps,this.calloutLine=new Fs,this.tooltip=new Bs,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new ze,this.surroundingRadius=void 0,this.angleScale=new Rn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new B({name:this.id+"-background",layer:!0,zIndex:ce.SERIES_BACKGROUND_ZINDEX}));const e=new B({name:"pieCalloutLabels"}),i=new B({name:"pieSectorLabels"}),n=new B({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=pi.select(e,B),this.sectorLabelSelection=pi.select(i,J),this.innerLabelsSelection=pi.select(n,J),this.animationState=new Ws("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(t){this._data=t,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var t;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}getDomain(t){return t===de.X?this.angleScale.domain:this.radiusScale.domain}processData(){var t,e;return Rs(this,void 0,void 0,(function*(){let{data:i=[]}=this;const{angleKey:n,radiusKey:o,seriesItemEnabled:s}=this;if(!n)return;const r=[];o&&(r.push(function(t,e={}){const{min:i=-1/0,max:n=1/0}=e,o=Ee(e,["min","max"]);return Object.assign({type:"value",property:t,valueType:"range",validation:t=>null!=ct(t,!0),processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,i),n)},o)}(o,{id:"radiusValue",min:null!==(t=this.radiusMin)&&void 0!==t?t:0,max:this.radiusMax}),Re(o,!0,{id:"radiusRaw"}),Ns({id:"radiusValue"},[0,1],null!==(e=this.radiusMin)&&void 0!==e?e:0,this.radiusMax)),r.push()),i=i.map((t,e)=>s[e]?t:Object.assign(Object.assign({},t),{[n]:0})),this.dataModel=new ye({props:[Ie(n,!0,{id:"angleValue"}),Re(n,!0,{id:"angleRaw"}),Ns({id:"angleValue"},[0,1],0),...r]}),this.processedData=this.dataModel.processData(i)}))}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=this._createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){return Rs(this,void 0,void 0,(function*(){return this._createNodeData()}))}_createNodeData(){var t,e,i,n;const{id:o,processedData:s,dataModel:r,rotation:a,angleScale:l}=this;if(!s||!r||"ungrouped"!==s.type)return[];const h=null!==(e=null===(t=r.resolveProcessedDataIndexById("angleValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,c=null!==(n=null===(i=r.resolveProcessedDataIndexById("radiusValue"))||void 0===i?void 0:i.index)&&void 0!==n?n:-1;if(h<0)return[];let d=0;const u=s.data.map((t,e)=>{var i;const{datum:n,values:o}=t,s=o[h],r=l.convert(d)+Y(a);d=s;const u=l.convert(d)+Y(a),p=Math.abs(u-r),g=r+p/2,f=o[h+1],y=c>=0&&null!==(i=o[c])&&void 0!==i?i:1,m=c>=0?o[c+1]:void 0,v=this.getLabels(n,g,p,!0),b=this.getSectorFormat(n,e,e,!1);return Object.assign({itemId:e,series:this,datum:n,index:e,angleValue:f,midAngle:g,midCos:Math.cos(g),midSin:Math.sin(g),startAngle:r,endAngle:u,sectorFormat:b,radius:y,radiusValue:m},v)});return[{itemId:o,nodeData:u,labelData:u}]}getLabels(t,e,i,n){const{calloutLabel:o,sectorLabel:s,legendItemKey:r,ctx:{callbackCache:a}}=this,l=!n||o.enabled?this.calloutLabelKey:void 0,h=!n||s.enabled?this.sectorLabelKey:void 0;if(!l&&!h&&!r)return{};const c=this.getLabelFormatterParams(t);let d,u,p;if(l){d=i>Y(o.minAngle)?o.formatter?a.call(o.formatter,c):String(t[l]):void 0}return h&&(u=s.formatter?a.call(s.formatter,c):String(t[h])),r&&(p=String(t[r])),Object.assign(Object.assign(Object.assign({},null!=d?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(e)),{text:d,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=u?{sectorLabel:{text:u}}:{}),null!=r&&null!=p?{legendItem:{key:r,text:p}}:{})}getLabelFormatterParams(t){const{id:e,radiusKey:i,radiusName:n,angleKey:o,angleName:s,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:h}=this;return{datum:t,angleKey:o,angleValue:t[o],angleName:s,radiusKey:i,radiusValue:i?t[i]:void 0,radiusName:n,calloutLabelKey:r,calloutLabelValue:r?t[r]:void 0,calloutLabelName:a,sectorLabelKey:l,sectorLabelValue:l?t[l]:void 0,sectorLabelName:h,seriesId:e}}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}];var i;const n=(i=t,(i%=G)<-Math.PI?i+=G:i>=Math.PI&&(i-=G),i)- -3*Math.PI/4,o=Math.floor(n/(Math.PI/2));var s,r;return e[(r=e.length,(s=o)>=0?Math.floor(s%r):Math.floor(s%r+r))]}getSectorFormat(t,e,i,n){var o,s,r,a,l,h,c,d,u;const{angleKey:p,radiusKey:g,fills:f,strokes:y,fillOpacity:m,formatter:v,id:b,ctx:{callbackCache:x}}=this,k=null===(o=this.highlightManager)||void 0===o?void 0:o.getActiveHighlight(),S=n&&(null==k?void 0:k.series)===this&&e===k.itemId,w=S?this.highlightStyle.item:null,D=null!==(s=null==w?void 0:w.fill)&&void 0!==s?s:f[i%f.length],O=null!==(r=null==w?void 0:w.fillOpacity)&&void 0!==r?r:m,M=null!==(a=null==w?void 0:w.stroke)&&void 0!==a?a:y[i%y.length],C=null!==(l=null==w?void 0:w.strokeWidth)&&void 0!==l?l:this.getStrokeWidth(this.strokeWidth);let N;return v&&(N=x.call(v,{datum:t,angleKey:p,radiusKey:g,fill:D,stroke:M,strokeWidth:C,highlighted:S,seriesId:b})),{fill:null!==(h=null==N?void 0:N.fill)&&void 0!==h?h:D,fillOpacity:null!==(c=null==N?void 0:N.fillOpacity)&&void 0!==c?c:O,stroke:null!==(d=null==N?void 0:N.stroke)&&void 0!==d?d:M,strokeWidth:null!==(u=null==N?void 0:N.strokeWidth)&&void 0!==u?u:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n===t||n<0?0:n}getOuterRadius(){const{radius:t,outerRadiusRatio:e,outerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n<0?0:n}updateRadiusScale(){const t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return Rs(this,void 0,void 0,(function*(){const{title:e}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.rootGroup.translationX=this.centerX,this.rootGroup.translationY=this.centerY,e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var t;const{innerCircle:e,oldInnerCircle:i,innerCircleNode:n}=this;if(i!==e){let i;n&&this.backgroundGroup.removeChild(n),e&&(i=new li,i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(i)),this.oldInnerCircle=e,this.innerCircleNode=i}}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=this.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,e/2),y:t.midSin*Math.max(0,e/2)}})}updateSelections(){return Rs(this,void 0,void 0,(function*(){yield this.updateGroupSelection()}))}updateGroupSelection(){return Rs(this,void 0,void 0,(function*(){const{groupSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,s=t=>t.update(this.nodeData,t=>{const e=new ws;e.tag=Es.Sector,t.appendChild(e)});this.groupSelection=s(t),this.highlightSelection=s(e),i.update(this.nodeData,t=>{const e=new mi;e.tag=Es.Callout,e.pointerEvents=N.None,t.appendChild(e);const i=new J;i.tag=Es.Label,i.pointerEvents=N.None,t.appendChild(i)}),n.update(this.nodeData,t=>{t.pointerEvents=N.None}),o.update(this.innerLabels,t=>{t.pointerEvents=N.None})}))}updateNodes(t){var e;return Rs(this,void 0,void 0,(function*(){const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&(null==i?void 0:i.series)===this,this.labelGroup.visible=n,this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:o}=this,s=o.convert(0),r=(t,e,i,n)=>{const r=o.convert(e.radius),a=t.parent,l=null==a?void 0:a.parent;n&&a&&l&&(l.removeChild(a),l.appendChild(a)),t.innerRadius=Math.max(0,s),t.outerRadius=Math.max(0,r),n&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);const h=this.getSectorFormat(e.datum,e.itemId,i,n);t.fill=h.fill,t.stroke=h.stroke,t.strokeWidth=h.strokeWidth,t.fillOpacity=h.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round",t.visible=this.seriesItemEnabled[i]};this.groupSelection.selectByTag(Es.Sector).forEach((t,e)=>r(t,t.datum,e,!1)),this.highlightSelection.selectByTag(Es.Sector).forEach((t,e)=>{const n=(null==i?void 0:i.series)===this&&t.datum.itemId===i.itemId;t.visible=n,t.visible&&r(t,t.datum,e,n)}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()}))}updateCalloutLineNodes(){var t;const{radiusScale:e,calloutLine:i}=this,n=i.length,o=i.strokeWidth,s=null!==(t=i.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(Es.Callout).forEach((t,i)=>{const a=t.datum,l=e.convert(a.radius),h=Math.max(0,l),c=a.calloutLabel;if((null==c?void 0:c.text)&&!c.hidden&&0!==h){t.visible=!0,t.strokeWidth=o,t.stroke=s[i%s.length],t.fill=void 0;const e=a.midCos*h,l=a.midSin*h;let d=a.midCos*(h+n),u=a.midSin*(h+n);if(c.collisionTextAlign||0!==c.collisionOffsetY){const t=c.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const n=e-d,o=i-u,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),a=s-r;a>0&&(d+=n*a/s,u+=o*a/s)}t.x1=e,t.y1=l,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX,s=i.y-this.centerY,r=i.y+i.height-this.centerY;let a=1;e.x+1<n?a=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(a=(o-e.x)/e.width);const l=e.y+1<s||e.y+e.height-1>r;return{visibleTextPart:a,textLength:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],s=Math.pow(n,2);return o.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,s=t.convert(0),r=this.nodeData,a=this.nodeData.filter(e=>!(e=>{const i=e.calloutLabel,n=t.convert(e.radius),o=Math.max(0,n);return!i||0===o})(e));if(a.forEach(t=>{const e=t.calloutLabel;e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),h=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midSin<0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),d=a.filter(t=>t.midSin>=0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),u=new J,p=e=>{const o=e.calloutLabel,s=t.convert(e.radius),r=Math.max(0,s)+i.length+n,a=e.midCos*r,l=e.midSin*r+o.collisionOffsetY;return this.setTextDimensionalProps(u,a,l,this.calloutLabel,o),u.computeBBox()},g=(t,e,i)=>{const n=p(t).grow(o/2),s=p(e).grow(o/2);if(n.x<s.x+s.width&&n.x+n.width>s.x&&("to-top"===i?n.y<s.y+s.height:n.y+n.height>s.y)){const t="to-top"===i?n.y-s.y-s.height:n.y+n.height-s.y;e.calloutLabel.collisionOffsetY=t}},f=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],n=t[e];g(i,n,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],n=t[e];g(i,n,"to-bottom")}},y=e=>{const i=a.some(t=>0!==t.calloutLabel.collisionOffsetY),n=e.map(t=>p(t)),l=n.map(t=>t.clone().grow(o/2));let h=!1;for(let t=0;t<l.length&&!h;t++){const i=l[t];for(let n=t+1;n<e.length;n++){const t=l[n];if(i.collidesBBox(t)){h=!0;break}}}const c=r.map(e=>{const{startAngle:i,endAngle:n}=e,o=t.convert(e.radius),r=Math.max(0,o);return{startAngle:i,endAngle:n,innerRadius:s,outerRadius:r}}),d=n.some(t=>c.some(e=>function(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},o={x:t.x,y:t.y+t.height},s={x:t.x+t.width,y:t.y+t.height};return ks({start:i,end:n},e)||ks({start:o,end:s},e)}(t,e)));(h||i||d)&&e.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};f(l),f(h),y(c),y(d)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:s,color:r}=i,a=new J;this.calloutLabelSelection.selectByTag(Es.Label).forEach(i=>{const{datum:n}=i,l=n.calloutLabel,h=e.convert(n.radius),c=Math.max(0,h);if(!(null==l?void 0:l.text)||0===c||l.hidden)return void(i.visible=!1);const d=c+o+s,u=n.midCos*d,p=n.midSin*d+l.collisionOffsetY;this.setTextDimensionalProps(a,u,p,this.calloutLabel,l);const g=a.computeBBox(),{visibleTextPart:f,textLength:y,hasVerticalOverflow:m}=this.getLabelOverflow(l.text,g,t),v=1===f?l.text:l.text.substring(0,y)+"\u2026";this.setTextDimensionalProps(i,u,p,this.calloutLabel,Object.assign(Object.assign({},l),{text:v})),i.fill=r,i.visible=!m})}computeLabelsBBox(t,e){var i;const{radiusScale:n,calloutLabel:o,calloutLine:s}=this,r=s.length,{offset:a,maxCollisionOffset:l,minSpacing:h}=o;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const c=[],d=new J;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(this.setTextDimensionalProps(d,0,t,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach(i=>{const o=i.calloutLabel,s=n.convert(i.radius),p=Math.max(0,s);if(!o||0===p)return null;const g=p+r+a,f=i.midCos*g,y=i.midSin*g+o.collisionOffsetY;this.setTextDimensionalProps(d,f,y,this.calloutLabel,o);const m=d.computeBBox();if(o.box=m,Math.abs(o.collisionOffsetY)>l)o.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new x(u.x-h,t,u.width+2*h,u.y+u.height+h-t);if(m.collidesBBox(i))return void(o.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(o.text,m,e),s=o.text.length>2&&t<2;if(i||s||n)return void(o.hidden=!0)}o.hidden=!1,c.push(m)}}),0===c.length?null:x.merge(c)}setTextDimensionalProps(t,e,i,n,o){var s,r;const{fontStyle:a,fontWeight:l,fontSize:h,fontFamily:c}=n;t.fontStyle=a,t.fontWeight=l,t.fontSize=h,t.fontFamily=c,t.text=o.text,t.x=e,t.y=i,t.textAlign=null!==(r=null!==(s=null==o?void 0:o.collisionTextAlign)&&void 0!==s?s:null==o?void 0:o.textAlign)&&void 0!==r?r:"center",t.textBaseline=o.textBaseline}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:s,positionOffset:r,positionRatio:a,color:l}=this.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((d,u)=>{const p=u.sectorLabel,g=t.convert(u.radius),f=Math.max(0,g);let y=!1;if(p&&0!==f){const t=e*(1-a)+g*a+r;d.fill=l,d.fontStyle=n,d.fontWeight=o,d.fontSize=i,d.fontFamily=s,d.text=p.text;!h&&c?(d.x=0,d.y=0):(d.x=u.midCos*t,d.y=u.midSin*t),d.textAlign="center",d.textBaseline="middle";const m=d.computeBBox(),v=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:b,endAngle:x}=u,k={startAngle:b,endAngle:x,innerRadius:e,outerRadius:f};v.every(([t,e])=>xs(t,e,k))&&(y=!0)}d.visible=y})}updateInnerCircle(){const t=this.innerCircleNode;if(!t)return;const e=this.getInnerRadius();if(0===e)t.size=0;else{const i=Math.min(e,this.getOuterRadius()),n=1;t.size=Math.ceil(2*i+n)}}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:o,fontWeight:s,fontSize:r,fontFamily:a,color:l}=n;i.fontStyle=o,i.fontWeight=s,i.fontSize=r,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)});const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],o=t.reduce((t,e,o)=>t+e.height+i(o)+n(o),0),s=Math.max(...t.map(t=>t.width)),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(s/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let e=0,s=-o/2;e<t.length;e++){const o=t[e].height+s+i(e);l.push(o),s=o+n(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getNodeClickEvent(t,e){return new Ts(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new _s(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getTooltipHtml(t){var e;const{angleKey:i}=this;if(!i)return"";const{tooltip:n,angleName:o,radiusKey:s,radiusName:r,calloutLabelKey:a,sectorLabelKey:l,calloutLabelName:h,sectorLabelName:c,id:d}=this,{renderer:u}=n,{datum:p,angleValue:g,radiusValue:f,sectorFormat:{fill:y},calloutLabel:{text:m=""}={}}=t,v="number"==typeof g?bi(g):String(g),b=null===(e=this.title)||void 0===e?void 0:e.text,x={title:b,backgroundColor:y,content:`${m?m+": ":""}${v}`};return u?be(u({datum:p,angleKey:i,angleValue:g,angleName:o,radiusKey:s,radiusValue:f,radiusName:r,calloutLabelKey:a,calloutLabelName:h,sectorLabelKey:l,sectorLabelName:c,title:b,color:y,seriesId:d}),x):be(x)}getLegendData(){var t,e,i;const{calloutLabelKey:n,legendItemKey:o,id:s,data:r}=this;if(!r||0===r.length)return[];if(!o&&!n)return[];const a=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,l=[];for(let t=0;t<r.length;t++){const h=r[t],c=[];a&&c.push(a);const d=this.getLabels(h,2*Math.PI,2*Math.PI,!1);if(o&&void 0!==d.legendItem?c.push(d.legendItem.text):n&&void 0!==(null===(e=d.calloutLabel)||void 0===e?void 0:e.text)&&c.push(null===(i=d.calloutLabel)||void 0===i?void 0:i.text),0===c.length)continue;const u=this.getSectorFormat(h,t,t,!1);l.push({legendType:"category",id:s,itemId:t,seriesId:s,enabled:this.seriesItemEnabled[t],label:{text:c.join(" - ")},marker:{fill:u.fill,stroke:u.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return l}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:s}=this;if(!s)return;const r=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((t,i)=>i===e)[t.legendItemKey]);r&&(null===(o=this.data)||void 0===o||o.forEach((t,e)=>{t[s]===r&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(){const t=Math.PI/-2+Y(this.rotation);this.groupSelection.selectByTag(Es.Sector).forEach(e=>{var i;const n=e.datum;null===(i=this.animationManager)||void 0===i||i.animateMany(`${this.id}_empty-update-ready_${e.id}`,[{from:t,to:n.startAngle},{from:t,to:n.endAngle}],{disableInteractions:!0,duration:1e3,ease:yo,repeat:0,onUpdate([t,i]){e.startAngle=t,e.endAngle=i}})});const e={from:0,to:1,delay:1e3,duration:200,ease:fo,repeat:0};this.calloutLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.sectorLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.innerLabelsSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(Es.Sector).forEach(t=>{const{datum:e}=t;t.startAngle=e.startAngle,t.endAngle=e.endAngle})}}Ks.className="PieSeries",Ks.type="pie",Ls([ft(Nt)],Ks.prototype,"angleKey",void 0),Ls([ft(Nt)],Ks.prototype,"angleName",void 0),Ls([ft(Et)],Ks.prototype,"radiusKey",void 0),Ls([ft(Et)],Ks.prototype,"radiusName",void 0),Ls([ft(jt(0))],Ks.prototype,"radiusMin",void 0),Ls([ft(jt(0))],Ks.prototype,"radiusMax",void 0),Ls([ft(Et)],Ks.prototype,"calloutLabelKey",void 0),Ls([ft(Et)],Ks.prototype,"calloutLabelName",void 0),Ls([ft(Et)],Ks.prototype,"sectorLabelKey",void 0),Ls([ft(Et)],Ks.prototype,"sectorLabelName",void 0),Ls([ft(Et)],Ks.prototype,"legendItemKey",void 0),Ls([ft(Ft)],Ks.prototype,"fills",void 0),Ls([ft(Ft)],Ks.prototype,"strokes",void 0),Ls([ft(zt(0,1))],Ks.prototype,"fillOpacity",void 0),Ls([ft(zt(0,1))],Ks.prototype,"strokeOpacity",void 0),Ls([ft(Qt)],Ks.prototype,"lineDash",void 0),Ls([ft(zt(0))],Ks.prototype,"lineDashOffset",void 0),Ls([ft(Ot)],Ks.prototype,"formatter",void 0),Ls([ft(zt(-360,360))],Ks.prototype,"rotation",void 0),Ls([ft(zt())],Ks.prototype,"outerRadiusOffset",void 0),Ls([ft(zt(0))],Ks.prototype,"outerRadiusRatio",void 0),Ls([ft(zt())],Ks.prototype,"innerRadiusOffset",void 0),Ls([ft(zt(0))],Ks.prototype,"innerRadiusRatio",void 0),Ls([ft(zt(0))],Ks.prototype,"strokeWidth",void 0);var Gs=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Xs extends os{constructor(t=window.document,e,i){super(t,e,i),this.padding=new Xe(40)}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return Gs(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();this.computeSeriesRect(e),this.computeCircle();const n=e.clone().grow(20);return this.hoverRect=n,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:e,hoverRect:n,visible:!0},axes:[]}),e}))}computeSeriesRect(t){const{seriesAreaPadding:e}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t}computeCircle(){const t=this.seriesRect,e=this.series.filter(t=>t instanceof bs),i=(t,i,n)=>{e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=n});const o=e.filter(t=>t instanceof Ks);if(o.length>1){const t=o.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},n=t.x+t.width/2,o=t.y+t.height/2,s=Math.max(0,Math.min(t.width,t.height)/2);let r=s;i(n,o,r);const a=({hideWhenNecessary:a=!1}={})=>{const l=[];for(const i of e){const e=i.computeLabelsBBox({hideWhenNecessary:a},t);null!=e&&l.push(e)}if(0===l.length)return void i(n,o,s);const h=x.merge(l),c=this.refineCircle(h,r);i(c.centerX,c.centerY,c.radius),c.radius!==r&&(r=c.radius)};a(),a(),a(),a({hideWhenNecessary:!0}),a({hideWhenNecessary:!0})}refineCircle(t,e){const i=this.seriesRect,n=-e,o=-e,s=e,r=e;let a=Math.max(0,n-t.x),l=Math.max(0,o-t.y),h=Math.max(0,t.x+t.width-s),c=Math.max(0,t.y+t.height-r);const d=i.width-a-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,f=.5*i.height/2,y=Math.min(g,f);if(p<y){p=y;const t=a+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,h)>t?(a=t/2,h=t/2):a>h?a=t-h:h=t-a}}const m=a+2*p+h,v=l+2*p+c;return{centerX:i.x+(i.width-m)/2+a+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}}Xs.className="PolarChart",Xs.type="polar";var Ys=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Hs extends os{constructor(t=window.document,e,i){super(t,e,i),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return Ys(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesAreaPadding:i}=this,n=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e;const o=e.clone().grow(20);this.hoverRect=o,yield Promise.all(this.series.map(t=>Ys(this,void 0,void 0,(function*(){t.rootGroup.translationX=Math.floor(e.x),t.rootGroup.translationY=Math.floor(e.y),yield t.update({seriesRect:e})}))));const{seriesRoot:s}=this;return s.setClipRectInGroupCoordinateSpace(new x(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:o,visible:!0},axes:[]}),e}))}}Hs.className="HierarchyChart",Hs.type="hierarchy";const Vs=/(#\{(.*?)\})/g;function $s(t,e,i){return t.replace(Vs,(function(...t){const n=t[2],[o,s]=n.split(":"),r=e[o];if("number"==typeof r){const t=s&&i&&i[s];if(t){const{locales:e,options:i}=t;return r.toLocaleString(e,i)}return String(r)}if(r instanceof Date){const t=s&&i&&i[s];if("string"==typeof t){return Wi(t)(r)}return r.toDateString()}return"string"==typeof r||(null==r?void 0:r.toString)?String(r):""}))}let Us=null;function Zs(t){return Us=null!=Us?Us:document.createElement("div"),t?(Us.textContent=t,Us.innerHTML):""}function qs(t,e){let i=Math.floor(t[0]),n=t[1];i=function(t,e,i){const n=Math.abs(e-t)/(i-1),o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return Math.floor(t/s)*s}(i,n,e);const o=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}((e-t)/(i-1))}(i,n,e);n=i+(e-1)*o;return[[i,n],function(t,e,i){const n=Math.floor(Math.log10(e)),o=e>0&&e<1?Math.abs(n):0,s=Math.pow(10,o),r=new Ti(o);for(let n=0;n<i;n++){const i=t+e*n;r[n]=Math.round(i*s)/s}return r}(i,o,e)]}var Js=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Qs extends Cn{constructor(){super(...arguments),this.maxSpacing=NaN}}Js([ft(xt(Wt(1),wt("minSpacing"))),cn(NaN)],Qs.prototype,"maxSpacing",void 0);class tr extends Tn{constructor(t,e=new Rn){super(t,e),this.min=NaN,this.max=NaN,e.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;return t.length>2&&(t=null!==(e=dn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}formatDatum(t){return"number"==typeof t?t.toFixed(2):(P.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new Qs}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[e,i]=qs(this.dataDomain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}tr.className="NumberAxis",tr.type="number",Js([ft(xt(Wt(),St("max"))),cn(NaN)],tr.prototype,"min",void 0),Js([ft(xt(Wt(),wt("min"))),cn(NaN)],tr.prototype,"max",void 0);var er=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};function ir(){return yt(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}class nr extends tr{constructor(t){super(t,new hn),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;t.length>2&&(t=null!==(e=dn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]);const o=t[0]>t[1],s=t[0]<0&&t[1]>0,r=0===t[0]&&0===t[1];return(o||s||r)&&(t=[],s?P.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):r&&P.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t}set base(t){this.scale.base=t}get base(){return this.scale.base}}nr.className="LogAxis",nr.type="log",er([ft(xt(Wt(),St("max"),ir())),cn(NaN)],nr.prototype,"min",void 0),er([ft(xt(Wt(),wt("min"),ir())),cn(NaN)],nr.prototype,"max",void 0);var or=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class sr extends Cn{constructor(){super(...arguments),this.maxSpacing=NaN}}or([ft(xt(Wt(1),wt("minSpacing"))),cn(NaN)],sr.prototype,"maxSpacing",void 0);class rr extends Tn{constructor(t){super(t,new Yi),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;e.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=dn(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(t=[i,t[1]]),n instanceof Date&&(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}createTick(){return new sr}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return 1}}rr.className="TimeAxis",rr.type="time",or([ft(xt(Tt,St("max")))],rr.prototype,"min",void 0),or([ft(xt(Tt,wt("min")))],rr.prototype,"max",void 0);var ar,lr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},hr=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class cr extends pn{constructor(){super(...arguments),this.formatter=void 0}}lr([ft(Ot)],cr.prototype,"formatter",void 0);class dr extends je{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}lr([ft(Ot)],dr.prototype,"renderer",void 0),lr([ft(Et)],dr.prototype,"format",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(ar||(ar={}));class ur extends no{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,directionKeys:{[de.X]:["xKey"],[de.Y]:["yKeys"]},directionNames:{[de.X]:["xName"],[de.Y]:["yNames"]}}),this.tooltip=new dr,this.marker=new oo,this.label=new cr,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this._yKeys=[],this._visibles=[],this.yNames=[],this.strokeWidth=2,this.shadow=void 0;const{marker:e,label:i}=this;e.enabled=!1,i.enabled=!1}set yKeys(t){Ci(this._yKeys,t)||(this._yKeys=t,this.processedData=void 0,this.processSeriesItemEnabled())}get yKeys(){return this._yKeys}set visibles(t){this._visibles=t,this.processSeriesItemEnabled()}get visibles(){return this._visibles}processSeriesItemEnabled(){const{seriesItemEnabled:t,_visibles:e=[]}=this;t.clear(),this._yKeys.forEach((i,n)=>{var o;return t.set(i,null===(o=e[n])||void 0===o||o)})}set normalizedTo(t){const e=t?Math.abs(t):void 0;this._normalizedTo!==e&&(this._normalizedTo=e)}get normalizedTo(){return this._normalizedTo}processData(){return hr(this,void 0,void 0,(function*(){const{xKey:t,yKeys:e,seriesItemEnabled:i,xAxis:n,yAxis:o,normalizedTo:s}=this,r=t&&e.length&&this.data?this.data:[],a=(null==n?void 0:n.scale)instanceof Ei,l=(null==o?void 0:o.scale)instanceof Ei,h=[...i.entries()].filter(([,t])=>t).map(([t])=>t),c=s&&isFinite(s)?s:void 0,d=[];c&&d.push(Cs(h,c,"sum")),this.dataModel=new ye({props:[Le(t,a,{id:"xValue"}),...h.map(t=>Re(t,l,{id:"yValue-"+t,missingValue:NaN,invalidValue:void 0})),Oe(h),...d],groupByKeys:!0,dataVisible:this.visible&&h.length>0}),this.processedData=this.dataModel.processData(r)}))}getDomain(t){const{processedData:e,xAxis:i,yAxis:n}=this;if(!e)return[];const{defs:{keys:[o]},domain:{keys:[s],values:[r],aggValues:[a]=[]}}=e;return t===de.X?"category"===o.valueType?s:this.fixNumericExtent(dn(s),i):n instanceof nr||n instanceof rr?this.fixNumericExtent(r,n):this.fixNumericExtent(a,n)}createNodeData(){var t;return hr(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,data:n,processedData:{data:o}={},ctx:{callbackCache:s}}=this;if(!e||!i||!n)return[];const r=[],{yKeys:a,xKey:l="",marker:h,label:c,fills:d,strokes:u,id:p}=this,{scale:g}=e,{scale:f}=i,y=f instanceof Ei,m=(null!==(t=g.bandwidth)&&void 0!==t?t:0)/2,v=n.length,b=new Array(v).fill(null).map(()=>({left:0,right:0})),x=new Array(v).fill(0),k=(t,e,i,n)=>{const o=g.convert(t)+m,s=b[i][n],r=b[i][n]+e,a=f.convert(s,{strict:!1}),l=f.convert(r,{strict:!1});return b[i][n]=r,[{x:o,y:l,size:h.size},{x:o,y:a,size:h.size}]},S=(t,e,i,n)=>{let o;const s=this.normalizedTo&&isFinite(this.normalizedTo),r=s&&y&&ht(n);(!s&&!isNaN(n)||r)&&(o=x[i]+=e);return{x:g.convert(t)+m,y:f.convert(o,{strict:!1}),size:h.size}};return a.forEach((t,e)=>{var i;const n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("yValue-"+t),a=[],g=[],f={itemId:t,points:[],yValues:[]},y={itemId:t,points:[]};if(r[e]={itemId:t,fillSelectionData:y,labelData:a,nodeData:g,strokeSelectionData:f},!n)return;const m=y.points,v=[],b=f.points,w=f.yValues;let D=-1;null==o||o.forEach((i,r)=>{const{keys:[f],datum:y,values:O}=i;O.forEach((M,C)=>{var N;D++;const E=y[C],L=M[n.index],R=isNaN(L)?void 0:L,I=C<O.length-1,T=I?i:o[r+1],_=null==T?void 0:T.keys[0],A=I?C+1:0,P=null==T?void 0:T.values[A][n.index],F=isNaN(P)?void 0:P,B=S(f,+R,D,E[t]);let z;h&&g.push({index:D,series:this,itemId:t,datum:E,nodeMidPoint:{x:B.x,y:B.y},cumulativeValue:x[D],yValue:R,yKey:t,xKey:l,point:B,fill:d[e%d.length],stroke:u[e%u.length]}),z=c.formatter?null!==(N=s.call(c.formatter,{value:R,seriesId:p}))&&void 0!==N?N:"":dt(R)?Number(R).toFixed(2):String(R),c&&a.push({index:D,itemId:t,point:B,label:z?{text:z,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0});const j=[f,_],W=[R,F];if(j.some(t=>null==t))return;W.some(t=>null==t)&&(W[0]=0,W[1]=0);const K=k(j[0],+W[0],D,"right");m.push(K[0]),v.push(K[1]);const G=k(j[1],+W[1],D,"left");m.push(G[0]),v.push(G[1]),b.push({x:NaN,y:NaN}),w.push(void 0),b.push(K[0]),w.push(R),void 0!==F&&(b.push(G[0]),w.push(R))})});for(let t=v.length-1;t>=0;t--)m.push(v[t])}),r}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Vn(t))}updateMarkerSelection(t){return hr(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&i.clear(),i.update(o,t=>{t.tag=ar.Marker})}))}updateMarkerNodes(t){var e;return hr(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{id:o,xKey:s="",marker:r,seriesItemEnabled:a,yKeys:l,fills:h,strokes:c,fillOpacity:d,marker:{fillOpacity:u=d},strokeOpacity:p,highlightStyle:{item:{fill:g,fillOpacity:f=u,stroke:y,strokeWidth:m}},ctx:{callbackCache:v}}=this,{size:b,formatter:x}=r,k=null!==(e=r.strokeWidth)&&void 0!==e?e:this.strokeWidth,S="function"==typeof r.shape;i.each((t,e)=>{var i,d,w,D,O,M,C,N;const E=l.indexOf(e.yKey),L=n&&void 0!==g?g:null!==(i=r.fill)&&void 0!==i?i:h[E%h.length],R=n?f:u,I=n&&void 0!==y?y:null!==(d=r.stroke)&&void 0!==d?d:c[E%h.length],T=n&&void 0!==m?m:k;let _=void 0;x&&(_=v.call(x,{datum:e.datum,xKey:s,yKey:e.yKey,fill:L,stroke:I,strokeWidth:T,size:b,highlighted:n,seriesId:o})),t.fill=null!==(w=null==_?void 0:_.fill)&&void 0!==w?w:L,t.stroke=null!==(D=null==_?void 0:_.stroke)&&void 0!==D?D:I,t.strokeWidth=null!==(O=null==_?void 0:_.strokeWidth)&&void 0!==O?O:T,t.fillOpacity=null!=R?R:1,t.strokeOpacity=null!==(C=null!==(M=r.strokeOpacity)&&void 0!==M?M:p)&&void 0!==C?C:1,t.size=null!==(N=null==_?void 0:_.size)&&void 0!==N?N:b,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!!a.get(e.yKey)&&!isNaN(e.point.x)&&!isNaN(e.point.y),S&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return hr(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=ar.Label})}))}updateLabelNodes(t){return hr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;h&&i?(t.fontStyle=n,t.fontWeight=o,t.fontSize=s,t.fontFamily=r,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i;return new to(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new eo(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getTooltipHtml(t){var e,i,n,o;const{xKey:s,id:r}=this,{yKey:a}=t,l=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue-"+a);if(!s||!a||!l)return"";const h=t.datum,c=h[s],d=h[a],{xAxis:u,yAxis:p,yKeys:g}=this;if(!(u&&p&&dt(d)&&l))return"";const{xName:f,yNames:y,fills:m,strokes:v,tooltip:b,marker:x}=this,{size:k,formatter:S,strokeWidth:w,fill:D,stroke:O}=x,M=u.formatDatum(c),C=p.formatDatum(d),N=g.indexOf(a),E=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.data[t.index])||void 0===n?void 0:n.values[0][null==l?void 0:l.index],L=y[N],R=Zs(L),I=Zs(M+": "+C),T=null!=w?w:this.strokeWidth,_=null!=D?D:m[N%m.length],A=null!=O?O:v[N%m.length];let P=void 0;S&&(P=S({datum:h,xKey:s,yKey:a,fill:_,stroke:A,strokeWidth:T,size:k,highlighted:!1,seriesId:r}));const F=null!==(o=null==P?void 0:P.fill)&&void 0!==o?o:_,B={title:R,backgroundColor:F,content:I},{renderer:z,format:j}=b;if(j||z){const t={datum:h,xKey:s,xName:f,xValue:c,yKey:a,yValue:d,processedYValue:E,yName:L,color:F,title:R,seriesId:r};if(j)return be({content:$s(j,t)},B);if(z)return be(z(t),B)}return be(B)}getLegendData(){var t,e,i,n,o;const{data:s,id:r,xKey:a,yKeys:l,yNames:h,seriesItemEnabled:c,marker:d,fills:u,strokes:p,fillOpacity:g,strokeOpacity:f}=this;if(!(null==s?void 0:s.length)||!a||!l.length)return[];const y=[];for(let s=l.length-1;s>=0;s--){const a=l[s];y.push({legendType:"category",id:r,itemId:a,seriesId:r,enabled:null!==(t=c.get(a))&&void 0!==t&&t,label:{text:h[s]||l[s]},marker:{shape:d.shape,fill:null!==(e=d.fill)&&void 0!==e?e:u[s%u.length],stroke:null!==(i=d.stroke)&&void 0!==i?i:p[s%p.length],fillOpacity:null!==(n=d.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(o=d.strokeOpacity)&&void 0!==o?o:f}})}return y}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o}=t,s={},r=1===Object.values(o).reduce((t,e)=>t+e,0)&&e;if(n.id===this.id){const t=Object.values(o).filter(t=>1===t).length===Object.keys(o).length;this.yKeys.forEach(n=>{var o;const a=n===i||r||t&&e;s[n]=null!==(o=s[n])&&void 0!==o?o:a})}else this.yKeys.forEach(t=>{s[t]=r});Object.keys(s).forEach(t=>{super.toggleSeriesItem(t,s[t])})}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:o}){const{strokes:s,fills:r,fillOpacity:a,lineDash:l,lineDashOffset:h,strokeOpacity:c,strokeWidth:d,shadow:u}=this;i.forEach(({fillSelectionData:i,strokeSelectionData:p,itemId:g},f)=>{var y,m,v;const[b,x]=n[f],k={from:0,to:null!==(y=null==o?void 0:o.width)&&void 0!==y?y:0,disableInteractions:!0,duration:1e3,ease:fo,repeat:0};{const{points:t,yValues:e}=p;x.tag=ar.Stroke,x.fill=void 0,x.lineJoin=x.lineCap="round",x.pointerEvents=N.None,x.stroke=s[f%s.length],x.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:g}),x.strokeOpacity=c,x.lineDash=l,x.lineDashOffset=h,null===(m=this.animationManager)||void 0===m||m.animate(`${this.id}_empty-update-ready_stroke_${f}`,Object.assign(Object.assign({},k),{onUpdate(i){x.path.clear({trackChanges:!0});let n=!0;t.forEach((o,s)=>{if(void 0===e[s]||isNaN(o.x)||isNaN(o.y))n=!0;else if(o.x<=i)n?(x.path.moveTo(o.x,o.y),n=!1):x.path.lineTo(o.x,o.y);else if(s>0&&void 0!==e[s]&&void 0!==e[s-1]&&t[s-1].x<=i){const e=t[s-1],n=o,r=i,a=e.y+(r-e.x)*(n.y-e.y)/(n.x-e.x);x.path.lineTo(r,a)}}),x.checkPathDirty()}}))}{const{points:t}=i,e=t.slice(0,t.length/2),n=t.slice(t.length/2);b.tag=ar.Fill,b.stroke=void 0,b.lineJoin="round",b.pointerEvents=N.None,b.fill=r[f%r.length],b.fillOpacity=a,b.strokeOpacity=c,b.strokeWidth=d,b.lineDash=l,b.lineDashOffset=h,b.fillShadow=u,null===(v=this.animationManager)||void 0===v||v.animate(`${this.id}_empty-update-ready_fill_${f}`,Object.assign(Object.assign({},k),{onUpdate(t){b.path.clear({trackChanges:!0});let i=0,o=0;e.forEach((n,s)=>{if(n.x<=t)i=n.x,o=n.y,b.path.lineTo(n.x,n.y);else if(s>0&&e[s-1].x<t){const r=e[s-1],a=n;i=t,o=r.y+(i-r.x)*(a.y-r.y)/(a.x-r.x),b.path.lineTo(i,o)}}),n.forEach((o,s)=>{const r=n.length-s-1;if(o.x<=t)b.path.lineTo(o.x,o.y);else if(r>0&&e[r-1].x<t){const t=o,e=n[s+1],r=t.y+(i-t.x)*(e.y-t.y)/(e.x-t.x);b.path.lineTo(i,r)}}),n.length>0&&b.path.lineTo(n[n.length-1].x,n[n.length-1].y),b.path.closePath(),b.checkPathDirty()}}))}t[f].each((t,e)=>{var i,n,s,r;const a=(null==o?void 0:o.width)?e.point.x/o.width*1e3:0,l=this.animateFormatter(e),h=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(s=this.animationManager)||void 0===s||s.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},k),{to:null!==(r=null==l?void 0:l.size)&&void 0!==r?r:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[f].each((t,e)=>{var i;const n=(null==o?void 0:o.width)?e.point.x/o.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({contextData:t,paths:e}){const{strokes:i,fills:n,fillOpacity:o,lineDash:s,lineDashOffset:r,strokeOpacity:a,strokeWidth:l,shadow:h}=this;t.forEach(({strokeSelectionData:t,fillSelectionData:c,itemId:d},u)=>{const[p,g]=e[u];g.stroke=i[u%i.length],g.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:d}),g.strokeOpacity=a,g.lineDash=s,g.lineDashOffset=r,g.path.clear({trackChanges:!0});let f=!0;t.points.forEach((e,i)=>{void 0===t.yValues[i]||isNaN(e.x)||isNaN(e.y)?f=!0:f?(g.path.moveTo(e.x,e.y),f=!1):g.path.lineTo(e.x,e.y)}),g.checkPathDirty(),p.fill=n[u%n.length],p.fillOpacity=o,p.strokeOpacity=a,p.strokeWidth=l,p.lineDash=s,p.lineDashOffset=r,p.fillShadow=h,p.path.clear({trackChanges:!0}),c.points.forEach(t=>{p.path.lineTo(t.x,t.y)}),p.path.closePath(),p.checkPathDirty()})}animateFormatter(t){var e,i,n;const{marker:o,fills:s,strokes:r,xKey:a="",yKeys:l,id:h,ctx:{callbackCache:c}}=this,{size:d,formatter:u}=o,p=l.indexOf(t.yKey),g=null!==(e=o.fill)&&void 0!==e?e:s[p%s.length],f=null!==(i=o.stroke)&&void 0!==i?i:r[p%s.length],y=null!==(n=o.strokeWidth)&&void 0!==n?n:this.strokeWidth;let m=void 0;return u&&(m=c.call(u,{datum:t.datum,xKey:a,yKey:t.yKey,fill:g,stroke:f,strokeWidth:y,size:d,highlighted:!1,seriesId:h})),m}isLabelEnabled(){return this.label.enabled}}ur.className="AreaSeries",ur.type="area",lr([ft(Ft)],ur.prototype,"fills",void 0),lr([ft(Ft)],ur.prototype,"strokes",void 0),lr([ft(zt(0,1))],ur.prototype,"fillOpacity",void 0),lr([ft(zt(0,1))],ur.prototype,"strokeOpacity",void 0),lr([ft(Qt)],ur.prototype,"lineDash",void 0),lr([ft(zt(0))],ur.prototype,"lineDashOffset",void 0),lr([ft(Et)],ur.prototype,"xKey",void 0),lr([ft(Et)],ur.prototype,"xName",void 0),lr([ft(Xt)],ur.prototype,"_yKeys",void 0),lr([ft(Ht)],ur.prototype,"_visibles",void 0),lr([ft(Xt)],ur.prototype,"yNames",void 0),lr([ft(jt())],ur.prototype,"_normalizedTo",void 0),lr([ft(zt(0))],ur.prototype,"strokeWidth",void 0);var pr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class gr extends si{constructor(){super(...arguments),this.borderPath=new ii,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=U.defaultStyles.strokeWidth,this.effectiveStrokeWidth=U.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:s}=this;let{x:r,y:a,width:l,height:h,strokeWidth:c}=this;const d=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let u=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),s&&(l<=d&&(u*=l/d),h<=d&&(u*=h/d),l=this.align(r,l),h=this.align(a,h),r=this.align(r),a=this.align(a)),c)if(l<d){const t=r+d/2;o.moveTo(t,a),o.lineTo(t,a+h),c=d,this.borderClipPath=void 0}else if(h<d){const t=a+d/2;o.moveTo(r,t),o.lineTo(r+l,t),c=d,this.borderClipPath=void 0}else if(c<l&&c<h){const t=c/2;r+=t,a+=t,l-=c,h-=c,this.borderClipPath=void 0,n.rect(r,a,l,h),o.rect(r,a,l,h)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new ii,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(r,a,l,h),o.rect(r,a,l,h);else this.borderClipPath=void 0,n.rect(r,a,l,h);this.effectiveStrokeWidth=c,this.lastUpdatePathStrokeWidth=c,this.microPixelEffectOpacity=u}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new x(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:s,microPixelEffectOpacity:r}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:h,lineCap:c,lineJoin:d}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*s*a*r,t.lineWidth=i,l&&t.setLineDash(l),h&&(t.lineDashOffset=h),c&&(t.lineCap=c),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}}gr.className="Rect",pr([oi()],gr.prototype,"x",void 0),pr([oi()],gr.prototype,"y",void 0),pr([oi()],gr.prototype,"width",void 0),pr([oi()],gr.prototype,"height",void 0),pr([oi()],gr.prototype,"radius",void 0),pr([oi()],gr.prototype,"crisp",void 0);var fr=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i};function yr({value:t,rect:e,placement:i,seriesId:n,padding:o=0,formatter:s,barAlongX:r,ctx:{callbackCache:a}}){let l;s&&(l=a.call(s,{value:dt(t)?t:void 0,seriesId:n})),void 0===l&&(l=dt(t)?t.toFixed(2):"");let h=e.x+e.width/2,c=e.y+e.height/2,d="center",u="middle";const p=t>=0;switch(i){case"start":r?(h=p?e.x-o:e.x+e.width+o,d=p?"start":"end"):(c=p?e.y+e.height+o:e.y-o,u=p?"top":"bottom");break;case"outside":case"end":r?(h=p?e.x+e.width+o:e.x-o,d=p?"start":"end"):(c=p?e.y-o:e.y+e.height+o,u=p?"bottom":"top");break;case"inside":default:u="middle"}return{text:l,textAlign:d,textBaseline:u,x:h,y:c}}var mr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},vr=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const br=["inside","outside"];var xr;!function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(xr||(xr={}));class kr extends pn{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}mr([ft(Ot)],kr.prototype,"formatter",void 0),mr([ft((t,e)=>mt(t,e,t=>br.includes(t)))],kr.prototype,"placement",void 0);class Sr extends je{constructor(){super(...arguments),this.renderer=void 0}}mr([ft(Ot)],Sr.prototype,"renderer",void 0);class wr extends no{constructor(t){super({moduleCtx:t,pickModes:[Ce.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:{[de.X]:["xKey"],[de.Y]:["yKeys"]},directionNames:{[de.X]:["xName"],[de.Y]:["yNames"]}}),this.label=new kr,this.tooltip=new Sr,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.groupScale=new fi,this.xKey=void 0,this.xName=void 0,this.cumYKeyCount=[],this.flatYKeys=void 0,this.hideInLegend=[],this.yKeys=[],this.yKeysCache=[],this.visibles=[],this.grouped=!1,this.stackGroups={},this.yNames={},this.legendItemNames={},this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.label.enabled=!1}resolveKeyDirection(t){return this.getBarDirection()===de.X?t===de.X?de.Y:de.X:t}processYKeys(){let{yKeys:t}=this,e=void 0;var i;(i=t).length>0&&Array.isArray(i[0])||(e=t,t=this.grouped?e.map(t=>[t]):[e]);const n=Object.values(this.stackGroups);if(n.length>0){const e=t=>t.reduce((t,e)=>t.concat(e),[]),i=e(t),o=new Set(e(n)),s=i.filter(t=>!o.has(t));t=n.map(t=>t),s.length>0&&t.push(s);const r=(t=>t.reduce((t,e,i)=>t.set(e,i),new Map))(e(t)),a=t=>{const e=Array.from({length:t.length});return t.forEach((t,n)=>{const o=i[n],s=r.get(o);e[s]=t}),e};this.fills=a(this.fills),this.strokes=a(this.strokes),this.visibles=a(this.visibles)}if(!Ci(this.yKeysCache,t)){this.flatYKeys=e||void 0,this.yKeys=t;let i=0;this.cumYKeyCount=[];const n=[];t.forEach((t,e)=>{t.length>0&&n.push(String(e)),this.cumYKeyCount.push(i),i+=t.length}),this.processSeriesItemEnabled();const{groupScale:o}=this;o.domain=n}this.yKeysCache=t}processSeriesItemEnabled(){const{seriesItemEnabled:t}=this,e=this.visibles.reduce((t,e)=>t.concat(...Array.isArray(e)?e:[e]),[]);t.clear();let i=0;this.yKeys.forEach(n=>{n.forEach(n=>{var o;return t.set(n,null===(o=e[i++])||void 0===o||o)})})}getStackGroup(t){var e;const{stackGroups:i}=this;return null===(e=Object.entries(i).find(([e,i])=>i.includes(t)))||void 0===e?void 0:e[0]}processYNames(){const t=this.yNames;if(Array.isArray(t)&&this.flatYKeys){const e={};this.flatYKeys.forEach((i,n)=>{e[i]=t[n]}),this.yNames=e}}processData(){var t,e,i,n,o;return vr(this,void 0,void 0,(function*(){this.processYKeys(),this.processYNames();const{xKey:s,seriesItemEnabled:r,normalizedTo:a,data:l=[]}=this,h=Math.abs(null!=a?a:NaN),c=(null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale)instanceof Ei,d=(null===(e=this.getValueAxis())||void 0===e?void 0:e.scale)instanceof Ei,u=[...r.entries()].filter(([,t])=>t).map(([t])=>t),p=this.yKeys.map(t=>t.filter(t=>r.get(t))).filter(t=>t.length>0),g=h&&isFinite(h)?h:void 0,f=[];g&&f.push(Cs(u,g,"sum")),this.dataModel=new ye({props:[Le(s,c),...u.map(t=>Re(t,d,{invalidValue:null})),...p.map(t=>Oe(t)),...c?[Ds]:[],Os,...f],groupByKeys:!0,dataVisible:this.visible&&u.length>0}),this.processedData=this.dataModel.processData(l),this.smallestDataInterval={x:null!==(o=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.reduced)||void 0===n?void 0:n[Ds.property])&&void 0!==o?o:1/0,y:1/0}}))}getDomain(t){var e;const{processedData:i}=this;if(!i)return[];const{defs:{keys:[n]},domain:{keys:[o],values:[s]},reduced:{[Ds.property]:r,[Os.property]:a}={}}=i;if(t===this.getCategoryDirection()){if("category"===n.valueType)return o;const i=null!==(e=dn(o))&&void 0!==e?e:[NaN,NaN];return t===de.Y?[i[0]+-r,i[1]]:[i[0],i[1]+r]}return this.getValueAxis()instanceof nr?this.fixNumericExtent(s):this.fixNumericExtent(a)}getNodeClickEvent(t,e){var i;return new to(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new eo(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getCategoryAxis(){return this.getCategoryDirection()===de.Y?this.yAxis:this.xAxis}getValueAxis(){return this.getBarDirection()===de.Y?this.yAxis:this.xAxis}calculateStep(t){var e;const{smallestDataInterval:i}=this,n=this.getCategoryAxis();if(!n)return;const o=(n.dataDomain[1]-n.dataDomain[0])/(null!==(e=null==i?void 0:i.x)&&void 0!==e?e:1)+1,s=Math.floor(t),r=Math.min(o,s);return t/Math.max(1,r)}createNodeData(){return vr(this,void 0,void 0,(function*(){const{data:t,visible:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(t&&e&&i&&n))return[];const o=i.scale,s=n.scale,{groupScale:r,yKeys:a,xKey:l="",cumYKeyCount:h,fills:c,strokes:d,strokeWidth:u,seriesItemEnabled:p,label:g,id:f,processedData:y,ctx:m}=this;let v=o.bandwidth;if(o instanceof Ei){const t=Math.max(i.range[0],i.range[1]);v=this.calculateStep(t)}r.range=[0,v],r.padding=i instanceof An?i.groupPaddingInner:i instanceof fs?.1:0,0===r.padding?r.round=!1:r.round=!0;const b=r.bandwidth>=1?r.bandwidth:r.rawBandwidth,x=[];return null==y||y.data.forEach(({keys:t,datum:e,values:n},v)=>{var k,S,w,D,O,M;const C=o.convert(t[0]);for(let t=0;t<(null!==(k=null==a?void 0:a.length)&&void 0!==k?k:0);t++){const o=null!==(S=null==a?void 0:a[t])&&void 0!==S?S:[];null!==(w=x[t])&&void 0!==w||(x[t]=[]);let k=0,N=0;for(let a=0;a<o.length;a++){const S=o[a],w=null!==(D=null==y?void 0:y.indices.values[S])&&void 0!==D?D:-1;if(null!==(O=(M=x[t])[a])&&void 0!==O||(M[a]={itemId:S,nodeData:[],labelData:[]}),void 0===w)continue;const E=n[0][w],L=+E,R=C+r.convert(String(t));if(!i.inRange(R,b))continue;if(isNaN(L))continue;const I=L<0?k:N,T=s.convert(I+L,{strict:!1}),_=s.convert(I,{strict:!1}),A=this.getBarDirection()===de.X,P={x:A?Math.min(T,_):R,y:A?R:Math.min(T,_),width:A?Math.abs(_-T):b,height:A?b:Math.abs(_-T)},F={x:P.x+P.width/2,y:P.y+P.height/2},{fontStyle:B,fontWeight:z,fontSize:j,fontFamily:W,color:K,formatter:G,placement:X}=g,{text:Y,textAlign:H,textBaseline:V,x:$,y:U}=yr({value:E,rect:P,formatter:G,placement:X,seriesId:f,barAlongX:A,ctx:m}),Z=h[t]+a,q={index:v,series:this,itemId:S,datum:e[0],cumulativeValue:I+L,yValue:E,yKey:S,xKey:l,x:P.x,y:P.y,width:P.width,height:P.height,nodeMidPoint:F,colorIndex:Z,fill:c[Z%c.length],stroke:d[Z%d.length],strokeWidth:u,label:p.get(S)&&Y?{text:Y,fontStyle:B,fontWeight:z,fontSize:j,fontFamily:W,textAlign:H,textBaseline:V,fill:K,x:$,y:U}:void 0};x[t][a].nodeData.push(q),x[t][a].labelData.push(q),L<0?k+=L:N+=L}}}),x.reduce((t,e)=>t.concat(...e),[])}))}nodeFactory(){return new gr}updateDatumSelection(t){return vr(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>t.tag=xr.Bar)}))}updateDatumNodes(t){var e;return vr(this,void 0,void 0,(function*(){const{datumSelection:i,isHighlight:n}=t,{fills:o,strokes:s,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,shadow:c,formatter:d,id:u,highlightStyle:{item:p},ctx:g}=this,f=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null===(e=this.xAxis)||void 0===e?void 0:e.visibleRange),y=this.getCategoryDirection()===de.X;i.each((t,e)=>{const{colorIndex:i}=e,m={fill:o[i%o.length],stroke:s[i%o.length],fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,strokeWidth:this.getStrokeWidth(this.strokeWidth,e)},v=y?e.width>0:e.height>0,b=function(t){var e,i,n,o,s,r,a,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,stackGroup:g,ctx:{callbackCache:f}}=t,y=fr(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const m=h&&null!==(e=d.fill)&&void 0!==e?e:c.fill,v=h&&null!==(i=d.stroke)&&void 0!==i?i:c.stroke,b=h&&null!==(n=d.strokeWidth)&&void 0!==n?n:c.strokeWidth,x=h&&null!==(o=d.fillOpacity)&&void 0!==o?o:c.fillOpacity,{strokeOpacity:k,fillShadow:S,lineDash:w,lineDashOffset:D}=c;let O=void 0;return u&&(O=f.call(u,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:m,stroke:v,strokeWidth:b,highlighted:h,seriesId:p,stackGroup:g},y))),{fill:null!==(s=null==O?void 0:O.fill)&&void 0!==s?s:m,stroke:null!==(r=null==O?void 0:O.stroke)&&void 0!==r?r:v,strokeWidth:null!==(a=null==O?void 0:O.strokeWidth)&&void 0!==a?a:b,fillOpacity:x,strokeOpacity:k,lineDash:w,lineDashOffset:D,fillShadow:S}}({datum:e,isHighlighted:n,style:m,highlightStyle:p,formatter:d,seriesId:u,stackGroup:this.getStackGroup(e.yKey),ctx:g});b.crisp=f,b.visible=v,function({rect:t,config:e}){const{crisp:i=!0,fill:n,stroke:o,strokeWidth:s,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,visible:d=!0}=e;t.crisp=i,t.fill=n,t.stroke=o,t.strokeWidth=s,t.fillOpacity=r,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=h,t.fillShadow=c,t.visible=d}({rect:t,config:b})})}))}updateLabelSelection(t){return vr(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t,{enabled:n}=this.label,o=n?e:[];return i.update(o,t=>{t.tag=xr.Label,t.pointerEvents=N.None})}))}updateLabelNodes(t){return vr(this,void 0,void 0,(function*(){const{labelSelection:e}=t;e.each((t,e)=>{!function({labelNode:t,labelDatum:e,config:i,visible:n}){if(e&&i&&i.enabled){const{x:o,y:s,text:r,textAlign:a,textBaseline:l}=e,{fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,color:p}=i;t.fontStyle=h,t.fontWeight=c,t.fontSize=d,t.fontFamily=u,t.textAlign=a,t.textBaseline=l,t.text=r,t.x=o,t.y=s,t.fill=p,t.visible=n}else t.visible=!1}({labelNode:t,labelDatum:e.label,config:this.label,visible:!0})})}))}getTooltipHtml(t){var e;const{xKey:i,yKeys:n,processedData:o,ctx:{callbackCache:s}}=this,r=this.getCategoryAxis(),a=this.getValueAxis(),{yKey:l}=t;if(!(o&&i&&l&&r&&a))return"";let h=0,c=0,d=0;for(;d<n.length;d++){const t=n[d];if(c=t.indexOf(l),c>=0){h+=c;break}h+=t.length}const{xName:u,yNames:p,fills:g,strokes:f,tooltip:y,formatter:m,id:v}=this,{renderer:b}=y,x=t.datum,k=p[l],S=this.getStackGroup(l),w=g[h%g.length],D=f[h%g.length],O=this.getStrokeWidth(this.strokeWidth),M=x[i],C=x[l],N=Zs(r.formatDatum(M)),E=Zs(a.formatDatum(C)),L=Zs(k),R=N+": "+E;let I=void 0;m&&(I=s.call(m,{datum:x,fill:w,stroke:D,strokeWidth:O,highlighted:!1,xKey:i,yKey:l,seriesId:v,stackGroup:S}));const T=null!==(e=null==I?void 0:I.fill)&&void 0!==e?e:w,_={title:L,backgroundColor:T,content:R};return b?be(b({datum:x,xKey:i,xValue:M,xName:u,yKey:l,yValue:C,yName:k,color:T,title:L,seriesId:v,stackGroup:S}),_):be(_)}getLegendData(){const{id:t,data:e,xKey:i,yKeys:n,yNames:o,legendItemNames:s,cumYKeyCount:r,seriesItemEnabled:a,hideInLegend:l,fills:h,strokes:c,fillOpacity:d,strokeOpacity:u}=this;if(!(null==e?void 0:e.length)||!i||!n.length)return[];const p=[];return this.validateLegendData(),this.yKeys.forEach((e,i)=>{var n,g,f;for(let y=0;y<e.length;y++){const m=e[y];if(l.indexOf(m)>=0)return;const v=r[i]+y;p.push({legendType:"category",id:t,itemId:m,seriesId:t,enabled:null!==(n=a.get(m))&&void 0!==n&&n,label:{text:null!==(f=null!==(g=s[m])&&void 0!==g?g:o[m])&&void 0!==f?f:m},marker:{fill:h[v%h.length],stroke:c[v%c.length],fillOpacity:d,strokeOpacity:u}})}}),p}validateLegendData(){const{hideInLegend:t,legendItemNames:e}=this;let i=!1;this.yKeys.forEach(n=>{n.forEach(n=>{if(t.indexOf(n)>=0)return;const o=void 0!==e[n];i&&!o&&P.warnOnce("a series is missing the legendItemName property, unexpected behaviour may occur."),i=o})})}onLegendItemClick(t){const{itemId:e,enabled:i,series:n}=t;n.id===this.id&&(super.toggleSeriesItem(e,i),Object.keys(this.legendItemNames).filter(t=>void 0!==this.legendItemNames[t]&&this.legendItemNames[t]===this.legendItemNames[e]).forEach(t=>{t!==e&&super.toggleSeriesItem(t,i)}),this.calculateVisibleDomain())}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,numVisibleItems:n}=t,o=Object.values(n).reduce((t,e)=>t+e,0),s=Object.values(n).filter(t=>1===t).length===Object.keys(n).length,r={};this.yKeys.forEach(t=>{t.forEach(t=>{var n;const a=t===i||1===o&&e||s&&e;r[t]=null!==(n=r[t])&&void 0!==n?n:a,Object.keys(this.legendItemNames).filter(e=>void 0!==this.legendItemNames[e]&&this.legendItemNames[e]===this.legendItemNames[t]).forEach(t=>{var e;r[t]=null!==(e=r[t])&&void 0!==e?e:a})})}),Object.keys(r).forEach(t=>{super.toggleSeriesItem(t,r[t])}),this.calculateVisibleDomain()}calculateVisibleDomain(){const t=this.yKeys.map(t=>t.slice());this.seriesItemEnabled.forEach((e,i)=>{e||t.forEach(t=>{const e=t.indexOf(i);e>=0&&t.splice(e,1)})});const e=[];t.forEach((t,i)=>{t.length>0&&e.push(String(i))}),this.groupScale.domain=e,this.nodeDataRefresh=!0}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=1/0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.min(i,e.x))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.x},{from:0,to:e.width}],{disableInteractions:!0,duration:1e3,ease:yo,repeat:0,onUpdate([i,n]){t.x=i,t.width=n,t.y=e.y,t.height=e.height}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return de.X}getCategoryDirection(){return de.Y}}wr.className="BarSeries",wr.type="bar",mr([ft(Ft)],wr.prototype,"fills",void 0),mr([ft(Ft)],wr.prototype,"strokes",void 0),mr([ft(zt(0,1))],wr.prototype,"fillOpacity",void 0),mr([ft(zt(0,1))],wr.prototype,"strokeOpacity",void 0),mr([ft(Qt)],wr.prototype,"lineDash",void 0),mr([ft(zt(0))],wr.prototype,"lineDashOffset",void 0),mr([ft(Ot)],wr.prototype,"formatter",void 0),mr([ft(Et)],wr.prototype,"xKey",void 0),mr([ft(Et)],wr.prototype,"xName",void 0),mr([ft(Xt)],wr.prototype,"hideInLegend",void 0),mr([ft(Ht)],wr.prototype,"visibles",void 0),mr([ft(Mt)],wr.prototype,"grouped",void 0),mr([ft(jt())],wr.prototype,"normalizedTo",void 0),mr([ft(zt(0))],wr.prototype,"strokeWidth",void 0);class Dr extends wr{getBarDirection(){return de.Y}getCategoryDirection(){return de.X}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.max(i,e.height+e.y))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:yo,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}}Dr.type="column",Dr.className="ColumnSeries";var Or=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Mr=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const Cr=["count","sum","mean"],Nr=yt(t=>Cr.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Er;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(Er||(Er={}));class Lr extends pn{constructor(){super(...arguments),this.formatter=void 0}}Or([ft(Ot)],Lr.prototype,"formatter",void 0);class Rr extends je{constructor(){super(...arguments),this.renderer=void 0}}Or([ft(Ot)],Rr.prototype,"renderer",void 0);class Ir extends no{constructor(t){super({moduleCtx:t,pickModes:[Ce.EXACT_SHAPE_MATCH]}),this.label=new Lr,this.tooltip=new Rr,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.label.enabled=!1}deriveBins(t){if(void 0===this.binCount){const e=Li(t[0],t[1],10),i=Ii(t[0],t[1],10),n=e[0],o=t=>[t,t+i];return[[n-i,n],...e.map(o)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:s,binSize:r}=this.calculateNiceStart(i,n,o);return this.getBins(s,n,r,o)}getBins(t,e,i,n){const o=[];for(let s=0;s<n;s++){const r=Math.round(10*(t+s*i))/10;let a=Math.round(10*(t+(s+1)*i))/10;s===n-1&&(a=Math.max(a,e)),o[s]=[r,a]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),s=Math.pow(10,o);return{start:Math.floor(t/s)*s,binSize:n}}processData(){return Mr(this,void 0,void 0,(function*(){const{xKey:t,yKey:e,data:i,areaPlot:n,aggregation:o}=this,s=[Le(t,!0),Ms];if(e){let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};"count"===o||("sum"===o?t=function(t){return{type:"aggregate",properties:t,aggregateFunction:t=>De(t),groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}([e]):"mean"===o&&(t=function(t){return{properties:t,type:"aggregate",aggregateFunction:t=>De(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}([e]))),n&&(t=Me([e],t)),s.push(Re(e,!0,{invalidValue:void 0}),t)}else{let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};n&&(t=Me([],t)),s.push(t)}this.dataModel=new ye({props:s,dataVisible:this.visible,groupByFn:t=>{var e;const i=ge(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),o=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let t=0;t<o;t++){const i=n[t];if(e>=i[0]&&e<i[1])return i;if(t===o-1&&e<=i[1])return i}return[]}}}),this.processedData=this.dataModel.processData(null!=i?i:[])}))}getDomain(t){var e,i,n,o;const{processedData:s}=this;if(!s)return[];const{domain:{aggValues:[r]=[]}}=s,a=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],l=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return t===de.X?ge([a,l]):ge(r)}getNodeClickEvent(t,e){var i,n;return new to(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new eo(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t;return Mr(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,processedData:n,ctx:{callbackCache:o}}=this;if(!(this.seriesItemEnabled&&e&&i&&n&&"grouped"===n.type))return[];const{scale:s}=e,{scale:r}=i,{fill:a,stroke:l,strokeWidth:h,id:c,yKey:d="",xKey:u=""}=this,p=[],g=t=>String(t.value),{label:{formatter:f=g,fontStyle:y,fontWeight:m,fontSize:v,fontFamily:b,color:x}}=this;return n.data.forEach(t=>{var e;const{aggValues:[[i,n]]=[[0,0]],datum:g,datum:{length:k},keys:S,keys:[w,D]}=t,O=s.convert(w),M=s.convert(D),C=i+n,N=r.convert(0),E=r.convert(C),L=M-O,R=Math.abs(E-N),I=0!==C?{text:null!==(e=o.call(f,{value:C,seriesId:c}))&&void 0!==e?e:String(C),fontStyle:y,fontWeight:m,fontSize:v,fontFamily:b,fill:x,x:O+L/2,y:E+R/2}:void 0,T={x:O+L/2,y:E+R/2};p.push({series:this,datum:g,aggregatedValue:C,frequency:k,domain:S,yKey:d,xKey:u,x:O,y:E,width:L,height:R,nodeMidPoint:T,fill:a,stroke:l,strokeWidth:h,label:I})}),[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:p,labelData:p}]}))}nodeFactory(){return new gr}updateDatumSelection(t){return Mr(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=Er.Bin,t.crisp=!0})}))}updateDatumNodes(t){return Mr(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:s,highlightStyle:{item:{fill:r,fillOpacity:a=n,stroke:l,strokeWidth:h}}}=this;e.each((t,e,c)=>{var d,u;const p=i&&void 0!==h?h:e.strokeWidth,g=i?a:n;t.x=e.x,t.width=e.width,t.fill=null!==(d=i?r:void 0)&&void 0!==d?d:e.fill,t.stroke=null!==(u=i?l:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=g,t.strokeOpacity=o,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=s,t.zIndex=i?Ke.highlightedZIndex:c,t.visible=e.height>0})}))}updateLabelSelection(t){return Mr(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=Er.Label,t.pointerEvents=N.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return Mr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const n=e.label;n&&i?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",xAxis:n,yAxis:o}=this;if(!e||!n||!o)return"";const{xName:s,yName:r,fill:a,tooltip:l,aggregation:h,id:c}=this,{renderer:d}=l,{aggregatedValue:u,frequency:p,domain:g,domain:[f,y]}=t,m=`${Zs(null!=s?s:e)}: ${n.formatDatum(f)} - ${n.formatDatum(y)}`;let v=i?`<b>${Zs(null!=r?r:i)} (${h})</b>: ${o.formatDatum(u)}<br>`:"";v+="<b>Frequency</b>: "+p;const b={title:m,backgroundColor:a,content:v};return d?be(d({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:g,xName:s,yKey:i,yValue:u,yName:r,color:a,title:m,seriesId:c}),b):be(b)}getLegendData(){var t;const{id:e,data:i,xKey:n,yName:o,visible:s,fill:r,stroke:a,fillOpacity:l,strokeOpacity:h}=this;if(!i||0===i.length)return[];return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:s,label:{text:null!==(t=null!=o?o:n)&&void 0!==t?t:"Frequency"},marker:{fill:null!=r?r:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:l,strokeOpacity:h}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{i=Math.max(i,e.height+e.y)})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:yo,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}}Ir.className="HistogramSeries",Ir.type="histogram",Or([ft(Pt)],Ir.prototype,"fill",void 0),Or([ft(Pt)],Ir.prototype,"stroke",void 0),Or([ft(zt(0,1))],Ir.prototype,"fillOpacity",void 0),Or([ft(zt(0,1))],Ir.prototype,"strokeOpacity",void 0),Or([ft(Qt)],Ir.prototype,"lineDash",void 0),Or([ft(zt(0))],Ir.prototype,"lineDashOffset",void 0),Or([ft(Et)],Ir.prototype,"xKey",void 0),Or([ft(Mt)],Ir.prototype,"areaPlot",void 0),Or([ft(bt())],Ir.prototype,"bins",void 0),Or([ft(Nr)],Ir.prototype,"aggregation",void 0),Or([ft(jt(0))],Ir.prototype,"binCount",void 0),Or([ft(Et)],Ir.prototype,"xName",void 0),Or([ft(Et)],Ir.prototype,"yKey",void 0),Or([ft(Et)],Ir.prototype,"yName",void 0),Or([ft(zt(0))],Ir.prototype,"strokeWidth",void 0);var Tr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},_r=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Ar extends pn{constructor(){super(...arguments),this.formatter=void 0}}Tr([ft(Ot)],Ar.prototype,"formatter",void 0);class Pr extends je{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}Tr([ft(Ot)],Pr.prototype,"renderer",void 0),Tr([ft(Et)],Pr.prototype,"format",void 0);class Fr extends no{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[Ce.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Ce.NEAREST_NODE,Ce.EXACT_SHAPE_MATCH]}),this.marker=new oo,this.label=new Ar,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new Pr,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:e,label:i}=this;e.fill="#c16068",e.stroke="#874349",i.enabled=!1}processData(){return _r(this,void 0,void 0,(function*(){const{xAxis:t,yAxis:e,xKey:i="",yKey:n=""}=this,o=i&&n&&this.data?this.data:[],s=(null==t?void 0:t.scale)instanceof Ei,r=(null==e?void 0:e.scale)instanceof Ei;this.dataModel=new ye({props:[Re(i,s,{id:"xValue"}),Re(n,r,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=o?o:[])}))}getDomain(t){const{xAxis:e,yAxis:i,dataModel:n,processedData:o}=this;if(!o||!n)return[];const s=n.resolveProcessedDataDefById("xValue");if(t===de.X){const t=n.getDomain("xValue",o);return"category"===(null==s?void 0:s.valueType)?t:this.fixNumericExtent(dn(t),e)}{const t=n.getDomain("yValue",o);return this.fixNumericExtent(t,i)}}createNodeData(){var t,e,i,n,o,s,r,a,l,h,c;return _r(this,void 0,void 0,(function*(){const{processedData:d,dataModel:u,xAxis:p,yAxis:g,marker:{enabled:f,size:y,strokeWidth:m},ctx:{callbackCache:v}}=this;if(!(d&&u&&p&&g))return[];const{label:b,yKey:x="",xKey:k="",id:S}=this,w=p.scale,D=g.scale,O=(null!==(t=w.bandwidth)&&void 0!==t?t:0)/2,M=(null!==(e=D.bandwidth)&&void 0!==e?e:0)/2,C=new Array(d.data.length),N=f?y:0,E=null!==(o=null===(n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("xValue"))||void 0===n?void 0:n.index)&&void 0!==o?o:-1,L=null!==(a=null===(r=null===(s=this.dataModel)||void 0===s?void 0:s.resolveProcessedDataIndexById("yValue"))||void 0===r?void 0:r.index)&&void 0!==a?a:-1;let R=!0,I=void 0,T=void 0,_=0;for(let t=0;t<d.data.length;t++){const{datum:e,values:i}=null!=T?T:d.data[t],n=i[E],o=i[L];if(void 0===o)I=void 0,R=!0;else{const i=w.convert(n)+O;if(isNaN(i)){I=void 0,R=!0;continue}const s=(null!==(l=w.bandwidth)&&void 0!==l?l:.5*y+(null!=m?m:0))+1;T=void 0===(null===(h=d.data[t+1])||void 0===h?void 0:h.values[L])?void 0:d.data[t+1];const r=null===(c=d.data[t+1])||void 0===c?void 0:c.values[E],a=p.inRangeEx(i,0,s),u=T&&p.inRangeEx(w.convert(r)+O,0,s);if(-1===a&&-1===u){R=!0;continue}if(1===a&&1===I){R=!0;continue}I=a;const g=D.convert(o)+M;let f;b.formatter&&(f=v.call(b.formatter,{value:o,seriesId:S})),void 0!==f||("number"==typeof o&&isFinite(o)?f=o.toFixed(2):o&&(f=String(o))),C[_++]={series:this,datum:e,yKey:x,xKey:k,point:{x:i,y:g,moveTo:R,size:N},nodeMidPoint:{x:i,y:g},label:f?{text:f,fontStyle:b.fontStyle,fontWeight:b.fontWeight,fontSize:b.fontSize,fontFamily:b.fontFamily,textAlign:"center",textBaseline:"bottom",fill:b.color}:void 0},R=!1}}return C.length=_,[{itemId:x,nodeData:C,labelData:C}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Vn(t))}updateMarkerSelection(t){return _r(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&i.clear(),i.update(e)}))}updateMarkerNodes(t){var e;return _r(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{marker:o,marker:{fillOpacity:s},xKey:r="",yKey:a="",stroke:l,strokeOpacity:h,highlightStyle:{item:{fill:c,fillOpacity:d=s,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{size:y,formatter:m}=o,v=null!==(e=o.strokeWidth)&&void 0!==e?e:this.strokeWidth,b="function"==typeof o.shape;i.each((t,e)=>{var i,x,k,S,w,D,O;const M=n&&void 0!==c?c:o.fill,C=n?d:s,N=n&&void 0!==u?u:null!==(i=o.stroke)&&void 0!==i?i:l,E=n&&void 0!==p?p:v;let L=void 0;m&&(L=f.call(m,{datum:e.datum,xKey:r,yKey:a,fill:M,stroke:N,strokeWidth:E,size:y,highlighted:n,seriesId:g})),t.fill=null!==(x=null==L?void 0:L.fill)&&void 0!==x?x:M,t.stroke=null!==(k=null==L?void 0:L.stroke)&&void 0!==k?k:N,t.strokeWidth=null!==(S=null==L?void 0:L.strokeWidth)&&void 0!==S?S:E,t.fillOpacity=null!=C?C:1,t.strokeOpacity=null!==(D=null!==(w=o.strokeOpacity)&&void 0!==w?w:h)&&void 0!==D?D:1,t.size=null!==(O=null==L?void 0:L.size)&&void 0!==O?O:y,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),b&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return _r(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)}))}updateLabelNodes(t){return _r(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:s,fontFamily:r,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;e&&h&&i?(t.fontStyle=n,t.fontWeight=o,t.fontSize=s,t.fontFamily=r,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i,n;return new to(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new eo(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getTooltipHtml(t){var e,i;const{xKey:n,yKey:o,xAxis:s,yAxis:r}=this;if(!(n&&o&&s&&r))return"";const{xName:a,yName:l,tooltip:h,marker:c,id:d}=this,{renderer:u,format:p}=h,g=t.datum,f=g[n],y=g[o],m=s.formatDatum(f),v=r.formatDatum(y),b=Zs(null!==(e=this.title)&&void 0!==e?e:l),x=Zs(m+": "+v),{formatter:k,fill:S,stroke:w,strokeWidth:D,size:O}=c,M=null!=D?D:this.strokeWidth;let C=void 0;k&&(C=k({datum:g,xKey:n,yKey:o,fill:S,stroke:w,strokeWidth:M,size:O,highlighted:!1,seriesId:d}));const N=null!==(i=null==C?void 0:C.fill)&&void 0!==i?i:S,E={title:b,backgroundColor:N,content:x};if(p||u){const t={datum:g,xKey:n,xValue:f,xName:a,yKey:o,yValue:y,yName:l,title:b,color:N,seriesId:d};if(p)return be({content:$s(p,t)},E);if(u)return be(u(t),E)}return be(E)}getLegendData(){var t,e,i,n,o,s,r;const{id:a,data:l,xKey:h,yKey:c,yName:d,visible:u,title:p,marker:g,stroke:f,strokeOpacity:y}=this;if(!((null==l?void 0:l.length)&&h&&c))return[];return[{legendType:"category",id:a,itemId:c,seriesId:a,enabled:u,label:{text:null!==(t=null!=p?p:d)&&void 0!==t?t:c},marker:{shape:g.shape,fill:null!==(e=g.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(i=g.stroke)&&void 0!==i?i:f)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(o=g.fillOpacity)&&void 0!==o?o:1,strokeOpacity:null!==(r=null!==(s=g.strokeOpacity)&&void 0!==s?s:y)&&void 0!==r?r:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:o}){i.forEach(({nodeData:i},s)=>{var r,a;const[l]=n[s],{path:h}=l;l.fill=void 0,l.lineJoin="round",l.pointerEvents=N.None,l.stroke=this.stroke,l.strokeWidth=this.getStrokeWidth(this.strokeWidth),l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset;const c={from:0,to:null!==(r=null==o?void 0:o.width)&&void 0!==r?r:0,disableInteractions:!0,ease:fo,repeat:0};null===(a=this.animationManager)||void 0===a||a.animate(this.id+"_empty-update-ready",Object.assign(Object.assign({},c),{duration:1e3,onUpdate(t){h.clear({trackChanges:!0}),i.forEach((e,n)=>{if(e.point.x<=t)e.point.moveTo?h.moveTo(e.point.x,e.point.y):h.lineTo(e.point.x,e.point.y);else if(n>0&&i[n-1].point.x<t){const o=i[n-1].point,s=e.point,r=t,a=o.y+(r-o.x)*(s.y-o.y)/(s.x-o.x);e.point.moveTo?h.moveTo(r,a):h.lineTo(r,a)}}),l.checkPathDirty()}})),t[s].each((t,e)=>{var i,n,s,r;const a=(null==o?void 0:o.width)?e.point.x/o.width*1e3:0,l=this.animateFormatter(e),h=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(s=this.animationManager)||void 0===s||s.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},c),{to:null!==(r=null==l?void 0:l.size)&&void 0!==r?r:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[s].each((t,e)=>{var i;const n=(null==o?void 0:o.width)?e.point.x/o.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate(t){this.resetMarkersAndPaths(t)}animateReadyResize(t){var e;null===(e=this.animationManager)||void 0===e||e.stop(),this.resetMarkersAndPaths(t)}resetMarkersAndPaths({markerSelections:t,contextData:e,paths:i}){e.forEach(({nodeData:e},n)=>{const[o]=i[n],{path:s}=o;o.stroke=this.stroke,o.strokeWidth=this.getStrokeWidth(this.strokeWidth),o.strokeOpacity=this.strokeOpacity,o.lineDash=this.lineDash,o.lineDashOffset=this.lineDashOffset,s.clear({trackChanges:!0}),e.forEach(t=>{t.point.moveTo?s.moveTo(t.point.x,t.point.y):s.lineTo(t.point.x,t.point.y)}),o.checkPathDirty(),t[n].each((t,e)=>{var i,n,o;const s=this.animateFormatter(e),r=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(o=null==s?void 0:s.size)&&void 0!==o?o:r})})}animateFormatter(t){var e,i;const{marker:n,xKey:o="",yKey:s="",stroke:r,id:a,ctx:{callbackCache:l}}=this,{size:h,formatter:c}=n,d=n.fill,u=null!==(e=n.stroke)&&void 0!==e?e:r,p=null!==(i=n.strokeWidth)&&void 0!==i?i:this.strokeWidth;let g=void 0;return c&&(g=l.call(c,{datum:t.datum,xKey:o,yKey:s,fill:d,stroke:u,strokeWidth:p,size:h,highlighted:!1,seriesId:a})),g}isLabelEnabled(){return this.label.enabled}}Fr.className="LineSeries",Fr.type="line",Tr([ft(Et)],Fr.prototype,"title",void 0),Tr([ft(Pt)],Fr.prototype,"stroke",void 0),Tr([ft(Qt)],Fr.prototype,"lineDash",void 0),Tr([ft(zt(0))],Fr.prototype,"lineDashOffset",void 0),Tr([ft(zt(0))],Fr.prototype,"strokeWidth",void 0),Tr([ft(zt(0,1))],Fr.prototype,"strokeOpacity",void 0),Tr([ft(Et)],Fr.prototype,"xKey",void 0),Tr([ft(Et)],Fr.prototype,"xName",void 0),Tr([ft(Et)],Fr.prototype,"yKey",void 0),Tr([ft(Et)],Fr.prototype,"yName",void 0);class Br{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(t=>ut.fromString(t))}update(){const{domain:t,range:e}=this;t.length<2&&(P.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){P.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}const i=e.length<t.length;if(i||t.length>2&&e.length>t.length)if(P.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let i=e.length;i<t.length;i++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map(t=>ut.fromString(t))}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],s=e[e.length-1],r=i[0],a=i[i.length-1];if(t<=o)return r;if(t>=s)return a;let l,h;if(2===e.length){const e=(t-o)/(s-o),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return po(n[l],n[l+1])(h)}}var zr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},jr=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Wr extends pn{constructor(){super(...arguments),this.formatter=void 0}}zr([ft(Ot)],Wr.prototype,"formatter",void 0);class Kr extends Qn{constructor(t,e,i,n,o,s){super(e,i,n,o,s),this.sizeKey=t}}class Gr extends Kr{constructor(){super(...arguments),this.type="nodeClick"}}class Xr extends Kr{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Yr extends je{constructor(){super(...arguments),this.renderer=void 0}}zr([ft(Ot)],Yr.prototype,"renderer",void 0);class Hr extends no{constructor(t){super({moduleCtx:t,pickModes:[Ce.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Ce.NEAREST_NODE,Ce.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Rn,this.marker=new oo,this.label=new Wr,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Br,this.tooltip=new Yr;const{label:e}=this;e.enabled=!1}processData(){var t,e,i,n,o,s;return jr(this,void 0,void 0,(function*(){const{xKey:r="",yKey:a="",sizeKey:l,xAxis:h,yAxis:c,marker:d,data:u}=this,p=(null==h?void 0:h.scale)instanceof Ei,g=(null==c?void 0:c.scale)instanceof Ei,{colorScale:f,colorDomain:y,colorRange:m,colorKey:v}=this;if(this.dataModel=new ye({props:[Re(r,p,{id:"xValue"}),Re(a,g,{id:"yValue"}),...l?[Re(l,!0,{id:"sizeValue"})]:[],...v?[Re(v,!0,{id:"colorValue"})]:[]],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=u?u:[]),l){const o=null!==(e=null===(t=this.dataModel.resolveProcessedDataIndexById("sizeValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,s=null!==(n=null===(i=this.processedData)||void 0===i?void 0:i.domain.values[o])&&void 0!==n?n:[];this.sizeScale.domain=d.domain?d.domain:s}if(v){const t=null!==(s=null===(o=this.dataModel.resolveProcessedDataIndexById("colorValue"))||void 0===o?void 0:o.index)&&void 0!==s?s:-1;f.domain=null!=y?y:this.processedData.domain.values[t],f.range=m,f.update()}}))}getDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===de.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(n),s=e.getDomain(n,i);if("category"===(null==o?void 0:o.valueType))return s;const r=t===de.X?this.xAxis:this.yAxis;return this.fixNumericExtent(dn(s),r)}getNodeClickEvent(t,e){var i,n;return new Gr(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new Xr(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t,e,i,n,o,s,r,a,l;return jr(this,void 0,void 0,(function*(){const{visible:h,xAxis:c,yAxis:d,yKey:u="",xKey:p="",label:g,labelKey:f,ctx:{callbackCache:y}}=this,m=null===(t=this.dataModel)||void 0===t?void 0:t.resolveProcessedDataIndexById("xValue"),v=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue");if(!(m&&v&&h&&c&&d))return[];const{colorScale:x,sizeKey:k,colorKey:S,id:w}=this,D=c.scale,O=d.scale,M=(null!==(i=D.bandwidth)&&void 0!==i?i:0)/2,C=(null!==(n=O.bandwidth)&&void 0!==n?n:0)/2,{sizeScale:N,marker:E}=this,L=new Array(null!==(s=null===(o=this.processedData)||void 0===o?void 0:o.data.length)&&void 0!==s?s:0);N.range=[E.size,E.maxSize];const R=g.getFont();let I=0;for(const{values:t,datum:e}of null!==(a=null===(r=this.processedData)||void 0===r?void 0:r.data)&&void 0!==a?a:[]){const i=t[m.index],n=t[v.index],o=D.convert(i)+M,s=O.convert(n)+C;if(!this.checkRangeXY(o,s,c,d))continue;let r;g.formatter&&(r=y.call(g.formatter,{value:n,seriesId:w,datum:e})),void 0===r&&(r=f?String(e[f]):"");const a=b.getTextSize(r,R),l=k?N.convert(t[2]):E.size,h=k?3:2,T=S?x.convert(t[h]):void 0;L[I++]={series:this,itemId:u,yKey:u,xKey:p,datum:e,point:{x:o,y:s,size:l},nodeMidPoint:{x:o,y:s},fill:T,label:Object.assign({text:r},a)}}return L.length=I,[{itemId:null!==(l=this.yKey)&&void 0!==l?l:this.id,nodeData:L,labelData:L}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Vn(t))}updateMarkerSelection(t){return jr(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;this.marker.isDirty()&&i.clear();const o=n?e:[];return i.update(o)}))}updateMarkerNodes(t){return jr(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{marker:n,xKey:o="",yKey:s="",sizeScale:r,marker:{fillOpacity:a,strokeOpacity:l,strokeWidth:h},highlightStyle:{item:{fill:c,fillOpacity:d=a,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{formatter:y}=n;r.range=[n.size,n.maxSize];const m="function"==typeof n.shape;e.each((t,e)=>{var r,v,b,x,k,S,w,D,O,M;const C=i&&void 0!==c?c:null!==(r=e.fill)&&void 0!==r?r:n.fill,N=i?d:a,E=i&&void 0!==u?u:n.stroke,L=l,R=i&&void 0!==p?p:null!=h?h:1,I=null!==(b=null===(v=e.point)||void 0===v?void 0:v.size)&&void 0!==b?b:0;let T=void 0;y&&(T=f.call(y,{datum:e.datum,xKey:o,yKey:s,fill:C,stroke:E,strokeWidth:R,size:I,highlighted:i,seriesId:g})),t.fill=null!==(x=null==T?void 0:T.fill)&&void 0!==x?x:C,t.stroke=null!==(k=null==T?void 0:T.stroke)&&void 0!==k?k:E,t.strokeWidth=null!==(S=null==T?void 0:T.strokeWidth)&&void 0!==S?S:R,t.fillOpacity=null!=N?N:1,t.strokeOpacity=null!=L?L:1,t.translationX=null!==(D=null===(w=e.point)||void 0===w?void 0:w.x)&&void 0!==D?D:0,t.translationY=null!==(M=null===(O=e.point)||void 0===O?void 0:O.y)&&void 0!==M?M:0,t.visible=t.size>0,m&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return jr(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,s=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(s)}))}updateLabelNodes(t){return jr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,o,s,r;t.text=e.label.text,t.fill=i.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(r=null===(s=e.point)||void 0===s?void 0:s.y)&&void 0!==r?r:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e,i,n,o,s,r,a;const{xKey:l,yKey:h,xAxis:c,yAxis:d}=this;if(!(l&&h&&c&&d))return"";const{marker:u,tooltip:p,xName:g,yName:f,sizeKey:y,sizeName:m,labelKey:v,labelName:b,id:x,ctx:{callbackCache:k}}=this,{stroke:S}=u,w=null!==(e=t.fill)&&void 0!==e?e:u.fill,D=this.getStrokeWidth(null!==(i=u.strokeWidth)&&void 0!==i?i:1),{formatter:O}=this.marker;let M=void 0;O&&(M=k.call(O,{datum:t,xKey:l,yKey:h,fill:w,stroke:S,strokeWidth:D,size:null!==(o=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,highlighted:!1,seriesId:x}));const C=null!==(r=null!==(s=null==M?void 0:M.fill)&&void 0!==s?s:w)&&void 0!==r?r:"gray",N=null!==(a=this.title)&&void 0!==a?a:f,E=t.datum,L=E[l],R=E[h],I=Zs(c.formatDatum(L)),T=Zs(d.formatDatum(R));let _=`<b>${Zs(null!=g?g:l)}</b>: ${I}<br><b>${Zs(null!=f?f:h)}</b>: ${T}`;y&&(_+=`<br><b>${Zs(null!=m?m:y)}</b>: ${Zs(E[y])}`),v&&(_=`<b>${Zs(null!=b?b:v)}</b>: ${Zs(E[v])}<br>`+_);const A={title:N,backgroundColor:C,content:_},{renderer:P}=p;return P?be(P({datum:E,xKey:l,xValue:L,xName:g,yKey:h,yValue:R,yName:f,sizeKey:y,sizeName:m,labelKey:v,labelName:b,title:N,color:C,seriesId:x}),A):be(A)}getLegendData(){var t,e,i,n,o;const{id:s,data:r,xKey:a,yKey:l,yName:h,title:c,visible:d,marker:u}=this,{fill:p,stroke:g,fillOpacity:f,strokeOpacity:y}=u;if(!((null==r?void 0:r.length)&&a&&l))return[];return[{legendType:"category",id:s,itemId:l,seriesId:s,enabled:d,label:{text:null!==(t=null!=c?c:h)&&void 0!==t?t:l},marker:{shape:u.shape,fill:null!==(i=null!==(e=u.fill)&&void 0!==e?e:p)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=u.stroke)&&void 0!==n?n:g)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!=f?f:1,strokeOpacity:null!=y?y:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){t.forEach(t=>{t.each((t,e)=>{var i,n,o,s;const r=this.animateFormatter(t,e),a=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0,l=null!==(o=null==r?void 0:r.size)&&void 0!==o?o:a;null===(s=this.animationManager)||void 0===s||s.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:l,disableInteractions:!0,duration:1e3,ease:fo,repeat:0,onUpdate(e){t.size=e}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:fo,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({markerSelections:t}){t.forEach(t=>{this.resetMarkers(t)})}animateReadyHighlightMarkers(t){this.resetMarkers(t)}resetMarkers(t){t.each((t,e)=>{var i,n,o;const s=this.animateFormatter(t,e),r=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(o=null==s?void 0:s.size)&&void 0!==o?o:r})}animateFormatter(t,e){var i,n,o;const{xKey:s="",yKey:r="",marker:{strokeWidth:a},id:l,ctx:{callbackCache:h}}=this,{formatter:c}=this.marker,d=null!==(i=e.fill)&&void 0!==i?i:t.fill,u=t.stroke,p=null!=a?a:1,g=null!==(o=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;let f=void 0;return c&&(f=h.call(c,{datum:e.datum,xKey:s,yKey:r,fill:d,stroke:u,strokeWidth:p,size:g,highlighted:!1,seriesId:l})),f}isLabelEnabled(){return this.label.enabled}}Hr.className="ScatterSeries",Hr.type="scatter",zr([ft(Et)],Hr.prototype,"title",void 0),zr([ft(Et)],Hr.prototype,"labelKey",void 0),zr([ft(Et)],Hr.prototype,"xName",void 0),zr([ft(Et)],Hr.prototype,"yName",void 0),zr([ft(Et)],Hr.prototype,"sizeName",void 0),zr([ft(Et)],Hr.prototype,"labelName",void 0),zr([ft(Et)],Hr.prototype,"xKey",void 0),zr([ft(Et)],Hr.prototype,"yKey",void 0),zr([ft(Et)],Hr.prototype,"sizeKey",void 0),zr([ft(Et)],Hr.prototype,"colorKey",void 0),zr([ft(Et)],Hr.prototype,"colorName",void 0),zr([ft(Gt)],Hr.prototype,"colorDomain",void 0),zr([ft(Ft)],Hr.prototype,"colorRange",void 0);class Vr extends Ke{constructor(t){super({moduleCtx:t,pickModes:[Ce.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var $r=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Ur extends C{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}$r([ft(Mt),M({redraw:D.MAJOR})],Ur.prototype,"enabled",void 0),$r([ft(At),M({redraw:D.MAJOR})],Ur.prototype,"color",void 0),$r([ft(zt()),M({redraw:D.MAJOR})],Ur.prototype,"xOffset",void 0),$r([ft(zt()),M({redraw:D.MAJOR})],Ur.prototype,"yOffset",void 0),$r([ft(zt(0)),M({redraw:D.MAJOR})],Ur.prototype,"blur",void 0);var Zr,qr=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Jr=function(t,e,i,n){return new(i||(i=Promise))((function(o,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Qr extends je{constructor(){super(...arguments),this.renderer=void 0}}qr([ft(Ot)],Qr.prototype,"renderer",void 0);class ta extends Te{constructor(t,e,i,n,o,s){super(n,o,s),this.labelKey=t,this.sizeKey=e,this.colorKey=i}}class ea extends ta{constructor(){super(...arguments),this.type="nodeClick"}}class ia extends ta{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class na extends pn{constructor(){super(...arguments),this.padding=10}}qr([ft(zt(0))],na.prototype,"padding",void 0);class oa extends pn{constructor(){super(...arguments),this.wrapping="on-space"}}qr([ft(he)],oa.prototype,"wrapping",void 0);class sa{constructor(){this.style=(()=>{const t=new pn;return t.color="white",t})()}}qr([ft(Et)],sa.prototype,"key",void 0),qr([ft(Et)],sa.prototype,"name",void 0),qr([ft(Ot)],sa.prototype,"formatter",void 0),function(t){t[t.Name=0]="Name",t[t.Value=1]="Value"}(Zr||(Zr={}));const ra=new J;function aa(t,e){const{fontStyle:i,fontWeight:n,fontSize:o,fontFamily:s}=e;ra.fontStyle=i,ra.fontWeight=n,ra.fontSize=o,ra.fontFamily=s,ra.text=t,ra.x=0,ra.y=0,ra.textAlign="left",ra.textBaseline="top";const{width:r,height:a}=ra.computeBBox();return{width:r,height:a}}function la(t){if("string"==typeof t&&!ut.validColorString(t)){const e="black";return P.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),"black"}return t}class ha{constructor(){this.color="black"}}qr([ft(Pt)],ha.prototype,"color",void 0);class ca extends ze{constructor(){super(...arguments),this.text=new ha}}class da extends Vr{constructor(){super(...arguments),this.groupSelection=pi.select(this.contentGroup,B),this.highlightSelection=pi.select(this.highlightGroup,B),this.title=(()=>{const t=new na;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t})(),this.subtitle=(()=>{const t=new na;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t})(),this.labels={large:(()=>{const t=new oa;return t.color="white",t.fontWeight="bold",t.fontSize=18,t})(),medium:(()=>{const t=new oa;return t.color="white",t.fontWeight="bold",t.fontSize=14,t})(),small:(()=>{const t=new oa;return t.color="white",t.fontWeight="bold",t.fontSize=10,t})(),formatter:void 0,value:new sa},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new Ur,this.labelShadow=new Ur,this.tooltip=new Qr,this.highlightStyle=new ca}getNodePaddingTop(t,e){var i;const{title:n,subtitle:o,nodePadding:s}=this,r=t.label;if(t.isLeaf||!r||0===t.depth)return s;const a=t.depth>1?o:n,l=aa(r,a);return a.fontSize>e.width/3||a.fontSize>e.height/3||l.height>=e.height?s:l.height+s+(null!==(i=a.padding)&&void 0!==i?i:0)}getNodePadding(t,e){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(t,e),right:i,bottom:i,left:i}}squarify(t,e,i=new Map){if(e.width<=0||e.height<=0)return i;i.set(t,e);const n=this.getNodePadding(t,e),o=e.width-n.left-n.right,s=e.height-n.top-n.bottom;if(o<=0||s<=0||t.value<=0)return i;let r=0,a=0,l=1/0,h=t.value;const c=t.children,d=new x(e.x+n.left,e.y+n.top,o,s),u=d.clone();for(let t=0;t<c.length;t++){const e=c[t].value,n=c[a].value,o=u.width<u.height;r+=e;const s=o?u.height:u.width,p=o?u.width:u.height,g=p*n/r;let f=s*r/h;const y=Math.max(g,f)/Math.min(g,f),m=Math.abs(1-y);if(m<l){l=m;continue}r-=e,f=s*r/h;let v=o?u.x:u.y;for(let e=a;e<t;e++){const t=c[e],n=o?v:u.x,s=o?u.y:v,a=p*t.value/r,l=new x(n,s,o?a:f,o?f:a);this.applyGap(d,l),this.squarify(t,l,i),h-=t.value,v+=a}o?(u.y+=f,u.height-=f):(u.x+=f,u.width-=f),a=t,r=0,l=1/0,t--}const p=u.width<u.height;let g=p?u.x:u.y;for(let t=a;t<c.length;t++){const e=p?g:u.x,n=p?u.y:g,o=c[t].value/h,s=u.width*(p?o:1),r=u.height*(p?1:o),a=new x(e,n,s,r);this.applyGap(d,a),this.squarify(c[t],a,i),g+=p?s:r}return i}applyGap(t,e){const i=this.nodeGap/2,n=t=>({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),o=n(t),s=n(e);Object.keys(o).forEach(t=>{vi(o[t],s[t])||e.shrink(i,t)})}processData(){return Jr(this,void 0,void 0,(function*(){if(!this.data)return;const{data:t,sizeKey:e,labelKey:i,colorKey:n,colorDomain:o,colorRange:s,groupFill:r}=this,a=this.labels.formatter,l=new Br;l.domain=o,l.range=s,l.update();const h=(t,o=0,s)=>{var c,d,u;let p;a&&(p=this.ctx.callbackCache.call(a,{datum:t})),void 0!==p||(p=i&&null!==(c=t[i])&&void 0!==c?c:"");let g=n&&null!==(d=t[n])&&void 0!==d?d:o;g=la(g);const f=!t.children;let y=r;"string"==typeof g?y=g:!f&&r||(y=l.convert(g));const m={datum:t,depth:o,parent:s,value:0,label:p,fill:y,series:this,isLeaf:f,children:[]};return f?m.value=e&&null!==(u=t[e])&&void 0!==u?u:1:(t.children.forEach(t=>{const e=h(t,o+1,m),i=e.value;!isNaN(i)&&isFinite(i)&&0!==i&&(m.value+=i,m.children.push(e))}),m.children.sort((t,e)=>e.value-t.value)),m};this.dataRoot=h(t)}))}createNodeData(){return Jr(this,void 0,void 0,(function*(){return[]}))}update(){return Jr(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes()}))}updateSelections(){return Jr(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t,dataRoot:e}=this;if(!t||!e)return;if(!t.getSeriesRect())return;const i=[],n=t=>{var e;i.push(t),null===(e=t.children)||void 0===e||e.forEach(n)};n(this.dataRoot);const{groupSelection:o,highlightSelection:s}=this,r=t=>t.update(i,t=>{const e=new gr,i=new J;i.tag=Zr.Name;const n=new J;n.tag=Zr.Value,t.append([e,i,n])});this.groupSelection=r(o),this.highlightSelection=r(s)}))}isDatumHighlighted(t){var e;return t===(null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)}getTileFormat(t,e){var i;const{formatter:n,ctx:{callbackCache:o}}=this;if(!n)return{};const{gradient:s,colorKey:r,labelKey:a,sizeKey:l,tileStroke:h,tileStrokeWidth:c,groupStroke:d,groupStrokeWidth:u}=this,p=t.isLeaf?h:d,g=t.isLeaf?c:u,f=o.call(n,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(i=t.parent)||void 0===i?void 0:i.datum,colorKey:r,sizeKey:l,labelKey:a,fill:t.fill,stroke:p,strokeWidth:g,gradient:s,highlighted:e});return null!=f?f:{}}updateNodes(){return Jr(this,void 0,void 0,(function*(){if(!this.chart)return;const{gradient:t,highlightStyle:{item:{fill:e,fillOpacity:i,stroke:n,strokeWidth:o},text:{color:s}},tileStroke:r,tileStrokeWidth:a,groupStroke:l,groupStrokeWidth:h,tileShadow:c,labelShadow:d}=this,u=this.chart.getSeriesRect(),p=this.squarify(this.dataRoot,new x(0,0,u.width,u.height)),g=this.buildLabelMeta(p),f=this.getHighlightedSubtree();this.updateNodeMidPoint(p);const y=(s,d,u)=>{var g,f,y,m,v,b;const x=p.get(d);if(!x)return void(s.visible=!1);const k=u&&void 0!==e?e:d.fill,S=null!==(g=u?i:1)&&void 0!==g?g:1;let w=l;u&&void 0!==n?w=n:d.isLeaf&&(w=r);let D=h;u&&void 0!==o?D=o:d.isLeaf&&(D=a);const O=this.getTileFormat(d,u),M=la(null!==(f=null==O?void 0:O.fill)&&void 0!==f?f:k);if(null!==(y=null==O?void 0:O.gradient)&&void 0!==y?y:t){const t=ut.tryParseFromString(k).brighter().toString(),e=ut.tryParseFromString(k).darker().toString();s.fill=`linear-gradient(180deg, ${t}, ${e})`}else s.fill=M;s.fillOpacity=null!==(m=null==O?void 0:O.fillOpacity)&&void 0!==m?m:S,s.stroke=la(null!==(v=null==O?void 0:O.stroke)&&void 0!==v?v:w),s.strokeWidth=null!==(b=null==O?void 0:O.strokeWidth)&&void 0!==b?b:D,s.fillShadow=c,s.crisp=!0,s.x=x.x,s.y=x.y,s.width=x.width,s.height=x.height,s.visible=!0};this.groupSelection.selectByClass(gr).forEach(t=>y(t,t.datum,!1)),this.highlightSelection.selectByClass(gr).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&y(t,t.datum,e)});const m=(t,e,i,n)=>{const o=g.get(e),r=null==o?void 0:o[n];r?(t.text=r.text,t.fontFamily=r.style.fontFamily,t.fontSize=r.style.fontSize,t.fontWeight=r.style.fontWeight,t.fill=i&&null!=s?s:r.style.color,t.fillShadow=i?void 0:d,t.textAlign=r.hAlign,t.textBaseline=r.vAlign,t.x=r.x,t.y=r.y,t.visible=!0):t.visible=!1};this.groupSelection.selectByTag(Zr.Name).forEach(t=>m(t,t.datum,!1,"label")),this.highlightSelection.selectByTag(Zr.Name).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&m(t,t.datum,e,"label")}),this.groupSelection.selectByTag(Zr.Value).forEach(t=>m(t,t.datum,!1,"value")),this.highlightSelection.selectByTag(Zr.Value).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&m(t,t.datum,e,"value")})}))}updateNodeMidPoint(t){t.forEach((t,e)=>{e.nodeMidPoint={x:t.x+t.width/2,y:t.y}})}getHighlightedSubtree(){const t=new Set,e=i=>{var n;(this.isDatumHighlighted(i)||i.parent&&t.has(i.parent))&&t.add(i),null===(n=i.children)||void 0===n||n.forEach(e)};return e(this.dataRoot),t}buildLabelMeta(t){const{labels:e,title:i,subtitle:n,nodePadding:o,labelKey:s,ctx:{callbackCache:r}}=this,a=/-$/m,l=new Map;return t.forEach((t,h)=>{var c,d,u;if(!s||0===h.depth)return;const p=t.width-2*o,g=t.height-2*o,f=e=>e.fontSize>t.width/3||e.fontSize>t.height/3;let y=h.isLeaf?h.label:h.label.toUpperCase(),m="";const v=e.value,b=v.style,x=Math.ceil(2*b.fontSize*(J.defaultLineHeightRatio-1));h.isLeaf&&(v.formatter?m=null!==(c=r.call(v.formatter,{datum:h.datum}))&&void 0!==c?c:"":v.key&&(m=h.datum[v.key]));let k,S=aa(m,b);m&&S.width>p&&(m="");let w="";if(h.isLeaf){k=e.small;const t=()=>{const t=g-(m?b.fontSize+x:0),i=[e.large,e.medium,e.small];for(const n of i){const{width:i,height:o}=aa(y,n);if(o>t||f(n))continue;if(i<=p)return{style:n,wrappedText:void 0};const s=J.wrap(y,p,t,n,n.wrapping);if(s&&"\u2026"!==s&&(n===e.small||!a.exec(s)&&!s.endsWith("\u2026")))return{style:n,wrappedText:s}}return aa(y,e.small).height<=t&&!f(e.small)?{style:e.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let i=t();!i.style&&m&&(m="",i=t()),k=null!==(d=i.style)&&void 0!==d?d:e.small,w=null!==(u=i.wrappedText)&&void 0!==u?u:""}else k=1===h.depth?i:n;const D=aa(w||y,k);if(f(k))return;if(D.width>p){const t=Math.floor(y.length*p/D.width)-1;y=y.substring(0,t).trim()+"\u2026"}S=aa(m,b);const O=m&&S.width<p&&S.height+D.height+x<g;l.set(h,{label:Object.assign({text:w||y,style:k},h.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(O?S.height/2+x/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+o,y:t.y+o}),value:O?{text:m,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+D.height/2+x/2}:void 0})}),l}getDomain(t){return[0,1]}getNodeClickEvent(t,e){return new ea(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new ia(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getTooltipHtml(t){var e,i,n,o;if(!this.highlightGroups&&!t.isLeaf)return"";const{tooltip:s,sizeKey:r,labelKey:a,colorKey:l,rootName:h,id:c,labels:d,ctx:{callbackCache:u}}=this,{datum:p}=t,{renderer:g}=s,f=t.depth?p[a]:null!==(e=p[a])&&void 0!==e?e:h;let y="";const m=this.getTileFormat(t,!1),v=null!==(n=null!==(i=null==m?void 0:m.fill)&&void 0!==i?i:t.fill)&&void 0!==n?n:"gray",b=d.value.key,x=d.value.formatter;if(b||x){let t="";if(x)t=u.call(x,{datum:p});else{const e=p[b];"number"==typeof e&&isFinite(e)&&(t=bi(e))}t&&(d.value.name&&(y+=`<b>${d.value.name}:</b> `),y+=t)}const k={title:f,backgroundColor:v,content:y};return g?be(g({datum:t.datum,parent:null===(o=t.parent)||void 0===o?void 0:o.datum,depth:t.depth,sizeKey:r,labelKey:a,colorKey:l,title:f,color:v,seriesId:c}),k):f||y?be(k):""}getLegendData(){return[]}}da.className="TreemapSeries",da.type="treemap",qr([ft(zt(0))],da.prototype,"nodePadding",void 0),qr([ft(zt(0))],da.prototype,"nodeGap",void 0),qr([ft(Nt)],da.prototype,"labelKey",void 0),qr([ft(Et)],da.prototype,"sizeKey",void 0),qr([ft(Et)],da.prototype,"colorKey",void 0),qr([ft(Kt)],da.prototype,"colorDomain",void 0),qr([ft(Ft)],da.prototype,"colorRange",void 0),qr([ft(Et)],da.prototype,"groupFill",void 0),qr([ft(Pt)],da.prototype,"groupStroke",void 0),qr([ft(jt(0))],da.prototype,"groupStrokeWidth",void 0),qr([ft(Pt)],da.prototype,"tileStroke",void 0),qr([ft(jt(0))],da.prototype,"tileStrokeWidth",void 0),qr([ft(Mt)],da.prototype,"gradient",void 0),qr([ft(Ot)],da.prototype,"formatter",void 0),qr([ft(Nt)],da.prototype,"colorName",void 0),qr([ft(Nt)],da.prototype,"rootName",void 0),qr([ft(Ct)],da.prototype,"highlightGroups",void 0);const ua={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},pa={},ga={has:t=>Object.prototype.hasOwnProperty.call(ua,t),isCartesian:t=>"cartesian"===ua[t],isPolar:t=>"polar"===ua[t],isHierarchy:t=>"hierarchy"===ua[t],get seriesTypes(){return Object.keys(ua)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function fa(t){var e;return null!==(e=pa[t])&&void 0!==e?e:{}}const ya={};function ma(t){return ya[t]}function va(t,e){if(xa(t)&&xa(e)){const i={};return Object.keys(t).forEach(n=>{i[n]=n in e?va(t[n],e[n]):t[n]}),Object.keys(e).forEach(n=>{n in t||(i[n]=e[n])}),i}return Array.isArray(t)&&!Array.isArray(e)||ba(t)&&!ba(e)?t:e}function ba(t){return t&&"object"==typeof t}function xa(t){return ba(t)&&t.constructor===Object}tr.type,An.type;const ka={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"},Sa={},wa={has:t=>Object.prototype.hasOwnProperty.call(ka,t),get axesTypes(){return Object.keys(ka)}};const Da={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},Oa=Symbol("extends-series-defaults"),Ma=Symbol("override-series-label-defaults"),Ca=Symbol("default-font");class Na{constructor(t){t=va({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t,cartesian:i,polar:o,hierarchy:s}=e,r=(t,e,i)=>{i&&(n[t]=va(n[t],i),e.forEach(t=>{const e=t;n[e]=va(n[e],i)}))};r("common",Object.keys(n),t),r("cartesian",ga.cartesianTypes,i),r("polar",ga.polarTypes,o),r("hierarchy",ga.hierarchyTypes,s),ga.seriesTypes.forEach(t=>{const i=t,o=e[i];o&&(o.series&&(o.series={[i]:o.series}),n[i]=va(n[i],o))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(n)}getPalette(){return Da}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:Na.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:Na.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:Na.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(t){const e={cartesian:ga.cartesianTypes,polar:ga.polarTypes,hierarchy:ga.hierarchyTypes,groupedCategory:[]};return Object.entries(e).forEach(([e,i])=>{const n=e,o=this.templateTheme(fa(n));i.forEach(e=>{const i=e;t[i]||(t[i]=va({},t[n]),va(t[i],o))})}),t}getDefaults(){const t=va({},Na.defaults),e=(t,e)=>{const i=this.templateTheme(fa(t));return i.series=e.reduce((t,e)=>{const i=ma(e);return i&&(t[e]=this.templateTheme(i)),t},{}),"cartesian"===t&&(i.axes=wa.axesTypes.reduce((t,e)=>{const i=function(t){var e;return null!==(e=Sa[t])&&void 0!==e?e:{}}(e);return i&&(t[e]=this.templateTheme(i)),t},{})),i};return va(t,{cartesian:e("cartesian",ga.cartesianTypes),groupedCategory:e("cartesian",ga.cartesianTypes),polar:e("polar",ga.polarTypes),hierarchy:e("hierarchy",ga.hierarchyTypes)})}templateTheme(t){const e=Bn([t]),{extensions:i,properties:n}=this.getTemplateParameters();return function t(e,i,n,...o){var s;const r=jn(e),a=null!==(s=n.skip)&&void 0!==s?s:[];if("array"!==r){if("object"===r){i(r,e,...o);for(const s in e){if(a.indexOf(s)>=0)continue;const r=e[s],l=null==o?void 0:o.map(t=>null==t?void 0:t[s]),h=jn(r);"object"!==h&&"array"!==h||t(r,i,n,...l)}}}else e.forEach((e,s)=>{t(e,i,n,...(null!=o?o:[]).map(t=>null==t?void 0:t[s]))})}(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n,e),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n),delete e.__overrides__}for(const[t,i]of Object.entries(e))n.has(i)&&(e[t]=n.get(i))},{}),e}getTemplateParameters(){const t=new Map;t.set(Oa,Na.getSeriesDefaults()),t.set(Ma,{});const e=new Map;return e.set(Ca,Na.fontFamily),{extensions:t,properties:e}}mergeWithParentDefaults(t,e){return va(t,e)}}Na.fontFamily="Verdana, sans-serif",Na.cartesianDefaults=Object.assign(Object.assign({},Na.getChartDefaults()),{axes:{number:Object.assign({},Na.getAxisDefaults()),log:Object.assign(Object.assign({},Na.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},Na.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},Na.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},Na.getAxisDefaults()),time:Object.assign({},Na.getAxisDefaults())},series:{column:Object.assign({},Na.getBarSeriesDefaults()),bar:Object.assign({},Na.getBarSeriesDefaults()),line:Object.assign(Object.assign({},Na.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},Na.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},Na.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},Na.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},Na.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},Na.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},Na.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),Na.polarDefaults=Object.assign(Object.assign({},Na.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},Na.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Na.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),Na.hierarchyDefaults=Object.assign(Object.assign({},Na.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},Na.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),Na.defaults={cartesian:Na.cartesianDefaults,groupedCategory:Na.cartesianDefaults,polar:Na.polarDefaults,hierarchy:Na.hierarchyDefaults};class Ea extends Na{constructor(t){super(t)}getDefaults(){const t=Ea.fontColor,e=Ea.mutedFontColor,i={title:{color:t},label:{color:t},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},n={label:{color:t}},o={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},s={background:{fill:"rgb(34, 38, 41)"},title:{color:t},subtitle:{color:e},legend:{item:{label:{color:t}},pagination:{activeStyle:{fill:t},inactiveStyle:{fill:e},highlightStyle:{fill:t},label:{color:t}}}},r=t=>t.reduce((t,e)=>{const i=ma(e);return i&&(t[e]=this.templateTheme(i)),t},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},s),o),{series:Object.assign({line:Object.assign({},n),bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},r(ga.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},s),o),{series:Object.assign({bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},r(ga.cartesianTypes))}),polar:Object.assign(Object.assign({},s),{series:Object.assign({pie:{calloutLabel:{color:t},sectorLabel:{color:t},title:{color:t},innerLabels:{color:t}}},r(ga.polarTypes))}),hierarchy:Object.assign(Object.assign({},s),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:t},subtitle:{color:e},labels:{large:{color:t},medium:{color:t},small:{color:t},value:{style:{color:t}}}}},r(ga.hierarchyTypes))})})}getTemplateParameters(){const t=super.getTemplateParameters();return t.extensions.set(Ma,Ea.seriesLabelDefaults.label),t}}Ea.fontColor="rgb(200, 200, 200)",Ea.mutedFontColor="rgb(150, 150, 150)",Ea.seriesLabelDefaults={label:{color:Ea.fontColor}};const La={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Ra extends Na{getPalette(){return La}}const Ia={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Ta extends Ea{getPalette(){return Ia}}const _a={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class Aa extends Na{getPalette(){return _a}}const Pa={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class Fa extends Ea{getPalette(){return Pa}}const Ba={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class za extends Na{getPalette(){return Ba}}const ja={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class Wa extends Ea{getPalette(){return ja}}const Ka={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class Ga extends Na{getPalette(){return Ka}}const Xa={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class Ya extends Ea{getPalette(){return Xa}}const Ha=()=>new Na,Va=()=>new Ea,$a={undefined:Ha,null:Ha,"ag-default":Ha,"ag-material":()=>new Ra,"ag-pastel":()=>new Aa,"ag-solar":()=>new za,"ag-vivid":()=>new Ga},Ua={undefined:Va,null:Va,"ag-default-dark":Va,"ag-material-dark":()=>new Ta,"ag-pastel-dark":()=>new Fa,"ag-solar-dark":()=>new Wa,"ag-vivid-dark":()=>new Ya},Za=Object.assign(Object.assign({},Ua),$a),qa={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Ja={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};const Qa=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e/2,y:i}:{x:e,y:isNaN(n)?i:(i+n)/2},tl=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:e,y:isNaN(o)?n:(n+o)/2}:{x:i/2,y:n},el=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:isNaN(n)?i:n},il=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i/2,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:(n+o)/2},nl=({yDirection:t,xStart:e,xEnd:i,yStart:n})=>t?{x:e/2,y:n}:{x:i,y:n},ol=({yDirection:t,xStart:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:n}:{x:e,y:i},sl=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:i}:{x:e,y:isNaN(n)?i:n},rl=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:o},al={top:{c:Qa},bottom:{c:il},left:{c:tl},right:{c:el},topLeft:{c:nl},topRight:{c:sl},bottomLeft:{c:ol},bottomRight:{c:rl},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:tl},insideRight:{c:el},insideTop:{c:Qa},insideBottom:{c:il},insideTopLeft:{c:nl},insideBottomLeft:{c:ol},insideTopRight:{c:sl},insideBottomRight:{c:rl}};var ll=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class hl extends U{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new x(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===D.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:s,y1:r,x2:a,y2:l}=this;s=this.align(s),r=this.align(r),a=this.align(a),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(!(!d||!h)){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(s,r),i.lineTo(a,r),i.lineTo(a,l),i.lineTo(s,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:f}=this;if(!(!g&&!f||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:o,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),o&&(i.lineCap=o),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(s,r),i.lineTo(a,r)),f&&(i.moveTo(a,l),i.lineTo(s,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}hl.className="Range",hl.defaultStyles=Object.assign(Object.assign({},U.defaultStyles),{strokeWidth:1}),ll([M({redraw:D.MINOR})],hl.prototype,"x1",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"y1",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"x2",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"y2",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"startLine",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"endLine",void 0),ll([M({redraw:D.MINOR})],hl.prototype,"isRange",void 0);var cl=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};const dl=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],ul=yt((t,e)=>mt(t,e,t=>dl.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),pl=yt((t,e)=>mt(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class gl{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}cl([ft(Ct)],gl.prototype,"enabled",void 0),cl([ft(Et)],gl.prototype,"text",void 0),cl([ft(Ut)],gl.prototype,"fontStyle",void 0),cl([ft(qt)],gl.prototype,"fontWeight",void 0),cl([ft(zt(0))],gl.prototype,"fontSize",void 0),cl([ft(Nt)],gl.prototype,"fontFamily",void 0),cl([ft(zt(0))],gl.prototype,"padding",void 0),cl([ft(Pt)],gl.prototype,"color",void 0),cl([ft(ul)],gl.prototype,"position",void 0),cl([ft(jt(-360,360))],gl.prototype,"rotation",void 0),cl([ft(Ct)],gl.prototype,"parallel",void 0);class fl{constructor(){this.id=w(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new gl,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=de.X,this.group=new B({name:""+this.id,layer:!0,zIndex:fl.LINE_LAYER_ZINDEX}),this.crossLineRange=new hl,this.crossLineLabel=new J,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=N.None}update(t){if(!this.enabled)return;if(this.group.visible=t,!t)return;this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:s,label:{position:r="top"},clippedRange:a,strokeWidth:l=0}=this;if(!i)return!1;const h=null!==(t=i.bandwidth)&&void 0!==t?t:0,c=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[d,u]=[0,o*n];let[p,g]=this.getRange(),[f,y]=[Number(i.convert(p,{strict:!1})),i.convert(g,{strict:!1})+h];f=c(f),y=c(y),[p,g]=[Number(i.convert(p)),i.convert(g)+h];const m=!isNaN(f)&&!isNaN(y)&&(p===f||g===y||f!==y)&&Math.abs(y-f)>0;if(m){f!==Math.min(f,y)&&([f,y]=[Math.min(f,y),Math.max(f,y)],[p,g]=[g,p])}if(this.isRange=m,this.startLine=!isNaN(p)&&l>0&&p===f,this.endLine=!isNaN(g)&&l>0&&g===y,!m&&!this.startLine&&!this.endLine)return!1;if(this.data=[f,y],this.label.enabled){const t=s===de.Y,{c:i=Qa}=null!==(e=al[r])&&void 0!==e?e:{},{x:n,y:o}=i({yDirection:t,xStart:d,xEnd:u,yStart:f,yEnd:y});this.labelPoint={x:n,y:o}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:s,endLine:r,isRange:a,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=s,e.endLine=r,e.isRange=a,e.fill=l,e.fillOpacity=null!=h?h:1,e.stroke=c,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:s="top",padding:r=0},direction:a,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=gn({rotation:o,parallel:n,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=this.computeLabelBBox();if(!u)return;const p=a===de.Y,{xTranslation:g,yTranslation:f}=function({yDirection:t,padding:e=0,position:i="top",bbox:n}){const o=t?qa:Ja,{xTranslationDirection:s,yTranslationDirection:r}=o[i];return{xTranslation:s*(e+(t?n.width:n.height)/2),yTranslation:r*(e+(t?n.height:n.width)/2)}}({yDirection:p,padding:r,position:s,bbox:u});t.translationX=e+g,t.translationY=i+f}getZIndex(t=!1){return t?fl.RANGE_LAYER_ZINDEX:fl.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=i instanceof Ei;let[o,s]=null!=e?e:[t,void 0];return n||void 0!==s||(s=o),o=null!=ct(o,n)?o:void 0,s=null!=ct(s,n)?s:void 0,n&&o===s&&(s=void 0),void 0===o&&void 0!==s&&(o=s,s=void 0),[o,s]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,s,r,a,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const f=this.computeLabelBBox(),y=null==f?void 0:f.x,m=null==f?void 0:f.y;if(!f||null==y||null==m)return;const v=function({yDirection:t,bbox:e,padding:i=0,position:n="top"}){const o={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?o.left=i+e.width:"right"===n&&t&&(o.right=i+e.width):o.bottom=i+e.height:o.top=i+e.height),o}({yDirection:u===de.Y,padding:p,position:g,bbox:f});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=v.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=v.right)&&void 0!==o?o:0),t.top=Math.max(null!==(s=t.top)&&void 0!==s?s:0,null!==(r=v.top)&&void 0!==r?r:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=v.bottom)&&void 0!==l?l:0)}}fl.LINE_LAYER_ZINDEX=ce.SERIES_CROSSLINE_LINE_ZINDEX,fl.RANGE_LAYER_ZINDEX=ce.SERIES_CROSSLINE_RANGE_ZINDEX,fl.className="CrossLine",cl([ft(Ct)],fl.prototype,"enabled",void 0),cl([ft(pl)],fl.prototype,"type",void 0),cl([ft(bt(2))],fl.prototype,"range",void 0),cl([ft(Pt)],fl.prototype,"fill",void 0),cl([ft(jt(0,1))],fl.prototype,"fillOpacity",void 0),cl([ft(Pt)],fl.prototype,"stroke",void 0),cl([ft(jt())],fl.prototype,"strokeWidth",void 0),cl([ft(jt(0,1))],fl.prototype,"strokeOpacity",void 0),cl([ft(Qt)],fl.prototype,"lineDash",void 0);class yl{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const ml=[];function vl(t){const e=ml.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=ml.indexOf(e);ml.splice(i,1,t)}}else ml.push(t)}var bl=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class xl extends si{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new x(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const s=e-n/2,r=i-o/2,a=this.align(s),l=this.align(r),h=a+this.align(s,n),c=l+this.align(r,o);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.gripLineGap/2,u=this.gripLineLength/2;t.moveTo(this.align(e-d),this.align(i-u)),t.lineTo(this.align(e-d),this.align(i+u)),t.moveTo(this.align(e+d),this.align(i-u)),t.lineTo(this.align(e+d),this.align(i+u))}}xl.className="RangeHandle",bl([ft(At)],xl.prototype,"_fill",void 0),bl([ft(At)],xl.prototype,"_stroke",void 0),bl([ft(zt(0))],xl.prototype,"_strokeWidth",void 0),bl([ft(ee)],xl.prototype,"_lineCap",void 0),bl([ft(zt(0))],xl.prototype,"_width",void 0),bl([ft(zt(0))],xl.prototype,"_gripLineGap",void 0),bl([ft(zt(0))],xl.prototype,"_gripLineLength",void 0),bl([ft(zt(0))],xl.prototype,"_height",void 0);var kl=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Sl extends si{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)}get x(){return this._x}set y(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)}get y(){return this._y}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}set min(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new x(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:s}=this,r=t+i*o;return new x(r,e,t+i*s-r,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:s,max:r}=this;t.clear();const a=this.align(e),l=this.align(i),h=a+this.align(e,n),c=l+this.align(i,o);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.align(e+n*s),u=this.align(e+n*r);t.moveTo(d,l),t.lineTo(d,c),t.lineTo(u,c),t.lineTo(u,l),t.lineTo(d,l)}}Sl.className="RangeMask",kl([ft(At)],Sl.prototype,"_stroke",void 0),kl([ft(zt(0))],Sl.prototype,"_strokeWidth",void 0),kl([ft(At)],Sl.prototype,"_fill",void 0),kl([ft(zt(0,1))],Sl.prototype,"_fillOpacity",void 0),kl([ft(ee)],Sl.prototype,"_lineCap",void 0),kl([ft(zt(0))],Sl.prototype,"_width",void 0),kl([ft(zt(0))],Sl.prototype,"_height",void 0),kl([ft(zt())],Sl.prototype,"_min",void 0),kl([ft(zt())],Sl.prototype,"_max",void 0);class wl extends B{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new xl,this.maxHandle=new xl,this.mask=(()=>{const{x:t,y:e,width:i,height:n,min:o,max:s}=wl.defaults,r=new Sl;r.x=t,r.y=e,r.width=i,r.height=n,r.min=o,r.max=s;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+n/2,this.append([r,a,l]),r.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},r})(),this._x=wl.defaults.x,this._y=wl.defaults.y,this._width=wl.defaults.width,this._height=wl.defaults.height,this._min=wl.defaults.min,this._max=wl.defaults.max,this.isContainerNode=!0}set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:n,width:o,height:s,mask:r}=this;t.centerX=i+o*r.min,e.centerX=i+o*r.max,t.centerY=e.centerY=n+s/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===D.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:o,minHandle:s,maxHandle:r}=this;[o,s,r].forEach(n=>{n.visible&&(i||n.dirty>D.NONE)&&(e.save(),n.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}}wl.className="Range",wl.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class Dl{constructor(t){this.rm=t}set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}}class Ol{constructor(t){this.rh=t}set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}}var Ml=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Cl extends yl{constructor(t){super(),this.ctx=t,this.rs=new wl,this.mask=new Dl(this.rs.mask),this.minHandle=new Ol(this.rs.minHandle),this.maxHandle=new Ol(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[t.interactionManager.addListener("drag-start",t=>this.onDragStart(t)),t.interactionManager.addListener("drag",t=>this.onDrag(t)),t.interactionManager.addListener("hover",t=>this.onDrag(t)),t.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(e=>this.destroyFns.push(()=>t.interactionManager.removeListener(e))),[t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t))].forEach(e=>this.destroyFns.push(()=>t.layoutService.removeListener(e))),t.scene.root.appendChild(this.rs),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:s,x:r,width:a,min:l}=n,h=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:s.containsPoint(e,i)?this.maxHandleDragging=!0:h.containsPoint(e,i)&&(this.panHandleOffset=(e-r)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:s,height:r,minHandle:a,maxHandle:l}=e,{offsetX:h,offsetY:c}=t,d=n+s*e.min,u=n+s*e.max,p=new x(d,o,u-d,r),g=()=>Math.min(Math.max((h-n)/s,0),1);if(a.containsPoint(h,c)||l.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=g();else if(this.maxHandleDragging)e.max=g();else if(!isNaN(i)){const t=e.max-e.min,n=Math.min(g()-i,1-t);n<=e.min?(e.min=n,e.max=e.min+t):(e.max=n+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}Ml([ft(Mt)],Cl.prototype,"_enabled",void 0),Ml([ft(zt(0))],Cl.prototype,"margin",void 0);vl({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Cl,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var Nl=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class El extends yl{constructor(t){var e;super(),this.onLayoutComplete=t=>{const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i},this.node=new B({name:"background"}),this.node.zIndex=ce.SERIES_BACKGROUND_ZINDEX,this.rectNode=new gr,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)});const i=t.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>t.layoutService.removeListener(i))}}Nl([ft(Mt),wi("node","visible")],El.prototype,"visible",void 0),Nl([ft(Pt),wi("rectNode","fill")],El.prototype,"fill",void 0);vl({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:El});var Ll=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};class Rl extends R{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===D.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}Ll([M({redraw:D.MAJOR})],Rl.prototype,"x",void 0),Ll([M({redraw:D.MAJOR})],Rl.prototype,"y",void 0),Ll([M({redraw:D.MAJOR})],Rl.prototype,"width",void 0),Ll([M({redraw:D.MAJOR})],Rl.prototype,"height",void 0),Ll([M({redraw:D.MAJOR})],Rl.prototype,"opacity",void 0),Object.entries(Za).reduce((t,[e,i])=>(t[e]=i(),t),{});var Il,Tl=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_l=dn,Al=dt,Pl=rt,Fl=at,Bl=t=>t instanceof Date&&!isNaN(+t),zl=w,jl=Xe,Wl=Rn,Kl=fi,Gl=Yi;!function(t){t[t.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",t[t.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",t[t.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",t[t.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"}(Il||(Il={}));var Xl=function(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1},Yl=function(){function t(){this.id=zl(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new jl(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Wl,this.axis=new Xl,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var e=new B;this.rootGroup=e;var i=document.createElement("div");i.setAttribute("class","ag-sparkline-wrapper");var n=new K({document:document});if(this.scene=n,this.canvasElement=n.canvas.element,n.root=e,n.container=i,n.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,-1===t.tooltipDocuments.indexOf(document)){var o=document.createElement("style");o.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(o,document.head.querySelector("style")),t.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var t=this.yScale,e=this.seriesRect;t.range=[e.height,0]},t.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var t,e=this.xData,i=this.xScale;(i instanceof Wl||i instanceof Gl)&&(t=_l(e)),this.xScale.domain=t?t.slice():e},t.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new Wl;case"time":return new Gl;case"category":default:return new Kl}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(t){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},t.prototype.updateHitPoint=function(t){var e,i,n,o=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(o){var s=this.highlightedDatum;this.highlightedDatum=o,(this.highlightedDatum&&!s||this.highlightedDatum&&s&&this.highlightedDatum!==s)&&(this.highlightDatum(o),this.updateCrosshairs(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))),(null===(n=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.enabled)||void 0===n||n)&&this.handleTooltip(t,o)}},t.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},t.prototype.processData=function(){var t=this,e=this.data,i=this.yData,n=this.xData;if(e&&!this.invalidData(this.data)){i.length=0,n.length=0;var o=e.length,s=this.getDataType(e);this.dataType=s;var r,a=this.axis.type,l="number"!==a&&"time"!==a?"category":a,h="number"===l||"time"===l,c=function(e,i){null==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var n=t.smallestInterval.x,o=Math.abs(e-i);o>0&&o<n&&(t.smallestInterval.x=o)};if("number"===s)for(var d=0;d<o;d++){var u=d,p=e[d],g=this.getDatum(u,l),f=this.getDatum(p,"number");h&&c(g,r),n.push(g),i.push(f),r=g}else if("array"===s)for(d=0;d<o;d++){var y=e[d];if(Array.isArray(y)){u=y[0],p=y[1],g=this.getDatum(u,l),f=this.getDatum(p,"number");if(null==g)continue;h&&c(g,r),n.push(g),i.push(f),r=g}}else if("object"===s){var m=this.yKey,v=this.xKey;for(d=0;d<o;d++){if("object"==typeof(y=e[d])&&!Array.isArray(y)){u=y[v],p=y[m],g=this.getDatum(u,l),f=this.getDatum(p,"number");if(null==g)continue;h&&c(g,r),n.push(g),i.push(f),r=g}}}this.updateAxes(),this.immediateLayout()}},t.prototype.getDataType=function(t){var e,i;try{for(var n=Tl(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(null!=s){if(Al(s))return"number";if(Array.isArray(s))return"array";if("object"==typeof s)return"object"}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.getDatum=function(t,e){if("number"===e&&Al(t)||"time"===e&&(Al(t)||Bl(t)))return t;if("category"===e){if(Pl(t)||Bl(t)||Al(t))return{toString:function(){return String(t)}};if(Fl(t))return t}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),t.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){t.immediateLayout(),t.layoutId=0}))},t.prototype.immediateLayout=function(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})))},t.prototype.setSparklineDimensions=function(){var t=this,e=t.width,i=t.height,n=t.padding,o=t.seriesRect,s=t.rootGroup,r=e-n.left-n.right,a=i-n.top-n.bottom;o.width=r,o.height=a,o.x=n.left,o.y=n.top,s.translationX=o.x,s.translationY=o.y},t.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var i,n=1/0,o=this.rootGroup.transformPoint(t,e),s=this.getNodeData(),r=0;r<s.length;r++){var a=s[r];if(!a.point)return;var l=this.getDistance(o,a.point);l<=n&&(n=l,i=a)}return i},t.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},t.prototype.handleTooltip=function(t,e){var i,n,o=e.seriesDatum,s=this.canvasElement,r=t.clientX,a=t.clientY,l=null===(i=this.processedOptions)||void 0===i?void 0:i.tooltip,h={pageX:r,pageY:a,position:{xOffset:null==l?void 0:l.xOffset,yOffset:null==l?void 0:l.yOffset},container:null==l?void 0:l.container};null==h.container&&(h.container=s);var c=o.y,d=o.x,u=null===(n=null==l?void 0:l.enabled)||void 0===n||n,p=null==l?void 0:l.renderer;if(p){var g=p({context:this.context,datum:o,yValue:c,xValue:d});u="string"!=typeof g&&void 0!==g.enabled?g.enabled:u}var f=u&&void 0!==o.y&&this.getTooltipHtml(e);f&&this.tooltip.show(h,f)},t.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},t.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"==typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||Al(t))?this.defaultDateFormatter.format(t):String(t)},t.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}();function Hl(t,e){var i,n,o;if("string"==typeof t)return t;e=null!=e?e:{};var s,r,a=t.content,l=void 0===a?null!==(i=e.content)&&void 0!==i?i:"":a,h=t.title,c=void 0===h?null!==(n=e.title)&&void 0!==n?n:void 0:h,d=t.color,u=void 0===d?e.color:d,p=t.backgroundColor,g=void 0===p?e.backgroundColor:p,f=t.opacity,y=void 0===f?null!==(o=e.opacity)&&void 0!==o?o:1:f;u?(s=c?'<span class="'+Vl.class+'-title"; style="color: '+u+'">'+c+"</span>":"",r='<span class="'+Vl.class+'-content" style="color: '+u+'">'+l+"</span>"):(s=c?'<span class="'+Vl.class+'-title">'+c+"</span>":"",r='<span class="'+Vl.class+'-content">'+l+"</span>");var m="opacity: "+y;return g&&(m+="; background-color: "+g.toLowerCase()),'<div class="'+Vl.class+'" style="'+m+'">\n                '+s+"\n                "+r+"\n            </div>"}var Vl=function(){function t(){this.element=document.createElement("div"),document.body.appendChild(this.element)}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(t.class+"-wrapper-hidden");var i=e.getAttribute("class");return!!i&&i.split(" ").indexOf(t.class+"-wrapper-hidden")<0},t.prototype.updateClass=function(e){var i=[t.class+"-wrapper"];!0!==e&&i.push(t.class+"-wrapper-hidden"),this.element.setAttribute("class",i.join(" "))},t.prototype.show=function(t,e){var i,n,o,s;this.toggle(!1);var r=this.element;if(void 0!==e)r.innerHTML=e;else if(!r.innerHTML)return;var a=null!==(n=null===(i=t.position)||void 0===i?void 0:i.xOffset)&&void 0!==n?n:10,l=null!==(s=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==s?s:0,h=t.pageX+a,c=t.pageY+l,d=r.getBoundingClientRect(),u=window.innerWidth-d.width;if(t.container){var p=t.container.getBoundingClientRect();u=p.left+(p.width-d.width)}h>u&&(h=t.pageX-r.clientWidth-a),"undefined"!=typeof scrollX&&(h+=scrollX),"undefined"!=typeof scrollY&&(c+=scrollY),r.style.left=Math.round(h)+"px",r.style.top=Math.round(c)+"px",this.toggle(!0)},t.prototype.toggle=function(t){this.updateClass(t)},t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}();function $l(t){switch(t){case"circle":return li;case"square":return Wn;case"diamond":return Gn;default:return li}}function Ul(t,e){void 0===e&&(e="solid");var i={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?null==n[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),n.solid):n[e]:null==i[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),i.solid):i[e]}var Zl,ql,Jl,Ql=(Zl=function(t,e){return(Zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Zl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),th=dn,eh=fi,ih=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},nh=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},oh=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},sh=function(t){function e(){var e=t.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new si,e.fillPath=new si,e.xCrosshairLine=new mi,e.yCrosshairLine=new mi,e.areaSparklineGroup=new B,e.xAxisLine=new mi,e.markers=new B,e.markerSelection=pi.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new ih,e.line=new nh,e.crosshairs=new oh,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=Il.AXIS_LINE_ZINDEX,e.fillPath.zIndex=Il.SERIES_FILL_ZINDEX,e.strokePath.zIndex=Il.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=Il.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=Il.CROSSHAIR_ZINDEX,e.markers.zIndex=Il.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return Ql(e,t),e.prototype.markerFactory=function(){return new($l(this.marker.shape))},e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.update=function(){var t=this.generateNodeData();if(t){var e=t.nodeData,i=t.fillData,n=t.strokeData;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(n),this.updateFill(i)}},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=th(t),n=0,o=1;void 0!==i&&(n=this.min=i[0],o=this.max=i[1]),n=n<0?n:0,o=o<0?0:o,e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,s=t.yScale;if(e){for(var r,a,l,h,c=!(o instanceof eh),d=c?0:o.bandwidth/2,u=i.length,p=[],g=[],f=[],y=s.convert(0),m=0;m<u;m++){var v=i[m],b=n[m],x=o.convert(c?o.toDomain(b):b)+d,k=void 0===v?NaN:s.convert(v);m+1<u&&(h=o.convert(c?o.toDomain(n[m+1]):n[m+1])+d),f.push({seriesDatum:{x:b,y:v},point:{x:x,y:k}}),void 0===v&&void 0!==l?(g.push({seriesDatum:void 0,point:{x:l,y:y}}),void 0!==h&&g.push({seriesDatum:void 0,point:{x:h,y:y}})):void 0!==v&&(g.push({seriesDatum:{x:b,y:v},point:{x:x,y:k}}),p.push({seriesDatum:{x:b,y:v},point:{x:x,y:k}}),r=void 0!==r?r:x,a=x),l=x}return g.push({seriesDatum:void 0,point:{x:a,y:y}},{seriesDatum:void 0,point:{x:r,y:y}}),{nodeData:p,fillData:g,strokeData:f}}},e.prototype.updateAxisLine=function(){var t=this.xScale,e=this.yScale,i=this.axis,n=this.xAxisLine;n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=i.stroke,n.strokeWidth=i.strokeWidth;var o=e.convert(0);n.translationY=o},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,i=this.highlightStyle,n=this.marker,o=i.size,s=i.fill,r=i.stroke,a=i.strokeWidth,l=n.formatter;this.markerSelection.each((function(i,h,c){var d=h.point,u=h.seriesDatum;if(d){var p,g=h===e,f=g&&void 0!==s?s:n.fill,y=g&&void 0!==r?r:n.stroke,m=g&&void 0!==a?a:n.strokeWidth,v=g&&void 0!==o?o:n.size;if(l){var b=0===c,x=c===t.markerSelectionData.length-1,k=u.y===t.min,S=u.y===t.max;p=l({datum:h,xValue:u.x,yValue:u.y,min:k,max:S,first:b,last:x,fill:f,stroke:y,strokeWidth:m,size:v,highlighted:g})}i.size=p&&null!=p.size?p.size:v,i.fill=p&&null!=p.fill?p.fill:f,i.stroke=p&&null!=p.stroke?p.stroke:y,i.strokeWidth=p&&null!=p.strokeWidth?p.strokeWidth:m,i.translationX=d.x,i.translationY=d.y,i.visible=p&&null!=p.enabled?p.enabled:n.enabled&&i.size>0}}))},e.prototype.updateStroke=function(t){var e=this.strokePath,i=this.yData,n=this.line;if(!(i.length<2)){var o=e.path,s=t.length,r=!0;o.clear();for(var a=0;a<s;a++){var l=t[a],h=l.point,c=l.seriesDatum,d=h.x,u=h.y;null==c.y?r=!0:r?(o.moveTo(d,u),r=!1):o.lineTo(d,u)}e.lineJoin=e.lineCap="round",e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth}},e.prototype.updateFill=function(t){var e=this.fillPath,i=this.yData,n=this.fill,o=e.path,s=t.length;if(o.clear(),!(i.length<2)){for(var r=0;r<s;r++){var a=t[r].point,l=a.x,h=a.y;r>0?o.lineTo(l,h):o.moveTo(l,h)}o.closePath(),e.lineJoin="round",e.stroke=void 0,e.fill=n}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,i=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var s=o.lineDash;i.lineDash=Array.isArray(s)?s:Ul(i.lineCap,o.lineDash),i.translationX=n.point.x}else i.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,i=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var s=o.lineDash;i.lineDash=Array.isArray(s)?s:Ul(i.lineCap,o.lineDash),i.translationY=n.point.y}else i.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,s=o.y,r=o.x,a={content:this.formatNumericDatum(s),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?Hl(l({context:this.context,datum:o,yValue:s,xValue:r}),a):Hl(a)},e.className="AreaSparkline",e}(Yl),rh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ah=dn,lh=fi,hh=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},ch=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},dh=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},uh=function(t){function e(){var e=t.call(this)||this;return e.linePath=new si,e.xCrosshairLine=new mi,e.yCrosshairLine=new mi,e.lineSparklineGroup=new B,e.markers=new B,e.markerSelection=pi.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new hh,e.line=new ch,e.crosshairs=new dh,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=Il.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=Il.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=Il.CROSSHAIR_ZINDEX,e.markers.zIndex=Il.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return rh(e,t),e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.markerFactory=function(){return new($l(this.marker.shape))},e.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},e.prototype.update=function(){var t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=ah(t),n=0,o=1;if(void 0!==i&&(n=this.min=i[0],o=this.max=i[1]),n===o){var s=Math.abs(.01*n);n-=s,o+=s}e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,s=t.yScale;if(e){for(var r=!(o instanceof lh),a=r?0:o.bandwidth/2,l=[],h=0;h<i.length;h++){var c=i[h],d=n[h];if(null!=c){var u=o.convert(r?o.toDomain(d):d)+a,p=void 0===c?NaN:s.convert(c);l.push({seriesDatum:{x:d,y:c},point:{x:u,y:p}})}}return l}},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,i=this.highlightStyle,n=this.marker,o=i.size,s=i.fill,r=i.stroke,a=i.strokeWidth,l=n.formatter;this.markerSelection.each((function(i,h,c){var d,u=h===e,p=u&&void 0!==s?s:n.fill,g=u&&void 0!==r?r:n.stroke,f=u&&void 0!==a?a:n.strokeWidth,y=u&&void 0!==o?o:n.size,m=h.seriesDatum,v=h.point;if(l){var b=0===c,x=c===t.markerSelectionData.length-1,k=m.y===t.min,S=m.y===t.max;d=l({datum:h,xValue:m.x,yValue:m.y,min:k,max:S,first:b,last:x,fill:p,stroke:g,strokeWidth:f,size:y,highlighted:u})}i.size=d&&null!=d.size?d.size:y,i.fill=d&&null!=d.fill?d.fill:p,i.stroke=d&&null!=d.stroke?d.stroke:g,i.strokeWidth=d&&null!=d.strokeWidth?d.strokeWidth:f,i.translationX=v.x,i.translationY=v.y,i.visible=d&&null!=d.enabled?d.enabled:n.enabled&&i.size>0}))},e.prototype.updateLine=function(){var t=this,e=t.linePath,i=t.yData,n=t.xData,o=t.xScale,s=t.yScale,r=t.line;if(!(i.length<2)){var a=!(o instanceof lh),l=e.path,h=i.length,c=a?0:o.bandwidth/2,d=!0;l.clear();for(var u=0;u<h;u++){var p=n[u],g=i[u],f=o.convert(a?o.toDomain(p):p)+c,y=void 0===g?NaN:s.convert(g);null==g?d=!0:d?(l.moveTo(f,y),d=!1):l.lineTo(f,y)}e.fill=void 0,e.stroke=r.stroke,e.strokeWidth=r.strokeWidth}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,i=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var s=o.lineDash;i.lineDash=Array.isArray(s)?s:Ul(i.lineCap,o.lineDash),i.translationX=n.point.x}else i.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,i=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var s=o.lineDash;i.lineDash=Array.isArray(s)?s:Ul(i.lineCap,o.lineDash),i.translationY=n.point.y}else i.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,s=o.y,r=o.x,a={content:this.formatNumericDatum(s),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?Hl(l({context:this.context,datum:o,yValue:s,xValue:r}),a):Hl(a)},e.className="LineSparkline",e}(Yl),ph=function(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"},gh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fh=dn;!function(t){t[t.Rect=0]="Rect",t[t.Label=1]="Label"}(ql||(ql={})),function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(Jl||(Jl={}));var yh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement=Jl.InsideEnd,e}return gh(e,t),e}(ph),mh=function(t){function e(){var e=t.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new mi,e.bandWidth=0,e.sparklineGroup=new B,e.rectGroup=new B,e.labelGroup=new B,e.rectSelection=pi.select(e.rectGroup,gr),e.labelSelection=pi.select(e.labelGroup,J),e.nodeSelectionData=[],e.label=new yh,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=Il.SERIES_FILL_ZINDEX,e.axisLine.zIndex=Il.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=Il.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return gh(e,t),e.prototype.getNodeData=function(){return this.nodeSelectionData},e.prototype.update=function(){this.updateSelections(),this.updateNodes()},e.prototype.updateSelections=function(){var t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))},e.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},e.prototype.calculateStep=function(t){var e,i=this.xScale,n=this.paddingInner,o=this.paddingOuter,s=this.smallestInterval,r=(i.domain[1]-i.domain[0])/(null!==(e=null==s?void 0:s.x)&&void 0!==e?e:1)+1,a=Math.min(r,50),l=a-1;return t/Math.max(1,2*o+l*n+a)},e.prototype.updateYScaleDomain=function(){var t=this.yScale,e=this.yData,i=this.valueAxisDomain,n=fh(e),o=0,s=1;void 0!==n&&(o=this.min=n[0],s=this.max=n[1]),o=o<0?o:0,s=s<0?0:s,i&&(i[1]<s&&(i[1]=s),i[0]>o&&(i[0]=o)),t.domain=i||[o,s]},e.prototype.updateRectSelection=function(t){this.rectSelection.update(t)},e.prototype.updateRectNodes=function(){var t=this,e=this,i=e.highlightedDatum,n=e.formatter,o=e.fill,s=e.stroke,r=e.strokeWidth,a=this.highlightStyle,l=a.fill,h=a.stroke,c=a.strokeWidth;this.rectSelection.each((function(e,a,d){var u,p=a===i,g=p&&void 0!==l?l:o,f=p&&void 0!==h?h:s,y=p&&void 0!==c?c:r,m=a.x,v=a.y,b=a.width,x=a.height,k=a.seriesDatum;if(n){var S=0===d,w=d===t.nodeSelectionData.length-1,D=k.y===t.min,O=k.y===t.max;u=n({datum:a,xValue:k.x,yValue:k.y,width:b,height:x,min:D,max:O,first:S,last:w,fill:g,stroke:f,strokeWidth:y,highlighted:p})}e.fill=u&&u.fill||g,e.stroke=u&&u.stroke||f,e.strokeWidth=u&&u.strokeWidth||y,e.x=e.y=0,e.width=b,e.height=x,e.visible=e.height>0,e.translationX=m,e.translationY=v}))},e.prototype.updateLabelSelection=function(t){this.labelSelection.update(t,(function(t){t.tag=ql.Label,t.pointerEvents=N.None}))},e.prototype.updateLabelNodes=function(){var t=this.label,e=t.enabled,i=t.fontStyle,n=t.fontWeight,o=t.fontSize,s=t.fontFamily,r=t.color;this.labelSelection.each((function(t,a){var l=a.label;l&&e?(t.fontStyle=i,t.fontWeight=n,t.fontSize=o,t.fontFamily=s,t.textAlign=l.textAlign,t.textBaseline=l.textBaseline,t.text=l.text,t.x=l.x,t.y=l.y,t.fill=r,t.visible=!0):t.visible=!1}))},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,s=o.y,r=o.x,a={content:this.formatNumericDatum(s),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?Hl(l({context:this.context,datum:o,yValue:s,xValue:r}),a):Hl(a)},e.prototype.formatLabelValue=function(t){return t%1!=0?t.toFixed(1):t.toFixed(0)},e}(Yl),vh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bh=dt,xh=fi,kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vh(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[0,t.width]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,i=this.paddingOuter,n=this.paddingInner;if(t instanceof xh)t.range=[0,e.height],t.paddingInner=n,t.paddingOuter=i;else{var o=this.calculateStep(e.height),s=o*i;this.bandWidth=o*(1-n),t.range=[s,e.height-s-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,i=this.axisLine,n=this.seriesRect,o=e.strokeWidth;i.x1=0,i.x2=0,i.y1=0,i.y2=n.height,i.stroke=e.stroke,i.strokeWidth=o+(o%2==1?1:0);var s=t.convert(0);i.translationX=s},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,s=t.yScale,r=t.fill,a=t.stroke,l=t.strokeWidth,h=t.label;if(e){for(var c=h.fontStyle,d=h.fontWeight,u=h.fontSize,p=h.fontFamily,g=h.color,f=h.formatter,y=h.placement,m=[],v=s.convert(0),x=!(o instanceof xh),k=0,S=i.length;k<S;k++){var w=i[k],D=n[k],O=void 0===w;O&&(w=0);var M=o.convert(x?o.toDomain(D):D),C=Math.min(void 0===w?NaN:s.convert(w),v),N=Math.max(void 0===w?NaN:s.convert(w),v),E=x?this.bandWidth:o.bandwidth,L=N-C,R={x:v,y:M},I=void 0;I=f?f({value:w}):void 0!==w&&bh(w)?this.formatLabelValue(w):"";var T=M+E/2,_=void 0,A=void 0,P=void 0!==w&&w>=0;if(y===Jl.Center)_=C+L/2,A="center";else if(y===Jl.OutsideEnd)_=C+(P?L+4:-4),A=P?"start":"end";else if(y===Jl.InsideEnd){_=C+(P?L-4:4),A=P?"end":"start";var F=b.getTextSize(I,p).width||20;(P&&_<v+F||!P&&_>v-F)&&(_=v+4*(P?1:-1),A=P?"start":"end")}else _=v+4*(P?1:-1),A=P?"start":"end";m.push({x:C,y:M,width:L,height:E,fill:r,stroke:a,strokeWidth:l,seriesDatum:{x:D,y:O?void 0:w},point:R,label:{x:_,y:T,text:I,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p,textAlign:A,textBaseline:"middle",fill:g}})}return m}},e.prototype.getDistance=function(t,e){return Math.abs(t.y-e.y)},e.className="BarSparkline",e}(mh),Sh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wh=dt,Dh=fi,Oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sh(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[t.height,0]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,i=this.paddingOuter,n=this.paddingInner;if(t instanceof Dh)t.range=[0,e.width],t.paddingInner=n,t.paddingOuter=i;else{var o=this.calculateStep(e.width),s=o*i;this.bandWidth=o*(1-n),t.range=[s,e.width-s-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,i=this.axisLine,n=this.seriesRect,o=e.strokeWidth;i.x1=0,i.x2=n.width,i.y1=0,i.y2=0,i.stroke=e.stroke,i.strokeWidth=o+(o%2==1?1:0);var s=t.convert(0);i.translationY=s},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,s=t.yScale,r=t.fill,a=t.stroke,l=t.strokeWidth,h=t.label;if(e){for(var c=h.fontStyle,d=h.fontWeight,u=h.fontSize,p=h.fontFamily,g=h.color,f=h.formatter,y=h.placement,m=[],v=s.convert(0),x=!(o instanceof Dh),k=0,S=i.length;k<S;k++){var w=i[k],D=n[k],O=void 0===w;O&&(w=0);var M=Math.min(void 0===w?NaN:s.convert(w),v),C=o.convert(x?o.toDomain(D):D),N=Math.max(void 0===w?NaN:s.convert(w),v),E=x?this.bandWidth:o.bandwidth,L=N-M,R={x:C+E/2,y:v},I=void 0;I=f?f({value:w}):void 0!==w&&wh(w)?this.formatLabelValue(w):"";var T=C+E/2,_=void 0,A=void 0,P=void 0!==w&&w>=0;if(y===Jl.Center)_=M+L/2,A="middle";else if(y===Jl.OutsideEnd)_=M+(P?-2:L+2),A=P?"bottom":"top";else if(y===Jl.InsideEnd){_=M+(P?2:L-2),A=P?"top":"bottom";var F=b.getTextSize(I,p).height||10;(P&&_>v-F||!P&&_<v+F)&&(_=v+2*(P?-1:1),A=P?"bottom":"top")}else _=v+2*(P?-1:1),A=P?"bottom":"top";m.push({x:C,y:M,width:E,height:L,fill:r,stroke:a,strokeWidth:l,seriesDatum:{x:D,y:O?void 0:w},point:R,label:{x:T,y:_,text:I,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p,textAlign:"center",textBaseline:A,fill:g}})}return m}},e.className="ColumnSparkline",e}(mh),Mh=dt,Ch=function(){function t(){}return t.create=function(t,e){var i=function(t){void 0===t&&(t="line");switch(t){case"column":return new Oh;case"bar":return new kh;case"area":return new sh;case"line":default:return new uh}}((t=Bn([t])).type);return e&&(i.tooltip=e),function(t,e){Ph(t,"context",e.context,e),Ph(t,"width",e.width,e),Ph(t,"height",e.height,e),Ph(t,"container",e.container,e),Ph(t,"xKey",e.xKey,e),Ph(t,"yKey",e.yKey,e),e.padding&&function(t,e){Ph(t,"top",e.top,e),Ph(t,"right",e.right,e),Ph(t,"bottom",e.bottom,e),Ph(t,"left",e.left,e)}(t.padding,e.padding);e.axis&&function(t,e){Ph(t,"type",e.type,e),Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e)}(t.axis,e.axis);e.highlightStyle&&function(t,e){Ph(t,"fill",e.fill,e),Ph(t,"size",e.size,e),Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e)}(t.highlightStyle,e.highlightStyle)}(i,t),function(t,e){switch(e.type){case"bar":case"column":Nh(t,e);break;case"area":!function(t,e){Ph(t,"fill",e.fill,e),e.marker&&Eh(t.marker,e.marker);e.line&&Lh(t.line,e.line);e.crosshairs&&Rh(t.crosshairs,e.crosshairs)}(t,e);break;case"line":default:!function(t,e){e.marker&&Eh(t.marker,e.marker);e.line&&Lh(t.line,e.line);e.crosshairs&&Rh(t.crosshairs,e.crosshairs)}(t,e)}}(i,t),t.data&&(i.data=t.data),i.processedOptions=t,i},t}();function Nh(t,e){Ph(t,"valueAxisDomain",e.valueAxisDomain,e),Ph(t,"fill",e.fill,e),Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e),Ph(t,"paddingInner",e.paddingInner,e),Ph(t,"paddingOuter",e.paddingOuter,e),Ph(t,"formatter",e.formatter,e),e.label&&function(t,e){Ph(t,"enabled",e.enabled,e),Ph(t,"fontStyle",e.fontStyle,e),Ph(t,"fontWeight",e.fontWeight,e),Ph(t,"fontSize",e.fontSize,e),Ph(t,"fontFamily",e.fontFamily,e),Ph(t,"textAlign",e.textAlign,e),Ph(t,"textBaseline",e.textBaseline,e),Ph(t,"color",e.color,e),Ph(t,"formatter",e.formatter,e),Ph(t,"placement",e.placement,e)}(t.label,e.label)}function Eh(t,e){Ph(t,"enabled",e.enabled,e),Ph(t,"size",e.size,e),Ph(t,"shape",e.shape,e),Ph(t,"fill",e.fill,e),Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e),Ph(t,"formatter",e.formatter,e)}function Lh(t,e){Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e)}function Rh(t,e){t.xLine&&e.xLine&&Ih(t.xLine,e.xLine),t.yLine&&e.yLine&&Ih(t.yLine,e.yLine)}function Ih(t,e){Ph(t,"enabled",e.enabled,e),Ph(t,"stroke",e.stroke,e),Ph(t,"strokeWidth",e.strokeWidth,e),Ph(t,"lineDash",e.lineDash,e),Ph(t,"lineCap",e.lineCap,e)}var Th={};var _h=function(t,e,i){if(Mh(e))return!0;var n,o,s="AG Charts: "+t+" must be a number, the value you provided is not a valid number. Using the default of "+i+"px.";return n=function(){return console.warn(s)},Th[o=t+" not a number"]||(n(),Th[o]=!0),!1},Ah={xOffset:_h,yOffset:_h};function Ph(t,e,i,n){if(e in n)if(e in t){var o=Ah[e];(!o||o(e,i,t[e]))&&t[e]!==i&&(t[e]=i)}else console.warn("Property "+e+" does not exist on the target object.")}var Fh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bh=function(){return(Bh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zh=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},jh=function(e){function i(){return e.call(this,i.TEMPLATE)||this}return Fh(i,e),i.prototype.init=function(t){var e=this,i=!0,n=this.resizeObserverService.observeResize(this.getGui(),(function(){var n=e.getGui(),o=n.clientWidth,s=n.clientHeight;if(0!==o&&0!==s)if(i){var r=Bh({data:t.value,width:o,height:s,context:{data:t.data}},t.sparklineOptions);e.sparkline=Ch.create(r,e.sparklineTooltipSingleton.getSparklineTooltip()),e.eSparkline.appendChild(e.sparkline.canvasElement),i=!1}else e.sparkline.width=o,e.sparkline.height=s}));this.addDestroyFunc((function(){return n()}))},i.prototype.refresh=function(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)},i.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',zh([t.RefSelector("eSparkline")],i.prototype,"eSparkline",void 0),zh([t.Autowired("resizeObserverService")],i.prototype,"resizeObserverService",void 0),zh([t.Autowired("sparklineTooltipSingleton")],i.prototype,"sparklineTooltipSingleton",void 0),i}(t.Component),Wh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kh=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},Gh=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Wh(i,e),i.prototype.postConstruct=function(){this.tooltip=new Vl},i.prototype.getSparklineTooltip=function(){return this.tooltip},i.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},Kh([t.PostConstruct],i.prototype,"postConstruct",null),Kh([t.PreDestroy],i.prototype,"destroyTooltip",null),i=Kh([t.Bean("sparklineTooltipSingleton")],i)}(t.BeanStub),Xh={version:"30.0.1",moduleName:t.ModuleNames.SparklinesModule,beans:[Gh],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:jh}],dependantModules:[e.EnterpriseCoreModule]};exports.SparklinesModule=Xh;