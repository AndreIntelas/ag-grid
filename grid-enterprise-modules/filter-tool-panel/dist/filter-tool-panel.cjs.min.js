/**
          * @ag-grid-enterprise/filter-tool-panel - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/filter-tool-panel - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,o=require("@ag-grid-community/core"),n=require("@ag-grid-enterprise/core"),i=require("@ag-grid-enterprise/side-bar"),r=(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),s=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};!function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED",e[e.INDETERMINATE=2]="INDETERMINATE"}(t||(t={}));var l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},n.prototype.postConstruct=function(){var e=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(t.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},n.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},n.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=o._.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=o._.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=o._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},n.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch,t=!this.params.suppressExpandAll,n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search..."));var i=this.columnModel.getAllGridColumns().some((function(e){return e.getOriginalParent()&&e.isFilterAllowed()}));o._.setDisplayed(this.eFilterTextField.getGui(),e),o._.setDisplayed(this.eExpand,t&&i)},n.prototype.onSearchTextChanged=function(){var e=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=o._.debounce((function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},n.prototype.onExpandClicked=function(){var e=this.currentExpandState===t.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(e)},n.prototype.setExpandState=function(e){this.currentExpandState=e,o._.setDisplayed(this.eExpandChecked,this.currentExpandState===t.EXPANDED),o._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===t.COLLAPSED),o._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===t.INDETERMINATE)},s([o.Autowired("columnModel")],n.prototype,"columnModel",void 0),s([o.RefSelector("eExpand")],n.prototype,"eExpand",void 0),s([o.RefSelector("eFilterTextField")],n.prototype,"eFilterTextField",void 0),s([o.PreConstruct],n.prototype,"preConstruct",null),s([o.PostConstruct],n.prototype,"postConstruct",null),n}(o.Component),a=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),p=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},d=function(e){function t(o,n){var i=e.call(this,t.TEMPLATE)||this;return i.expandedCallback=n,i.expanded=!1,i.hideHeader=o,i}return a(t,e),t.prototype.postConstruct=function(){this.eExpandChecked=o._.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=o._.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},t.prototype.setColumn=function(e){var t=this;this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(e){e.key!==o.KeyCode.ENTER&&e.key!==o.KeyCode.SPACE||(e.preventDefault(),t.toggleExpanded())})),this.addManagedListener(this.eventService,o.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),o._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),o._.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(o._.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,o.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,o.Events.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},t.prototype.getColumn=function(){return this.column},t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)},t.prototype.addInIcon=function(e,t,n){if(null!=t){var i=o._.createIconNoSpan(e,this.gridOptionsService,n);t.appendChild(i)}},t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},t.prototype.onFilterChanged=function(){o._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:o.Column.EVENT_FILTER_CHANGED})},t.prototype.onFilterDestroyed=function(e){this.expanded&&("api"===e.source||"paramsUpdated"===e.source)&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement(!0))},t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},t.prototype.expand=function(){this.expanded||(this.expanded=!0,o._.setAriaExpanded(this.eFilterToolPanelHeader,!0),o._.setDisplayed(this.eExpandChecked,!0),o._.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())},t.prototype.addFilterElement=function(e){var t=this,n=o._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(i){var r=i.filterPromise,s=i.guiPromise;null==r||r.then((function(o){t.underlyingFilter=o,o&&s.then((function(i){i&&n.appendChild(i),t.agFilterToolPanelBody.appendChild(n),o.afterGuiAttached&&o.afterGuiAttached({container:"toolPanel",suppressFocus:e})}))}))}},t.prototype.collapse=function(){var e,t;this.expanded&&(this.expanded=!1,o._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),o._.setDisplayed(this.eExpandChecked,!1),o._.setDisplayed(this.eExpandUnchecked,!0),null===(t=null===(e=this.underlyingFilter)||void 0===e?void 0:e.afterGuiDetached)||void 0===t||t.call(e),this.expandedCallback())},t.prototype.removeFilterElement=function(){o._.clearElement(this.agFilterToolPanelBody)},t.prototype.isExpanded=function(){return this.expanded},t.prototype.refreshFilter=function(e){var t;if(this.expanded){var o=this.underlyingFilter;o&&(e?"function"==typeof o.refreshVirtualList&&o.refreshVirtualList():null===(t=o.afterGuiDetached)||void 0===t||t.call(o))}},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.column&&this.expanded&&this.collapse()},t.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',p([o.RefSelector("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0),p([o.RefSelector("eFilterName")],t.prototype,"eFilterName",void 0),p([o.RefSelector("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0),p([o.RefSelector("eFilterIcon")],t.prototype,"eFilterIcon",void 0),p([o.RefSelector("eExpand")],t.prototype,"eExpand",void 0),p([o.Autowired("filterManager")],t.prototype,"filterManager",void 0),p([o.Autowired("columnModel")],t.prototype,"columnModel",void 0),p([o.PostConstruct],t.prototype,"postConstruct",null),t}(o.Component),u=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},h=function(e){function t(t,o,n,i,r){var s=e.call(this)||this;return s.columnGroup=t,s.childFilterComps=o,s.depth=i,s.expandedCallback=n,s.showingColumn=r,s}return u(t,e),t.prototype.preConstruct=function(){this.setTemplate(t.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},t.prototype.init=function(){var e=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-".concat(this.depth)),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(this.depth,"-header")),this.childFilterComps.forEach((function(t){e.filterGroupComp.addItem(t),t.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(e.depth+1,"-header"))})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this;if(this.showingColumn){var t=function(){var t=e.columnGroup.getColDef().headerTooltip;e.setTooltip(t)};t(),this.addManagedListener(this.eventService,o.Events.EVENT_NEW_COLUMNS_LOADED,t)}},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="filterToolPanelColumnGroup",t},t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)},t.prototype.refreshFilters=function(e){this.childFilterComps.forEach((function(o){o instanceof t?o.refreshFilters(e):o.refreshFilter(e)}))},t.prototype.isColumnGroup=function(){return this.columnGroup instanceof o.ProvidedColumnGroup},t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},t.prototype.getChildren=function(){return this.childFilterComps},t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},t.prototype.hideGroupItem=function(e,t){this.filterGroupComp.hideItem(e,t)},t.prototype.hideGroup=function(e){this.setDisplayed(!e)},t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach((function(t){t instanceof d&&e(t)}))},t.prototype.addExpandCollapseListeners=function(){var e=this,t=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild((function(e){return e.expand()}))},n=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild((function(e){return e.collapse()}))};this.addManagedListener(this.filterGroupComp,o.AgGroupComponent.EVENT_EXPANDED,t),this.addManagedListener(this.filterGroupComp,o.AgGroupComponent.EVENT_COLLAPSED,n)},t.prototype.getColumns=function(){return this.columnGroup instanceof o.ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]},t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach((function(t){e.addManagedListener(t,o.Column.EVENT_FILTER_CHANGED,(function(){return e.refreshFilterClass()}))})),this.columnGroup instanceof o.ProvidedColumnGroup||this.addManagedListener(this.eventService,o.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},t.prototype.refreshFilterClass=function(){var e=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e.some((function(e){return e.isFilterActive()})))},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()},t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof o.ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")},t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)},t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),o._.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',c([o.RefSelector("filterGroupComp")],t.prototype,"filterGroupComp",void 0),c([o.Autowired("columnModel")],t.prototype,"columnModel",void 0),c([o.PreConstruct],t.prototype,"preConstruct",null),c([o.PostConstruct],t.prototype,"init",null),t}(o.Component),f=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),y=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},C=function(e){function n(){var t=e.call(this,n.TEMPLATE)||this;return t.initialised=!1,t.hasLoadedInitialState=!1,t.isInitialState=!1,t.filterGroupComps=[],t.suppressOnColumnsChanged=!1,t.onColumnsChangedPending=!1,t}return f(n,e),n.prototype.init=function(e){var t=this;this.initialised=!0;var n=this.gridOptionsService.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});o._.mergeDeep(n,e),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,o.Events.EVENT_COLUMN_MOVED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,o.Events.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,o.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(e){"filters"===e.key&&t.refreshFilters(e.visible)})),this.addManagedListener(this.eventService,o.Events.EVENT_DRAG_STARTED,(function(){t.suppressOnColumnsChanged=!0})),this.addManagedListener(this.eventService,o.Events.EVENT_DRAG_STOPPED,(function(){t.suppressOnColumnsChanged=!1,t.onColumnsChangedPending&&(t.onColumnsChangedPending=!1,t.onColumnsChanged())})),this.columnModel.isReady()&&this.onColumnsChanged();var i=this.getAriaElement();o._.setAriaLive(i,"assertive"),o._.setAriaAtomic(i,!1),o._.setAriaRelevant(i,"text")},n.prototype.onColumnsChanged=function(){if(this.suppressOnColumnsChanged)this.onColumnsChangedPending=!0;else{var e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}},n.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()},n.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)},n.prototype.setFiltersLayout=function(e){var t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)},n.prototype.recreateFilters=function(e){var t=this,n=this.gridOptionsService.getDocument().activeElement;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);var i=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,i);var r=this.filterGroupComps.length;r&&(this.filterGroupComps.forEach((function(e){return t.appendChild(e)})),this.setFirstAndLastVisible(0,r-1)),o._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(n)&&n.focus(),this.isInitialState=!1,this.refreshAriaLabel()},n.prototype.recursivelyAddComps=function(e,t,n){var i=this;return o._.flatten(e.map((function(e){if(e instanceof o.ProvidedColumnGroup)return o._.flatten(i.recursivelyAddFilterGroupComps(e,t,n));var r=e;if(!i.shouldDisplayFilter(r))return[];var s=new d(0===t,(function(){return i.onFilterExpanded()}));if(i.createBean(s),s.setColumn(r),n.get(r.getId())&&s.expand(),t>0)return s;var l=i.createBean(new h(r,[s],i.onGroupExpanded.bind(i),t,!0));return l.addCssClassToTitleBar("ag-filter-toolpanel-header"),n.get(l.getFilterGroupId())||l.collapse(),l})))},n.prototype.refreshAriaLabel=function(){var e=this.localeService.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),n=e("filters","Filters"),i=this.getGui().querySelectorAll("".concat(".ag-filter-toolpanel-group-item",":not(").concat(".ag-filter-toolpanel-group-wrapper",", ").concat(".ag-hidden",")")).length;o._.setAriaLabel(this.getAriaElement(),"".concat(t," ").concat(i," ").concat(n))},n.prototype.recursivelyAddFilterGroupComps=function(e,t,n){if(this.filtersExistInChildren(e.getChildren())){var i=e.getColGroupDef();if(i&&i.suppressFiltersToolPanel)return[];var r=e.isPadding()?t:t+1,s=o._.flatten(this.recursivelyAddComps(e.getChildren(),r,n));if(e.isPadding())return s;var l=new h(e,s,this.onGroupExpanded.bind(this),t,!1);this.createBean(l),l.addCssClassToTitleBar("ag-filter-toolpanel-header");var a=n.get(l.getFilterGroupId());return(this.isInitialState&&!a||!1===a)&&l.collapse(),[l]}},n.prototype.filtersExistInChildren=function(e){var t=this;return e.some((function(e){return e instanceof o.ProvidedColumnGroup?t.filtersExistInChildren(e.getChildren()):t.shouldDisplayFilter(e)}))},n.prototype.shouldDisplayFilter=function(e){var t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t},n.prototype.getExpansionState=function(){var e=new Map;if(this.isInitialState){var t=this.params.initialState,o=t.expandedColIds,n=t.expandedGroupIds;return o.forEach((function(t){return e.set(t,!0)})),n.forEach((function(t){return e.set(t,!0)})),e}var i=function(t){e.set(t.getFilterGroupId(),t.isExpanded()),t.getChildren().forEach((function(t){t instanceof h?i(t):e.set(t.getColumn().getId(),t.isExpanded())}))};return this.filterGroupComps.forEach(i),e},n.prototype.refresh=function(){},n.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},n.prototype.expandFilterGroups=function(e,t){var n=[],i=function(r){var s=r.getFilterGroupId();(!t||o._.includes(t,s))&&(e&&r.isColumnGroup()?r.expand():r.collapse(),n.push(s)),r.getChildren().forEach((function(e){e instanceof h&&i(e)}))};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){var r=t.filter((function(e){return n.indexOf(e)<0}));r.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",r)}},n.prototype.expandFilters=function(e,t){var n=[],i=function(r){if(r instanceof h){var s=!1;return r.getChildren().forEach((function(t){i(t)&&(e?(r.expand(),s=!0):r.isColumnGroup()||r.collapse())})),s}var l=r.getColumn().getColId(),a=!t||o._.includes(t,l);return a&&(e?r.expand():r.collapse(),n.push(l)),a};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){var r=t.filter((function(e){return n.indexOf(e)<0}));r.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",r)}},n.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},n.prototype.onFilterExpanded=function(){this.dispatchEvent({type:"filterExpanded"})},n.prototype.fireExpandedEvent=function(){var e,o=0,n=0,i=function(e){e.isColumnGroup()&&(e.isExpanded()?o++:n++,e.getChildren().forEach((function(e){e instanceof h&&i(e)})))};this.filterGroupComps.forEach(i),e=o>0&&n>0?t.INDETERMINATE:n>0?t.COLLAPSED:t.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:e})},n.prototype.performFilterSearch=function(e){this.searchFilterText=o._.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)},n.prototype.searchFilters=function(e){var t,n,i=function(t){return!o._.exists(e)||-1!==t.toLowerCase().indexOf(e)},r=function(e,t){if(!(e instanceof h))return i(e.getColumnFilterName()||"");var o=e.getChildren(),n=i(e.getFilterGroupName()),s=t||n;if(s){e.hideGroup(!1);for(var l=0;l<o.length;l++)r(o[l],s),e.hideGroupItem(!1,l);return!0}var a=!1;return o.forEach((function(o,n){var i=r(o,t);e.hideGroupItem(!i,n),i&&(a=!0)})),e.hideGroup(!a),a};this.filterGroupComps.forEach((function(e,o){r(e,!1),void 0===t?e.containsCssClass("ag-hidden")||(t=o,n=o):e.containsCssClass("ag-hidden")||n===o||(n=o)})),this.setFirstAndLastVisible(t,n),this.refreshAriaLabel()},n.prototype.setFirstAndLastVisible=function(e,t){this.filterGroupComps.forEach((function(o,n){o.removeCssClass("ag-first-group-visible"),o.removeCssClass("ag-last-group-visible"),n===e&&o.addCssClass("ag-first-group-visible"),n===t&&o.addCssClass("ag-last-group-visible")}))},n.prototype.refreshFilters=function(e){this.filterGroupComps.forEach((function(t){return t.refreshFilters(e)}))},n.prototype.getExpandedFiltersAndGroups=function(){var e=[],t=new Set,o=function(n){if(n instanceof h){n.getChildren().forEach((function(e){return o(e)}));var i=n.getFilterGroupId();n.isExpanded()&&!t.has(i)&&e.push(i)}else n.isExpanded()&&t.add(n.getColumn().getColId())};return this.filterGroupComps.forEach(o),{expandedGroupIds:e,expandedColIds:Array.from(t)}},n.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),o._.clearElement(this.getGui())},n.prototype.destroy=function(){this.destroyFilters(),e.prototype.destroy.call(this)},n.TEMPLATE='<div class="ag-filter-list-panel"></div>',y([o.Autowired("toolPanelColDefService")],n.prototype,"toolPanelColDefService",void 0),y([o.Autowired("columnModel")],n.prototype,"columnModel",void 0),n}(o.Component),m=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),g=function(){return(g=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},E=function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},v=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.initialised=!1,o.listenerDestroyFuncs=[],o}return m(t,e),t.prototype.init=function(e){this.initialised&&(this.listenerDestroyFuncs.forEach((function(e){return e()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var t=this.gridOptionsService.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=g(g({},t),e),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var o=this.params.suppressExpandAll,n=this.params.suppressFilterSearch;o&&n&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)},t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)},t.prototype.onFilterExpanded=function(){this.params.onStateUpdated()},t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()},t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)},t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)},t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!0,e)},t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!1,e)},t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},t.prototype.refresh=function(e){return this.init(e),!0},t.prototype.getState=function(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',E([o.RefSelector("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0),E([o.RefSelector("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0),t}(o.Component),F={version:"31.1.0",moduleName:o.ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:l},{componentName:"AgFiltersToolPanelList",componentClass:C}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:v}],dependantModules:[i.SideBarModule,n.EnterpriseCoreModule]};exports.FiltersToolPanelModule=F;