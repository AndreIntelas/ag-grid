/**
          * @ag-grid-enterprise/charts - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.2
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/charts - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.2
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@ag-grid-community/core"),e=require("@ag-grid-enterprise/core"),i=require("@ag-grid-enterprise/range-selection");class n{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const r=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),o=this._encode(i?this.floor(t):this.ceil(t)),s=this._encode(i?this.ceil(e):this.floor(e));if(s<o)return[];const a=[];for(let t=o;t<=s;t++){const e=this._decode(t);a.push(e)}return null==r||r(),a}}class r extends n{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,r=0;const{snapTo:o="start"}=null!=e?e:{};if("string"==typeof o){const e=r;i=(i,n)=>{const s="start"===o?i:n;return r=this.getOffset(s,t),()=>r=e}}else"number"==typeof o?r=this.getOffset(new Date(o),t):o instanceof Date&&(r=this.getOffset(o,t));return new n(e=>{const i=this._encode(e);return Math.floor((i-r)/t)},e=>this._decode(e*t+r),i)}}const o=new r((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const s=6e4*(new Date).getTimezoneOffset();const a=new r((function(t){return Math.floor((t.getTime()-s)/1e3)}),(function(t){return new Date(s+1e3*t)})),l=6e4*(new Date).getTimezoneOffset();const c=new r((function(t){return Math.floor((t.getTime()-l)/6e4)}),(function(t){return new Date(l+6e4*t)})),h=6e4*(new Date).getTimezoneOffset();const d=new r((function(t){return Math.floor((t.getTime()-h)/36e5)}),(function(t){return new Date(h+36e5*t)}));const u=new r((function(t){const e=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor(e/864e5)}),(function(t){const e=new Date(0);return e.setDate(e.getDate()+t),e.setHours(0,0,0,0),e})),p=new Date(2023,0,1);function f(t){const e=Date.UTC(p.getFullYear(),p.getMonth(),p.getDate())+864e5*t;return new r((function(t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const g=f(0),y=f(1),v=f(2),m=f(3),b=f(4),x=f(5),C=f(6);const S=new r((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const w=new r((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));const O=new r((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)}));const k=new r((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)}));const T=new r((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));const D=new r((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));const P=new r((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));var E=Object.freeze({__proto__:null,millisecond:o,second:a,minute:c,hour:d,day:u,sunday:g,monday:y,tuesday:v,wednesday:m,thursday:b,friday:x,saturday:C,month:S,year:w,utcMinute:O,utcHour:k,utcDay:T,utcMonth:D,utcYear:P});const M=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function R(){const t=navigator.userAgent;return!M.some(e=>e.test(t))}class A{constructor({document:t=window.document,width:e=600,height:i=300,domLayer:n=!1,zIndex:r=0,name:o,overrideDevicePixelRatio:s}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=t,this.element=t.createElement("canvas"),this.element.width=e,this.element.height=i,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:a}=this.element;a.userSelect="none",a.display="block",n&&(a.position="absolute",a.zIndex=String(r),a.top="0",a.left="0",a.pointerEvents="none",a.opacity="1",o&&(this.element.id=o)),this.setPixelRatio(s),this.resize(e,i)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),n=this.document,r=n.createElement("a");r.href=i,r.download=t,r.style.display="none",n.body.appendChild(r),r.click(),n.body.removeChild(r)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;R()||(e=1),A.overrideScale(this.context,e),this._pixelRatio=e}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:r}=this;i.width=Math.round(t*r),i.height=Math.round(e*r),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,i=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const r=this.textMeasuringContext;return r.font=e,r.textBaseline=i,r.textAlign=n,r.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const e=n[t];if(e)return e}else i[e]={};const r=this.svgText;r.style.font=e,r.textContent=t;const o=r.getBBox(),s={width:o.width,height:o.height};return i[e][t]=s,s}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,n,r,o,s){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,n*e,r*e,o*e,s*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=n[e])}}A.textSizeCache={};class _{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new _(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;default:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,r=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>r&&(r=t.y+t.height)}),new _(e,i,n-e,r-i)}}class L{constructor(t=[1,0,0,1,0,0]){this.elements=t}get e(){return[...this.elements]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],r=t[1]*e[0]+t[3]*e[1],o=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=r,i[2]=o,i[3]=s,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new L(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],r=t[3];const o=t[4],s=t[5],a=1/(e*r-i*n);return e*=a,i*=a,n*=a,r*=a,new L([r,-i,-n,e,n*s-r*o,i*o-e*s])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],r=e[2],o=e[3];const s=e[4],a=e[5],l=1/(i*o-n*r);return i*=l,n*=l,r*=l,o*=l,t.setElements([o,-n,-r,i,r*a-o*s,n*s-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],r=t[3];const o=t[4],s=t[5],a=1/(e*r-i*n);return e*=a,i*=a,n*=a,r*=a,t[0]=r,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*s-r*o,t[5]=i*o-e*s,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],r=i[1],o=i[2],s=i[3],a=.5*t.width,l=.5*t.height,c=t.x+a,h=t.y+l,d=Math.abs(a*n)+Math.abs(l*o),u=Math.abs(a*r)+Math.abs(l*s);return e||(e=new _(0,0,0,0)),e.x=c*n+h*o+i[4]-d,e.y=c*r+h*s+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return L.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,r,o,s){const[a,l]=[0,0],c=e,h=i;let d,u;1===c&&1===h?(d=0,u=0):(d=null==(null==s?void 0:s.scalingCenterX)?a:null==s?void 0:s.scalingCenterX,u=null==(null==s?void 0:s.scalingCenterY)?l:null==s?void 0:s.scalingCenterY);const p=n,f=Math.cos(p),g=Math.sin(p);let y,v;0===p?(y=0,v=0):(y=null==(null==s?void 0:s.rotationCenterX)?a:null==s?void 0:s.rotationCenterX,v=null==(null==s?void 0:s.rotationCenterY)?l:null==s?void 0:s.rotationCenterY);const m=r,b=o,x=d*(1-c)-y,C=u*(1-h)-v;return t.setElements([f*c,g*c,-g*h,f*h,f*x-g*C+y+m,g*x+f*C+v+b]),t}static fromContext(t){const e=t.getTransform();return new L([e.a,e.b,e.c,e.d,e.e,e.f])}}L.instance=new L;const N={};function I(t){var e;const i=t.constructor,n=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!n)throw new Error(`The ${i} is missing the 'className' property.`);const r=(null!==(e=N[n])&&void 0!==e?e:0)+1;return N[n]=r,n+"-"+r}var F;!function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(F||(F={}));const j=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function B(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,r){const o="__"+r;n[r]||(j&&null==e&&null==i?function(t,e,i,n){const{redraw:r=F.TRIVIAL,type:o="normal",checkDirtyOnAssignment:s=!1}=null!=n?n:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===o?`this.markDirty(this, ${r});`:""}\n            ${"transform"===o?`this.markDirtyTransform(${r});`:""}\n            ${"path"===o?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${r}); }`:""}\n            ${"font"===o?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${r}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${F.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(n,r,o,t):function(t,e,i,n){const{redraw:r=F.TRIVIAL,type:o="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=null!=n?n:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===o&&this.markDirty(this,r),"transform"===o&&this.markDirtyTransform(r),"path"!==o||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,r)),"font"!==o||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,r)),s&&s(this)),l&&null!=t&&t._dirty>F.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(n,r,o,t))}}class G{constructor(){this._dirty=F.MAJOR}markDirty(t,e=F.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=F.NONE}isDirty(){return this._dirty>F.NONE}}var z,W=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.All=0]="All",t[t.None=1]="None"}(z||(z={}));const V=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class H extends G{constructor(){super(...arguments),this.serialNumber=H._nextSerialNumber++,this.id=I(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new L,this.inverseMatrix=new L,this._dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=z.All}get datum(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum}set datum(t){this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this.children)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){return this._children}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,F.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){if(t.parent===this){const e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,F.MAJOR),t}throw new Error("The node to be removed is not a child of this node.")}insertBefore(t,e){const i=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){const n=this.children.indexOf(e);if(!(n>=0))throw new Error(`${e} has ${i} as the parent, but is not in its list of children.`);this._children.splice(n,0,t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager),this.dirtyZIndex=!0,this.markDirty(t,F.MAJOR)}else this.append(t);return t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=L.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this._dirtyTransform=!0,this.markDirty(this,F.MAJOR)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===z.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let r=n.length-1;r>=0;r--){const o=n[r],s=(null===(i=o.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?o.pickNode(t,e):void 0;if(s)return s}else if(n.length)for(let i=n.length-1;i>=0;i--){const r=n[i].pickNode(t,e);if(r)return r}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=L.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this._dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:r,translationY:o,scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}=this;L.updateTransformMatrix(t,e,i,n,r,o,{scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=F.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:r,height:o}=e,s=this.transformPoint(i,n),a=this.transformPoint(i+r,n+o);t.clearRect(s.x,s.y,a.x-s.x,a.y-s.y)}markDirty(t,e=F.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if((this._dirty!==F.NONE||e)&&(this._dirty=F.NONE,i))for(const t of this.children)t.markClean()}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=F.NONE||this._dirtyTransform?1:0,i=this.visible?1:0;for(const n of this._children){const{count:r,visibleCount:o,dirtyCount:s}=n.nodeCount;t+=r,i+=o,e+=s}return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}function K(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function Y(t,e,i){const n=t=>"function"==typeof t?t():t;for(const r in t){const o=i(n(t[r]),n(e[r]));if(0!==o)return o}return 0}H._nextSerialNumber=0,W([B({type:"transform"})],H.prototype,"scalingX",void 0),W([B({type:"transform"})],H.prototype,"scalingY",void 0),W([B({type:"transform"})],H.prototype,"scalingCenterX",void 0),W([B({type:"transform"})],H.prototype,"scalingCenterY",void 0),W([B({type:"transform"})],H.prototype,"rotationCenterX",void 0),W([B({type:"transform"})],H.prototype,"rotationCenterY",void 0),W([B({type:"transform"})],H.prototype,"rotation",void 0),W([B({type:"transform"})],H.prototype,"translationX",void 0),W([B({type:"transform"})],H.prototype,"translationY",void 0),W([B({redraw:F.MAJOR,changeCb:t=>t.visibilityChanged()})],H.prototype,"visible",void 0),W([B({redraw:F.TRIVIAL,changeCb:V})],H.prototype,"zIndex",void 0),W([B({redraw:F.TRIVIAL,changeCb:V})],H.prototype,"zIndexSubOrder",void 0);const U={};function X(t,e){U[e]||(t(),U[e]=!0)}const $={debug(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},warnOnce(t,...e){X(()=>$.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){X(()=>$.error(t,...e),"Logger.warn: "+t)}};var q=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Z extends H{constructor(t){var e;super(),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:n,name:r}=null!==(i=this.opts)&&void 0!==i?i:{},o=()=>this.getComputedOpacity(),s=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:n,name:r,getComputedOpacity:o,getVisibility:s})}}getComputedOpacity(){let t=1,e=this;do{e instanceof Z&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=F.TRIVIAL){const i=e<=F.MINOR?F.TRIVIAL:e;super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),Z.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={}}=this,{_debug:{consoleLog:r=!1}={}}=this,{dirty:o,dirtyZIndex:s,layer:a,children:l,clipRect:c}=this;let{ctx:h,forceRender:d,clipBBox:u}=t;const{resized:p,stats:f}=t,g=h.getTransform(),y=o>=F.MINOR||s||p,v=y||l.some(t=>t.dirty>=F.TRIVIAL);if(n&&r&&$.debug({name:n,group:this,isDirty:y,isChildDirty:v,renderCtx:t,forceRender:d}),a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)?t.isInfinite()||(d=!1):(d=!0,this.lastBBox=t)}if(!y&&!v&&!d){if(n&&r&&f){const e=this.nodeCount;$.debug({name:n,result:"skipping",renderCtx:t,counts:e,group:this})}return a&&f&&(f.layersSkipped++,f.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}const m=this.visible;if(a){if(h=a.context,h.save(),h.resetTransform(),d=!0,a.clear(),u){const{width:e,height:i,x:o,y:s}=u;r&&$.debug({name:n,clipBBox:u,ctxTransform:h.getTransform(),renderCtx:t,group:this}),this.clipCtx(h,o,s,e,i)}h.setTransform(g)}else h.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(h),c){const{x:e,y:i,width:o,height:s}=c;h.save(),r&&$.debug({name:n,clipRect:c,ctxTransform:h.getTransform(),renderCtx:t,group:this}),this.clipCtx(h,e,i,o,s),u=this.matrix.inverse().transformBBox(c)}s&&(this.sortChildren(),d=!0);const b=d!==t.forceRender||u!==t.clipBBox||h!==t.ctx?Object.assign(Object.assign({},t),{ctx:h,forceRender:d,clipBBox:u}):t;let x=0;for(const t of l)t.visible&&m?d||t.dirty!==F.NONE?(h.save(),t.render(b),h.restore()):f&&(x+=t.nodeCount.count):(t.markClean(),f&&(x+=t.nodeCount.count));if(f&&(f.nodesSkipped+=x),super.render(t),c&&h.restore(),a&&(f&&f.layersRendered++,h.restore(),a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),n&&r&&f){const e=this.nodeCount;$.debug({name:n,result:"rendered",skipped:x,renderCtx:t,counts:e,group:this})}}sortChildren(){this.dirtyZIndex=!1,this.children.sort((t,e)=>{var i,n;return Y([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],K)})}clipCtx(t,e,i,n,r){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+r),t.lineTo(e,i+r),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,r=-1/0;return t.forEach(t=>{if(!t.visible)return;const o=t.computeTransformedBBox();if(!o)return;const s=o.x,a=o.y;s<e&&(e=s),a<n&&(n=a),s+o.width>i&&(i=s+o.width),a+o.height>r&&(r=a+o.height)}),new _(e,n,i-e,r-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}Z.className="Group",q([B({convertor:t=>Math.min(1,Math.max(0,t))})],Z.prototype,"opacity",void 0);class J{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return null!=window.OffscreenCanvas}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;R()||(e=1),A.overrideScale(this.context,e),this._pixelRatio=e}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:r}=this;i.width=Math.round(t*r),i.height=Math.round(e*r),n.resetTransform(),this._width=t,this._height=e}}function Q(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}var tt=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class et{constructor(t){var e,i,n;this.id=I(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,sceneNodeHighlight:[]};const{document:r=window.document,mode:o=(null!==(e=Q("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite"),width:s,height:a,overrideDevicePixelRatio:l}=t;this.overrideDevicePixelRatio=l,this.opts={document:r,mode:o},this.debug.consoleLog=!0===Q("agChartsDebug"),this.debug.stats=null!==(i=Q("agChartsSceneStats"))&&void 0!==i&&i,this.debug.dirtyTree=null!==(n=Q("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=function(){var t;let e=null!==(t=Q("agChartsSceneDebug"))&&void 0!==t?t:[];"string"==typeof e&&(e=[e]);const i=[];return e.forEach(t=>{"layout"===t?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(t)}),i}(),this.canvas=new A({document:r,width:s,height:a,overrideDevicePixelRatio:l})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(i))return;const{zIndex:n=this._nextZIndex++,name:r,zIndexSubOrder:o,getComputedOpacity:s,getVisibility:a}=t,{width:l,height:c,overrideDevicePixelRatio:h}=this,d="dom-composite"===i,u="adv-composite"===i&&J.isSupported()?new J({width:l,height:c,overrideDevicePixelRatio:h}):new A({document:this.opts.document,width:l,height:c,domLayer:d,zIndex:n,name:r,overrideDevicePixelRatio:h}),p={id:this._nextLayerId++,name:r,zIndex:n,zIndexSubOrder:o,canvas:u,getComputedOpacity:s,getVisibility:a};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(p),this.sortLayers(),d){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof A),i=t.findIndex(t=>t===u);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",u.element)}return this.debug.consoleLog&&$.debug({layers:this.layers}),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&$.debug({layers:this.layers}))}moveLayer(t,e,i){const n=this.layers.find(e=>e.canvas===t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&$.debug({layers:this.layers}))}sortLayers(){this.layers.sort((t,e)=>{var i,n;return Y([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],K)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager(this)),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e;return tt(this,void 0,void 0,(function*(){const{debugSplitTimes:i=[performance.now()],extraDebugStats:n={}}=null!=t?t:{},{canvas:r,canvas:{context:o},root:s,layers:a,pendingSize:l,opts:{mode:c}}=this;if(l&&(this.canvas.resize(...l),this.layers.forEach(t=>t.canvas.resize(...l)),this.pendingSize=void 0),s&&!s.visible)return void(this._dirty=!1);if(s&&!this.dirty)return this.debug.consoleLog&&$.debug("no-op",{redrawType:F[s.dirty],tree:this.buildTree(s)}),void this.debugStats(i,o,void 0,n);const h={ctx:o,forceRender:!0,resized:!!l,debugNodes:{}};"detailed"===this.debug.stats&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!s||s.dirty>=F.TRIVIAL)&&(d=!0,r.clear()),s&&this.debug.dirtyTree){const{dirtyTree:t,paths:e}=this.buildDirtyTree(s);$.debug({dirtyTree:t,paths:e})}s&&d&&(this.debug.consoleLog&&$.debug("before",{redrawType:F[s.dirty],canvasCleared:d,tree:this.buildTree(s)}),s.visible&&(o.save(),s.render(h),o.restore())),"dom-composite"!==c&&a.length>0&&d&&(this.sortLayers(),o.save(),o.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),a.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:n})=>{e&&n()&&(o.globalAlpha=i(),o.drawImage(t,0,0))}),o.restore()),null===(e=o.verifyDepthZero)||void 0===e||e.call(o),this._dirty=!1,this.debugStats(i,o,h.stats,n),this.debugSceneNodeHighlight(o,this.debug.sceneNodeHighlight,h.debugNodes),s&&this.debug.consoleLog&&$.debug("after",{redrawType:F[s.dirty],canvasCleared:d,tree:this.buildTree(s)})}))}debugStats(t,e,i,n={}){const r=performance.now();if(this.debug.stats){const o=t[0];t.push(r);const s=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e)=>Math.round(100*(e-t))/100+"ms",{layersRendered:l=0,layersSkipped:c=0,nodesRendered:h=0,nodesSkipped:d=0}=null!=i?i:{},u=t.map((e,i)=>i>0?a(t[i-1],e):null).filter(t=>null!=t).join(" + "),p=Object.entries(n).map(([t,e])=>`${t}: ${e}`).join(" ; "),f=[`${a(o,r)} (${u})`,""+p,"detailed"===this.debug.stats?"Layers: "+s(l,c):null,"detailed"===this.debug.stats?"Nodes: "+s(h,d):null].filter(t=>null!=t).map(t=>[t,A.getTextSize(t,e.font)]),g=Math.max(...f.map(([,{width:t}])=>t)),y=f.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,g,y),e.fillStyle="black";let v=0;for(const[t,i]of f)v+=i.height,e.fillText(t,2,v);e.restore()}}debugSceneNodeHighlight(t,e,i){var n;const r=t=>e=>!!t.test(e.id)||e instanceof Z&&null!=e.name&&t.test(e.name),o=t=>e=>t===e.id||e instanceof Z&&null!=e.name&&t===e.name;for(const t of e){if("string"==typeof t&&null!=i[t])continue;const e="string"==typeof t?o(t):r(t),s=null===(n=this.root)||void 0===n?void 0:n.findNodes(e);if(s&&0!==s.length)for(const t of s)t instanceof Z&&t.name?i[t.name]=t:i[t.id]=t;else $.debug(`no debugging node with id [${t}] in scene graph.`)}t.save();for(const[e,n]of Object.entries(i)){const i=n.computeTransformedBBox();i?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(i.x,i.y,i.width,i.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(e,i.x,i.y,i.width),t.fillText(e,i.x,i.y,i.width)):$.debug(`no bbox for debugged node [${e}].`)}t.restore()}buildTree(t){var e;const i=null!==(e=t instanceof Z?t.name:null)&&void 0!==e?e:t.id;return Object.assign({name:i,node:t,dirty:F[t.dirty]},t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:r,zIndex:o,zIndexSubOrder:s},node:a}=e;(!n||r<=0)&&(i=`(${i})`),a instanceof Z&&a.isLayer()&&(i=`*${i}*`);return t[[""+(null!=i?i:"<unknown>"),"z: "+o,s&&"zo: "+s.join(" / ")].filter(t=>!!t).join(" ")]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===F.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),n=null!==(e=t instanceof Z?t.name:null)&&void 0!==e?e:t.id,r=0===i.length?[n]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${n}.${t}`);return{dirtyTree:Object.assign({name:n,node:t,dirty:F[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:r}}}et.className="Scene";const it=2*Math.PI;function nt(t){return t%=it,t+=it,t%=it}function rt(t){return t/180*Math.PI}class ot extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:n}=this,r=nt(rt(n+90)),o=Math.cos(r),s=Math.sin(r),a=e.width,l=e.height,c=e.x+.5*a,h=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,n=Math.atan2(l,a);let d;d=r<Math.PI/2?r:r<Math.PI?Math.PI-r:r<3*Math.PI/2?r-Math.PI:2*Math.PI-r;const u=e*Math.abs(Math.cos(d-n)),p=t.createLinearGradient(c+o*u,h+s*u,c-o*u,h-s*u);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}var st=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const at=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class lt extends H{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=lt.defaultStyles.fill,this.stroke=lt.defaultStyles.stroke,this.strokeWidth=lt.defaultStyles.strokeWidth,this.lineDash=lt.defaultStyles.lineDash,this.lineDashOffset=lt.defaultStyles.lineDashOffset,this.lineCap=lt.defaultStyles.lineCap,this.lineJoin=lt.defaultStyles.lineJoin,this.opacity=lt.defaultStyles.opacity,this.fillShadow=lt.defaultStyles.fillShadow}static createInstance(t){const e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const n=e[i];this[n]=t[n]}}restoreAllStyles(){const t=this.constructor.defaultStyles;for(const e in t)this[e]=t[e]}restoreOverriddenStyles(){const t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=t[i])}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=at.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],r=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let o;for(;o=r.exec(n);)i.push(o[0]);this.gradient=new ot,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,n,r;const o=null!==(r=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==r?r:1,s=Math.round(t*o)/o;return null==e?s:0===e?0:e<1?Math.ceil(e*o)/o:Math.round((e+t)*o)/o-s}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,r=this.fillShadow;(null==r?void 0:r.enabled)&&(t.shadowColor=r.color,t.shadowOffsetX=r.xOffset*n,t.shadowOffsetY=r.yOffset*n,t.shadowBlur=r.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}lt.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),st([B({redraw:F.MINOR})],lt.prototype,"fillOpacity",void 0),st([B({redraw:F.MINOR})],lt.prototype,"strokeOpacity",void 0),st([B({redraw:F.MINOR,changeCb:t=>t.updateGradient()})],lt.prototype,"fill",void 0),st([B({redraw:F.MINOR})],lt.prototype,"stroke",void 0),st([B({redraw:F.MINOR})],lt.prototype,"strokeWidth",void 0),st([B({redraw:F.MINOR})],lt.prototype,"lineDash",void 0),st([B({redraw:F.MINOR})],lt.prototype,"lineDashOffset",void 0),st([B({redraw:F.MINOR})],lt.prototype,"lineCap",void 0),st([B({redraw:F.MINOR})],lt.prototype,"lineJoin",void 0),st([B({redraw:F.MINOR,convertor:t=>Math.min(1,Math.max(0,t))})],lt.prototype,"opacity",void 0),st([B({redraw:F.MINOR,checkDirtyOnAssignment:!0})],lt.prototype,"fillShadow",void 0);var ct=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function ht(t){const{redraw:e=F.MAJOR,changeCb:i}=null!=t?t:{};return B({redraw:e,type:"font",changeCb:i})}class dt extends lt{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=dt.defaultStyles.textAlign,this.textBaseline=dt.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=vt(this.text)}get font(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=ut(this)),this._font}computeBBox(){return A.has.textMetrics?ft(this.lines,this.x,this.y,this):gt(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(A.has.textMetrics){const n=A.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return A.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===F.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:r,stroke:o,strokeWidth:s}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(r){e.fillStyle=r,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,n)=>e.fillText(t,i,n))}if(o&&s){e.strokeStyle=o,e.lineWidth=s,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:r}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),r&&(e.lineJoin=r),this.renderLines((t,i,n)=>e.strokeText(t,i,n))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,r=this.lines.map(t=>this.getLineHeight(t));let o=-(r.reduce((t,e)=>t+e,0)-r[0])*yt(this.textBaseline);for(let s=0;s<e.length;s++)t(e[s],i,n+o),o+=r[s]}static wrap(t,e,i,n,r){const o=function(t){const e=new Map,i=e=>A.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:n}=i(t);return e.set(t,n),n}}}(ut(n)),s=t.split(/\r?\n/g);if(0===s.length)return"";if("never"===r)return dt.truncateLine(s[0],e,o,!1);const a=[];let l=0;for(const t of s){const s=dt.wrapLine(t,e,i,o,n,r,l);if(a.push(s.result),l=s.cumulativeHeight,s.truncated)break}return a.join("\n").trim()}static wrapLine(t,e,i,n,r,o,s){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};const a=n.size(t);if(a.width<=e)return{result:t,truncated:!1,cumulativeHeight:s+a.height};if(a.height>i||n.width("W")>e)return{result:"",truncated:!0,cumulativeHeight:s};const l=t.split(/\s+/g),c=dt.wrapLineSequentially(l,e,i,n,r,o,s);s=c.cumulativeHeight;let{lines:h}=c;if(!c.wordsBrokenOrTruncated&&!c.linesTruncated){const t=c.lines.length,i=dt.wrapLineBalanced(l,e,n,t);i.length===h.length&&(h=i)}return{result:h.map(t=>t.join(" ")).join("\n"),truncated:c.linesTruncated,cumulativeHeight:s}}static breakWord(t,e,i,n,r){const o=e=>dt.punctuationMarks.includes(t[e]),s=n?r.width("-"):0,a=[];let l=0,c=0;for(let n=0;n<t.length;n++){const o=t[n],h=r.width(o);l+h+s>(0===c?e:i)&&(a.push(n),l=0,c++),l+=h}const h=[];let d=0;for(const e of a){let i=t.substring(d,e);n&&i.length>0&&!o(e-1)&&!o(e)&&(i+="-"),h.push(i),d=e}return h.push(t.substring(d)),h}static truncateLine(t,e,i,n){const r=i.width(t);if(r<e&&!n)return t;const o=i.width("\u2026");if(r+o<=e)return t+"\u2026";let s,a,l=Math.floor(t.length*e/r)+1;do{s=t.substring(0,l),a=i.width(s)}while(--l>=0&&a+o>e);return s+"\u2026"}static wrapLineSequentially(t,e,i,n,r,o,s){const{fontSize:a,lineHeight:l=a*dt.defaultLineHeightRatio}=r,c="always"===o||"hyphenate"===o,h="hyphenate"===o,d=n.width(" ");let u=!1,p=!1;const f=[];let g=[],y=0;const v=()=>{const t=s+l;if(t>=i){const t=g.join(" "),i=dt.truncateLine(t,e,n,!0);return g.splice(0,g.length,i),p=!0,!1}return g=[],y=0,s=t,f.push(g),!0};if(!v())return{lines:f,linesTruncated:!0,wordsBrokenOrTruncated:u,cumulativeHeight:s};for(let i=0;i<t.length;i++){const r=t[i],o=n.width(r),s=0===g.length?0:d,a=y+s+o;if(a<=e)g.push(r),y=a;else if(o<=e){if(!v())break;g.push(r),y=o}else{if(u=!0,!c){if(!v())break;const o=dt.truncateLine(r,e,n,!0);g.push(o),i<t.length-1&&(p=!0);break}{const t=e-y-s,i=dt.breakWord(r,t,e,h,n);let o=!1;for(let t=0;t<i.length;t++){const e=i[t];if(e&&g.push(e),t===i.length-1)y=n.width(e);else if(!v()){o=!0;break}}if(o)break}}}return{lines:f,linesTruncated:p,wordsBrokenOrTruncated:u,cumulativeHeight:s}}static wrapLineBalanced(t,e,i,n){const r=t.reduce((t,e)=>t+i.width(e),0),o=i.width(" "),s=(r+o*(t.length-n-2))/n,a=[];let l=[],c=i.width(t[0]),h=!0;for(const n of t){const t=i.width(n);if(h){l=[],l.push(n),c=t,h=!1,a.push(l);continue}const r=c+o+t;r<=s?(l.push(n),c=r):r<=e?(l.push(n),h=!0):(l=[n],c=t,a.push(l))}return a}}function ut(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:r}=t;return[null!=n?n:"",null!=r?r:"",i+"px",e].join(" ").trim()}function pt(t,e,i,n){return A.has.textMetrics?ft(t,e,i,n):gt(t,e,i,n)}function ft(t,e,i,n){var r,o;let s=0,a=0,l=0,c=0,h=0;const d=ut(n),{lineHeight:u,textBaseline:p=dt.defaultStyles.textBaseline,textAlign:f=dt.defaultStyles.textAlign}=n;for(let e=0;e<t.length;e++){const i=A.measureText(t[e],d,p,f);s=Math.max(s,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,c+=i.actualBoundingBoxAscent):h+=null!==(r=i.fontBoundingBoxAscent)&&void 0!==r?r:i.emHeightAscent,e==t.length-1?c+=i.actualBoundingBoxDescent:h+=null!==(o=i.fontBoundingBoxDescent)&&void 0!==o?o:i.emHeightDescent}return void 0!==u&&(h=(t.length-1)*u),c+=h,a+=h*yt(p),new _(e-s,i-a,l,c)}function gt(t,e,i,n){let r=0,o=0,s=0;const a=ut(n),{lineHeight:l,textBaseline:c=dt.defaultStyles.textBaseline,textAlign:h=dt.defaultStyles.textAlign}=n;if(t.length>0){const e=A.getTextSize(t[0],a);r=e.width,o=e.height}for(let e=1;e<t.length;e++){const i=A.getTextSize(t[e],a);r=Math.max(r,i.width),s+=null!=l?l:i.height}switch(h){case"end":case"right":e-=r;break;case"center":e-=r/2}switch(c){case"alphabetic":i-=.7*o+.5*s;break;case"middle":i-=.45*o+.5*s;break;case"ideographic":i-=o+s;break;case"hanging":i-=.2*o+.5*s;break;case"bottom":i-=o+s}return new _(e,i,r,o+s)}function yt(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function vt(t){return"string"==typeof t?t.split(/\r?\n/g):[]}dt.className="Text",dt.defaultLineHeightRatio=1.15,dt.defaultStyles=Object.assign({},lt.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),dt.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],ct([B({redraw:F.MAJOR})],dt.prototype,"x",void 0),ct([B({redraw:F.MAJOR})],dt.prototype,"y",void 0),ct([B({redraw:F.MAJOR,changeCb:t=>t._setLines()})],dt.prototype,"text",void 0),ct([ht()],dt.prototype,"fontStyle",void 0),ct([ht()],dt.prototype,"fontWeight",void 0),ct([ht()],dt.prototype,"fontSize",void 0),ct([ht()],dt.prototype,"fontFamily",void 0),ct([B({redraw:F.MAJOR})],dt.prototype,"textAlign",void 0),ct([B({redraw:F.MAJOR})],dt.prototype,"textBaseline",void 0),ct([B({redraw:F.MAJOR})],dt.prototype,"lineHeight",void 0);class mt{constructor(){this.allEventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let n=i.get(t);n||(n=new Set,i.set(t,n)),n.has(e)||n.add(e)}removeEventListener(t,e){const{allEventListeners:i}=this,n=i.get(t);n&&(n.delete(e),0===n.size&&i.delete(t))}hasEventListener(t){return this.allEventListeners.has(t)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(t){const e=this.allEventListeners.get(t.type);null==e||e.forEach(e=>e(t))}}const bt=t=>"string"==typeof t;function xt(t){return bt(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"toString")&&bt(e.toString());var e}function Ct(t){return wt(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&wt(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function St(t,e){return e&&Ct(t)?t:e?void 0:xt(t)?t:String(t)}const wt=t=>"number"==typeof t&&Number.isFinite(t);class Ot{constructor(t,e,i,n=1){this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,n||0))}static validColorString(t){return t.indexOf("#")>=0?!!Ot.parseHex(t):t.indexOf("rgb")>=0?!!Ot.stringToRgba(t):!!Ot.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return Ot.fromHexString(t);const e=Ot.nameToHex[t.toLowerCase()];if(e)return Ot.fromHexString(e);if(t.indexOf("rgb")>=0)return Ot.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return Ot.fromString(t)}catch(e){return $.warnOnce(`invalid color string: '${t}'.`),Ot.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=Ot.parseHex(t);if(e){const[t,i,n,r]=e;return new Ot(t/255,i/255,n/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let n=0;n<t.length;n++){const r=t[n];if(e||"("!==r){if(")"===r){i=n;break}}else e=n}const n=e&&i&&t.substring(e+1,i);if(!n)return;const r=n.split(","),o=[];for(let t=0;t<r.length;t++){const e=r[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),o.push(i)}return o}static fromRgbaString(t){const e=Ot.stringToRgba(t);if(e){if(3===e.length)return new Ot(e[0],e[1],e[2]);if(4===e.length)return new Ot(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new Ot(t[0],t[1],t[2],t[3]);if(3===t.length)return new Ot(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const r=Ot.HSBtoRGB(t,e,i);return new Ot(r[0],r[1],r[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+Ot.padHex(Math.round(255*this.r).toString(16))+Ot.padHex(Math.round(255*this.g).toString(16))+Ot.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=Ot.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return Ot.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),r=Math.max(t,e,i);let o=NaN;if(n!==r){const s=r-n,a=(r-t)/s,l=(r-e)/s,c=(r-i)/s;o=t===r?c-l:e===r?2+a-c:4+l-a,o/=6,o<0&&(o+=1)}return[360*o,0!==r?(r-n)/r:0,r]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,r=0,o=0;if(0===e)n=r=o=i;else{const s=6*(t-Math.floor(t)),a=s-Math.floor(s),l=i*(1-e),c=i*(1-e*a),h=i*(1-e*(1-a));switch(s>>0){case 0:n=i,r=h,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=h;break;case 3:n=l,r=c,o=i;break;case 4:n=h,r=l,o=i;break;case 5:n=i,r=l,o=c}}return[n,r,o]}derive(t,e,i,n){const r=Ot.RGBtoHSB(this.r,this.g,this.b);let o=r[2];0==o&&i>1&&(o=.05);const s=((r[0]+t)%360+360)%360,a=Math.max(Math.min(r[1]*e,1),0);o=Math.max(Math.min(o*i,1),0);const l=Math.max(Math.min(this.a*n,1),0),c=Ot.HSBtoRGB(s,a,o);return c.push(l),Ot.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=Ot.tryParseFromString(t),n=Ot.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new Ot(e(i.r,n.r),e(i.g,n.g),e(i.b,n.b),e(i.a,n.a)).toString()}}}Ot.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const kt=Symbol("BREAK");function Tt(t,e){return(i,n)=>{const r=n.toString(),o="__"+r,{getters:s,setters:a}=function(t,e,i,n){null==Object.getOwnPropertyDescriptor(t,"__decorator_config")&&Object.defineProperty(t,"__decorator_config",{value:{}});const r=t.__decorator_config;if(null!=r[i])return r[i];r[i]={setters:[],getters:[]};const o=Object.getOwnPropertyDescriptor(t,e),s=null==o?void 0:o.set,a=null==o?void 0:o.get;return Object.defineProperty(t,e,{set:function(t){var o,l;const c=null!==(l=null===(o=r[i])||void 0===o?void 0:o.setters)&&void 0!==l?l:[];let h;c.some(t=>t.length>2)&&(h=a?a.call(this):this[n]);for(const i of c)if((t=i(this,e,t,h))===kt)return;s?s.call(this,t):this[n]=t},get:function(){var t,o;let s=a?a.call(this):this[n];for(const n of null!==(o=null===(t=r[i])||void 0===t?void 0:t.getters)&&void 0!==o?o:[])if(s=n(this,e,s),s===kt)return;return s},enumerable:!0,configurable:!1}),r[i]}(i,n,r,o);a.push(t),e&&s.splice(0,0,e)}}function Dt(t){return Tt((e,i,n)=>{var r,o,s;if(t(n,{target:e}))return n;const a=i.toString().replace(/^_*/,"");let l=null!==(o=null===(r=e.constructor)||void 0===r?void 0:r.className)&&void 0!==o?o:null===(s=e.constructor)||void 0===s?void 0:s.name;(null==l?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return t.message?$.warn(`Property [${a}] ${c}cannot be set to [${JSON.stringify(n)}]; ${t.message}, ignoring.`):$.warn(`Property [${a}] ${c}cannot be set to [${JSON.stringify(n)}], ignoring.`),kt})}function Pt(t,e){return t.message=e,t}const Et=(t,e,i)=>void 0===t||i(t,e),Mt=(t,e)=>Pt((i,n)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,n))),"expecting an Array"),Rt=t=>Pt((e,i)=>Et(e,i,Mt(t)),"expecting an optional Array"),At=(...t)=>Pt((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),_t=t=>null!=t&&!isNaN(t),Lt=t=>Pt((e,i)=>!_t(e)||!_t(i.target[t])||e<i.target[t],"expected to be less than "+t),Nt=t=>Pt((e,i)=>!_t(e)||!_t(i.target[t])||e>i.target[t],"expected to be greater than "+t),It=Pt(t=>"function"==typeof t,"expecting a Function"),Ft=Pt((t,e)=>Et(t,e,It),"expecting an optional Function"),jt=Pt(t=>!0===t||!1===t,"expecting a Boolean"),Bt=Pt((t,e)=>Et(t,e,jt),"expecting an optional Boolean"),Gt=Pt(t=>"string"==typeof t,"expecting a String"),zt=Pt((t,e)=>Et(t,e,Gt),"expecting an optional String"),Wt=Pt(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),Vt=Pt((t,e)=>Et(t,e,Wt),"expecting an optional Date");Pt(Mt(void 0,Wt),"expecting an Array of Date objects");const Ht=Zt(0),Kt=((...t)=>Pt((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Vt,Pt((t,e)=>Et(t,e,Ht),"expecting an optional number")),Yt="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Ut=Pt(t=>"string"==typeof t&&Ot.validColorString(t),"expecting a color String. "+Yt),Xt=Pt((t,e)=>Et(t,e,Ut),"expecting an optional color String. "+Yt),$t=Pt(Mt(void 0,Ut),"expecting an Array of color strings. "+Yt),qt=Pt((t,e)=>Et(t,e,$t),"expecting an optional Array of color strings. "+Yt);function Zt(t,e){return Pt(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Jt(t,e){return Pt((i,n)=>Et(i,n,Zt(t,e)),"expecting an optional finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Qt(t,e){return Pt(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}const te=Pt(Mt(void 0,Zt()),"expecting an Array of numbers"),ee=Pt((t,e)=>Et(t,e,te),"expecting an optional Array of numbers"),ie=Pt(Mt(void 0,Gt),"expecting an Array of strings");function ne(...t){return Pt(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}Pt((t,e)=>Et(t,e,ie),"expecting an optional Array of strings");const re=Pt(Mt(void 0,jt),"expecting an Array of boolean values");Pt((t,e)=>Et(t,e,re),"expecting an optional Array of boolean values");const oe=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],se=Pt(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),ae=Pt((t,e)=>Et(t,e,se),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),le=Pt(t=>oe.includes(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),ce=Pt((t,e)=>Et(t,e,le),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),he=Pt(Mt(void 0,Zt(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),de=Pt((t,e)=>Et(t,e,he),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),ue=["butt","round","square"],pe=Pt(t=>ue.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");Pt((t,e)=>Et(t,e,pe),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const fe=["round","bevel","miter"],ge=Pt(t=>fe.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");Pt((t,e)=>Et(t,e,ge),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const ye=["top","right","bottom","left"],ve=Pt(t=>ye.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),me=["exact","nearest"],be=Pt(t=>"number"==typeof t&&Number.isFinite(t)||me.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),xe=["never","always","hyphenate","on-space"],Ce=Pt(t=>xe.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var Se,we;function Oe(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function ke(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function Te(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),wt(e)&&wt(i)?[e,i]:[])}!function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(Se||(Se={})),function(t){t.X="x",t.Y="y"}(we||(we={}));const De=Symbol("invalid");class Pe{constructor(t){var e;const{props:i}=t;let n=!0;for(const t of i){if("key"===t.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=i.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.values=i.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.aggregates=i.filter(t=>"aggregate"===t.type),this.groupProcessors=i.filter(t=>"group-value-processor"===t.type),this.propertyProcessors=i.filter(t=>"property-value-processor"===t.type),this.reducers=i.filter(t=>"reducer"===t.type),this.processors=i.filter(t=>"processor"===t.type);for(const{properties:t}of null!==(e=this.aggregates)&&void 0!==e?e:[])if(0!==t.length)for(const e of t){if("string"==typeof e&&!this.values.some(t=>t.property===e))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`);if("string"!=typeof e&&!this.values.some(t=>t.id===e.id))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`)}}resolveProcessedDataIndexById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return"key"===(null==n?void 0:n.type)||"value"===(null==n?void 0:n.type)?{type:n.type,index:n.index}:void 0}resolveProcessedDataDefById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return n}getDomain(t,e){const i=this.resolveProcessedDataIndexById(t);return i?e.domain["key"===i.type?"keys":"values"][i.index]:[]}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:r,reducers:o,processors:s,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=!1;if(e&&0===this.keys.length)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),r.length>0&&this.postProcessGroups(c),n.length>0&&this.aggregateData(c),a.length>0&&this.postProcessProperties(c),o.length>0&&this.reduceData(c),s.length>0&&this.postProcessData(c);for(const t of[...this.keys,...this.values])t.missing&&$.warnOnce(`the key '${t.property}' was not found in at least one data element.`);const h=performance.now();return c.time=h-l,Pe.DEBUG()&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(console.log(t),console.table(e))};if(console.log({processedData:t}),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,n;const r=null!==(i=e.keys)&&void 0!==i?i:[],o=null!==(n=e.aggValues)&&void 0!==n?n:[],s=e.keys.map(()=>{}),a=null==o?void 0:o.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?r:s,...null!=t?t:[],...0==e?o:a])),t},[]);n("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const n=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...n]),t},[]);n("Values",e)}}(c),c}valueIdxLookup(t){let e;if(e="string"==typeof t?this.values.findIndex(e=>e.property===t):this.values.findIndex(e=>e.id===t.id),e>=0)return e;throw new Error("AG Charts - configuration error, unknown property: "+t)}extractData(t){const{keys:e,values:i,opts:{dataVisible:n}}=this,{dataDomain:r,processValue:o}=this.initDataDomainProcessor(),s=new Array(n?t.length:0);let a=0;for(const r of t){const t=n?new Array(e.length):void 0;let l,c=0;for(const i of e){if(l=o(i,r,l),l===De)break;t&&(t[c++]=l)}if(l===De)continue;const h=n&&i.length>0?new Array(i.length):void 0;let d,u=0;for(const t of i){if(d=o(t,r,d),d===De)break;h&&(h[u++]=d)}d!==De&&(n&&(s[a++]={datum:r,keys:t,values:h}))}s.length=a;const l=t=>{var e;const i=r.get(null!==(e=t.id)&&void 0!==e?e:t.property).domain;return Array.isArray(i)&&i[0]>i[1]?[]:[...i]};return{type:"ungrouped",data:s,domain:{keys:e.map(t=>l(t)),values:i.map(t=>l(t))},indices:{keys:e.reduce((t,{property:e,index:i})=>(t[e]=i,t),{}),values:i.reduce((t,{property:e,index:i})=>(t[e]=i,t),{})},defs:{keys:e,values:i},time:0}}groupData(t,e){const i=new Map;for(const n of t.data){const{keys:t,values:r,datum:o}=n,s=e?e(n):t,a=ke(s);if(i.has(a)){const t=i.get(a);t.values.push(r),t.datum.push(o)}else i.set(a,{keys:s,values:[r],datum:[o]})}const n=new Array(i.size),r=new Array(i.size);let o=0;for(const[,{keys:t,values:e,datum:s}]of i.entries())r[o]=t,n[o++]={keys:t,values:e,datum:s};return Object.assign(Object.assign({},t),{type:"grouped",data:n,domain:Object.assign(Object.assign({},t.domain),{groups:r})})}aggregateData(t){var e,i,n,r,o,s,a;const{aggregates:l}=this;if(!l)return;const c=l.map(()=>[1/0,-1/0]),h=l.map(t=>t.properties.map(t=>this.valueIdxLookup(t))),d=l.map(t=>t.aggregateFunction),u=l.map(t=>t.groupAggregateFunction),p=l.map(t=>t.finalFunction);for(const l of t.data){let{values:f}=l;null!==(e=l.aggValues)&&void 0!==e||(l.aggValues=new Array(h.length)),"ungrouped"===t.type&&(f=[f]);let g=0;for(const t of h){let e=null!==(n=null===(i=u[g])||void 0===i?void 0:i.call(u))&&void 0!==n?n:Oe([]);for(const i of f){const n=t.map(t=>i[t]),s=d[g](n,l.keys);s&&(e=null!==(o=null===(r=u[g])||void 0===r?void 0:r.call(u,s,e))&&void 0!==o?o:Oe(s,e))}const h=(null!==(a=null===(s=p[g])||void 0===s?void 0:s.call(p,e))&&void 0!==a?a:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});Oe(h,c[g]),l.aggValues[g++]=h}}t.domain.aggValues=c}postProcessGroups(t){const{groupProcessors:e}=this;if(e)for(const i of e){const e=i.properties.map(t=>this.valueIdxLookup(t)),n=i.adjust();if("grouped"===t.type)for(const i of t.data)for(const t of i.values)t&&n(t,e);else for(const i of t.data)i.values&&n(i.values,e)}}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n}of e)i()(t,this.valueIdxLookup(n))}reduceData(t){var e;const{reducers:i}=this,n=i.map(t=>t.reducer()),r=i.map(t=>t.initialValue);for(const e of t.data){let t=0;for(const i of n)r[t]=i(r[t],e),t++}for(let n=0;n<r.length;n++)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[i[n].property]=r[n]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Map,n=new Map,r=(t,e,i)=>{"category"===e?i.set(t,{type:e,domain:new Set}):i.set(t,{type:e,domain:[1/0,-1/0]})},o=(n=i)=>(t.forEach(t=>{var e;return r(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),e.forEach(t=>{var e;return r(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),n);o();return{dataDomain:i,processValue:(t,e,r)=>{var s,a,l,c,h;const d=t.property in e,u="missingValue"in t;t.missing||d||u||(t.missing=!0),i.has(null!==(s=t.id)&&void 0!==s?s:t.property)||o(i);let p=d?e[t.property]:t.missingValue;if(d){if(!(null===(l=null===(a=t.validation)||void 0===a?void 0:a.call(t,p))||void 0===l||l)){if(!("invalidValue"in t))return De;p=t.invalidValue}}t.processor&&(n.has(t)||n.set(t,t.processor()),p=null===(c=n.get(t))||void 0===c?void 0:c(p,r!==De?r:void 0));const f=i.get(null!==(h=t.id)&&void 0!==h?h:t.property);return"category"===(null==f?void 0:f.type)?f.domain.add(p):"range"===(null==f?void 0:f.type)&&(f.domain[0]>p&&(f.domain[0]=p),f.domain[1]<p&&(f.domain[1]=p)),p},initDataDomain:o}}}function Ee(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(t=>null!=t).join(" ");$.warnOnce(i)}}Pe.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(Q("agChartsDebug")))&&void 0!==t&&t};var Me=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function Re(t,e){var i,n,r,o;if("string"==typeof t)return t;e=null!=e?e:{};const{content:s=(null!==(i=e.content)&&void 0!==i?i:""),title:a=(null!==(n=e.title)&&void 0!==n?n:void 0),color:l=(null!==(r=e.color)&&void 0!==r?r:"white"),backgroundColor:c=(null!==(o=e.backgroundColor)&&void 0!==o?o:"#888")}=t;return`${a?`<div class="ag-chart-tooltip-title"\n        style="color: ${l}; background-color: ${c}">${a}</div>`:""}<div class="ag-chart-tooltip-content">${s}</div>`}const Ae=["pointer","node"],_e=Pt(t=>Ae.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class Le{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}Me([Dt(_e)],Le.prototype,"type",void 0),Me([Dt(Zt())],Le.prototype,"xOffset",void 0),Me([Dt(Zt())],Le.prototype,"yOffset",void 0);class Ne{constructor(t,e,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new Le,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,window.IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}if(Ne.tooltipDocuments.indexOf(e)<0){const t=e.createElement("style");t.innerHTML='\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',e.head.insertBefore(t,e.head.querySelector("style")),Ne.tooltipDocuments.push(e)}}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:r,enableInteraction:o}=this,s=(t,e)=>{const n="ag-chart-tooltip-"+t;e?i.classList.add(n):i.classList.remove(n)};s("no-animation",!this.isVisible()&&!!t),s("no-interaction",!o),s("hidden",!t),s("arrow",!!e),n!==r&&(r&&i.classList.remove(r),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,r,o,s,a,l,c;const{element:h,canvasElement:d}=this;if(void 0!==e)h.innerHTML=e;else if(!h.innerHTML)return;const u=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(r=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==r?r:0,f=null!==(s=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==s?s:0,g=d.getBoundingClientRect(),y=g.left+t.offsetX-h.clientWidth/2+p,v=g.top+t.offsetY-h.clientHeight-8+f,m=this.getWindowBoundingBox(),b=m.x+m.width-h.clientWidth-1,x=m.y+m.height-h.clientHeight,C=u(m.x,y,b),S=u(m.y,v,x),w=!(C!==y||S!==v)&&!p&&!f,O=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(O),h.style.transform=`translate(${Math.round(C)}px, ${Math.round(S)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new _(0,0,window.innerWidth,window.innerHeight)}toggle(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}}function Ie(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Fe(t){return{properties:t,type:"aggregate",aggregateFunction:t=>Ie(t)}}function je(t,e){const i={properties:t,type:"aggregate",aggregateFunction:(t,i=[])=>{const n=i[1]-i[0];return e.aggregateFunction(t).map(t=>t/n)}};return e.groupAggregateFunction&&(i.groupAggregateFunction=e.groupAggregateFunction),i}Ne.tooltipDocuments=[],Me([Dt(jt)],Ne.prototype,"enabled",void 0),Me([Dt(Bt)],Ne.prototype,"showArrow",void 0),Me([Dt(zt)],Ne.prototype,"class",void 0),Me([Dt(Zt(0))],Ne.prototype,"delay",void 0),Me([function(t,e){const i=Ee();return Tt((n,r,o)=>(o!==n[t]&&(i(r.toString(),`Use [${t}] instead.`),n[t]=e?e(o):o),kt),(e,n)=>(i(n.toString(),`Use [${t}] instead.`),e[t]))}("range",t=>t?"nearest":"exact")],Ne.prototype,"tracking",void 0),Me([Dt(be)],Ne.prototype,"range",void 0);var Be,Ge=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ze=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};function We(t,e,i={}){return Object.assign({property:t,type:"key",valueType:e?"range":"category",validation:t=>null!=St(t,e)},i)}function Ve(t,e,i={}){return Object.assign({property:t,type:"value",valueType:e?"range":"category",validation:t=>null!=St(t,e)},i)}function He(t,e,i={}){return Object.assign(Object.assign({},Ve(t,e,i)),{processor:()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=e,t)}})}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Be||(Be={}));class Ke{constructor(t,e,i){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=i.id}}class Ye extends Ke{}class Ue extends Ke{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Xe{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}Ge([Dt(Xt)],Xe.prototype,"fill",void 0),Ge([Dt(Jt(0,1))],Xe.prototype,"fillOpacity",void 0),Ge([Dt(Xt)],Xe.prototype,"stroke",void 0),Ge([Dt(Jt(0))],Xe.prototype,"strokeWidth",void 0);class $e{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}Ge([Dt(Jt(0))],$e.prototype,"strokeWidth",void 0),Ge([Dt(Jt(0,1))],$e.prototype,"dimOpacity",void 0),Ge([Dt(Bt)],$e.prototype,"enabled",void 0);class qe{constructor(){this.color="black"}}Ge([Dt(Xt)],qe.prototype,"color",void 0);class Ze{constructor(){this.item=new Xe,this.series=new $e,this.text=new qe}}class Je{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new Qe,this.position=new Le}}Ge([Dt(jt)],Je.prototype,"enabled",void 0),Ge([Dt(Bt)],Je.prototype,"showArrow",void 0);class Qe{constructor(){this.enabled=!1}}Ge([Dt(jt)],Qe.prototype,"enabled",void 0);class ti extends mt{constructor(t){super(),this.id=I(this),this.rootGroup=new Z({name:"seriesRoot"}),this.directions=[we.X,we.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this._declarationOrder=-1,this.highlightStyle=new Ze,this.ctx=t.moduleCtx;const{useSeriesGroupLayer:e=!0,useLabelLayer:i=!1,pickModes:n=[Be.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:r={},directionNames:o={}}=t,{rootGroup:s}=this;this.directionKeys=r,this.directionNames=o,this.contentGroup=s.appendChild(new Z({name:this.id+"-content",layer:e,zIndex:Se.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,0]})),this.highlightGroup=s.appendChild(new Z({name:this.id+"-highlight",layer:!0,zIndex:Se.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,15e3]})),this.highlightNode=this.highlightGroup.appendChild(new Z({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new Z({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=n,i&&(this.labelGroup=s.appendChild(new Z({name:this.id+"-series-labels",layer:!0,zIndex:Se.SERIES_LABEL_ZINDEX})))}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}getBandScalePadding(){return{inner:1,outer:0}}addChartEventListeners(){}destroy(){}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],r=[],o=(...t)=>{for(const e of t)s(e)},s=t=>{Array.isArray(t)?o(...t):"object"==typeof t?o(Object.values(t)):r.push(t)};return n?(n.forEach(t=>{const e=this[t];s(e)}),r):r}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){}getOpacity(t){const{highlightStyle:{series:{dimOpacity:e=1,enabled:i=!0}}}=this;if(!1===i||1===e)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return e}}getStrokeWidth(t,e){const{highlightStyle:{series:{strokeWidth:i,enabled:n=!0}}}=this;if(!1===n||void 0===i)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}}isItemIdHighlighted(t){var e;const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),{series:n,itemId:r}=null!=i?i:{};return null!=n?n!==this?"other-highlighted":void 0===r?"highlighted":t&&i!==t&&r!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:r}=this;if(n&&r.visible)for(const n of i){if(e&&!e.includes(n))continue;let i=void 0;switch(n){case Be.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case Be.NEAREST_BY_MAIN_AXIS_FIRST:case Be.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,n===Be.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Be.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:n,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){const i=this.getNodeClickEvent(t,e);this.fireEvent(i)}fireNodeDoubleClickEvent(t,e){const i=this.getNodeDoubleClickEvent(t,e);this.fireEvent(i)}getNodeClickEvent(t,e){return new Ye(t,e,this)}getNodeDoubleClickEvent(t,e){return new Ue(t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(t,e){var i;const n=Te(t);if(0===n.length)return n;let[r,o]=n;if(r===o){const t=null!==(i=null==e?void 0:e.calculatePadding(r,o))&&void 0!==i?i:1;r-=t,o+=t}return[r,o]}}ti.highlightedZIndex=1e12,Ge([Dt(Gt)],ti.prototype,"id",void 0),Ge([Dt(jt)],ti.prototype,"_visible",void 0),Ge([Dt(jt)],ti.prototype,"showInLegend",void 0),Ge([Dt(Gt)],ti.prototype,"cursor",void 0),Ge([Dt(be)],ti.prototype,"nodeClickRange",void 0);var ei=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class ii{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}ei([Dt(Zt(0))],ii.prototype,"top",void 0),ei([Dt(Zt(0))],ii.prototype,"right",void 0),ei([Dt(Zt(0))],ii.prototype,"bottom",void 0),ei([Dt(Zt(0))],ii.prototype,"left",void 0);class ni{static init(){const t=window.ResizeObserver;if(t)this.resizeObserver=new t(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};window.setInterval(t,100)}this.ready=!0}static checkSize(t,e,i,n){t&&(t.size&&i===t.size.width&&n===t.size.height||(t.size={width:i,height:n},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})}static unobserve(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,n)}}function ri(t,e,i,n,r){let o=t.x;t.x<e?o=e:t.x>e+n&&(o=e+n);let s=t.y;t.y<i?s=i:t.y>i+r&&(s=i+r);const a=t.x-o,l=t.y-s;return Math.sqrt(a*a+l*l)<=.5*t.size}function oi(t,e,i,n,r){const o=t.x+t.width>e&&t.x<e+n,s=t.y+t.height>i&&t.y<i+r;return o&&s}ni.elements=new Map,ni.ready=!1;var si,ai=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};function li(t,e){let i,n,r=0,o=!1;const s=()=>o,a=()=>{o=!1,null==n||n(),n=void 0,i=void 0,r>0&&t(l)},l=()=>{const t=r;r=0,o=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(){0!==r||s()||t(l),r++},await(){return ai(this,void 0,void 0,(function*(){if(s())for(i||(i=new Promise(t=>{n=t}));s();)yield i}))}}}function ci(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,r=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&r.push(i)}else if(n>0){const i=Math.sqrt(n),o=(-e-i)/(2*t),s=(-e+i)/(2*t);o>=0&&o<=1&&r.push(o),s>=0&&s<=1&&r.push(s)}return r}(e,i,n);const r=e/t,o=i/t,s=(3*o-r*r)/9,a=(9*r*o-27*(n/t)-2*r*r*r)/54,l=s*s*s+a*a,c=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),n=Math.abs(Math.sqrt(3)*(e-i)/2),o=-1/3*r+(e+i);if(o>=0&&o<=1&&c.push(o),0===n){const t=-1/3*r-(e+i)/2;t>=0&&t<=1&&c.push(t)}}else{const t=Math.acos(a/Math.sqrt(-s*s*s)),e=1/3*r,i=2*Math.sqrt(-s),n=i*Math.cos(1/3*t)-e,o=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;n>=0&&n<=1&&c.push(n),o>=0&&o<=1&&c.push(o),l>=0&&l<=1&&c.push(l)}return c}function hi(t,e,i,n,r,o,s,a){const l=(i-t)*(a-o)-(n-e)*(s-r);if(0===l)return null;const c=((s-r)*(e-o)-(t-r)*(a-o))/l,h=((i-t)*(e-o)-(n-e)*(t-r))/l;return c>=0&&c<=1&&h>=0&&h<=1?{x:t+c*(i-t),y:e+c*(n-e)}:null}function di(t,e,i,n,r,o,s,a,l,c,h,d){const u=[],p=c-d,f=h-l,g=l*(d-c)-c*(h-l),y=ui(t,i,r,s),v=ui(e,n,o,a),m=ci(p*y[0]+f*v[0],p*y[1]+f*v[1],p*y[2]+f*v[2],p*y[3]+f*v[3]+g);for(const t of m){const e=t*t,i=t*e,n=y[0]*i+y[1]*e+y[2]*t+y[3],r=v[0]*i+v[1]*e+v[2]*t+v[3];let o;o=l!==h?(n-l)/(h-l):(r-c)/(d-c),o>=0&&o<=1&&u.push({x:n,y:r})}return u}function ui(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function pi(t,e,i,n,r,o,s,a,l,c){const h=(c-a)/(l-s),d=a-h*s,u=Math.pow(h,2)+1,p=2*(h*(d-e)-t),f=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),g=Math.pow(p,2)-4*u*f;if(g<0)return[];const y=(-p+Math.sqrt(g))/2/u,v=(-p-Math.sqrt(g))/2/u,m=[];return[y,v].forEach(t=>{if(!(t>=Math.min(s,l)&&t<=Math.max(s,l)))return;const e=h*t,i=nt(o?r:n);let a=nt(o?n:r),c=nt(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),c<i&&(c+=2*Math.PI),c>=i&&c<=a&&m.push({x:t,y:e})}),m}!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(si||(si={}));class fi{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const r of e)switch(r){case si.Move:t.moveTo(i[n++],i[n++]);break;case si.Line:t.lineTo(i[n++],i[n++]);break;case si.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case si.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case si.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(si.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(si.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,r,o=!1){const s=t+i*Math.cos(r),a=e+i*Math.sin(r);this.xy?(this.xy[0]=s,this.xy[1]=a):this.xy=[s,a],this.commands.push(si.Arc),this.params.push(t,e,i,n,r,o?1:0)}cubicCurveTo(t,e,i,n,r,o){this.xy||this.moveTo(t,e),this.commands.push(si.Curve),this.params.push(t,e,i,n,r,o),this.xy[0]=r,this.xy[1]=o}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(si.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,r=i.length,o=-1e4,s=-1e4;let a=NaN,l=NaN,c=0,h=0,d=0;for(let u=0,p=0;u<r;u++)switch(i[u]){case si.Move:isNaN(a)||hi(a,l,c,h,o,s,t,e)&&d++,c=n[p++],a=c,h=n[p++],l=h;break;case si.Line:hi(c,h,n[p++],n[p++],o,s,t,e)&&d++,c=n[p-2],h=n[p-1];break;case si.Curve:d+=di(c,h,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],o,s,t,e).length,c=n[p-2],h=n[p-1];break;case si.Arc:d+=pi(n[p++],n[p++],n[p++],n[p++],n[p++],Boolean(n[p++]),o,s,t,e).length,c=n[p-2],h=n[p-1];break;case si.ClosePath:isNaN(a)||hi(a,l,c,h,o,s,t,e)&&d++}return d%2==1}}var gi=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function yi(t){const{redraw:e=F.MAJOR,changeCb:i,convertor:n}=null!=t?t:{};return B({redraw:e,type:"path",convertor:n,changeCb:i})}class vi extends lt{constructor(){super(...arguments),this.path=new fi,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,F.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i;const{ctx:n,forceRender:r,stats:o}=t;if(this.dirty!==F.NONE||r){if(this.computeTransformMatrix(),this.matrix.toContext(n),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(n.save(),"normal"===this.clipMode&&(this.clipPath.draw(n),n.clip()),this.path.draw(n),this.fillStroke(n),"punch-out"===this.clipMode){this.clipPath.draw(n),n.clip();const{x:t=-1e4,y:i=-1e4,width:r=2e4,height:o=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};n.clearRect(t,i,r,o)}n.restore()}else this.path.draw(n),this.fillStroke(n);null===(i=this.fillShadow)||void 0===i||i.markClean(),super.render(t)}else o&&(o.nodesSkipped+=this.nodeCount.count)}}vi.className="Path",gi([yi()],vi.prototype,"clipPath",void 0),gi([yi()],vi.prototype,"clipMode",void 0);var mi=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class bi extends vi{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new _(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:r}=this;i.clear();for(const{x:o,y:s,t:a}of e)n+=o*t,r+=s*t,"move"===a?i.moveTo(n,r):i.lineTo(n,r);i.closePath()}}mi([yi()],bi.prototype,"x",void 0),mi([yi()],bi.prototype,"y",void 0),mi([yi({convertor:Math.abs})],bi.prototype,"size",void 0);class xi extends bi{updatePath(){const{x:t,y:e,path:i,size:n}=this,r=n/2;i.clear(),i.arc(t,e,r,0,2*Math.PI),i.closePath()}}xi.className="Circle";var Ci=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const Si=["circle","cross","diamond","heart","plus","square","triangle"],wi=Pt(t=>Si.includes(t)||Object.getPrototypeOf(t)===bi,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class Oi extends G{constructor(){super(...arguments),this.enabled=!0,this.shape=xi,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}Ci([Dt(jt),B({redraw:F.MAJOR})],Oi.prototype,"enabled",void 0),Ci([Dt(wi),B({redraw:F.MAJOR})],Oi.prototype,"shape",void 0),Ci([Dt(Zt(0)),B({redraw:F.MAJOR})],Oi.prototype,"size",void 0),Ci([Dt(Zt(0)),B({redraw:F.MAJOR})],Oi.prototype,"maxSize",void 0),Ci([Dt(ee),B({redraw:F.MAJOR})],Oi.prototype,"domain",void 0),Ci([Dt(Xt),B({redraw:F.MAJOR})],Oi.prototype,"fill",void 0),Ci([Dt(Xt),B({redraw:F.MAJOR})],Oi.prototype,"stroke",void 0),Ci([Dt(Jt(0)),B({redraw:F.MAJOR})],Oi.prototype,"strokeWidth",void 0),Ci([Dt(Jt(0,1)),B({redraw:F.MAJOR})],Oi.prototype,"fillOpacity",void 0),Ci([Dt(Jt(0,1)),B({redraw:F.MAJOR})],Oi.prototype,"strokeOpacity",void 0);class ki{constructor(t,e){this._nodes=[],this._data=[],this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(H,e)?()=>new e:e}static select(t,e){return new ki(t,e)}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}update(t,e){const i=this._data,n=this._parent,r=this._factory;t.length>i.length?t.slice(i.length).forEach(t=>{const i=r(t);i.datum=t,null==e||e(i),n.appendChild(i),this._nodes.push(i)}):t.length<i.length&&this._nodes.splice(t.length).forEach(t=>{n.removeChild(t)}),this._data=t.slice(0);for(let e=0;e<t.length;e++)this._nodes[e].datum=this._data[e];return this}clear(){return this.update([]),this}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(t,e){return ki.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return ki.selectAll(t,t=>t.tag===e)}select(t){return ki.selectAll(this._parent,t)}selectByClass(t){return this.select(e=>e instanceof t)}selectByTag(t){return this.select(e=>e.tag===t)}nodes(){return this._nodes}}function Ti(t,e,i){return Math.max(e,Math.min(i,t))}class Di{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Ti(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Ti(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Ti(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[r,o]=this.range,s=o-r,a=s/Math.max(1,t+2*n-i),l=e?Math.floor(a):a,c=r+(s-l*(t-i))/2,h=e?Math.round(c):c,d=l*(1-i),u=e?Math.round(d):d,p=a*(1-i),f=[];for(let e=0;e<t;e++)f.push(h+l*e);this._bandwidth=u,this._rawBandwidth=p,this.ordinalRange=f}}var Pi=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Ei extends lt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new _(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:r}=t;if(this.dirty===F.NONE&&!n)return void(r&&(r.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let o=this.x1,s=this.y1,a=this.x2,l=this.y2;if(o===a){const t=Math.round(o)+Math.floor(this.strokeWidth)%2/2;o=t,a=t}else if(s===l){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,l=t}i.beginPath(),i.moveTo(o,s),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function Mi(t,e,i=1e-10){return Math.abs(t-e)<i}function Ri(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}Ei.className="Line",Ei.defaultStyles=Object.assign({},lt.defaultStyles,{fill:void 0,strokeWidth:1}),Pi([B({redraw:F.MAJOR})],Ei.prototype,"x1",void 0),Pi([B({redraw:F.MAJOR})],Ei.prototype,"y1",void 0),Pi([B({redraw:F.MAJOR})],Ei.prototype,"x2",void 0),Pi([B({redraw:F.MAJOR})],Ei.prototype,"y2",void 0);var Ai,_i=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(Ai||(Ai={}));class Li extends vi{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=Ai.Open,this.restoreOwnStyles()}get fullPie(){return Mi(nt(this.startAngle),nt(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===Ai.Chord?t.closePath():this.type!==Ai.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new _(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==Ai.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}function Ni(t,e){return Tt((i,n,r)=>(i[t][null!=e?e:n]=r,r))}function Ii(t){const{newValue:e,oldValue:i,changeValue:n}=t;return Tt((t,r,o,s)=>(o!==s&&(void 0!==s&&(null==i||i.call(t,s)),void 0!==o&&(null==e||e.call(t,o)),null==n||n.call(t,o,s)),o))}Li.className="Arc",Li.defaultStyles=Object.assign({},lt.defaultStyles,{lineWidth:1,fillStyle:null}),_i([yi()],Li.prototype,"centerX",void 0),_i([yi()],Li.prototype,"centerY",void 0),_i([yi()],Li.prototype,"radius",void 0),_i([yi()],Li.prototype,"startAngle",void 0),_i([yi()],Li.prototype,"endAngle",void 0),_i([yi()],Li.prototype,"counterClockwise",void 0),_i([yi()],Li.prototype,"type",void 0);var Fi=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class ji{constructor(){this.node=new dt,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=ji.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=z.None}computeTextWrap(t,e){var i,n;const{text:r,wrapping:o}=this,s=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(s)&&!isFinite(a))return void(this.node.text=r);const l=dt.wrap(null!=r?r:"",s,a,this,o);this.node.text=l}}function Bi(t,e){return t.length===e.length&&t.every((t,i)=>{const n=e[i];return Array.isArray(t)&&Array.isArray(n)?Bi(t,n):t===n})}function Gi(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}ji.PADDING=10,Fi([Dt(jt)],ji.prototype,"enabled",void 0),Fi([Dt(zt),Ni("node")],ji.prototype,"text",void 0),Fi([Dt(ae),Ni("node")],ji.prototype,"fontStyle",void 0),Fi([Dt(ce),Ni("node")],ji.prototype,"fontWeight",void 0),Fi([Dt(Zt(0)),Ni("node")],ji.prototype,"fontSize",void 0),Fi([Dt(Gt),Ni("node")],ji.prototype,"fontFamily",void 0),Fi([Dt(Xt),Ni("node","fill")],ji.prototype,"color",void 0),Fi([Dt(Jt(0))],ji.prototype,"spacing",void 0),Fi([Dt(Jt(0))],ji.prototype,"lineHeight",void 0),Fi([Dt(Jt(0))],ji.prototype,"maxWidth",void 0),Fi([Dt(Jt(0))],ji.prototype,"maxHeight",void 0),Fi([Dt(Ce)],ji.prototype,"wrapping",void 0);class zi{constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=zi.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(t,e){var i;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=null!==(i=null==e?void 0:e.strict)&&void 0!==i?i:this.strictClampByDefault,r=this.getDomain().map(t=>this.transform(t)),[o,s]=r,{range:a}=this,[l,c]=a;return(t=this.transform(t))<o?n?NaN:l:t>s?n?NaN:c:o===s?(l+c)/2:t===o?l:t===s?c:l+(this.fromDomain(t)-this.fromDomain(o))/(this.fromDomain(s)-this.fromDomain(o))*(c-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,n]=e,{range:r}=this,[o,s]=r,a=o>s;let l;return t<(a?s:o)?a?n:i:t>(a?o:s)?a?i:n:(l=o===s?this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):this.toDomain(this.fromDomain(i)+(t-o)/(s-o)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}isDenseInterval({start:t,stop:e,interval:i,count:n}){const{range:r}=this,o=e-t,s=Math.min(r[0],r[1]);return null!=n||(n=o/("number"==typeof i?i:1)),n>=Math.max(r[0],r[1])-s&&($.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}function Wi(t,e,i,n,r){if(i<2)return Yi(t,e,e-t);const o=Hi(t,e,i,n,r);return isNaN(o)?new Ki(0):Yi(t=Math.ceil(t/o)*o,e=Math.floor(e/o)*o,o)}zi.defaultTickCount=5,zi.defaultMaxTickCount=6;const Vi=[1,2,5,10];function Hi(t,e,i,n=0,r=1/0){const o=(e-t)/i,s=Math.floor(Math.log10(o)),a=Math.pow(10,s),l=Vi.map(o=>{const s=o*a,l=Math.ceil((e-t)/s);return{multiplier:o,isWithinBounds:l>=n&&l<=r,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class Ki extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function Yi(t,e,i){const n=(t=>{var e,i;const n=t.split("e");return Math.max((null!==(i=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(n[1]),0)})((i%1).toExponential()),r=Math.pow(10,n),o=Math.ceil((e-t)/i),s=new Ki(n);for(let e=0;e<=o;e++){const n=t+i*e;s.push(Math.round(n*r)/r)}return s}const Ui={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Xi(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function $i(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(Xi(t,n)/7)+1:0}const qi={a:t=>Ui.shortDays[t.getDay()],A:t=>Ui.days[t.getDay()],b:t=>Ui.shortMonths[t.getMonth()],B:t=>Ui.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Ji(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>Ji(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>Ji(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":Ji(i,2,null!=e?e:"0")},j:(t,e)=>Ji(Xi(t)+1,3,null!=e?e:"0"),m:(t,e)=>Ji(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>Ji(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>Ji(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Ji(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Ji($i(t,0),2,null!=e?e:"0"),V:(t,e)=>Ji(function t(e,i=e.getFullYear()){const n=new Date(i,0,1).getDay(),r=new Date(i,0,(4-n+7)%7-3+1);return r<=e?Math.floor(Xi(e,r)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>Ji(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>Ji($i(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Ji(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>Ji(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Ji(Math.floor(i/60),2,"0")}${Ji(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},Zi={_:" ",0:"0","-":""};function Ji(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:`${i.repeat(e-n.length)}${n}`}function Qi(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],r=Zi[n];null!=r&&i++;const o=t[i+1],s=qi[o];if("function"==typeof s)e.push([s,r]);else if("string"==typeof s){const t=Qi(s);e.push([t,r])}else e.push(`${null!=r?r:""}${o}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}var tn;!function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(tn||(tn={}));const en={[tn.MILLISECOND]:".%L",[tn.SECOND]:":%S",[tn.MINUTE]:"%I:%M",[tn.HOUR]:"%I %p",[tn.WEEK_DAY]:"%a",[tn.SHORT_MONTH]:"%b %d",[tn.MONTH]:"%B",[tn.SHORT_YEAR]:"%y",[tn.YEAR]:"%Y"};function nn(t){return t instanceof Date?t.getTime():t}class rn extends zi{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=w,this.month=S,this.week=g,this.day=u,this.hour=d,this.minute=c,this.second=a,this.millisecond=o,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=tn.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const n=nn(t[0]),r=nn(t[t.length-1]),o=new Date(n).getFullYear(),s=new Date(r).getFullYear()-o>0;return this.buildFormatString(e,s)}buildFormatString(t,e){let i=[en[t]],n=0;const r=this.getDomain(),o=Math.min(...r.map(nn)),s=Math.max(...r.map(nn))-o;switch(t){case tn.SECOND:s/6e4>1&&i.push(en[tn.MINUTE]);case tn.MINUTE:s/36e5>1&&i.push(en[tn.HOUR]);case tn.HOUR:n=i.length,s/864e5>1&&i.push(en[tn.WEEK_DAY]);case tn.WEEK_DAY:if(s/6048e5>1||e){const t=i.indexOf(en[tn.WEEK_DAY]);t>-1&&i.splice(t,1,en[tn.SHORT_MONTH])}case tn.SHORT_MONTH:case tn.MONTH:(s/31536e6>1||e)&&i.push(en[tn.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?tn.MILLISECOND:this.minute.floor(t)<t?tn.SECOND:this.hour.floor(t)<t?tn.MINUTE:this.day.floor(t)<t?tn.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?tn.WEEK_DAY:tn.SHORT_MONTH:this.year.floor(t)<t?tn.MONTH:tn.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Qi(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:r}){const{tickIntervals:o}=this;let s,a;const l=null!=i?i:zi.defaultTickCount,c=Math.abs(e-t)/Math.max(l,1);let h=0;for(;h<o.length&&c>o[h][2];)h++;if(0===h)a=Math.max(Hi(t,e,l,n,r),1),s=this.millisecond;else if(h===o.length){a=Hi(t/31536e6,e/31536e6,l,n,r),s=this.year}else{const t=c-o[h-1][2]<o[h][2]-c?h-1:h;[s,a]=o[t]}return s.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(nn);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:r}=this;if(!i)return[];if(i instanceof n){const n=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:n.length})?this.getDefaultTicks({start:t,stop:e}):n}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const s=[...r];s.reverse();const a=s.find(t=>o%t[2]==0);if(a){return a[0].every(o/(a[2]/a[1])).range(new Date(t),new Date(e))}let l=new Date(t);const c=new Date(e),h=[];for(;l<=c;)h.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+o);return h}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):Qi(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(nn(t)===nn(i)&&nn(e)===nn(n))break;t=i,e=n}}updateNiceDomainIteration(t,e){const i=nn(t),r=nn(e),{interval:o}=this;let s;if(o instanceof n)s=o;else{const t="number"==typeof o?(r-i)/Math.max(o,1):this.tickCount;s=this.getTickInterval({start:i,stop:r,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(s){const i=s.range(t,e,!0),n=i[0],r=i[i.length-1];this.niceDomain=[n,r]}}}const on=t=>`(${t})`,sn=t=>on(t)+"?",an=t=>sn("?:"+t),ln=new RegExp(["^",an(`${sn(".")}${on("[<>=^]")}`),sn("[+\\-( ]"),sn("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),sn("0"),sn("\\d+"),sn(","),an("\\."+on("\\d+")),sn("~"),sn("[%a-z]"),"$"].join(""),"i"),cn=new RegExp(["^",on(".*?"),`#\\{${on(".+?")}\\}`,on(".*?"),"$"].join(""));function hn(t){let e,i;const n=cn.exec(t);n&&([,e,t,i]=n);const r=ln.exec(t);if(!r)throw new Error("The number formatter is invalid: "+t);const[,o,s,a,l,c,h,d,u,p,f]=r;return{fill:o,align:s,sign:a,symbol:l,zero:c,width:parseInt(h),comma:d,precision:parseInt(u),trim:Boolean(p),type:f,prefix:e,suffix:i}}function dn(t){const e="string"==typeof t?hn(t):t,{fill:i,align:n,sign:r="-",symbol:o,zero:s,width:a,comma:l,type:c,prefix:h="",suffix:d=""}=e;let u,{precision:p,trim:f}=e;if(c)if(c in fn&&c in pn)u=isNaN(p)?pn[c]:fn[c];else if(c in fn)u=fn[c];else{if(!(c in pn))throw new Error("The number formatter type is invalid: "+c);u=pn[c]}else u=fn.g,f=!0;return isNaN(p)&&(p=c?6:12),t=>{let e=u(t,p);return f&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),r=t.substring(i);for(let t=n.length-3;t>0;t-=3)n.splice(t,0,e);return`${n.join("")}${r}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const n="+"===i?"+":"";return`${t>=0?n:"\u2212"}${e}`}(t,e,r),o&&"#"!==o&&(e=`${o}${e}`),"#"===o&&"x"===c&&(e="0x"+e),"s"===c&&(e=`${e}${function(t){return mn[gn(t)]}(t)}`),"%"!==c&&"p"!==c||(e+="%"),isNaN(a)||(e=function(t,e,i=" ",n=">"){let r=t;if(">"!==n&&n){if("<"===n)r=r.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-r.length),n=Math.ceil(t/2),o=Math.floor(t/2);r=r.padStart(n+r.length,i),r=r.padEnd(o+r.length,i)}}else r=r.padStart(e,i);return r}(e,a,null!=i?i:s,n)),e=`${h}${e}${d}`,e}}const un=t=>Math.floor(Math.abs(t)),pn={b:t=>un(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>un(t).toString(8),x:t=>un(t).toString(16),X:t=>pn.x(t).toUpperCase(),n:t=>pn.d(t),"%":t=>""+un(100*t).toFixed(0)},fn={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>fn.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>fn.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>fn.g(t,e).toUpperCase(),n:(t,e)=>fn.g(t,e),p:(t,e)=>fn.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const r=Math.pow(10,n);return(Math.round(i/r)*r).toFixed()},s:(t,e)=>{const i=gn(t);return fn.r(t/Math.pow(10,i),e)},"%":(t,e)=>fn.f(100*t,e)};function gn(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(yn,Math.min(vn,i))}const yn=-24,vn=24,mn={[yn]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[vn]:"Y"};var bn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const xn=t=>t;class Cn extends zi{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=xn,this.basePow=xn,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t)}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?Cn.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,r]=this.getDomain();let o=this.log(n),s=this.log(r);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(s-o),i=Yi(o,s,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=n&&t<=r);if(!this.isDenseInterval({start:n,stop:r,interval:t,count:i.length}))return i}if(!(i%1==0)||s-o>=e)return Wi(o,s,Math.min(s-o,e)).map(t=>this.pow(t));const a=[],l=n>0;o=Math.floor(o)-1,s=Math.round(s)+1;const c=Math.min(...this.range),h=(Math.max(...this.range)-c)/e;let d=1/0;for(let t=o;t<=s;t++){const e=this.convert(this.pow(t+1));for(let o=1;o<i;o++){const s=l?o:i-o+1,c=this.pow(t)*s,u=this.convert(c),p=Math.abs(d-u),f=Math.abs(u-e),g=p>=h&&f>=h;c>=n&&c<=r&&(1===o||g)&&(a.push(c),d=u)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"function"!=typeof i&&(i=dn(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}function Sn(t,e=[void 0]){return Tt((i,n,r)=>e.includes(r)?t:r)}function wn(t){const{length:e}=t;if(0===e)return;let i=1/0,n=-1/0;for(let r=0;r<e;r++){let e=t[r];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>n&&(n=e))}const r=[i,n];return r.some(t=>!isFinite(t))?void 0:r}bn([Dt(Zt(0))],Cn.prototype,"base",void 0);var On=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class kn{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return ut(this)}}function Tn(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?nt(rt(t.rotation)):0,r=!n&&e>=0&&e<=Math.PI?-1:1,o=!n&&i>=0&&i<=Math.PI?-1:1;let s=0;return t.parallel?s=r*Math.PI/2:-1===o&&(s=Math.PI),{configuredRotation:n,defaultRotation:s,parallelFlipFlag:r,regularFlipFlag:o}}function Dn(t,e,i,n,r){const o=e>0&&e<=Math.PI,s=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(o||s?-1:1)==-1)return"end"}else if(n*r==-1)return"end";return"start"}function Pn(t,e,i,n,r){const{width:o,height:s}=e,a=new _(i,n,0,0);r.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=o,e.height=s,{point:{x:l,y:c,size:0},label:{width:o,height:s,text:t}}}On([Dt(jt)],kn.prototype,"enabled",void 0),On([Dt(Zt(0))],kn.prototype,"fontSize",void 0),On([Dt(Gt)],kn.prototype,"fontFamily",void 0),On([Dt(ae)],kn.prototype,"fontStyle",void 0),On([Dt(ce)],kn.prototype,"fontWeight",void 0),On([Dt(Ut)],kn.prototype,"color",void 0);var En=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Mn=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};const Rn=Pt((t,e)=>Zt(0)(t,e)||t instanceof n,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),An=Pt((t,e)=>Et(t,e,Rn),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),_n=Pt((t,e)=>Et(t,e,(t,e)=>0!==t&&Zt(0)(t,e)||t instanceof n),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Ln=["stroke","lineDash"],Nn=Pt(Mt(void 0,t=>{for(const e in t)if(!Ln.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var In,Fn;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(In||(In={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(Fn||(Fn={}));class jn{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}En([Dt(Zt(0))],jn.prototype,"width",void 0),En([Dt(Xt)],jn.prototype,"color",void 0);class Bn{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}En([Dt(jt)],Bn.prototype,"enabled",void 0),En([Dt(Zt(0))],Bn.prototype,"width",void 0),En([Dt(Zt(0))],Bn.prototype,"size",void 0),En([Dt(Xt)],Bn.prototype,"color",void 0),En([Dt(An),function(t,e){const i=null==e?void 0:e.default,n=Ee();return Tt((e,r,o)=>(o!==i&&n(r.toString(),t),o))}("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],Bn.prototype,"count",void 0),En([Dt(_n)],Bn.prototype,"interval",void 0),En([Dt(Rt())],Bn.prototype,"values",void 0),En([Dt(At(Qt(1),Lt("maxSpacing"))),Sn(NaN)],Bn.prototype,"minSpacing",void 0);class Gn{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return ut(this)}}En([Dt(jt)],Gn.prototype,"enabled",void 0),En([Dt(Bt)],Gn.prototype,"autoWrap",void 0),En([Dt(Jt(0))],Gn.prototype,"maxWidth",void 0),En([Dt(Jt(0))],Gn.prototype,"maxHeight",void 0),En([Dt(ae)],Gn.prototype,"fontStyle",void 0),En([Dt(ce)],Gn.prototype,"fontWeight",void 0),En([Dt(Zt(1))],Gn.prototype,"fontSize",void 0),En([Dt(Gt)],Gn.prototype,"fontFamily",void 0),En([Dt(Zt(0))],Gn.prototype,"padding",void 0),En([Dt(Qt()),Sn(NaN)],Gn.prototype,"minSpacing",void 0),En([Dt(Xt)],Gn.prototype,"color",void 0),En([Dt(Jt(-360,360))],Gn.prototype,"rotation",void 0),En([Dt(Bt)],Gn.prototype,"autoRotate",void 0),En([Dt(Zt(-360,360))],Gn.prototype,"autoRotateAngle",void 0),En([Dt(jt)],Gn.prototype,"avoidCollisions",void 0),En([Dt(jt)],Gn.prototype,"mirrored",void 0),En([Dt(jt)],Gn.prototype,"parallel",void 0),En([Dt(zt)],Gn.prototype,"format",void 0);class zn{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}En([Dt(jt)],zn.prototype,"enabled",void 0),En([Dt(zt)],zn.prototype,"text",void 0),En([Dt(ae)],zn.prototype,"fontStyle",void 0),En([Dt(ce)],zn.prototype,"fontWeight",void 0),En([Dt(Zt(0))],zn.prototype,"fontSize",void 0),En([Dt(Gt)],zn.prototype,"fontFamily",void 0),En([Dt(Xt)],zn.prototype,"color",void 0),En([Dt(Ce)],zn.prototype,"wrapping",void 0),En([Dt(Ft)],zn.prototype,"formatter",void 0);class Wn{constructor(t,e){this.moduleCtx=t,this.id=I(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new Z({name:this.id+"-axis",zIndex:Se.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Ei),this.tickLineGroup=this.axisGroup.appendChild(new Z({name:this.id+"-Axis-tick-lines",zIndex:Se.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new Z({name:this.id+"-Axis-tick-labels",zIndex:Se.AXIS_ZINDEX})),this.crossLineGroup=new Z({name:this.id+"-CrossLines"}),this.gridGroup=new Z({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new Z({name:this.id+"-gridLines",zIndex:Se.AXIS_GRID_ZINDEX})),this.gridArcGroup=this.gridGroup.appendChild(new Z({name:this.id+"-gridArcs",zIndex:Se.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=ki.select(this.tickLineGroup,Ei),this.tickLabelGroupSelection=ki.select(this.tickLabelGroup,dt),this.gridLineGroupSelection=ki.select(this.gridLineGroup,Ei),this.gridArcGroupSelection=ki.select(this.gridArcGroup,Li),this._crossLines=[],this.line=new jn,this.tick=this.createTick(),this.label=new Gn,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new ji,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.thickness=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node)}get scale(){return this._scale}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,r=(e[1]-e[0])/(i[1]-i[0]),o=r*i[0],s=e[0]-o;n.range=[s,s+r],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){t.insertBefore(this.gridGroup,e),t.insertBefore(this.axisGroup,e),t.insertBefore(this.crossLineGroup,e)}detachAxis(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){return 0===this.inRangeEx(t,e,i)}inRangeEx(t,e=0,i=0){const{range:n}=this,r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return t+e<r-i?-1:t>o+i?1:0}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,r=!(i instanceof Cn)&&n>0?t=>"number"==typeof t?t.toFixed(n):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=r,$.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=r}setDomain(){var t;const{scale:e,dataDomain:i,tick:{values:n}}=this;if(n&&e instanceof zi){const[r,o]=null!==(t=wn(n))&&void 0!==t?t:[1/0,-1/0],s=Math.min(e.fromDomain(i[0]),r),a=Math.max(e.fromDomain(i[1]),o);e.domain=[e.toDomain(s),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&n instanceof zi)return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof rn&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}set radialGrid(t){this._radialGrid!==t&&(this._radialGrid=t,this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear())}get radialGrid(){return this._radialGrid}createTick(){return new Bn}update(t){const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),r=this.label.getSideFlag(),o=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:e,sideFlag:r}),this.updateLine();const s=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:n,labelX:o,sideFlag:r}),{tickData:a,combinedRotation:l,textBaseline:c,textAlign:h}=s,d=Mn(s,["tickData","combinedRotation","textBaseline","textAlign"]);return this.updateSelections(a.ticks),this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:l,textBaseline:c,textAlign:h,labelX:o}),this.updateVisibility(),this.updateGridLines(r),this.updateTickLines(r),this.updateTitle({anyTickVisible:a.ticks.length>0,sideFlag:r}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n,sideFlag:r}),this.updateLayoutState(),t=d.primaryTickCount}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;t instanceof zi&&(this.setTickCount(this.tick.count),t.nice=e,t.update())}calculateRotations(){const t=rt(this.rotation);return{rotation:t,parallelFlipRotation:nt(t),regularFlipRotation:nt(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:r}){var o;const{scale:s,tick:a,label:{parallel:l,rotation:c,fontFamily:h,fontSize:d,fontStyle:u,fontWeight:p}}=this,f=void 0!==t,{defaultRotation:g,configuredRotation:y,parallelFlipFlag:v,regularFlipFlag:m}=Tn({rotation:c,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=y+g,x=new L,{maxTickCount:C}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(o=a.maxSpacing)&&void 0!==o?o:NaN}),S=s instanceof zi,w=a.count||!S||isNaN(C)?10:C;let O=Dn(l,y,0,r,m);const k=function(t,e,i,n){return t&&!e?i*n==-1?"hanging":"bottom":"middle"}(l,y,r,v),T={fontFamily:h,fontSize:d,fontStyle:u,fontWeight:p,textBaseline:k,textAlign:O};let D={rawTicks:[],ticks:[],labelCount:0},P=0,E=0,M=!0,R=!1;for(;M&&P<=w&&!R;){E=0,O=Dn(l,y,0,r,m);const e=this.getTickStrategies({secondaryAxis:f,index:P});for(const i of e){({tickData:D,index:P,autoRotation:E,terminate:R}=i({index:P,tickData:D,textProps:T,labelOverlap:M,terminate:R,primaryTickCount:t}));const e=D.ticks;O=Dn(l,y,E,r,m);const o=0!==y||0!==E,s=b+E;M=this.checkLabelOverlap(s,o,x,e,n,Object.assign(Object.assign({},T),{textAlign:O}))}}const A=g+y+E;return!f&&D.rawTicks.length>0&&(t=D.rawTicks.length),{tickData:D,primaryTickCount:t,combinedRotation:A,textBaseline:k,textAlign:O}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:r}=this,o=i instanceof zi,s=n.enabled&&n.avoidCollisions,a=!(o&&void 0===this.tick.count)&&0!==t&&s,l=!0===n.autoRotate&&void 0===n.rotation,c=[];let h;h=this.tick.values?Fn.VALUES:e?Fn.CREATE_SECONDARY:a?Fn.FILTER:Fn.CREATE;if(c.push(({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(h,t,e,n,i)),!o&&!isNaN(r.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(Fn.FILTER,t,e,n,i);c.push(t)}if(!s)return c;if(n.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);c.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:n})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:n});c.push(t)}return c}createTickData(t,e,i,n,r){var o,s,a;const{scale:l,tick:c}=this,{maxTickCount:h,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:null!==(o=c.maxSpacing)&&void 0!==o?o:NaN}),p=l instanceof zi,f=c.count||!p||isNaN(h)?10:h;let g=null!==(s=c.count)&&void 0!==s?s:p?Math.max(u-e,d):h;const y=void 0===c.interval&&void 0===c.values&&void 0===c.count&&g>d&&(p||t===Fn.FILTER);let v=!0;for(;v&&e<=f;){const n=i.rawTicks;g=null!==(a=c.count)&&void 0!==a?a:p?Math.max(u-e,d):h;const{rawTicks:o,ticks:s,labelCount:l}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:g,minTickCount:d,maxTickCount:h,primaryTickCount:r});i.rawTicks=o,i.ticks=s,i.labelCount=l,v=!!y&&Gi(o,n),e++}const m=void 0!==c.interval||void 0!==c.values;return n||(n=m),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,r,o){L.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const r=t[n],{point:{x:o,y:s},label:{text:a}}=r;let{label:{width:l,height:c}}=r;l+=null!=e?e:0,c+=null!=e?e:0;if(i.some(t=>oi(t,o,s,l,c)))return!0;i.push({index:n,text:a,x:o,y:s,width:l,height:c,datum:r})}return!1}(this.createLabelData(n,r,o,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,n){const r=[];for(const o of t){const{tickLabel:t,translationY:s}=o;if(""===t||null==t)continue;const a=vt(t),{width:l,height:c}=pt(a,e,s,i),h=Pn(t,new _(e,s,l,c),e,s,n);r.push(h)}return r}getAutoRotation(t){return t?nt(rt(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:r,primaryTickCount:o}){var s;const{scale:a}=this;let l=[];switch(t){case Fn.VALUES:l=this.tick.values;break;case Fn.CREATE_SECONDARY:l=this.updateSecondaryAxisTicks(o);break;case Fn.FILTER:l=this.filterTicks(e,i);break;default:l=this.createTicks(i,n,r)}this.onLabelFormatChange(l,this.label.format),this.fractionDigits=l.fractionDigits>=0?l.fractionDigits:0;const c=(null!==(s=this.scale.bandwidth)&&void 0!==s?s:0)/2,h=[];let d=0;for(let t=0;t<l.length;t++){const e=l[t],i=a.convert(e)+c,n=this.formatTick(e,t);h.push({tick:e,tickLabel:n,translationY:i}),""!==n&&null!=n&&d++}return{rawTicks:l,ticks:h,labelCount:d}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%n==0)}createTicks(t,e,i){return this.setTickCount(t,e,i),this.scale.ticks()}estimateTickCount({minSpacing:t,maxSpacing:e}){const i=this.calculateAvailableRange(),n=Math.max(Wn.defaultTickMinSpacing,i/zi.defaultMaxTickCount);isNaN(t)&&isNaN(e)?(t=n)>(e=i)&&(e=t):isNaN(t)?(t=n)>e&&(t=e):isNaN(e)&&t>(e=i)&&(e=t);const r=Math.max(1,Math.floor(i/t)),o=Math.min(r,Math.ceil(i/e));let s=zi.defaultTickCount;return s>r?s=r:s<o&&(s=o),{minTickCount:o,maxTickCount:r,defaultTickCount:s}}updateVisibility(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),n=t=>{const n=Math.floor(e),r=Math.ceil(i);if(n===r)return void(t.visible=!1);t.translationY>=n-1&&t.translationY<n&&(t.translationY=n),t.translationY>r&&t.translationY<=r+1&&(t.translationY=r);const o=t.translationY>=n&&t.translationY<=r;t.visible=o},{gridLineGroupSelection:r,gridArcGroupSelection:o,tickLineGroupSelection:s,tickLabelGroupSelection:a}=this;r.each(n),o.each(n),s.each(n),a.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i,sideFlag:n}){var r;const o=this.isAnySeriesActive();null===(r=this.crossLines)||void 0===r||r.forEach(r=>{var s;r.sideFlag=-n,r.direction=t===-Math.PI/2?we.X:we.Y,r.label.parallel=null!==(s=r.label.parallel)&&void 0!==s?s:this.label.parallel,r.parallelFlipRotation=e,r.regularFlipRotation=i,r.update(o)})}updateTickLines(t){const{tick:e}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=e.width,i.stroke=e.color,i.x1=t*e.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateDomain(){}updatePosition({rotation:t,sideFlag:e}){const{crossLineGroup:i,axisGroup:n,gridGroup:r,translation:o,gridLineGroupSelection:s,gridPadding:a,gridLength:l}=this,c=Math.floor(o.x),h=Math.floor(o.y);i.translationX=c,i.translationY=h,i.rotation=t,n.translationX=c,n.translationY=h,n.rotation=t,r.translationX=c,r.translationY=h,r.rotation=t,s.each(t=>{t.x1=a,t.x2=-e*l+a,t.y1=0,t.y2=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t){const e=this.gridLength?t:[],i=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(e,t=>{const e=new Ei;e.tag=In.GridLine,t.append(e)}),n=this.radialGrid?this.gridArcGroupSelection.update(e,t=>{const e=new Li;e.tag=In.GridArc,t.append(e)}):this.gridArcGroupSelection,r=this.tickLineGroupSelection.update(t,t=>{const e=new Ei;e.tag=In.TickLine,t.appendChild(e)}),o=this.tickLabelGroupSelection.update(t,t=>{const e=new dt;e.tag=In.TickLabel,t.appendChild(e)}),s=t=>t.translationY=Math.round(t.datum.translationY);i.each(s),n.each(s),r.each(s),o.each(s),this.tickLineGroupSelection=r,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=i,this.gridArcGroupSelection=n}updateGridLines(t){var e;const{gridStyle:i,scale:n,tick:r,gridPadding:o,gridLength:s}=this;if(s&&i.length){const l=i.length;let c;if(this.radialGrid){const t=(a=rt(s),a%=it,(a+=it)!==it&&(a%=it),a),i=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2;c=this.gridArcGroupSelection.each((e,r)=>{const o=Math.round(n.convert(r)+i);e.centerX=0,e.centerY=n.range[0]-o,e.endAngle=t,e.radius=o})}else c=this.gridLineGroupSelection.each(e=>{e.x1=o,e.x2=-t*s+o,e.y1=0,e.y2=0});c.each((t,e,n)=>{const o=i[n%l];t.stroke=o.stroke,t.strokeWidth=r.width,t.lineDash=o.lineDash,t.fill=void 0})}var a}updateLabels({tickLabelGroupSelection:t,combinedRotation:e,textBaseline:i,textAlign:n,labelX:r}){const{label:o,label:{enabled:s}}=this;if(!s)return{labelData:[],rotated:!1};t.each((t,s)=>{const{tickLabel:a}=s;t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.color,t.text=a;""===t.text||null==t.text?t.visible=!1:(t.textBaseline=i,t.textAlign=n,t.x=r,t.rotationCenterX=r,t.rotation=e,t.visible=!0)})}wrapLabels(t,e,i){const{label:{parallel:n,maxWidth:r,maxHeight:o}}=this,s=n?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,a=null!=r?r:s,l=n?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),c=null!=o?o:l;return t.ticks.forEach(t=>{const{tickLabel:e}=t,n=dt.wrap(e,a,c,i,"hyphenate");t.tickLabel=n}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:t,range:e}=this;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0}updateTitle({anyTickVisible:t,sideFlag:e}){var i;const n=t=>t.defaultValue,{rotation:r,title:o,_titleCaption:s,lineNode:a,range:l,tickLineGroup:c,tickLabelGroup:h,moduleCtx:{callbackCache:d}}=this,{formatter:u=n}=null!==(i=this.title)&&void 0!==i?i:{};if(!o)return void(s.enabled=!1);s.enabled=o.enabled,s.fontFamily=o.fontFamily,s.fontSize=o.fontSize,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.color=o.color,s.wrapping=o.wrapping;let p=!1;const f=s.node;if(o.enabled&&a.visible){p=!0;const i=nt(r),n=ji.PADDING,o=-1===e&&i>Math.PI&&i<2*Math.PI?-1:1;f.rotation=o*e*Math.PI/2,f.x=Math.floor(o*e*(l[0]+l[1])/2);let s=0;if(t){const t=Z.computeBBox([c,h]),e=0===r?t.width:t.height;Math.abs(e)<1/0&&(s+=e)}f.y=-1===e?Math.floor(o*(-n-s)):Math.floor(-n-s),f.textBaseline=1===o?"bottom":"top",f.text=d.call(u,this.getTitleFormatterParams())}f.visible=p}formatTick(t,e){var i,n;const{label:r,labelFormatter:o,fractionDigits:s,moduleCtx:{callbackCache:a}}=this;if(r.formatter){const n=s>0?t:String(t);return null!==(i=a.call(r.formatter,{value:n,index:e,fractionDigits:s,formatter:o}))&&void 0!==i?i:n}return o&&null!==(n=a.call(o,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return!1}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new _(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new _(t,e,i,n))}calculatePadding(t,e){return Math.abs(.01*t)}}Wn.defaultTickMinSpacing=50,En([Dt(jt)],Wn.prototype,"nice",void 0),En([Dt(Nn)],Wn.prototype,"gridStyle",void 0),En([Dt(Zt(0))],Wn.prototype,"thickness",void 0);class Vn extends zi{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:zi.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:r}=this;if(r){const t=Math.abs(r);if(!this.isDenseInterval({start:i,stop:n,interval:t}))return Yi(i,n,t)}return Wi(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var t,e;const i=null!==(t=this.tickCount)&&void 0!==t?t:zi.defaultTickCount;let[n,r]=this.domain;if(i<1)return void(this.niceDomain=[n,r]);if(1===i)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),n=Math.pow(10,i);return Vi.map(i=>{const r=i*n,o=Math.floor(t/r)*r,s=Math.ceil(e/r)*r;return{error:1-(e-t)/(s-o),domain:[o,s]}}).sort((t,e)=>t.error-e.error)[0].domain}(n,r));let o=n,s=r;for(let t=0;t<4;t++){const t=null!==(e=this.interval)&&void 0!==e?e:Hi(n,r,i,this.minTickCount,this.maxTickCount),[a,l]=this.domain;if(t>=1)n=Math.floor(a/t)*t,r=Math.ceil(l/t)*t;else{const e=1/t;n=Math.floor(a*e)/e,r=Math.ceil(l*e)/e}if(n===o&&r===s)break;o=n,s=r}this.niceDomain=[n,r]}tickFormat({ticks:t,specifier:e}){return function(t,e){const i=hn(null!=e?e:",f");isNaN(i.precision)&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,r=t.toExponential(n-1).replace(/\.?0+e/,"e"),o=r.indexOf(".");if(o<0)return e>=0?0:-e;const s=r.indexOf("e")-o;return Math.max(0,s-e-1)})):i.type&&!(i.type in fn)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const n=dn(i);return t=>n(Number(t))}(null!=t?t:this.ticks(),e)}}var Hn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Kn extends Wn{constructor(t,e){super(t,e),this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.modules={},this.position="left"}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}get direction(){return["top","bottom"].includes(this.position)?we.X:we.Y}useCalculatedTickCount(){return this.scale instanceof Vn}update(t){return this.updateDirection(),super.update(t)}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateDomain(){const{direction:t,boundSeries:e,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const n=[],r=e.filter(t=>i||t.isEnabled());for(const e of r)n.push(e.getDomain(t));const o=(new Array).concat(...n);this.dataDomain=this.normaliseDataDomain(o)}}normaliseDataDomain(t){return t}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(null==this.axisContext){const t=()=>this.boundSeries.map(t=>t.getKeys(this.direction)).reduce((t,e)=>(t.push(...e),t),[]);this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof zi,keys:t,scaleValueFormatter:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t}))&&void 0!==n?n:void 0},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:void 0}}}const e=new t.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}destroy(){super.destroy();for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:n[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}}Hn([Dt(ie)],Kn.prototype,"keys",void 0),Hn([Dt(ve)],Kn.prototype,"position",void 0);var Yn=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Un extends Kn{constructor(t){super(t,new Di),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=new Set(t);return new Array(...e.values())}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:t}=this,e=t.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}}function Xn(t,e){const i=er(t),n=er(e);if("array"===n){const n=e;return"array"!==i||t.length!==n.length||n.some((e,i)=>{var n;return null!=Xn(null===(n=t)||void 0===n?void 0:n[i],e)})?[...n]:null}if("primitive"===n)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const r=t||{},o=e||{},s=new Set([...Object.keys(r),...Object.keys(o)]);let a=0;const l={};for(const t of s){if(r[t]===o[t])continue;const e=e=>{l[t]=e,a++},i=er(r[t]),n=er(o[t]);if(i!==n){e(o[t]);continue}if("primitive"===n||null===n){e(o[t]);continue}if("array"===n&&r[t].length!==o[t].length){e(o[t]);continue}if("class-instance"===n){e(o[t]);continue}if("function"===n&&r[t]!==o[t]){e(o[t]);continue}const s=Xn(r[t],o[t]);null!==s&&e(s)}return 0===a?null:l}Un.className="CategoryAxis",Un.type="category",Yn([Dt(Zt(0,1))],Un.prototype,"groupPaddingInner",void 0);const $n=Symbol("<delete-property>"),qn=Symbol("<unspecified-property>");function Zn(t,e){var i;const n=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>er(t)).some(t=>"array"===t)){const i=t[t.length-1];return i instanceof Array?i.map(t=>{const i=er(t);return"array"===i?Zn([[],t],e):"object"===i?Zn([{},t],e):t}):i}const r={},o=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of o){const o=t.map(t=>null!=t&&i in t?t[i]:qn).filter(t=>t!==qn);if(0===o.length)continue;const s=o[o.length-1];if(s===$n)continue;const a=o.map(t=>er(t)),l=a[0];a.some(t=>t!==l)?r[i]=s:"array"!==l&&"object"!==l||n.includes(i)?r[i]="array"===l?[...s]:s:r[i]=Zn(o,e)}return r}function Jn(t,e,i={}){var n,r;const{path:o,matcherPath:s=(o?o.replace(/(\[[0-9+]+\])/i,"[]"):void 0),skip:a=[],constructors:l={},allowedTypes:c={},idx:h}=i;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!=o?o:"<root>"));if(null==e)return t;const d=t;null!=h&&"_declarationOrder"in d&&(d._declarationOrder=h);const u=er(t);for(const h in e){const p=`${s?s+".":""}${h}`;if(a.indexOf(p)>=0)continue;const f=e[h],g=`${o?o+".":""}${h}`,y=d.constructor,v=d[h];let m=null!==(n=l[p])&&void 0!==n?n:l[h];try{const e=er(v),n=er(f);if("class-instance"===u&&!(h in t)&&!Object.prototype.hasOwnProperty.call(d,h)){$.warn(`unable to set [${g}] in ${null==y?void 0:y.name} - property is unknown`);continue}const o=null!==(r=c[p])&&void 0!==r?r:[e];if("class-instance"===e&&"object"===n);else if(null!=e&&null!=n&&!o.includes(n)){$.warn(`unable to set [${g}] in ${null==y?void 0:y.name} - can't apply type of [${n}], allowed types are: [${o}]`);continue}if("array"===n)if(m=null!=m?m:l[p+"[]"],null!=m){const t=f;d[h]=t.map((t,e)=>Jn(new m,t,Object.assign(Object.assign({},i),{path:g,matcherPath:p+"[]",idx:e})))}else d[h]=f;else"class-instance"===n?d[h]=f:"object"===n?null!=v?Jn(v,f,Object.assign(Object.assign({},i),{path:g,matcherPath:p,idx:void 0})):d[h]=null!=m?Jn(new m,f,Object.assign(Object.assign({},i),{path:g,matcherPath:p,idx:void 0})):f:d[h]=f}catch(t){const e=t;$.warn(`unable to set [${g}] in [${null==y?void 0:y.name}]; nested error is: ${e.message}`);continue}}return t}function Qn(t,e,i,...n){var r;const o=er(t),s=null!==(r=i.skip)&&void 0!==r?r:[];if("array"!==o){if("object"===o){e(o,t,...n);for(const r in t){if(s.indexOf(r)>=0)continue;const o=t[r],a=null==n?void 0:n.map(t=>null==t?void 0:t[r]),l=er(o);"object"!==l&&"array"!==l||Qn(o,e,i,...a)}}}else t.forEach((t,r)=>{Qn(t,e,i,...(null!=n?n:[]).map(t=>null==t?void 0:t[r]))})}const tr="undefined"!=typeof window;function er(t){return null==t?null:tr&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}class ir extends bi{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}}ir.className="Square";class nr extends bi{updatePath(){const t=this.size/4.2;super.applyPath(t,nr.moves)}}nr.className="Cross",nr.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class rr extends bi{updatePath(){const t=this.size/2;super.applyPath(t,rr.moves)}}rr.className="Diamond",rr.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class or extends bi{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,r=i/4,o=this.y+r/2;e.clear(),e.arc(t-r,o-r,r,n(130),n(330)),e.arc(t+r,o-r,r,n(220),n(50)),e.lineTo(t,o+r),e.closePath()}}or.className="Heart";class sr extends bi{updatePath(){const t=this.size/3;super.applyPath(t,sr.moves)}}sr.className="Plus",sr.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class ar extends bi{updatePath(){const t=1.1*this.size;super.applyPath(t,ar.moves)}}function lr(t=ir){if("string"==typeof t)switch(t){case"circle":return xi;case"cross":return nr;case"diamond":return rr;case"heart":return or;case"plus":return sr;case"triangle":return ar;default:return ir}return"function"==typeof t?t:ir}ar.className="Triangle",ar.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];class cr{constructor(t,e){this.debug=!1,this.state=t,this.states=e,this.debug&&$.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n,r,o,s;const a=this.states[this.state],l=null===(i=null==a?void 0:a.on)||void 0===i?void 0:i[t];if(!l)return void(this.debug&&$.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey"));const c=l.target,h=this.states[c];return this.debug&&$.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${c}`,"color: green"),l.action(e),null===(r=null===(n=null==a?void 0:a.actions)||void 0===n?void 0:n.onExit)||void 0===r||r.call(n),null===(s=null===(o=null==h?void 0:h.actions)||void 0===o?void 0:o.onEnter)||void 0===s||s.call(o),this.state=c,this.state}}var hr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dr=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const ur={[we.X]:["xKey"],[we.Y]:["yKey"]},pr={[we.X]:["xName"],[we.Y]:["yName"]};class fr extends Ke{constructor(t,e,i,n,r){super(i,n,r),this.xKey=t,this.yKey=e}}class gr extends fr{constructor(){super(...arguments),this.type="nodeClick"}}class yr extends fr{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class vr extends cr{}class mr extends ti{constructor(t){var e,i;super(Object.assign(Object.assign({},t),{useSeriesGroupLayer:!0,directionKeys:null!==(e=t.directionKeys)&&void 0!==e?e:ur,directionNames:null!==(i=t.directionNames)&&void 0!==i?i:pr})),this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=ki.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=ki.select(this.highlightLabel,dt),this.subGroups=[],this.subGroupId=0,this.seriesItemEnabled=new Map;const{pathsPerSeries:n=1,hasMarkers:r=!1,pathsZIndexSubOrderOffset:o=[]}=t;this.opts={pathsPerSeries:n,hasMarkers:r,pathsZIndexSubOrderOffset:o},this.animationState=new vr("empty",{empty:{on:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}}},ready:{on:{update:{target:"ready",action:t=>this.animateReadyUpdate(t)},highlight:{target:"ready",action:t=>this.animateReadyHighlight(t)},highlightMarkers:{target:"ready",action:t=>this.animateReadyHighlightMarkers(t)},resize:{target:"ready",action:t=>this.animateReadyResize(t)}}}})}get contextNodeData(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()}addChartEventListeners(){var t,e;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null===(e=this.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(t,e,i,n){return(i&&Ct(t)||!i&&xt(t))&&(n&&Ct(e)||!n&&xt(e))?[t,e]:void 0}checkRangeXY(t,e,i,n){return!isNaN(t)&&!isNaN(e)&&i.inRange(t)&&n.inRange(e)}update({seriesRect:t}){var e,i;return dr(this,void 0,void 0,(function*(){const{seriesItemEnabled:n,visible:r}=this,{series:o}=null!==(i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},s=o?o===this:void 0,a=r&&0===n.size||[...n.values()].some(t=>!0===t),l={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height};null!=Xn(this.nodeDataDependencies,l)&&(this.nodeDataDependencies=l,this.markNodeDataDirty(),this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t)})),yield this.updateSelections(s,a),yield this.updateNodes(s,a),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t})}))}updateSelections(t,e){return dr(this,void 0,void 0,(function*(){yield this.updateHighlightSelection(t),e&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())&&(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e))))}))}updateSeriesGroupSelections(t,e){return dr(this,void 0,void 0,(function*(){const{datumSelection:i,labelSelection:n,markerSelection:r}=t,o=this._contextNodeData[e],{nodeData:s,labelData:a}=o;t.datumSelection=yield this.updateDatumSelection({nodeData:s,datumSelection:i,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:n,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:s,markerSelection:r,seriesIdx:e}))}))}nodeFactory(){return new Z}markerFactory(){return new(lr())}updateSeriesGroups(){var t;return dr(this,void 0,void 0,(function*(){const{_contextNodeData:e,contentGroup:i,subGroups:n,opts:{pathsPerSeries:r,hasMarkers:o,pathsZIndexSubOrderOffset:s}}=this;if(e.length===n.length)return;e.length<n.length&&n.splice(e.length).forEach(({dataNodeGroup:t,markerGroup:e,labelGroup:n,paths:r})=>{i.removeChild(t),e&&i.removeChild(e),n&&i.removeChild(n);for(const t of r)i.removeChild(t)});const a=e.length;for(;a>n.length;){const e=!1,a=this.subGroupId++,l=a,c=new Z({name:`${this.id}-series-sub${a}-dataNodes`,layer:e,zIndex:Se.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,l]}),h=o?new Z({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:e,zIndex:Se.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,1e4+a]}):void 0,d=new Z({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:e,zIndex:Se.SERIES_LABEL_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,a]});i.appendChild(c),i.appendChild(d),h&&i.appendChild(h);const u=[];for(let e=0;e<r;e++)u[e]=new vi,u[e].zIndex=Se.SERIES_LAYER_ZINDEX,u[e].zIndexSubOrder=[()=>this._declarationOrder,(null!==(t=s[e])&&void 0!==t?t:0)+l],i.appendChild(u[e]);n.push({paths:u,dataNodeGroup:c,markerGroup:h,labelGroup:d,labelSelection:ki.select(d,dt),datumSelection:ki.select(c,()=>this.nodeFactory()),markerSelection:h?ki.select(h,()=>this.markerFactory()):void 0})}}))}updateNodes(t,e){var i;return dr(this,void 0,void 0,(function*(){const{highlightSelection:n,highlightLabelSelection:r,_contextNodeData:o,seriesItemEnabled:s,opts:{hasMarkers:a}}=this,l=this.visible&&(null===(i=this._contextNodeData)||void 0===i?void 0:i.length)>0&&e;this.rootGroup.visible=l,this.contentGroup.visible=l,this.highlightGroup.visible=l&&!!t;const c=this.getOpacity(),h=this.subGroups.map((t,e)=>{const{itemId:i}=o[e];return this.getOpacity({itemId:i})}),d=h.some(t=>t!==c);this.contentGroup.opacity=d?1:c,a?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1}),yield Promise.all(this.subGroups.map((t,e)=>dr(this,void 0,void 0,(function*(){var i;const{dataNodeGroup:n,markerGroup:r,datumSelection:c,labelSelection:u,markerSelection:p,paths:f,labelGroup:g}=t,{itemId:y}=o[e],v=l&&(null===(i=s.get(y))||void 0===i||i),m=d?h[e]:1;n.opacity=m,n.visible=v,g.visible=v,r&&(r.opacity=m,r.zIndex=n.zIndex>=Se.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,r.visible=v),g&&(g.opacity=m);for(const t of f)t.opacity=m,t.visible=v;n.visible&&(yield this.updateDatumNodes({datumSelection:c,isHighlight:!1,seriesIdx:e}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:e}),a&&p&&(yield this.updateMarkerNodes({markerSelection:p,isHighlight:!1,seriesIdx:e})))}))))}))}updateHighlightSelection(t){var e;return dr(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:r}=this,o=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null==o?void 0:o.datum)?o:void 0;let a;if(this.highlightSelection=yield this.updateHighlightSelectionItem({item:s,highlightSelection:i}),this.isLabelEnabled()&&null!=s){const{itemId:t}=s;for(const{labelData:e}of r)if(a=e.find(e=>e.datum===s.datum&&e.itemId===t),null!=a)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:a,highlightLabelSelection:n})}))}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:n}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let o=t.pickNode(i,n);if(!o&&r&&(o=null==e?void 0:e.pickNode(i,n)),o)return{datum:o.datum,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:r}=t,{xAxis:o,yAxis:s,rootGroup:a,_contextNodeData:l}=this,c=a.transformPoint(n,r);let h,d=1/0;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==o?void 0:o.inRange(t))&&(null==s?void 0:s.inRange(i))))continue;const n=Math.max(Math.pow(c.x-t,2)+Math.pow(c.y-i,2),0);n<d&&(d=n,h=e)}if(h){return{datum:h,distance:Math.max(Math.sqrt(d)-(null!==(i=null===(e=h.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n;const{x:r,y:o}=t,{xAxis:s,yAxis:a,rootGroup:l,_contextNodeData:c}=this,h=[s,a].filter(t=>t instanceof Un).map(t=>t.direction);if(e&&0===h.length)return;const[d=we.X]=h,u=l.transformPoint(r,o),p=d===we.X?[u.x,u.y]:[u.y,u.x],f=[1/0,1/0];let g=void 0;for(const t of c)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==s?void 0:s.inRange(t))&&(null==a?void 0:a.inRange(i))))continue;const n=d===we.X?[t,i]:[i,t];let r=!0;for(let t=0;t<n.length;t++){const e=Math.abs(n[t]-p[t]);if(e>f[t]){r=!1;break}e<f[t]&&(f[t]=e,f.fill(1/0,t+1,f.length))}r&&(g=e)}if(g){return{datum:g,distance:Math.max(Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2))-(null!==(n=null===(i=g.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:r}=t,o=Object.values(r).reduce((t,e)=>t+e,0),s=n.id===this.id||e&&1===o;this.toggleSeriesItem(i,s)}toggleSeriesItem(t,e){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(t,e),this.nodeDataRefresh=!0):super.toggleSeriesItem(t,e)}isEnabled(){if(this.seriesItemEnabled.size>0){for(const[,t]of this.seriesItemEnabled)if(t)return!0;return!1}return super.isEnabled()}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}isAnySeriesVisible(){for(const t of this.seriesItemEnabled.values())if(t)return!0;return!1}updateHighlightSelectionItem(t){return dr(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{item:i,highlightSelection:n}=t,r=i?[i]:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:r,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:r,datumSelection:n,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return dr(this,void 0,void 0,(function*(){const{item:e,highlightLabelSelection:i}=t,n=e?[e]:[];return this.updateLabelSelection({labelData:n,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return dr(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return dr(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return dr(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return dr(this,void 0,void 0,(function*(){}))}animateEmptyUpdateReady(t){}animateReadyUpdate(t){}animateReadyHighlight(t){}animateReadyHighlightMarkers(t){}animateReadyResize(t){}}class br extends Oi{constructor(){super(...arguments),this.formatter=void 0}}function xr(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}hr([Dt(Ft),B({redraw:F.MAJOR})],br.prototype,"formatter",void 0);var Cr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Sr{constructor(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}show(t){var e,i;let n=this.element;if(this.element||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)this.element.innerHTML=this.renderer();else{const t=document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(t)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}Cr([Dt(Ft)],Sr.prototype,"renderer",void 0),Cr([Dt(zt)],Sr.prototype,"text",void 0);class wr{constructor(t){this.noData=new Sr("ag-chart-no-data-overlay",t)}}class Or{constructor(){this.registeredListeners={}}addListener(t,e){var i;const n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(i=this.registeredListeners[t])||void 0===i||i.push({symbol:n,handler:e}),n}dispatch(t,...e){var i;const n=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],r=[];for(const t of n)try{r.push(t.handler(...e))}catch(t){$.errorOnce(t),r.push(void 0)}return r}cancellableDispatch(t,e,...i){var n;const r=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],o=[];for(const t of r){if(e())break;o.push(t.handler(...i))}return o}reduceDispatch(t,e,...i){var n;const r=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[];let o=void 0;for(const t of r)o=t.handler(...i),i=e(o,...i);return o}removeListener(t){for(const e in this.registeredListeners){const i=this.registeredListeners[e],n=null==i?void 0:i.findIndex(e=>e.symbol===t);null!=n&&n>=0&&(null==i||i.splice(n,1)),null!=n&&0===(null==i?void 0:i.length)&&delete this.registeredListeners[e]}}}class kr{constructor(){this.listeners=new Or}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}}function Tr(t,e){return t=+t,e=+e,i=>t*(1-i)+e*i}function Dr(t,e){if("string"==typeof t)try{t=Ot.fromString(t)}catch(e){t=Ot.fromArray([0,0,0])}if("string"==typeof e)try{e=Ot.fromString(e)}catch(t){e=Ot.fromArray([0,0,0])}const i=Tr(t.r,e.r),n=Tr(t.g,e.g),r=Tr(t.b,e.b),o=Tr(t.a,e.a);return function(t){return Ot.fromArray([i(t),n(t),r(t),o(t)]).toRgbaString()}}function Pr(t,e){const i=typeof e;let n;if("number"===i)return Tr(t,e);if("string"===i)try{return n=Ot.fromString(e),Dr(t,e=n)}catch(t){}throw new Error("Unable to interpolate values")}function Er({from:t,to:e}){return Pr(t,e)}const Mr=(Rr=t=>Math.sin(t*Math.PI/2),({from:t,to:e})=>{const i=Pr(t,e);return t=>i(Rr(t))});var Rr,Ar;function _r({driver:t,duration:e,from:i,to:n,autoplay:r=!0,delay:o=0,ease:s=Er,repeat:a=1/0,repeatType:l=Ar.Loop,onComplete:c,onPlay:h,onRepeat:d,onStop:u,onUpdate:p}){let f,g=0,y=0,v=0,m=!0,b=!1;const x=s({from:i,to:n}),C={isPlaying:!1,play:w,pause:function(){return C.isPlaying=!1,C},stop:O,reset:function(){return b=!1,y=0,v=0,S.reset(),C}},S=t((function(t){m||(t=-t);if(!(g>=o))return void(g+=t);y+=t;b||(f=x(Math.min(1,Math.max(0,y/e))),b=m?y>=e:y<=0);null==p||p(f),b&&(v<a?function(){v++,l===Ar.Reverse?(m=v%2==0,y=m?y%e:e-y%e):y%=e;b=!1,null==d||d()}():(O(),null==c||c()))}));function w(){return C.isPlaying=!0,S.start(),null==h||h(),C}function O(){return C.isPlaying=!1,S.stop(),null==u||u(),C}return r&&w(),C}!function(t){t.Loop="loop",t.Reverse="reverse"}(Ar||(Ar={}));class Lr extends kr{constructor(t){super(),this.controllers={},this.debouncers={},this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.skipAnimations=!1,this.interactionManager=t,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0;for(const t in this.controllers)this.controllers[t].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].stop()}animate(t,e){var i,n;const r=_r(Object.assign(Object.assign({},e),{autoplay:!!this.isPlaying&&e.autoplay,driver:this.createDriver(t,e.disableInteractions)}));return this.controllers[t]&&(this.controllers[t].stop(),delete this.controllers[t]),this.controllers[t]=r,this.skipAnimations?(null===(i=e.onUpdate)||void 0===i||i.call(e,e.to),r.stop()):null===(n=e.onUpdate)||void 0===n||n.call(e,e.from),r}animateMany(t,e,i){const n=e.map(t=>t.from);let r=0,o=0;const s=t=>o=>{var s;n[t]=o,++r>=e.length&&(null===(s=i.onUpdate)||void 0===s||s.call(i,n),r=0)},a=()=>{var t;++o>=e.length&&(null===(t=i.onComplete)||void 0===t||t.call(i))},l=e.map((e,n)=>{const r=`${t}-${n}`;return this.animate(r,Object.assign(Object.assign(Object.assign({},i),e),{onUpdate:s(n),onComplete:a}))}),c={get isPlaying(){return l.some(t=>t.isPlaying)},play:()=>(l.forEach(t=>t.play()),c),pause:()=>(l.forEach(t=>t.pause()),c),stop:()=>(l.forEach(t=>t.stop()),c),reset:()=>(l.forEach(t=>t.reset()),c)};return c}debouncedAnimate(t,e){var i;return this.debouncers[t]&&Date.now()-this.debouncers[t]<(null!==(i=e.duration)&&void 0!==i?i:300)?this.controllers[t]:(this.debouncers[t]=Date.now(),this.animate(t,e))}tween(t){const e="tween-"+btoa(JSON.stringify(t));return function(t){let e;const i=_r(Object.assign(Object.assign({},t),{repeat:0,autoplay:!1,onUpdate:t=>{null==e||e(t)}})),n={start:t=>(i.stop(),i.reset(),i.play(),e=t,n),stop:()=>(i.stop(),n)};return n}(Object.assign(Object.assign({},t),{driver:this.createDriver(e)}))}createDriver(t,e){return i=>({start:()=>{this.updaters.push([t,i]),null==this.requestId&&this.startAnimationCycle(),e&&this.interactionManager.pause("animation_"+t)},stop:()=>{this.updaters=this.updaters.filter(([e])=>e!==t),this.updaters.length<=0&&this.cancelAnimationFrame(),e&&this.interactionManager.resume("animation_"+t)},reset:()=>{}})}startAnimationCycle(){const t=e=>{if(this.requestId=requestAnimationFrame(t),!this.readyToPlay)return;void 0===this.lastTime&&(this.lastTime=e);const i=e-this.lastTime;this.lastTime=e,this.updaters.forEach(([t,e])=>{e(i)}),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(t)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0)}}class Nr{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}}class Ir extends kr{legendItemClick(t,e,i){const n={type:"legend-item-click",series:t,itemId:e,enabled:i};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,n){const r={type:"legend-item-double-click",series:t,itemId:e,enabled:i,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",r)}}class Fr extends kr{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const t=this.activeHighlight;let e=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(([t,{highlightedDatum:i}])=>e=i),this.activeHighlight=e;var i,n;if(i=t,n=this.activeHighlight,!(i===n||(null==i?void 0:i.series)===(null==n?void 0:n.series)&&(null==i?void 0:i.itemId)===(null==n?void 0:n.itemId)&&(null==i?void 0:i.datum)===(null==n?void 0:n.datum))){const e={type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",e)}}}var jr=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Br=["pagehide","mousemove","mouseup","wheel"],Gr=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];class zr extends kr{constructor(t,e=document){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=e.body,this.element=t;for(const e of Gr)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):t.addEventListener(e,this.eventHandler);for(const t of Br)"wheel"===t?window.addEventListener(t,this.eventHandler,{passive:!1}):window.addEventListener(t,this.eventHandler);if(zr.interactionDocuments.indexOf(e)<0){const t=document.createElement("style");t.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(t,document.head.querySelector("style")),zr.interactionDocuments.push(e)}}destroy(){for(const t of Br)window.removeEventListener(t,this.eventHandler);for(const t of Gr)this.element.removeEventListener(t,this.eventHandler)}resume(t){return this.pausers=this.pausers.filter(e=>e!==t),this.enabled=this.pausers.length<=0,this.enabled}pause(t){this.enabled=!1,this.pausers.push(t)}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch(t=>$.errorOnce(t))}dispatchEvent(t,e){return jr(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const n of e){const e=this.buildEvent(Object.assign(Object.assign({event:t},i),{type:n}));this.listeners.cancellableDispatch(n,()=>e.consumed,e)}}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:n,pageY:r,offsetX:o,offsetY:s}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:n,pageY:r,offsetX:o,offsetY:s})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:r,pageX:o,pageY:s}=i;return Object.assign(Object.assign({},zr.NULL_COORDS),{clientX:n,clientY:r,pageX:o,pageY:s})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return zr.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),r=i(t.target);e.offsetX-=n.x-r.x,e.offsetY-=n.y-r.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:r}=t;let{offsetX:o,offsetY:s,pageX:a,pageY:l}=t;if(!wt(o)||!wt(s)){const t=this.element.getBoundingClientRect();o=n-t.left,s=r-t.top}if(!wt(a)||!wt(l)){const t=this.rootElement.getBoundingClientRect();a=n-t.left,l=r-t.top}const c={type:e,offsetX:o,offsetY:s,pageX:a,pageY:l,sourceEvent:i,consumed:!1,consume:()=>c.consumed=!0};return c}}zr.interactionDocuments=[],zr.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class Wr{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;const i=e.addListener("hover",t=>this.checkExclusiveRects(t));this.destroyFns.push(()=>e.removeListener(i))}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),i?this.states[t]={content:i,meta:e}:delete this.states[t],this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i=void 0,n=void 0;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:r,meta:o}=null!==(e=this.states[t])&&void 0!==e?e:{};i=r,n=o}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(n,void 0,t)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}}class Vr extends kr{constructor(){super(),this.states={},this.currentZoom=void 0}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e)),this.applyStates()}getZoom(){return this.currentZoom}applyStates(){const t=this.currentZoom,e={};for(const[t,{x:i,y:n}]of Object.entries(this.states))e.x=null!=i?i:e.x,e.y=null!=n?n:e.y;this.currentZoom=null!=e.x||null!=e.y?e:void 0;var i,n,r,o,s,a,l,c,h,d;if(!(i=t,n=this.currentZoom,!(i===n||(null===(r=null==i?void 0:i.x)||void 0===r?void 0:r.min)===(null===(o=null==n?void 0:n.x)||void 0===o?void 0:o.min)&&(null===(s=null==i?void 0:i.x)||void 0===s?void 0:s.max)===(null===(a=null==n?void 0:n.x)||void 0===a?void 0:a.max)&&(null===(l=null==i?void 0:i.y)||void 0===l?void 0:l.max)===(null===(c=null==n?void 0:n.y)||void 0===c?void 0:c.max)&&(null===(h=null==i?void 0:i.y)||void 0===h?void 0:h.min)===(null===(d=null==n?void 0:n.y)||void 0===d?void 0:d.min))))return;const u=Object.assign({type:"zoom-change"},null!=t?t:{});this.listeners.dispatch("zoom-change",u)}}class Hr{constructor(){this.layoutProcessors=new Or,this.listeners=new Or}addListener(t,e){if("layout-complete"!==t)return this.layoutProcessors.addListener(t,e);if(function(t){return"layout-complete"===t}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}removeListener(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)}dispatchPerformLayout(t,e){const i=this.layoutProcessors.reduceDispatch(t,({shrinkRect:t},e)=>[Object.assign(Object.assign({},e),{shrinkRect:t})],e);return null!=i?i:e}dispatchLayoutComplete(t){this.listeners.dispatch("layout-complete",t)}}class Kr{constructor(t){this.getSeries=t}}var Yr;!function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Yr||(Yr={}));class Ur{constructor(t){this.updateCallback=t}update(t=Yr.FULL,{forceNodeDataRefresh:e=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e})}}var Xr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class $r{constructor(){this.range="tooltip"}}Xr([Dt(ne("tooltip","node"))],$r.prototype,"range",void 0);var qr=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Zr extends Z{constructor(){super({name:"markerLabelGroup"}),this.label=new dt,this._marker=new ir,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=A.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}function Jr({orientation:t,bboxes:e,maxHeight:i,maxWidth:n,itemPaddingY:r=0,itemPaddingX:o=0,forceResult:s=!1}){const a="horizontal"===t,l={max:a?n:i,fn:a?t=>t.width:t=>t.height,padding:a?o:r},c={max:a?i:n,fn:a?t=>t.height:t=>t.width,padding:a?r:o};let h=0;const d=[];for(;h<e.length;){const t=Qr(e.slice(h),h,l,c,s);if(!t)return;h+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,n,r){let o=0,s=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,n)=>{e[n][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let o=0,s=0;return e.forEach(t=>{o+=t.height+n,s=Math.max(s,t.width+r)}),{indices:t,bboxes:e,columnHeight:o,columnWidth:s}});let c=0,h=0;return l.forEach(t=>{c+=t.columnWidth,h=Math.max(h,t.columnHeight)}),o=Math.max(c,o),s=Math.max(h,s),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:c,pageHeight:h}}),maxPageWidth:o,maxPageHeight:s}}(d,t,e,r,o)}function Qr(t,e,i,n,r){let o=function(t,e){const i=t.length;let n=0;for(let r=0;r<i;r++)if(n+=e.fn(t[r])+e.padding,n>e.max){return i/r<2?Math.ceil(i/2):r}return i}(t,i);if(o<1){if(!r)return;o=1}for(let s=o;s>=1;s--){const o=to(t,e,s,i,n,r);if(null==o&&s<=1)return;if(null==o)continue;if("number"==typeof o){if(o<=1)return;s=o<s&&o>1?o:s;continue}return{processedBBoxCount:o.length*o[0].length,pageIndices:o}}}function to(t,e,i,n,r,o){var s;const a=[];let l=0,c=0,h=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=c,c=0,h.length>0&&a.push(h),h=[]);const f=n.fn(t[u])+n.padding;d[p]=Math.max(null!==(s=d[p])&&void 0!==s?s:0,f),c=Math.max(c,r.fn(t[u])+r.padding);const g=l+c,y=!o||a.length>0;if(g>r.max&&y){h=[];break}if(d.reduce((t,e)=>t+e,0)>n.max&&!o)return d.length<i?d.length:void 0;h.push(u+e)}return h.length>0&&a.push(h),a.length>0?a:void 0}Zr.className="MarkerLabel",qr([Ni("label")],Zr.prototype,"text",void 0),qr([Ni("label")],Zr.prototype,"fontStyle",void 0),qr([Ni("label")],Zr.prototype,"fontWeight",void 0),qr([Ni("label")],Zr.prototype,"fontSize",void 0),qr([Ni("label")],Zr.prototype,"fontFamily",void 0),qr([Ni("label","fill")],Zr.prototype,"color",void 0),qr([Ni("marker","fill")],Zr.prototype,"markerFill",void 0),qr([Ni("marker","stroke")],Zr.prototype,"markerStroke",void 0),qr([Ni("marker","strokeWidth")],Zr.prototype,"markerStrokeWidth",void 0),qr([Ni("marker","fillOpacity")],Zr.prototype,"markerFillOpacity",void 0),qr([Ni("marker","strokeOpacity")],Zr.prototype,"markerStrokeOpacity",void 0);var eo=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class io{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}eo([Dt(Ut)],io.prototype,"color",void 0),eo([Dt(ae)],io.prototype,"fontStyle",void 0),eo([Dt(ce)],io.prototype,"fontWeight",void 0),eo([Dt(Zt(0))],io.prototype,"fontSize",void 0),eo([Dt(Gt)],io.prototype,"fontFamily",void 0);class no{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}eo([Dt(Zt(0))],no.prototype,"size",void 0),eo([Dt(Xt)],no.prototype,"fill",void 0),eo([Dt(Jt(0,1))],no.prototype,"fillOpacity",void 0),eo([Dt(Xt)],no.prototype,"stroke",void 0),eo([Dt(Zt(0))],no.prototype,"strokeWidth",void 0),eo([Dt(Zt(0,1))],no.prototype,"strokeOpacity",void 0);class ro{constructor(){this.size=15,this._shape=ar,this.padding=8}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}eo([Dt(Zt(0))],ro.prototype,"size",void 0),eo([Dt(Zt(0))],ro.prototype,"padding",void 0);class oo{constructor(t,e,i,n){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=n,this.id=I(this),this.group=new Z({name:"pagination"}),this.labelNode=new dt,this.marker=new ro,this.activeStyle=new no,this.inactiveStyle=new no,this.highlightStyle=new no,this.label=new io,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new ar,this._previousButton=new ar;const{labelNode:r}=this;r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=A.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,r]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:r,fontWeight:o,fontSize:s,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=n,i.fontStyle=r,i.fontWeight=o,i.fontSize=s,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:r,inactiveStyle:o,highlightStyle:s,highlightActive:a}=this,l=(t,e)=>e?o:t===a?s:r;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,r=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=r||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Yr.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=lr(this.marker.shape||ar);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Yr.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}oo.className="Pagination";var so=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const ao=["horizontal","vertical"],lo=Pt((t,e)=>Et(t,e,t=>ao.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class co{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}so([Dt(Jt(0))],co.prototype,"maxLength",void 0),so([Dt(Ut)],co.prototype,"color",void 0),so([Dt(ae)],co.prototype,"fontStyle",void 0),so([Dt(ce)],co.prototype,"fontWeight",void 0),so([Dt(Zt(0))],co.prototype,"fontSize",void 0),so([Dt(Gt)],co.prototype,"fontFamily",void 0),so([Dt(Ft)],co.prototype,"formatter",void 0);class ho{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}so([Dt(Zt(0))],ho.prototype,"size",void 0),so([Dt(Zt(0))],ho.prototype,"padding",void 0),so([Dt(Zt(0))],ho.prototype,"strokeWidth",void 0);class uo{constructor(){this.marker=new ho,this.label=new co,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}so([Dt(Jt(0))],uo.prototype,"maxWidth",void 0),so([Dt(Zt(0))],uo.prototype,"paddingX",void 0),so([Dt(Zt(0))],uo.prototype,"paddingY",void 0),so([Dt(jt)],uo.prototype,"toggleSeriesVisible",void 0);class po{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}so([Dt(Ft)],po.prototype,"legendItemClick",void 0);class fo{constructor(t){this.ctx=t,this.id=I(this),this.group=new Z({name:"legend",layer:!0,zIndex:Se.LEGEND_ZINDEX}),this.itemSelection=ki.select(this.group,Zr),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new uo,this.listeners=new po,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new oo(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=[t.interactionManager.addListener("click",t=>this.checkLegendClick(t)),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t)),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t))],i=[t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect))];this.destroyFns.push(...e.map(e=>()=>t.interactionManager.removeListener(e)),...i.map(e=>()=>t.layoutService.removeListener(e)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,F.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":A.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:r,maxWidth:o,marker:{size:s,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:p}}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const g=[],y=ut(r),v=null!=o?o:.8*t,m=s+a+i;if(this.itemSelection.each((t,e)=>{var i;const n=lr(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof n||(t.marker=new n),t.markerSize=s,t.spacing=a,t.fontStyle=h,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const r=null!==(i=e.itemId)&&void 0!==i?i:e.id,o=this.getItemLabel(e),f=(null!=o?o:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(f,c,v,m,y,r),g.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,x=this.oldSize;b[0]=t,b[1]=e,b[0]===x[0]&&b[1]===x[1]||(x[0]=b[0],x[1]=b[1]);const{pages:C,maxPageHeight:S,maxPageWidth:w}=this.updatePagination(g,t,e);this.pages=C,this.maxPageSize=[w-i,S-n];const O=this.pagination.currentPage,k=this.pages[O];this.pages.length<1||!k?this.visible=!1:(this.visible=!0,this.updatePositions(O),this.update())}truncate(t,e,i,n,r,o){const s=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(n+A.getTextSize(t,r).width)>i){let e="";const o=this.getCharacterWidths(r);let l=n+o["..."];for(const t of s){if(o[t]||(o[t]=A.getTextSize(t,r).width),l+=o[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(o)):this.truncatedItems.delete(o),t}updatePagination(t,e,i){const n=this.getOrientation(),r=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:s,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),h=o.findIndex(t=>t.endIndex>=r);this.pagination.currentPage=Math.min(Math.max(h,0),o.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,f=s-u;let g=0,y=-l.y-this.item.marker.size/2;return c?y+=f+8:(g+=-l.x+p+8,y+=(f-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:a,pages:o}}calculatePagination(t,e,i){var n,r,o;const{paddingX:s,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let h=this.pagination.computeBBox(),d=new _(0,0,0,0),u=[],p=0,f=0,g=0;const y=t=>{const{width:e,height:i}=t;return e===h.width&&i===h.height},v=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){$.warn("unable to find stable legend layout.");break}h=d;const y=e-(c?0:h.width),m=Jr({orientation:l,bboxes:t,maxHeight:i-(c?h.height:0),maxWidth:y,itemPaddingY:a,itemPaddingX:s,forceResult:v});u=null!==(n=null==m?void 0:m.pages)&&void 0!==n?n:[],p=null!==(r=null==m?void 0:m.maxPageWidth)&&void 0!==r?r:0,f=null!==(o=null==m?void 0:m.maxPageHeight)&&void 0!==o?o:0;const b=u.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!y(d));return{maxPageWidth:p,maxPageHeight:f,pages:u,paginationBBox:h,paginationVertical:c}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:r,startIndex:o,endIndex:s}=n[t];let a=0,l=0;const c=r.length,h=r[0].indices.length,d="horizontal"===this.getOrientation(),u=r[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var n,f;if(i<o||i>s)return void(t.visible=!1);const g=i-o;let y=0,v=0;d?(y=g%c,v=Math.floor(g/c)):(y=Math.floor(g/h),v=g%h),t.visible=!0;const m=r[y];m&&(l=u*v,a=null!==(n=p[v])&&void 0!==n?n:0,p[v]=(null!==(f=p[v])&&void 0!==f?f:0)+m.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Yr.SCENE_RENDER)}update(){const{marker:{strokeWidth:t},label:{color:e}}=this.item;this.itemSelection.each((i,n)=>{const r=n.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=t,i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=e})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const r of this.group.children){if(!r.visible)continue;if(!(r instanceof Zr))continue;const o=r.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(t,e))return r.datum;const s=t-o.x-this.item.paddingX/2,a=e-o.y-this.item.paddingY/2,l=Math.pow(s,2)+Math.pow(a,2);s>=0&&a>=0&&l<n.dist&&(n.dist=l,n.datum=r.datum),i.push(o)}if(_.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:r}}=this,{offsetX:o,offsetY:s}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(o,s),c=this.getDatumForPoint(o,s);if(!l||!c)return;const{id:h,itemId:d,enabled:u}=c,p=i.getSeries().find(t=>t.id===h);if(!p)return;t.consume();let f=u;r&&(f=!u,this.ctx.chartEventManager.legendItemClick(p,d,f)),f?n.updateHighlight(this.id,{series:p,itemId:d,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(Yr.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:f,itemId:d,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:r}}=this,{offsetX:o,offsetY:s}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(o,s),c=this.getDatumForPoint(o,s);if(!l||!c)return;const{id:h,itemId:d,seriesId:u}=c,p=n.getSeries(),f=p.find(t=>t.id===h);if(f){if(t.consume(),r){const t=p.reduce((t,e)=>[...t,...e.getLegendData().filter(t=>"category"===t.legendType)],[]),i={};t.forEach(t=>{var e,n;null!==(e=i[n=t.seriesId])&&void 0!==e||(i[n]=0),t.enabled&&i[t.seriesId]++});const n=t.find(t=>t.itemId===d&&t.seriesId===u);this.ctx.chartEventManager.legendItemDoubleClick(f,d,null!==(e=null==n?void 0:n.enabled)&&void 0!==e&&e,i)}this.ctx.updateService.update(Yr.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:d,seriesId:f.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:r}=this;if(!i)return;const o=this.computeBBox(),{pageX:s,pageY:a,offsetX:l,offsetY:c}=t,h=this.group.visible&&o.containsPoint(l,c);if(!h)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const d=this.getDatumForPoint(l,c);if(!(h&&void 0!==d))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const u=d?this.ctx.dataService.getSeries().find(t=>t.id===(null==d?void 0:d.id)):void 0;if(d&&this.truncatedItems.has(null!==(e=d.itemId)&&void 0!==e?e:d.id)){const e=this.getItemLabel(d);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:a,offsetX:l,offsetY:c,event:t,showArrow:!1},Re({content:e}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=r.legendItemClick||null!=r.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==d?void 0:d.enabled)&&u?this.ctx.highlightManager.updateHighlight(this.id,{series:u,itemId:null==d?void 0:d.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const r=this.computePagedBBox(),o=()=>{switch(this.position){case"top":return 0;case"bottom":return t.height-r.height;case"left":return 0;case"right":default:return t.width-r.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-r.width)/2,n=o(),e.shrink(r.height,this.position);break;case"left":case"right":default:i=o(),n=(t.height-r.height)/2,e.shrink(r.width,this.position)}this.group.translationX=Math.floor(-r.x+t.x+i),this.group.translationY=Math.floor(-r.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=r.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let r=0,o=0;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;r=this.maxWidth?Math.min(this.maxWidth,e):e,o=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const s=n>1?Math.min(.5,.25*n):.25;r=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),o=this.maxHeight?Math.min(this.maxHeight,i):i}return[r,o]}}fo.className="Legend",so([Dt(jt)],fo.prototype,"_enabled",void 0),so([Dt(ve)],fo.prototype,"position",void 0),so([Dt(Jt(0))],fo.prototype,"maxWidth",void 0),so([Dt(Jt(0))],fo.prototype,"maxHeight",void 0),so([Dt(Bt)],fo.prototype,"reverseOrder",void 0),so([Dt(lo)],fo.prototype,"orientation",void 0),so([Dt(Zt(0))],fo.prototype,"spacing",void 0);const go={category:fo};function yo(t,e){if(go[t])throw new Error("AG Charts - already registered legend type: "+t);go[t]=e}class vo{constructor(){this.cache=new Map}call(t,...e){let i,n=this.cache.get(t);const r=()=>{try{const r=t(...e);return n&&null!=i&&n.set(i,r),r}catch(t){return void $.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return r()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):r()}invalidateCache(){this.cache=new Map}}var mo=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},bo=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class xo extends mt{constructor(t=window.document,e,i){var n;super(),this.id=I(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new Z({name:this.id+"-Series-root"}),this.extraDebugStats={},this._container=void 0,this.data=[],this.padding=new ii(20),this.seriesAreaPadding=new ii(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=Yr.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=li(t=>setTimeout(t,0),({count:t})=>bo(this,void 0,void 0,(function*(){if(!this._destroyed)try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,$.error("update error",t)}}))),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return li(t=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)};const r=null==i?void 0:i.scene,o=null!==(n=null==i?void 0:i.element)&&void 0!==n?n:t.createElement("div"),s=null==i?void 0:i.container,a=new Z({name:"root"});a.visible=!1,a.append(this.seriesRoot),this.axisGroup=new Z({name:"Axes",layer:!0,zIndex:Se.AXIS_ZINDEX}),a.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=null!=r?r:new et({document:t,overrideDevicePixelRatio:e}),this.debug=!1,this.scene.debug.consoleLog=!1,this.scene.root=a,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new Ir,this.cursorManager=new Nr(o),this.highlightManager=new Fr,this.interactionManager=new zr(o),this.zoomManager=new Vr,this.dataService=new Kr(()=>this.series),this.layoutService=new Hr,this.updateService=new Ur((t=Yr.FULL,{forceNodeDataRefresh:e})=>this.update(t,{forceNodeDataRefresh:e})),this.callbackCache=new vo,this.animationManager=new Lr(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new Ne(this.scene.canvas.element,t,t.body),this.tooltipManager=new Wr(this.tooltip,this.interactionManager),this.overlays=new wr(this.element),this.highlight=new $r,this.container=s,ni.observe(this.element,t=>{var e;const{width:i,height:n}=t;if(!this.autoSize)return;if(0===i&&0===n)return;const[r=0,o=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];r===i&&o===n||(this._lastAutoSize=[i,n],this.resize())}),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)),this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(Yr.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(Yr.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var t;const{queuedUserOptions:e}=this;return Zn([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}set container(t){if(this._container!==t){const{parentNode:e}=this.element;null!=e&&e.removeChild(this.element),t&&!this.destroyed&&t.appendChild(this.element),this._container=t}}get container(){return this._container}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:r,interactionManager:o,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:h,mode:d,callbackCache:u}=this;return{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:r,interactionManager:o,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:h,mode:d,callbackCache:u}}destroy(t){var e;if(this._destroyed)return;const i=null==t?void 0:t.keepTransferableResources;let n=void 0;this._performUpdateType=Yr.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(e=this.legend)||void 0===e||e.destroy(),this.overlays.noData.hide(),ni.unobserve(this.element);for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t];return this.interactionManager.destroy(),i?(this.scene.strip(),n={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.series.forEach(t=>t.destroy()),this.series=[],this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,n}log(t){this.debug&&$.debug(t)}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){const e=this._pendingFactoryUpdates,i=e.length;0===i?(e.push(t),this._processCallbacks().catch(t=>$.errorOnce(t))):e.splice(1,i-1,t)}_processCallbacks(){return bo(this,void 0,void 0,(function*(){const t=this._pendingFactoryUpdates;for(;t.length>0;)if(this.updatePending)yield xr(1);else{try{yield t[0](),this.callbackCache.invalidateCache()}catch(t){$.error("update error",t)}t.shift()}}))}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==Yr.NONE||null!=this.lastInteractionEvent}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return bo(this,void 0,void 0,(function*(){yield this.performUpdateTrigger.await()}))}update(t=Yr.FULL,e){const{forceNodeDataRefresh:i=!1,seriesToUpdate:n=this.series}=null!=e?e:{};i&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of n)this.seriesToUpdate.add(t);t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())}performUpdate(t){var e;return bo(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:n}=this,r=[performance.now()];switch(i){case Yr.FULL:case Yr.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r.push(performance.now());case Yr.PERFORM_LAYOUT:if(this.autoSize&&!this._lastAutoSize){if(this._performUpdateNoRenderCount++<5){this._performUpdateType=Yr.PERFORM_LAYOUT,this.performUpdateTrigger.schedule();break}}this._performUpdateNoRenderCount=0,yield this.performLayout(),this.handleOverlays(),r.push(performance.now());case Yr.SERIES_UPDATE:const{seriesRect:t}=this,o=[...this.seriesToUpdate].map(e=>e.update({seriesRect:t}));this.seriesToUpdate.clear(),yield Promise.all(o),r.push(performance.now());case Yr.TOOLTIP_RECALCULATION:const s=this.tooltipManager.getTooltipMeta(this.id);i<Yr.SERIES_UPDATE&&"hover"===(null===(e=null==s?void 0:s.event)||void 0===e?void 0:e.type)&&this.handlePointer(s.event);case Yr.SCENE_RENDER:yield this.scene.render({debugSplitTimes:r,extraDebugStats:n}),this.extraDebugStats={};case Yr.NONE:this._performUpdateType=Yr.NONE}const o=performance.now();this.log({chart:this,durationMs:Math.round(100*(o-r[0]))/100,count:t,performUpdateType:Yr[i]})}))}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup),e.delete(t)}),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t,e){const{series:i,seriesRoot:n}=this;if(i.indexOf(t)<0){const r=e?i.indexOf(e):-1;return r>=0?(i.splice(r,0,t),n.insertBefore(t.rootGroup,e.rootGroup)):(i.push(t),n.append(t.rootGroup)),this.initSeries(t),!0}return!1}initSeries(t){t.chart=this,t.highlightManager=this.highlightManager,t.animationManager=this.animationManager,t.data||(t.data=this.data),this.addSeriesListeners(t),t.chartEventManager=this.chartEventManager,t.addChartEventListeners()}freeSeries(t){t.chart=void 0,t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}removeAllSeries(){this.series.forEach(t=>{this.freeSeries(t),this.seriesRoot.removeChild(t.rootGroup)}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>(t.direction===we.X?e.xAxis:e.yAxis)===t)})}assignAxesToSeries(t=!1){const e={};this.axes.forEach(t=>{var i;const n=t.direction;(null!==(i=e[n])&&void 0!==i?i:e[n]=[]).push(t)}),this.series.forEach(i=>{i.directions.forEach(n=>{if((n===we.X?i.xAxis:i.yAxis)&&!t)return;const r=e[n];if(!r)return void $.warn(`no available axis for direction [${n}]; check series and axes configuration.`);const o=i.getKeys(n),s=this.findMatchingAxis(r,i.getKeys(n));s?n===we.X?i.xAxis=s:i.yAxis=s:$.warn(`no matching axis for direction [${n}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const n of e)if(t.indexOf(n)>=0)return i}}resize(t,e){var i,n,r,o;null!=t||(t=null!==(i=this.width)&&void 0!==i?i:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!=e||(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[1]:this.scene.canvas.height),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(Yr.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return bo(this,void 0,void 0,(function*(){(this.axes.length>0||this.series.some(t=>t instanceof mr))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),yield Promise.all(this.series.map(t=>t.processData())),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const n of this.series){if(!n.visible)continue;const r=n.getLabelData();r&&(null!=(i=r[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(r),t.push(n))}var i;const{seriesRect:n}=this,r=n&&e.length>0?function(t,e,i=5){const n=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const c=n[l]=[],h=t[l];if((null==h?void 0:h.length)&&h[0].label)for(let l=0,d=h.length;l<d;l++){const d=h[l],u=d.label,p=.5*d.point.size,f=d.point.x-.5*u.width,g=d.point.y-p-u.height-i,{width:y,height:v}=u;if(!(!e||(s=g,a=v,(o=f)+y<(r=e).x+r.width&&o>r.x&&s>r.y&&s+a<r.y+r.height)))continue;if(t.some(t=>t.some(t=>ri(t.point,f,g,y,v))))continue;n.some(t=>t.some(t=>oi(t,f,g,y,v)))||c.push({index:l,text:u.text,x:f,y:g,width:y,height:v,datum:d})}}var r,o,s,a;return n}(e,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(r.map((e,i)=>[t[i],e]))}attachLegend(t){var e;if(this.legendType===t)return;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;const i=this.getModuleContext();this.legend=function(t,e){if(go[t])return new go[t](e);throw new Error("AG Charts - unknown legend type: "+t)}(t,i),this.legend.attachLegend(this.scene.root),this.legendType=t}setLegendInit(t){this.applyLegendOptions=t}updateLegend(){var t;return bo(this,void 0,void 0,(function*(){const e=[];this.series.filter(t=>t.showInLegend).forEach(t=>{const i=t.getLegendData();e.push(...i)});const i=e.length>0?e[0].legendType:"category";this.attachLegend(i),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,this.legend),"category"===i&&this.validateLegendData(e),this.legend.data=e}))}validateLegendData(t){const e={};t.forEach(t=>{var i,n,r,o,s;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;if(!a)return;const l=t;null!==(n=e[a])&&void 0!==n||(e[a]={[l.label.text]:new Set}),null!==(r=(o=e[a])[s=l.label.text])&&void 0!==r||(o[s]=new Set),null!=l.marker.fill&&e[a][l.label.text].add(l.marker.fill)}),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i].size>1&&$.warnOnce(`legend item '${i}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return bo(this,void 0,void 0,(function*(){this.scene.root.visible=!0;const{scene:{width:t,height:e}}=this;let i=new _(0,0,t,e);return({shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i})),({shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i})),i}))}positionPadding(t){const{padding:e}=this;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e;const{title:i,subtitle:n,footnote:r}=this,o=t.clone(),s=e=>{var i;const n=t.height/10,r=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*dt.defaultLineHeightRatio,o=t.width,s=Math.max(r,n);e.computeTextWrap(o,s)},a=t=>{var e;const i=o.y;t.node.x=o.x+o.width/2,t.node.y=i,t.node.textBaseline="top",s(t);const n=t.node.computeBBox(),r=Math.ceil(n.y-i+n.height+(null!==(e=t.spacing)&&void 0!==e?e:0));o.shrink(r,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&a(i)),n&&(n.node.visible=null!==(e=(null==i?void 0:i.enabled)&&n.enabled)&&void 0!==e&&e,n.node.visible&&a(n)),r&&(r.node.visible=r.enabled,r.node.visible&&(t=>{var e;const i=o.y+o.height;t.node.x=o.x+o.width/2,t.node.y=i,t.node.textBaseline="bottom",s(t);const n=t.node.computeBBox(),r=Math.ceil(i-n.y+(null!==(e=t.spacing)&&void 0!==e?e:0));o.shrink(r,"bottom")})(r)),{shrinkRect:o}}getSeriesRect(){return this.seriesRect}pickSeriesNode(t,e,i){var n,r;const o=performance.now(),s=e?[Be.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l=void 0;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:r,distance:o}=null!==(n=e.pickNode(t,s))&&void 0!==n?n:{};if(r&&null!=o&&((!l||l.distance>o)&&o<=(null!=i?i:1/0)&&(l={series:e,distance:o,datum:r}),0===o))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(r=this.extraDebugStats.pickSeriesNode)&&void 0!==r?r:0)+(performance.now()-o)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Yr.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:r}=t,o=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(n,r))?(this.handlePointerTooltip(t,o),this.handlePointerNode(t)):o()}handlePointerTooltip(t,e){var i,n;const{lastPick:r,tooltip:o}=this,{range:s}=o,{pageX:a,pageY:l,offsetX:c,offsetY:h}=t;let d;"number"==typeof s&&Number.isFinite(s)&&(d=s);const u=this.pickSeriesNode({x:c,y:h},"exact"===s,d);if(!u)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const p="node"===this.highlight.range||!r||r.datum!==u.datum;let f;p?(f=u.series.getTooltipHtml(u.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,u.datum)):r&&(r.event=t.sourceEvent);const g=null!=d,y=this.tooltip.enabled&&u.series.tooltip.enabled,v="exact"===s&&0===u.distance,m=y&&("nearest"===s||g||v)&&(!p||void 0!==f),b={xOffset:u.datum.series.tooltip.position.xOffset,yOffset:u.datum.series.tooltip.position.yOffset},x=this.mergePointerDatum({pageX:a,pageY:l,offsetX:c,offsetY:h,event:t,showArrow:u.series.tooltip.showArrow,position:b},u.datum);x.enableInteraction=null!==(n=null===(i=u.series.tooltip.interaction)||void 0===i?void 0:i.enabled)&&void 0!==n&&n,m&&this.tooltipManager.updateTooltip(this.id,x,f)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Yr.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Yr.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==i?void 0:i.datum,r=null==n?void 0:n.series.nodeClickRange;if(n&&"nearest"===r)return e(n.series,n),!0;let o;"number"==typeof r&&Number.isFinite(r)&&(o=r);const s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===r,o);if(!s)return!1;const a=null!=o,l="exact"===r&&0===s.distance;return!(!a&&!l)&&(e(s.series,s.datum),!0)}mergePointerDatum(t,e){const{type:i}=e.series.tooltip.position;if("node"===i&&e.nodeMidPoint){const{x:i,y:n}=e.nodeMidPoint,{canvas:r}=this.scene,o=e.series.rootGroup.inverseTransformPoint(i,n),s=r.element.getBoundingClientRect();return Object.assign(Object.assign({},t),{pageX:Math.round(s.left+window.scrollX+o.x),pageY:Math.round(s.top+window.scrollY+o.y),offsetX:Math.round(o.x),offsetY:Math.round(o.y)})}return t}changeHighlightDatum(t){var e,i;const n=new Set,{series:r,datum:o}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:s,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};s&&n.add(s),r&&n.add(r),(null==s?void 0:s.cursor)&&a&&this.cursorManager.updateCursor(s.id),(null==r?void 0:r.cursor)&&o&&this.cursorManager.updateCursor(r.id,r.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==r||null==s?this.update(Yr.SERIES_UPDATE):this.update(Yr.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return bo(this,void 0,void 0,(function*(){const e=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield xr(5)}yield this.awaitUpdateCompletion()}))}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const t=!this.series.some(t=>t.hasData()),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()}}mo([Ii({newValue(t){this.scene.debug.consoleLog=t}})],xo.prototype,"debug",void 0),mo([Ii({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>e.data=t)}})],xo.prototype,"data",void 0),mo([Ii({newValue(t){this.resize(t)}})],xo.prototype,"width",void 0),mo([Ii({newValue(t){this.resize(void 0,t)}})],xo.prototype,"height",void 0),mo([Ii({changeValue(t){this.autoSizeChanged(t)}}),Dt(jt)],xo.prototype,"autoSize",void 0),mo([Ii({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],xo.prototype,"title",void 0),mo([Ii({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],xo.prototype,"subtitle",void 0),mo([Ii({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],xo.prototype,"footnote",void 0),mo([Dt(ne("standalone","integrated"))],xo.prototype,"mode",void 0);class Co{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function So(t,e=!0){const i=new Co;let n=0;return e&&t.forEach(t=>n=Math.max(n,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach((e,i)=>{const r=t.children,o=r.find(t=>t.label===e),s=i!==n;if(o&&s)t=o;else{const i=new Co(e,t);i.number=r.length,r.push(i),s&&(t=i)}})}(i,t)}),i}function wo(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function Oo(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function ko(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach(t=>{ko(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let r=t,o=t,s=n,a=o.getLeftmostSibling(),l=o.mod,c=r.mod,h=s.mod,d=a.mod;for(;s.nextRight()&&o.nextLeft();){s=s.nextRight(),o=o.nextLeft(),a=a.nextLeft(),r=r.nextRight(),r.ancestor=t;const n=s.prelim+h-(o.prelim+l)+i;n>0&&(wo(Oo(s,t,e),t,n),l+=n,c+=n),h+=s.mod,l+=o.mod,d+=a.mod,c+=r.mod}s.nextRight()&&!r.nextRight()?(r.thread=s.nextRight(),r.mod+=h-c):(o.nextLeft()&&!a.nextLeft()&&(a.thread=o.nextLeft(),a.mod+=l-d),e=t)}return e}(t,n,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.prelim+=t,r.mod+=t,i+=r.change,t+=r.shift+i}}}(t);const r=(i[0].prelim+i[i.length-1].prelim)/2,o=t.getLeftSibling();o?(t.prelim=o.prelim+e,t.mod=t.prelim-r):t.prelim=r}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class To{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function Do(t){const e=new Po;return ko(t,1),function t(e,i,n){e.x=e.prelim+i,e.y=e.depth,n.update(e),e.children.forEach(r=>t(r,i+e.mod,n))}(t,-t.prelim,e),function t(e){const i=e.children;let n=0;i.forEach(e=>{t(e),e.children.length?n+=e.leafCount:n++}),e.leafCount=n,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class Po{constructor(){this.dimensions=new To,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,r=!1){const o=this.leafCount-1,s=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&o){const e=(a.right-a.left)/o;l=t/o/e,r&&(l=-l)}if(e>0&&s){const t=(a.bottom-a.top)/s;c=e/s/t}const h=new To;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*c,h.update(t,t=>({x:t.screenX,y:t.screenY}))});const d=-h.left,u=-h.top;this.nodes.forEach(t=>{t.screenX+=d+i,t.screenY+=u+n})}}var Eo=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Mo extends Gn{constructor(){super(...arguments),this.grid=!1}}Eo([Dt(jt)],Mo.prototype,"grid",void 0);class Ro extends Kn{constructor(t){super(t,new Di),this.tickScale=new Di,this.translation={x:0,y:0},this.line=new jn,this.label=new Mo,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:r,scale:o}=this;o.paddingOuter=.1,o.paddingInner=2*o.paddingOuter,this.range=o.range.slice(),this.refreshScale(),r.paddingInner=1,r.paddingOuter=0,this.gridLineSelection=ki.select(n,Ei),this.axisLineSelection=ki.select(e,Ei),this.separatorSelection=ki.select(e,Ei),this.labelSelection=ki.select(i,dt)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),r=n*e[0],o=t[0]-r;this.tickScale.range=i.range=[o,o+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,r=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*r,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*r,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e,boundSeries:i}=this,n=[];let r=void 0;i.filter(t=>t.visible).forEach(t=>{if(e===we.X)if(void 0===r){const i=t.getDomain(e);n.push(i),r="number"==typeof i[0]}else r&&n.push(t.getDomain(e));else n.push(t.getDomain(e))});const o=(new Array).concat(...n),s=null!==(t=wn(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(s),this.scale.domain=this.dataDomain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=So(e);this.tickTreeLayout=Do(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e}update(t){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:i,label:{parallel:n},moduleCtx:{callbackCache:r},tickScale:o,range:s,title:a,title:{formatter:l=(t=>t.defaultValue)}={},_titleCaption:c}=this,h=e.range[0],d=e.range[1],u=Math.abs(d-h)/e.domain.length||0,p=rt(this.rotation),f=Math.abs(Math.cos(p))<1e-8,g=i.getSideFlag();this.updatePosition({rotation:p,sideFlag:g}),c.node.visible=!1;const y=this.lineHeight,v=this.tickTreeLayout,m=e.ticks(),b=v?v.nodes:[],x=!!v&&v.depth>1,C=o.ticks(),{defaultRotation:S,configuredRotation:w,parallelFlipFlag:O}=Tn({rotation:i.rotation,parallel:n,regularFlipRotation:nt(p-Math.PI/2),parallelFlipRotation:nt(p)}),k=this.gridLineSelection.update(this.gridLength?C:[]),T=this.labelSelection.update(b),D=i.formatter,P=new Map;let E=0;T.each((t,e,n)=>{var o;t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fill=i.color,t.textBaseline=-1===O?"bottom":"hanging",t.textAlign="center",t.translationX=e.screenY-.25*i.fontSize,t.translationY=e.screenX,0===n?(null==a?void 0:a.enabled)&&m.length>0?(t.visible=!0,t.text=r.call(l,this.getTitleFormatterParams()),t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.fontWeight=a.fontWeight,t.fontFamily=a.fontFamily,t.textBaseline="hanging"):t.visible=!1:D?(t.text=null!==(o=r.call(D,{value:String(e.label),index:n}))&&void 0!==o?o:String(e.label),t.visible=e.screenX>=s[0]&&e.screenX<=s[1]):(t.text=String(e.label),t.visible=e.screenX>=s[0]&&e.screenX<=s[1]);const c=t.computeBBox();P.set(t.id,c),c.width>E&&(E=c.width)});const M=g*i.padding,R=this.label.grid,A=[];T.each((t,e,i)=>{if(t.x=M,t.rotationCenterX=M,e.children.length){t.translationX-=E-y+this.label.padding;const i=e.leafCount*u,n=P.get(t.id);n&&n.width>i?t.visible=!1:t.rotation=f?S:-Math.PI/2}else{t.rotation=w,t.textAlign="end",t.textBaseline="middle";const e=P.get(t.id);e&&e.height>u&&(t.visible=!1)}if(e.parent&&x){const t=e.children.length?e.screenX-e.leafCount*u/2:e.screenX-u/2;if(e.children.length){const n=-E-2*this.label.padding+e.screenY;A.push({y:t,x1:n+y,x2:n,toString:()=>String(i)})}else(e.number!==e.children.length-1||R)&&A.push({y:t,x1:0,x2:-E-2*this.label.padding,toString:()=>String(i)})}});let _=0;A.forEach(t=>_=Math.min(_,t.x2)),A.push({y:Math.max(h,d),x1:0,x2:_,toString:()=>String(A.length)});const L=this.separatorSelection.update(A);L.each((t,e)=>{t.x1=e.x1,t.x2=e.x2,t.y1=e.y,t.y2=e.y,t.visible=e.y>=s[0]-1e-7&&e.y<=s[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}),this.gridLineSelection=k,this.labelSelection=T;const N=v?v.depth+1:1,I=[];for(let t=0;t<N;t++)I.push(t);if(this.axisLineSelection.update(I).each((t,e,i)=>{const n=i>0?-E-2*this.label.padding-(i-1)*y:0;t.x1=n,t.x2=n,t.y1=s[0],t.y2=s[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=m.length>0&&(0===i||R&&x)}),this.gridLength){const t=this.gridStyle,e=t.length;k.each((i,n,r)=>{const a=Math.round(o.convert(n));i.x1=0,i.x2=-g*this.gridLength,i.y1=a,i.y2=a,i.visible=a>=s[0]&&a<=s[1];const l=t[r%e];i.stroke=l.stroke,i.strokeWidth=this.tick.width,i.lineDash=l.lineDash,i.fill=void 0})}return t}}Ro.className="GroupedCategoryAxis",Ro.type="groupedCategory",Eo([Dt(Xt)],Ro.prototype,"labelColor",void 0);var Ao=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const _o=["top","right","bottom","left"];class Lo extends xo{constructor(t=window.document,e,i){super(t,e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return Ao(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesRect:i,visibility:n,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=i,this.series.forEach(t=>{t.rootGroup.translationX=Math.floor(i.x),t.rootGroup.translationY=Math.floor(i.y)});const{seriesRoot:o,seriesAreaPadding:s}=this,a=i.clone().grow(s),l=a.clone().grow(20);return this.hoverRect=l,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:a,hoverRect:l,visible:n.series},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),r?o.setClipRectInGroupCoordinateSpace(a):o.setClipRectInGroupCoordinateSpace(),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),n=Object.assign({},this._lastVisibility),r=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))r.has(t)||delete i[t];const o=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(i).every(([e,i])=>{const n=t[e];return null==i&&null==n||i===n}));let s={},a={},l=!1,c=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),h=0;do{Object.assign(i,s),Object.assign(n,a);const e=this.updateAxesPass(i,t.clone(),c);if(d=e.axisWidths,s=Object.entries(d).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,c=e.seriesRect,h++>10){$.warn("unable to find stable axis layout.");break}}while(!o(s,a));var d;return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=n,{seriesRect:c,visibility:n,clipSeries:l}}updateAxesPass(t,e,i){const{axes:n}=this,r={},o={},s={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(e),h=i?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(c,t,h,s),u=this.buildSeriesRect(d,t);return n.forEach(e=>{var i,n;const{position:s}=e,{clipSeries:h,axisThickness:p,axisOffset:f}=this.calculateAxisDimensions({axis:e,seriesRect:u,paddedBounds:c,axisWidths:t,newAxisWidths:o,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=r[s])&&void 0!==i?i:0)>0});r[s]=(null!==(n=r[s])&&void 0!==n?n:0)+1,a=a||h,this.positionAxis({axis:e,axisBound:d,axisOffset:f,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:u})}),{clipSeries:a,seriesRect:u,axisWidths:o,visibility:s}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[n,r=0]of Object.entries(i))i[n]=Math.max(r-(null!==(e=t[n])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return _o.forEach(t=>{const n=this.seriesAreaPadding[t],r=i.find(e=>e.position===t);r?r.seriesAreaPadding=n:e.shrink(n,t)}),e}buildAxisBound(t,e,i,n){var r,o,s,a;const l=t.clone(),{top:c=0,right:h=0,bottom:d=0,left:u=0}=i,p=u+h,f=c+d,g=(null!==(r=e.left)&&void 0!==r?r:0)+(null!==(o=e.right)&&void 0!==o?o:0)+p,y=(null!==(s=e.top)&&void 0!==s?s:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+f;return l.width<=g||l.height<=y?(n.crossLines=!1,n.series=!1,l):(l.x+=u,l.y+=c,l.width-=p,l.height-=f,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:r,left:o,right:s}=e;return i.x+=null!=o?o:0,i.y+=null!=n?n:0,i.width-=(null!=o?o:0)+(null!=s?s:0),i.height-=(null!=n?n:0)+(null!=r?r:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:r,y:o,width:s,height:a}=t,l=[r,o,r+s,o+a];return(1===n?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(t){var e,i,n,r,o,s;const{axis:a,seriesRect:l,paddedBounds:c,axisWidths:h,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:p}=t;let{clipSeries:f}=t;const{position:g,direction:y}=a,v=null!==(e=d[g])&&void 0!==e?e:0;switch(g){case"top":case"bottom":a.range=[0,l.width],a.gridLength=l.height;break;case"right":case"left":a.range=(t=>t instanceof Un||t instanceof Ro?[0,l.height]:[l.height,0])(a),a.gridLength=l.width}const m=null===(i=this.zoomManager.getZoom())||void 0===i?void 0:i[a.direction],{min:b=0,max:x=1}=null!=m?m:{};a.visibleRange=[b,x],!f&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(f=!0);let C=a.nice?u[y]:void 0;a.thickness>0?a.maxThickness=a.thickness:y===we.Y?a.maxThickness=.3*c.width:a.maxThickness=.3*c.height,C=a.update(C),u[y]=null!==(n=u[y])&&void 0!==n?n:C;let S=0;if(a.thickness)S=a.thickness;else{const t=a.computeBBox();S=y===we.X?t.height:t.width}return p&&(S+=15),S=Math.ceil(S),d[g]=(null!==(r=d[g])&&void 0!==r?r:0)+S,a.gridPadding=(null!==(o=h[g])&&void 0!==o?o:0)-(null!==(s=d[g])&&void 0!==s?s:0),{clipSeries:f,axisThickness:S,axisOffset:v}}positionAxis(t){var e,i,n,r;const{axis:o,axisBound:s,axisWidths:a,seriesRect:l,axisOffset:c,axisThickness:h}=t,{position:d}=o;switch(d){case"top":o.translation.x=s.x+(null!==(e=a.left)&&void 0!==e?e:0),o.translation.y=this.clampToOutsideSeriesRect(l,s.y+1+c+h,"y",1);break;case"bottom":o.translation.x=s.x+(null!==(i=a.left)&&void 0!==i?i:0),o.translation.y=this.clampToOutsideSeriesRect(l,s.y+s.height+1-h-c,"y",-1);break;case"left":o.translation.y=s.y+(null!==(n=a.top)&&void 0!==n?n:0),o.translation.x=this.clampToOutsideSeriesRect(l,s.x+c+h,"x",1);break;case"right":o.translation.y=s.y+(null!==(r=a.top)&&void 0!==r?r:0),o.translation.x=this.clampToOutsideSeriesRect(l,s.x+s.width-h-c,"x",-1)}o.updatePosition({rotation:rt(o.rotation),sideFlag:o.label.getSideFlag()})}}Lo.className="CartesianChart",Lo.type="cartesian";class No extends ti{constructor({moduleCtx:t,useLabelLayer:e=!1,pickModes:i=[Be.EXACT_SHAPE_MATCH]}){super({moduleCtx:t,useLabelLayer:e,pickModes:i,directionKeys:{[we.X]:["angleKey"],[we.Y]:["radiusKey"]},directionNames:{[we.X]:["angleName"],[we.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}}function Io(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:r,outerRadius:o}=i;if(n<Math.min(r,o)||n>Math.max(r,o))return!1;let s=Math.atan2(e,t);s<-Math.PI/2&&(s+=2*Math.PI);const{startAngle:a,endAngle:l}=i;return l===-Math.PI/2?s<a:a===3*Math.PI/2?s>l:s<=l&&s>=a}function Fo(t,e){const{startAngle:i,endAngle:n,innerRadius:r,outerRadius:o}=e,s={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(n),y:o*Math.sin(n)},l=0===r?{x:0,y:0}:{x:r*Math.cos(i),y:r*Math.sin(i)},c=0===r?{x:0,y:0}:{x:r*Math.cos(n),y:r*Math.sin(n)};return null!=hi(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,l.x,l.y)||null!=hi(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||pi(0,0,o,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var jo=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Bo extends vi{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0}computeBBox(){const t=this.outerRadius;return new _(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,e=this.angleOffset,i=Math.min(this.startAngle,this.endAngle)+e,n=Math.max(this.startAngle,this.endAngle)+e,r=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),s=Mi(nt(this.startAngle),nt(this.endAngle)),a=this.centerX,l=this.centerY;t.clear(),s?(t.arc(a,l,o,i,n),r>0&&(t.moveTo(a+r*Math.cos(n),l+r*Math.sin(n)),t.arc(a,l,r,n,i,!0))):(t.moveTo(a+r*Math.cos(i),l+r*Math.sin(i)),t.arc(a,l,o,i,n),r>0?t.arc(a,l,r,n,i,!0):t.lineTo(a,l)),t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,r=this.endAngle+i,o=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return Io(a.x,a.y,{startAngle:n,endAngle:r,innerRadius:o,outerRadius:s})}}Bo.className="Sector",jo([yi()],Bo.prototype,"centerX",void 0),jo([yi()],Bo.prototype,"centerY",void 0),jo([yi()],Bo.prototype,"innerRadius",void 0),jo([yi()],Bo.prototype,"outerRadius",void 0),jo([yi()],Bo.prototype,"startAngle",void 0),jo([yi()],Bo.prototype,"endAngle",void 0),jo([yi()],Bo.prototype,"angleOffset",void 0);const Go={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e,i)=>{const n=i.keys[0],r=Math.abs(n-t);return t=n,!isNaN(r)&&r>0&&r<e?r:e}}},zo={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,n,r;const o=[...null!==(i=null===(e=t.domain.aggValues)||void 0===e?void 0:e[0])&&void 0!==i?i:[0,0]];for(const[e,i]of null!==(r=null===(n=t.domain.aggValues)||void 0===n?void 0:n.slice(1))&&void 0!==r?r:[])e<o[0]&&(o[0]=e),i>o[1]&&(o[1]=i);return o}},Wo={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function Vo(t,e,i="sum"){const n=(t,i)=>{const n=t*e/i;return n>=0?Math.min(e,n):Math.max(-e,n)};return{type:"group-value-processor",properties:t,adjust:()=>(t,e)=>{const r=[0,0];for(const n of e){const e=t[n],o=e<0?0:1;"sum"===i?r[o]+=e:r[o]=0===o?Math.min(r[o],e):Math.max(r[o],e)}const o=Math.max(Math.abs(r[0]),r[1]);for(const i of e)t[i]=n(t[i],o)}}}function Ho(t,e,i,n){const r=e[1]-e[0],o=(t,i,n)=>{const o=e[0]+(t-i)/n*r;return 0===n||o>=e[1]?e[1]:o<e[0]?e[0]:o};return{type:"property-value-processor",property:t,adjust:()=>(t,r)=>{let[s,a]=t.domain.values[r];null!=i&&(s=i),null!=n&&(a=n);const l=a-s;t.domain.values[r]=[e[0],e[1]];for(const e of t.data){let i=e.values;"ungrouped"===t.type&&(i=[i]);for(const t of i)t[r]=o(t[r],s,l)}}}}var Ko,Yo=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Uo=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Xo extends Ke{constructor(t,e,i,n,r,o,s){super(r,o,s),this.angleKey=t,this.calloutLabelKey=e,this.sectorLabelKey=i,this.radiusKey=n}}class $o extends Xo{constructor(){super(...arguments),this.type="nodeClick"}}class qo extends Xo{constructor(){super(...arguments),this.type="nodeDoubleClick"}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(Ko||(Ko={}));class Zo extends kn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50}}Yo([Dt(Zt(0))],Zo.prototype,"offset",void 0),Yo([Dt(Zt(0))],Zo.prototype,"minAngle",void 0),Yo([Dt(Ft)],Zo.prototype,"formatter",void 0),Yo([Dt(Zt(0))],Zo.prototype,"minSpacing",void 0),Yo([Dt(Zt(0))],Zo.prototype,"maxCollisionOffset",void 0);class Jo extends kn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}Yo([Dt(Zt())],Jo.prototype,"positionOffset",void 0),Yo([Dt(Zt(0,1))],Jo.prototype,"positionRatio",void 0),Yo([Dt(Ft)],Jo.prototype,"formatter",void 0);class Qo{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}Yo([Dt(qt)],Qo.prototype,"colors",void 0),Yo([Dt(Zt(0))],Qo.prototype,"length",void 0),Yo([Dt(Zt(0))],Qo.prototype,"strokeWidth",void 0);class ts extends Je{constructor(){super(...arguments),this.renderer=void 0}}Yo([Dt(Ft)],ts.prototype,"renderer",void 0);class es extends ji{constructor(){super(...arguments),this.showInLegend=!1}}Yo([Dt(jt)],es.prototype,"showInLegend",void 0);class is extends kn{constructor(){super(...arguments),this.text="",this.margin=2}}Yo([Dt(Gt)],is.prototype,"text",void 0),Yo([Dt(Zt())],is.prototype,"margin",void 0);class ns{constructor(){this.fill="transparent",this.fillOpacity=1}}Yo([Dt(Ut)],ns.prototype,"fill",void 0),Yo([Dt(Jt(0,1))],ns.prototype,"fillOpacity",void 0);class rs extends cr{}class os extends No{constructor(t){super({moduleCtx:t,useLabelLayer:!0}),this.radiusScale=new Vn,this.groupSelection=ki.select(this.contentGroup,Z),this.highlightSelection=ki.select(this.highlightGroup,Z),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new Zo,this.sectorLabel=new Jo,this.calloutLine=new Qo,this.tooltip=new ts,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Ze,this.surroundingRadius=void 0,this.angleScale=new Vn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new Z({name:this.id+"-background",layer:!0,zIndex:Se.SERIES_BACKGROUND_ZINDEX}));const e=new Z({name:"pieCalloutLabels"}),i=new Z({name:"pieSectorLabels"}),n=new Z({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=ki.select(e,Z),this.sectorLabelSelection=ki.select(i,dt),this.innerLabelsSelection=ki.select(n,dt),this.animationState=new rs("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(t){this._data=t,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var t;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}getDomain(t){return t===we.X?this.angleScale.domain:this.radiusScale.domain}processData(){var t,e;return Uo(this,void 0,void 0,(function*(){let{data:i=[]}=this;const{angleKey:n,radiusKey:r,seriesItemEnabled:o}=this;if(!n)return;const s=[];r&&(s.push(function(t,e={}){const{min:i=-1/0,max:n=1/0}=e,r=ze(e,["min","max"]);return Object.assign({type:"value",property:t,valueType:"range",validation:t=>null!=St(t,!0),processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,i),n)},r)}(r,{id:"radiusValue",min:null!==(t=this.radiusMin)&&void 0!==t?t:0,max:this.radiusMax}),Ve(r,!0,{id:"radiusRaw"}),Ho({id:"radiusValue"},[0,1],null!==(e=this.radiusMin)&&void 0!==e?e:0,this.radiusMax)),s.push()),i=i.map((t,e)=>o[e]?t:Object.assign(Object.assign({},t),{[n]:0})),this.dataModel=new Pe({props:[He(n,!0,{id:"angleValue"}),Ve(n,!0,{id:"angleRaw"}),Ho({id:"angleValue"},[0,1],0),...s]}),this.processedData=this.dataModel.processData(i)}))}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=this._createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){return Uo(this,void 0,void 0,(function*(){return this._createNodeData()}))}_createNodeData(){var t,e,i,n;const{id:r,processedData:o,dataModel:s,rotation:a,angleScale:l}=this;if(!o||!s||"ungrouped"!==o.type)return[];const c=null!==(e=null===(t=s.resolveProcessedDataIndexById("angleValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,h=null!==(n=null===(i=s.resolveProcessedDataIndexById("radiusValue"))||void 0===i?void 0:i.index)&&void 0!==n?n:-1;if(c<0)return[];let d=0;const u=o.data.map((t,e)=>{var i;const{datum:n,values:r}=t,o=r[c],s=l.convert(d)+rt(a);d=o;const u=l.convert(d)+rt(a),p=Math.abs(u-s),f=s+p/2,g=r[c+1],y=h>=0&&null!==(i=r[h])&&void 0!==i?i:1,v=h>=0?r[h+1]:void 0,m=this.getLabels(n,f,p,!0),b=this.getSectorFormat(n,e,e,!1);return Object.assign({itemId:e,series:this,datum:n,index:e,angleValue:g,midAngle:f,midCos:Math.cos(f),midSin:Math.sin(f),startAngle:s,endAngle:u,sectorFormat:b,radius:y,radiusValue:v},m)});return[{itemId:r,nodeData:u,labelData:u}]}getLabels(t,e,i,n){const{calloutLabel:r,sectorLabel:o,legendItemKey:s,ctx:{callbackCache:a}}=this,l=!n||r.enabled?this.calloutLabelKey:void 0,c=!n||o.enabled?this.sectorLabelKey:void 0;if(!l&&!c&&!s)return{};const h=this.getLabelFormatterParams(t);let d,u,p;if(l){d=i>rt(r.minAngle)?r.formatter?a.call(r.formatter,h):String(t[l]):void 0}return c&&(u=o.formatter?a.call(o.formatter,h):String(t[c])),s&&(p=String(t[s])),Object.assign(Object.assign(Object.assign({},null!=d?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(e)),{text:d,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=u?{sectorLabel:{text:u}}:{}),null!=s&&null!=p?{legendItem:{key:s,text:p}}:{})}getLabelFormatterParams(t){const{id:e,radiusKey:i,radiusName:n,angleKey:r,angleName:o,calloutLabelKey:s,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:c}=this;return{datum:t,angleKey:r,angleValue:t[r],angleName:o,radiusKey:i,radiusValue:i?t[i]:void 0,radiusName:n,calloutLabelKey:s,calloutLabelValue:s?t[s]:void 0,calloutLabelName:a,sectorLabelKey:l,sectorLabelValue:l?t[l]:void 0,sectorLabelName:c,seriesId:e}}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}];var i;const n=(i=t,(i%=it)<-Math.PI?i+=it:i>=Math.PI&&(i-=it),i)- -3*Math.PI/4,r=Math.floor(n/(Math.PI/2));var o,s;return e[(s=e.length,(o=r)>=0?Math.floor(o%s):Math.floor(o%s+s))]}getSectorFormat(t,e,i,n){var r,o,s,a,l,c,h,d,u;const{angleKey:p,radiusKey:f,fills:g,strokes:y,fillOpacity:v,formatter:m,id:b,ctx:{callbackCache:x}}=this,C=null===(r=this.highlightManager)||void 0===r?void 0:r.getActiveHighlight(),S=n&&(null==C?void 0:C.series)===this&&e===C.itemId,w=S?this.highlightStyle.item:null,O=null!==(o=null==w?void 0:w.fill)&&void 0!==o?o:g[i%g.length],k=null!==(s=null==w?void 0:w.fillOpacity)&&void 0!==s?s:v,T=null!==(a=null==w?void 0:w.stroke)&&void 0!==a?a:y[i%y.length],D=null!==(l=null==w?void 0:w.strokeWidth)&&void 0!==l?l:this.getStrokeWidth(this.strokeWidth);let P;return m&&(P=x.call(m,{datum:t,angleKey:p,radiusKey:f,fill:O,stroke:T,strokeWidth:D,highlighted:S,seriesId:b})),{fill:null!==(c=null==P?void 0:P.fill)&&void 0!==c?c:O,fillOpacity:null!==(h=null==P?void 0:P.fillOpacity)&&void 0!==h?h:k,stroke:null!==(d=null==P?void 0:P.stroke)&&void 0!==d?d:T,strokeWidth:null!==(u=null==P?void 0:P.strokeWidth)&&void 0!==u?u:D}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n===t||n<0?0:n}getOuterRadius(){const{radius:t,outerRadiusRatio:e,outerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n<0?0:n}updateRadiusScale(){const t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return Uo(this,void 0,void 0,(function*(){const{title:e}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.rootGroup.translationX=this.centerX,this.rootGroup.translationY=this.centerY,e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var t;const{innerCircle:e,oldInnerCircle:i,innerCircleNode:n}=this;if(i!==e){let i;n&&this.backgroundGroup.removeChild(n),e&&(i=new xi,i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(i)),this.oldInnerCircle=e,this.innerCircleNode=i}}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=this.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,e/2),y:t.midSin*Math.max(0,e/2)}})}updateSelections(){return Uo(this,void 0,void 0,(function*(){yield this.updateGroupSelection()}))}updateGroupSelection(){return Uo(this,void 0,void 0,(function*(){const{groupSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:r}=this,o=t=>t.update(this.nodeData,t=>{const e=new Bo;e.tag=Ko.Sector,t.appendChild(e)});this.groupSelection=o(t),this.highlightSelection=o(e),i.update(this.nodeData,t=>{const e=new Ei;e.tag=Ko.Callout,e.pointerEvents=z.None,t.appendChild(e);const i=new dt;i.tag=Ko.Label,i.pointerEvents=z.None,t.appendChild(i)}),n.update(this.nodeData,t=>{t.pointerEvents=z.None}),r.update(this.innerLabels,t=>{t.pointerEvents=z.None})}))}updateNodes(t){var e;return Uo(this,void 0,void 0,(function*(){const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&(null==i?void 0:i.series)===this,this.labelGroup.visible=n,this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:r}=this,o=r.convert(0),s=(t,e,i,n)=>{const s=r.convert(e.radius),a=t.parent,l=null==a?void 0:a.parent;n&&a&&l&&(l.removeChild(a),l.appendChild(a)),t.innerRadius=Math.max(0,o),t.outerRadius=Math.max(0,s),n&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);const c=this.getSectorFormat(e.datum,e.itemId,i,n);t.fill=c.fill,t.stroke=c.stroke,t.strokeWidth=c.strokeWidth,t.fillOpacity=c.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round",t.visible=this.seriesItemEnabled[i]};this.groupSelection.selectByTag(Ko.Sector).forEach((t,e)=>s(t,t.datum,e,!1)),this.highlightSelection.selectByTag(Ko.Sector).forEach((t,e)=>{const n=(null==i?void 0:i.series)===this&&t.datum.itemId===i.itemId;t.visible=n,t.visible&&s(t,t.datum,e,n)}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()}))}updateCalloutLineNodes(){var t;const{radiusScale:e,calloutLine:i}=this,n=i.length,r=i.strokeWidth,o=null!==(t=i.colors)&&void 0!==t?t:this.strokes,{offset:s}=this.calloutLabel;this.calloutLabelSelection.selectByTag(Ko.Callout).forEach((t,i)=>{const a=t.datum,l=e.convert(a.radius),c=Math.max(0,l),h=a.calloutLabel;if((null==h?void 0:h.text)&&!h.hidden&&0!==c){t.visible=!0,t.strokeWidth=r,t.stroke=o[i%o.length],t.fill=void 0;const e=a.midCos*c,l=a.midSin*c;let d=a.midCos*(c+n),u=a.midSin*(c+n);if(h.collisionTextAlign||0!==h.collisionOffsetY){const t=h.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const n=e-d,r=i-u,o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),a=o-s;a>0&&(d+=n*a/o,u+=r*a/o)}t.x1=e,t.y1=l,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,r=i.x+i.width-this.centerX,o=i.y-this.centerY,s=i.y+i.height-this.centerY;let a=1;e.x+1<n?a=(e.x+e.width-n)/e.width:e.x+e.width-1>r&&(a=(r-e.x)/e.width);const l=e.y+1<o||e.y+e.height-1>s;return{visibleTextPart:a,textLength:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const r=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],o=Math.pow(n,2);return r.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>o)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:r}=e,o=t.convert(0),s=this.nodeData,a=this.nodeData.filter(e=>!(e=>{const i=e.calloutLabel,n=t.convert(e.radius),r=Math.max(0,n);return!i||0===r})(e));if(a.forEach(t=>{const e=t.calloutLabel;e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),h=a.filter(t=>t.midSin<0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),d=a.filter(t=>t.midSin>=0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),u=new dt,p=e=>{const r=e.calloutLabel,o=t.convert(e.radius),s=Math.max(0,o)+i.length+n,a=e.midCos*s,l=e.midSin*s+r.collisionOffsetY;return this.setTextDimensionalProps(u,a,l,this.calloutLabel,r),u.computeBBox()},f=(t,e,i)=>{const n=p(t).grow(r/2),o=p(e).grow(r/2);if(n.x<o.x+o.width&&n.x+n.width>o.x&&("to-top"===i?n.y<o.y+o.height:n.y+n.height>o.y)){const t="to-top"===i?n.y-o.y-o.height:n.y+n.height-o.y;e.calloutLabel.collisionOffsetY=t}},g=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],n=t[e];f(i,n,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],n=t[e];f(i,n,"to-bottom")}},y=e=>{const i=a.some(t=>0!==t.calloutLabel.collisionOffsetY),n=e.map(t=>p(t)),l=n.map(t=>t.clone().grow(r/2));let c=!1;for(let t=0;t<l.length&&!c;t++){const i=l[t];for(let n=t+1;n<e.length;n++){const t=l[n];if(i.collidesBBox(t)){c=!0;break}}}const h=s.map(e=>{const{startAngle:i,endAngle:n}=e,r=t.convert(e.radius),s=Math.max(0,r);return{startAngle:i,endAngle:n,innerRadius:o,outerRadius:s}}),d=n.some(t=>h.some(e=>function(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},r={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height};return Fo({start:i,end:n},e)||Fo({start:r,end:o},e)}(t,e)));(c||i||d)&&e.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};g(l),g(c),y(h),y(d)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,r=n.length,{offset:o,color:s}=i,a=new dt;this.calloutLabelSelection.selectByTag(Ko.Label).forEach(i=>{const{datum:n}=i,l=n.calloutLabel,c=e.convert(n.radius),h=Math.max(0,c);if(!(null==l?void 0:l.text)||0===h||l.hidden)return void(i.visible=!1);const d=h+r+o,u=n.midCos*d,p=n.midSin*d+l.collisionOffsetY;this.setTextDimensionalProps(a,u,p,this.calloutLabel,l);const f=a.computeBBox(),{visibleTextPart:g,textLength:y,hasVerticalOverflow:v}=this.getLabelOverflow(l.text,f,t),m=1===g?l.text:l.text.substring(0,y)+"\u2026";this.setTextDimensionalProps(i,u,p,this.calloutLabel,Object.assign(Object.assign({},l),{text:m})),i.fill=s,i.visible=!v})}computeLabelsBBox(t,e){var i;const{radiusScale:n,calloutLabel:r,calloutLine:o}=this,s=o.length,{offset:a,maxCollisionOffset:l,minSpacing:c}=r;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const h=[],d=new dt;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(this.setTextDimensionalProps(d,0,t,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0}),u=d.computeBBox(),h.push(u))}return this.nodeData.forEach(i=>{const r=i.calloutLabel,o=n.convert(i.radius),p=Math.max(0,o);if(!r||0===p)return null;const f=p+s+a,g=i.midCos*f,y=i.midSin*f+r.collisionOffsetY;this.setTextDimensionalProps(d,g,y,this.calloutLabel,r);const v=d.computeBBox();if(r.box=v,Math.abs(r.collisionOffsetY)>l)r.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new _(u.x-c,t,u.width+2*c,u.y+u.height+c-t);if(v.collidesBBox(i))return void(r.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(r.text,v,e),o=r.text.length>2&&t<2;if(i||o||n)return void(r.hidden=!0)}r.hidden=!1,h.push(v)}}),0===h.length?null:_.merge(h)}setTextDimensionalProps(t,e,i,n,r){var o,s;const{fontStyle:a,fontWeight:l,fontSize:c,fontFamily:h}=n;t.fontStyle=a,t.fontWeight=l,t.fontSize=c,t.fontFamily=h,t.text=r.text,t.x=e,t.y=i,t.textAlign=null!==(s=null!==(o=null==r?void 0:r.collisionTextAlign)&&void 0!==o?o:null==r?void 0:r.textAlign)&&void 0!==s?s:"center",t.textBaseline=r.textBaseline}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:r,fontFamily:o,positionOffset:s,positionRatio:a,color:l}=this.sectorLabel,c=e>0,h=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((d,u)=>{const p=u.sectorLabel,f=t.convert(u.radius),g=Math.max(0,f);let y=!1;if(p&&0!==g){const t=e*(1-a)+f*a+s;d.fill=l,d.fontStyle=n,d.fontWeight=r,d.fontSize=i,d.fontFamily=o,d.text=p.text;!c&&h?(d.x=0,d.y=0):(d.x=u.midCos*t,d.y=u.midSin*t),d.textAlign="center",d.textBaseline="middle";const v=d.computeBBox(),m=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:b,endAngle:x}=u,C={startAngle:b,endAngle:x,innerRadius:e,outerRadius:g};m.every(([t,e])=>Io(t,e,C))&&(y=!0)}d.visible=y})}updateInnerCircle(){const t=this.innerCircleNode;if(!t)return;const e=this.getInnerRadius();if(0===e)t.size=0;else{const i=Math.min(e,this.getOuterRadius()),n=1;t.size=Math.ceil(2*i+n)}}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:r,fontWeight:o,fontSize:s,fontFamily:a,color:l}=n;i.fontStyle=r,i.fontWeight=o,i.fontSize=s,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)});const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],r=t.reduce((t,e,r)=>t+e.height+i(r)+n(r),0),o=Math.max(...t.map(t=>t.width)),s=this.getInnerRadius(),a=Math.sqrt(Math.pow(o/2,2)+Math.pow(r/2,2))<=(s>0?s:this.getOuterRadius()),l=[];for(let e=0,o=-r/2;e<t.length;e++){const r=t[e].height+o+i(e);l.push(r),o=r+n(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getNodeClickEvent(t,e){return new $o(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new qo(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getTooltipHtml(t){var e;const{angleKey:i}=this;if(!i)return"";const{tooltip:n,angleName:r,radiusKey:o,radiusName:s,calloutLabelKey:a,sectorLabelKey:l,calloutLabelName:c,sectorLabelName:h,id:d}=this,{renderer:u}=n,{datum:p,angleValue:f,radiusValue:g,sectorFormat:{fill:y},calloutLabel:{text:v=""}={}}=t,m="number"==typeof f?Ri(f):String(f),b=null===(e=this.title)||void 0===e?void 0:e.text,x={title:b,backgroundColor:y,content:`${v?v+": ":""}${m}`};return u?Re(u({datum:p,angleKey:i,angleValue:f,angleName:r,radiusKey:o,radiusValue:g,radiusName:s,calloutLabelKey:a,calloutLabelName:c,sectorLabelKey:l,sectorLabelName:h,title:b,color:y,seriesId:d}),x):Re(x)}getLegendData(){var t,e,i;const{calloutLabelKey:n,legendItemKey:r,id:o,data:s}=this;if(!s||0===s.length)return[];if(!r&&!n)return[];const a=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,l=[];for(let t=0;t<s.length;t++){const c=s[t],h=[];a&&h.push(a);const d=this.getLabels(c,2*Math.PI,2*Math.PI,!1);if(r&&void 0!==d.legendItem?h.push(d.legendItem.text):n&&void 0!==(null===(e=d.calloutLabel)||void 0===e?void 0:e.text)&&h.push(null===(i=d.calloutLabel)||void 0===i?void 0:i.text),0===h.length)continue;const u=this.getSectorFormat(c,t,t,!1);l.push({legendType:"category",id:o,itemId:t,seriesId:o,enabled:this.seriesItemEnabled[t],label:{text:h.join(" - ")},marker:{fill:u.fill,stroke:u.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return l}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,r;const{legendItemKey:o}=this;if(!o)return;const s=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((t,i)=>i===e)[t.legendItemKey]);s&&(null===(r=this.data)||void 0===r||r.forEach((t,e)=>{t[o]===s&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(){const t=Math.PI/-2+rt(this.rotation);this.groupSelection.selectByTag(Ko.Sector).forEach(e=>{var i;const n=e.datum;null===(i=this.animationManager)||void 0===i||i.animateMany(`${this.id}_empty-update-ready_${e.id}`,[{from:t,to:n.startAngle},{from:t,to:n.endAngle}],{disableInteractions:!0,duration:1e3,ease:Mr,repeat:0,onUpdate([t,i]){e.startAngle=t,e.endAngle=i}})});const e={from:0,to:1,delay:1e3,duration:200,ease:Er,repeat:0};this.calloutLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.sectorLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.innerLabelsSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(Ko.Sector).forEach(t=>{const{datum:e}=t;t.startAngle=e.startAngle,t.endAngle=e.endAngle})}}os.className="PieSeries",os.type="pie",Yo([Dt(Gt)],os.prototype,"angleKey",void 0),Yo([Dt(Gt)],os.prototype,"angleName",void 0),Yo([Dt(zt)],os.prototype,"radiusKey",void 0),Yo([Dt(zt)],os.prototype,"radiusName",void 0),Yo([Dt(Jt(0))],os.prototype,"radiusMin",void 0),Yo([Dt(Jt(0))],os.prototype,"radiusMax",void 0),Yo([Dt(zt)],os.prototype,"calloutLabelKey",void 0),Yo([Dt(zt)],os.prototype,"calloutLabelName",void 0),Yo([Dt(zt)],os.prototype,"sectorLabelKey",void 0),Yo([Dt(zt)],os.prototype,"sectorLabelName",void 0),Yo([Dt(zt)],os.prototype,"legendItemKey",void 0),Yo([Dt($t)],os.prototype,"fills",void 0),Yo([Dt($t)],os.prototype,"strokes",void 0),Yo([Dt(Zt(0,1))],os.prototype,"fillOpacity",void 0),Yo([Dt(Zt(0,1))],os.prototype,"strokeOpacity",void 0),Yo([Dt(de)],os.prototype,"lineDash",void 0),Yo([Dt(Zt(0))],os.prototype,"lineDashOffset",void 0),Yo([Dt(Ft)],os.prototype,"formatter",void 0),Yo([Dt(Zt(-360,360))],os.prototype,"rotation",void 0),Yo([Dt(Zt())],os.prototype,"outerRadiusOffset",void 0),Yo([Dt(Zt(0))],os.prototype,"outerRadiusRatio",void 0),Yo([Dt(Zt())],os.prototype,"innerRadiusOffset",void 0),Yo([Dt(Zt(0))],os.prototype,"innerRadiusRatio",void 0),Yo([Dt(Zt(0))],os.prototype,"strokeWidth",void 0);var ss=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class as extends xo{constructor(t=window.document,e,i){super(t,e,i),this.padding=new ii(40)}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return ss(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();this.computeSeriesRect(e),this.computeCircle();const n=e.clone().grow(20);return this.hoverRect=n,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:e,hoverRect:n,visible:!0},axes:[]}),e}))}computeSeriesRect(t){const{seriesAreaPadding:e}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t}computeCircle(){const t=this.seriesRect,e=this.series.filter(t=>t instanceof No),i=(t,i,n)=>{e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=n});const r=e.filter(t=>t instanceof os);if(r.length>1){const t=r.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},n=t.x+t.width/2,r=t.y+t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let s=o;i(n,r,s);const a=({hideWhenNecessary:a=!1}={})=>{const l=[];for(const i of e){const e=i.computeLabelsBBox({hideWhenNecessary:a},t);null!=e&&l.push(e)}if(0===l.length)return void i(n,r,o);const c=_.merge(l),h=this.refineCircle(c,s);i(h.centerX,h.centerY,h.radius),h.radius!==s&&(s=h.radius)};a(),a(),a(),a({hideWhenNecessary:!0}),a({hideWhenNecessary:!0})}refineCircle(t,e){const i=this.seriesRect,n=-e,r=-e,o=e,s=e;let a=Math.max(0,n-t.x),l=Math.max(0,r-t.y),c=Math.max(0,t.x+t.width-o),h=Math.max(0,t.y+t.height-s);const d=i.width-a-c,u=i.height-l-h;let p=Math.min(d,u)/2;const f=.5*i.width/2,g=.5*i.height/2,y=Math.min(f,g);if(p<y){p=y;const t=a+c;if(2*p+(l+h)>i.height){const t=i.height-2*p;2*Math.min(l,h)>t?(l=t/2,h=t/2):l>h?l=t-h:h=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,c)>t?(a=t/2,c=t/2):a>c?a=t-c:c=t-a}}const v=a+2*p+c,m=l+2*p+h;return{centerX:i.x+(i.width-v)/2+a+p,centerY:i.y+(i.height-m)/2+l+p,radius:p}}}as.className="PolarChart",as.type="polar";var ls=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class cs extends xo{constructor(t=window.document,e,i){super(t,e,i),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return ls(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesAreaPadding:i}=this,n=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e;const r=e.clone().grow(20);this.hoverRect=r,yield Promise.all(this.series.map(t=>ls(this,void 0,void 0,(function*(){t.rootGroup.translationX=Math.floor(e.x),t.rootGroup.translationY=Math.floor(e.y),yield t.update({seriesRect:e})}))));const{seriesRoot:o}=this;return o.setClipRectInGroupCoordinateSpace(new _(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:r,visible:!0},axes:[]}),e}))}}cs.className="HierarchyChart",cs.type="hierarchy";const hs=/(#\{(.*?)\})/g;function ds(t,e,i){return t.replace(hs,(function(...t){const n=t[2],[r,o]=n.split(":"),s=e[r];if("number"==typeof s){const t=o&&i&&i[o];if(t){const{locales:e,options:i}=t;return s.toLocaleString(e,i)}return String(s)}if(s instanceof Date){const t=o&&i&&i[o];if("string"==typeof t){return Qi(t)(s)}return s.toDateString()}return"string"==typeof s||(null==s?void 0:s.toString)?String(s):""}))}let us=null;function ps(t){return us=null!=us?us:document.createElement("div"),t?(us.textContent=t,us.innerHTML):""}function fs(t,e){let i=Math.floor(t[0]),n=t[1];i=function(t,e,i){const n=Math.abs(e-t)/(i-1),r=Math.floor(Math.log10(n)),o=Math.pow(10,r);return Math.floor(t/o)*o}(i,n,e);const r=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}((e-t)/(i-1))}(i,n,e);n=i+(e-1)*r;return[[i,n],function(t,e,i){const n=Math.floor(Math.log10(e)),r=e>0&&e<1?Math.abs(n):0,o=Math.pow(10,r),s=new Ki(r);for(let n=0;n<i;n++){const i=t+e*n;s[n]=Math.round(i*o)/o}return s}(i,r,e)]}var gs=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class ys extends Bn{constructor(){super(...arguments),this.maxSpacing=NaN}}gs([Dt(At(Qt(1),Nt("minSpacing"))),Sn(NaN)],ys.prototype,"maxSpacing",void 0);class vs extends Kn{constructor(t,e=new Vn){super(t,e),this.min=NaN,this.max=NaN,e.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;return t.length>2&&(t=null!==(e=wn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}formatDatum(t){return"number"==typeof t?t.toFixed(2):($.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new ys}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[e,i]=fs(this.dataDomain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}vs.className="NumberAxis",vs.type="number",gs([Dt(At(Qt(),Lt("max"))),Sn(NaN)],vs.prototype,"min",void 0),gs([Dt(At(Qt(),Nt("min"))),Sn(NaN)],vs.prototype,"max",void 0);var ms=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function bs(){return Pt(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}class xs extends vs{constructor(t){super(t,new Cn),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;t.length>2&&(t=null!==(e=wn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]);const r=t[0]>t[1],o=t[0]<0&&t[1]>0,s=0===t[0]&&0===t[1];return(r||o||s)&&(t=[],o?$.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):s&&$.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t}set base(t){this.scale.base=t}get base(){return this.scale.base}}xs.className="LogAxis",xs.type="log",ms([Dt(At(Qt(),Lt("max"),bs())),Sn(NaN)],xs.prototype,"min",void 0),ms([Dt(At(Qt(),Nt("min"),bs())),Sn(NaN)],xs.prototype,"max",void 0);var Cs=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Ss extends Bn{constructor(){super(...arguments),this.maxSpacing=NaN}}Cs([Dt(At(Qt(1),Nt("minSpacing"))),Sn(NaN)],Ss.prototype,"maxSpacing",void 0);class ws extends Kn{constructor(t){super(t,new rn),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;e.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=wn(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(t=[i,t[1]]),n instanceof Date&&(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}createTick(){return new Ss}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return 1}}ws.className="TimeAxis",ws.type="time",Cs([Dt(At(Kt,Lt("max")))],ws.prototype,"min",void 0),Cs([Dt(At(Kt,Nt("min")))],ws.prototype,"max",void 0);var Os,ks=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ts=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Ds extends kn{constructor(){super(...arguments),this.formatter=void 0}}ks([Dt(Ft)],Ds.prototype,"formatter",void 0);class Ps extends Je{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}ks([Dt(Ft)],Ps.prototype,"renderer",void 0),ks([Dt(zt)],Ps.prototype,"format",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(Os||(Os={}));class Es extends mr{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,directionKeys:{[we.X]:["xKey"],[we.Y]:["yKeys"]},directionNames:{[we.X]:["xName"],[we.Y]:["yNames"]}}),this.tooltip=new Ps,this.marker=new br,this.label=new Ds,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this._yKeys=[],this._visibles=[],this.yNames=[],this.strokeWidth=2,this.shadow=void 0;const{marker:e,label:i}=this;e.enabled=!1,i.enabled=!1}set yKeys(t){Bi(this._yKeys,t)||(this._yKeys=t,this.processedData=void 0,this.processSeriesItemEnabled())}get yKeys(){return this._yKeys}set visibles(t){this._visibles=t,this.processSeriesItemEnabled()}get visibles(){return this._visibles}processSeriesItemEnabled(){const{seriesItemEnabled:t,_visibles:e=[]}=this;t.clear(),this._yKeys.forEach((i,n)=>{var r;return t.set(i,null===(r=e[n])||void 0===r||r)})}set normalizedTo(t){const e=t?Math.abs(t):void 0;this._normalizedTo!==e&&(this._normalizedTo=e)}get normalizedTo(){return this._normalizedTo}processData(){return Ts(this,void 0,void 0,(function*(){const{xKey:t,yKeys:e,seriesItemEnabled:i,xAxis:n,yAxis:r,normalizedTo:o}=this,s=t&&e.length&&this.data?this.data:[],a=(null==n?void 0:n.scale)instanceof zi,l=(null==r?void 0:r.scale)instanceof zi,c=[...i.entries()].filter(([,t])=>t).map(([t])=>t),h=o&&isFinite(o)?o:void 0,d=[];h&&d.push(Vo(c,h,"sum")),this.dataModel=new Pe({props:[We(t,a,{id:"xValue"}),...c.map(t=>Ve(t,l,{id:"yValue-"+t,missingValue:NaN,invalidValue:void 0})),Fe(c),...d],groupByKeys:!0,dataVisible:this.visible&&c.length>0}),this.processedData=this.dataModel.processData(s)}))}getDomain(t){const{processedData:e,xAxis:i,yAxis:n}=this;if(!e)return[];const{defs:{keys:[r]},domain:{keys:[o],values:[s],aggValues:[a]=[]}}=e;return t===we.X?"category"===r.valueType?o:this.fixNumericExtent(wn(o),i):n instanceof xs||n instanceof ws?this.fixNumericExtent(s,n):this.fixNumericExtent(a,n)}createNodeData(){var t;return Ts(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,data:n,processedData:{data:r}={},ctx:{callbackCache:o}}=this;if(!e||!i||!n)return[];const s=[],{yKeys:a,xKey:l="",marker:c,label:h,fills:d,strokes:u,id:p}=this,{scale:f}=e,{scale:g}=i,y=g instanceof zi,v=(null!==(t=f.bandwidth)&&void 0!==t?t:0)/2,m=n.length,b=new Array(m).fill(null).map(()=>({left:0,right:0})),x=new Array(m).fill(0),C=(t,e,i,n)=>{const r=f.convert(t)+v,o=b[i][n],s=b[i][n]+e,a=g.convert(o,{strict:!1}),l=g.convert(s,{strict:!1});return b[i][n]=s,[{x:r,y:l,size:c.size},{x:r,y:a,size:c.size}]},S=(t,e,i,n)=>{let r;const o=this.normalizedTo&&isFinite(this.normalizedTo),s=o&&y&&Ct(n);(!o&&!isNaN(n)||s)&&(r=x[i]+=e);return{x:f.convert(t)+v,y:g.convert(r,{strict:!1}),size:c.size}};return a.forEach((t,e)=>{var i;const n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("yValue-"+t),a=[],f=[],g={itemId:t,points:[],yValues:[]},y={itemId:t,points:[]};if(s[e]={itemId:t,fillSelectionData:y,labelData:a,nodeData:f,strokeSelectionData:g},!n)return;const v=y.points,m=[],b=g.points,w=g.yValues;let O=-1;null==r||r.forEach((i,s)=>{const{keys:[g],datum:y,values:k}=i;k.forEach((T,D)=>{var P;O++;const E=y[D],M=T[n.index],R=isNaN(M)?void 0:M,A=D<k.length-1,_=A?i:r[s+1],L=null==_?void 0:_.keys[0],N=A?D+1:0,I=null==_?void 0:_.values[N][n.index],F=isNaN(I)?void 0:I,j=S(g,+R,O,E[t]);let B;c&&f.push({index:O,series:this,itemId:t,datum:E,nodeMidPoint:{x:j.x,y:j.y},cumulativeValue:x[O],yValue:R,yKey:t,xKey:l,point:j,fill:d[e%d.length],stroke:u[e%u.length]}),B=h.formatter?null!==(P=o.call(h.formatter,{value:R,seriesId:p}))&&void 0!==P?P:"":wt(R)?Number(R).toFixed(2):String(R),h&&a.push({index:O,itemId:t,point:j,label:B?{text:B,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0});const G=[g,L],z=[R,F];if(G.some(t=>null==t))return;z.some(t=>null==t)&&(z[0]=0,z[1]=0);const W=C(G[0],+z[0],O,"right");v.push(W[0]),m.push(W[1]);const V=C(G[1],+z[1],O,"left");v.push(V[0]),m.push(V[1]),b.push({x:NaN,y:NaN}),w.push(void 0),b.push(W[0]),w.push(R),void 0!==F&&(b.push(V[0]),w.push(R))})});for(let t=m.length-1;t>=0;t--)v.push(m[t])}),s}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(lr(t))}updateMarkerSelection(t){return Ts(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,r=n&&e?e:[];return this.marker.isDirty()&&i.clear(),i.update(r,t=>{t.tag=Os.Marker})}))}updateMarkerNodes(t){var e;return Ts(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{id:r,xKey:o="",marker:s,seriesItemEnabled:a,yKeys:l,fills:c,strokes:h,fillOpacity:d,marker:{fillOpacity:u=d},strokeOpacity:p,highlightStyle:{item:{fill:f,fillOpacity:g=u,stroke:y,strokeWidth:v}},ctx:{callbackCache:m}}=this,{size:b,formatter:x}=s,C=null!==(e=s.strokeWidth)&&void 0!==e?e:this.strokeWidth,S="function"==typeof s.shape;i.each((t,e)=>{var i,d,w,O,k,T,D,P;const E=l.indexOf(e.yKey),M=n&&void 0!==f?f:null!==(i=s.fill)&&void 0!==i?i:c[E%c.length],R=n?g:u,A=n&&void 0!==y?y:null!==(d=s.stroke)&&void 0!==d?d:h[E%c.length],_=n&&void 0!==v?v:C;let L=void 0;x&&(L=m.call(x,{datum:e.datum,xKey:o,yKey:e.yKey,fill:M,stroke:A,strokeWidth:_,size:b,highlighted:n,seriesId:r})),t.fill=null!==(w=null==L?void 0:L.fill)&&void 0!==w?w:M,t.stroke=null!==(O=null==L?void 0:L.stroke)&&void 0!==O?O:A,t.strokeWidth=null!==(k=null==L?void 0:L.strokeWidth)&&void 0!==k?k:_,t.fillOpacity=null!=R?R:1,t.strokeOpacity=null!==(D=null!==(T=s.strokeOpacity)&&void 0!==T?T:p)&&void 0!==D?D:1,t.size=null!==(P=null==L?void 0:L.size)&&void 0!==P?P:b,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!!a.get(e.yKey)&&!isNaN(e.point.x)&&!isNaN(e.point.y),S&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return Ts(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=Os.Label})}))}updateLabelNodes(t){return Ts(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:r,fontSize:o,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{point:l,label:c}=e;c&&i?(t.fontStyle=n,t.fontWeight=r,t.fontSize=o,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i;return new gr(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new yr(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getTooltipHtml(t){var e,i,n,r;const{xKey:o,id:s}=this,{yKey:a}=t,l=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue-"+a);if(!o||!a||!l)return"";const c=t.datum,h=c[o],d=c[a],{xAxis:u,yAxis:p,yKeys:f}=this;if(!(u&&p&&wt(d)&&l))return"";const{xName:g,yNames:y,fills:v,strokes:m,tooltip:b,marker:x}=this,{size:C,formatter:S,strokeWidth:w,fill:O,stroke:k}=x,T=u.formatDatum(h),D=p.formatDatum(d),P=f.indexOf(a),E=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.data[t.index])||void 0===n?void 0:n.values[0][null==l?void 0:l.index],M=y[P],R=ps(M),A=ps(T+": "+D),_=null!=w?w:this.strokeWidth,L=null!=O?O:v[P%v.length],N=null!=k?k:m[P%v.length];let I=void 0;S&&(I=S({datum:c,xKey:o,yKey:a,fill:L,stroke:N,strokeWidth:_,size:C,highlighted:!1,seriesId:s}));const F=null!==(r=null==I?void 0:I.fill)&&void 0!==r?r:L,j={title:R,backgroundColor:F,content:A},{renderer:B,format:G}=b;if(G||B){const t={datum:c,xKey:o,xName:g,xValue:h,yKey:a,yValue:d,processedYValue:E,yName:M,color:F,title:R,seriesId:s};if(G)return Re({content:ds(G,t)},j);if(B)return Re(B(t),j)}return Re(j)}getLegendData(){var t,e,i,n,r;const{data:o,id:s,xKey:a,yKeys:l,yNames:c,seriesItemEnabled:h,marker:d,fills:u,strokes:p,fillOpacity:f,strokeOpacity:g}=this;if(!(null==o?void 0:o.length)||!a||!l.length)return[];const y=[];for(let o=l.length-1;o>=0;o--){const a=l[o];y.push({legendType:"category",id:s,itemId:a,seriesId:s,enabled:null!==(t=h.get(a))&&void 0!==t&&t,label:{text:c[o]||l[o]},marker:{shape:d.shape,fill:null!==(e=d.fill)&&void 0!==e?e:u[o%u.length],stroke:null!==(i=d.stroke)&&void 0!==i?i:p[o%p.length],fillOpacity:null!==(n=d.fillOpacity)&&void 0!==n?n:f,strokeOpacity:null!==(r=d.strokeOpacity)&&void 0!==r?r:g}})}return y}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:r}=t,o={},s=1===Object.values(r).reduce((t,e)=>t+e,0)&&e;if(n.id===this.id){const t=Object.values(r).filter(t=>1===t).length===Object.keys(r).length;this.yKeys.forEach(n=>{var r;const a=n===i||s||t&&e;o[n]=null!==(r=o[n])&&void 0!==r?r:a})}else this.yKeys.forEach(t=>{o[t]=s});Object.keys(o).forEach(t=>{super.toggleSeriesItem(t,o[t])})}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:r}){const{strokes:o,fills:s,fillOpacity:a,lineDash:l,lineDashOffset:c,strokeOpacity:h,strokeWidth:d,shadow:u}=this;i.forEach(({fillSelectionData:i,strokeSelectionData:p,itemId:f},g)=>{var y,v,m;const[b,x]=n[g],C={from:0,to:null!==(y=null==r?void 0:r.width)&&void 0!==y?y:0,disableInteractions:!0,duration:1e3,ease:Er,repeat:0};{const{points:t,yValues:e}=p;x.tag=Os.Stroke,x.fill=void 0,x.lineJoin=x.lineCap="round",x.pointerEvents=z.None,x.stroke=o[g%o.length],x.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:f}),x.strokeOpacity=h,x.lineDash=l,x.lineDashOffset=c,null===(v=this.animationManager)||void 0===v||v.animate(`${this.id}_empty-update-ready_stroke_${g}`,Object.assign(Object.assign({},C),{onUpdate(i){x.path.clear({trackChanges:!0});let n=!0;t.forEach((r,o)=>{if(void 0===e[o]||isNaN(r.x)||isNaN(r.y))n=!0;else if(r.x<=i)n?(x.path.moveTo(r.x,r.y),n=!1):x.path.lineTo(r.x,r.y);else if(o>0&&void 0!==e[o]&&void 0!==e[o-1]&&t[o-1].x<=i){const e=t[o-1],n=r,s=i,a=e.y+(s-e.x)*(n.y-e.y)/(n.x-e.x);x.path.lineTo(s,a)}}),x.checkPathDirty()}}))}{const{points:t}=i,e=t.slice(0,t.length/2),n=t.slice(t.length/2);b.tag=Os.Fill,b.stroke=void 0,b.lineJoin="round",b.pointerEvents=z.None,b.fill=s[g%s.length],b.fillOpacity=a,b.strokeOpacity=h,b.strokeWidth=d,b.lineDash=l,b.lineDashOffset=c,b.fillShadow=u,null===(m=this.animationManager)||void 0===m||m.animate(`${this.id}_empty-update-ready_fill_${g}`,Object.assign(Object.assign({},C),{onUpdate(t){b.path.clear({trackChanges:!0});let i=0,r=0;e.forEach((n,o)=>{if(n.x<=t)i=n.x,r=n.y,b.path.lineTo(n.x,n.y);else if(o>0&&e[o-1].x<t){const s=e[o-1],a=n;i=t,r=s.y+(i-s.x)*(a.y-s.y)/(a.x-s.x),b.path.lineTo(i,r)}}),n.forEach((r,o)=>{const s=n.length-o-1;if(r.x<=t)b.path.lineTo(r.x,r.y);else if(s>0&&e[s-1].x<t){const t=r,e=n[o+1],s=t.y+(i-t.x)*(e.y-t.y)/(e.x-t.x);b.path.lineTo(i,s)}}),n.length>0&&b.path.lineTo(n[n.length-1].x,n[n.length-1].y),b.path.closePath(),b.checkPathDirty()}}))}t[g].each((t,e)=>{var i,n,o,s;const a=(null==r?void 0:r.width)?e.point.x/r.width*1e3:0,l=this.animateFormatter(e),c=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},C),{to:null!==(s=null==l?void 0:l.size)&&void 0!==s?s:c,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[g].each((t,e)=>{var i;const n=(null==r?void 0:r.width)?e.point.x/r.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({contextData:t,paths:e}){const{strokes:i,fills:n,fillOpacity:r,lineDash:o,lineDashOffset:s,strokeOpacity:a,strokeWidth:l,shadow:c}=this;t.forEach(({strokeSelectionData:t,fillSelectionData:h,itemId:d},u)=>{const[p,f]=e[u];f.stroke=i[u%i.length],f.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:d}),f.strokeOpacity=a,f.lineDash=o,f.lineDashOffset=s,f.path.clear({trackChanges:!0});let g=!0;t.points.forEach((e,i)=>{void 0===t.yValues[i]||isNaN(e.x)||isNaN(e.y)?g=!0:g?(f.path.moveTo(e.x,e.y),g=!1):f.path.lineTo(e.x,e.y)}),f.checkPathDirty(),p.fill=n[u%n.length],p.fillOpacity=r,p.strokeOpacity=a,p.strokeWidth=l,p.lineDash=o,p.lineDashOffset=s,p.fillShadow=c,p.path.clear({trackChanges:!0}),h.points.forEach(t=>{p.path.lineTo(t.x,t.y)}),p.path.closePath(),p.checkPathDirty()})}animateFormatter(t){var e,i,n;const{marker:r,fills:o,strokes:s,xKey:a="",yKeys:l,id:c,ctx:{callbackCache:h}}=this,{size:d,formatter:u}=r,p=l.indexOf(t.yKey),f=null!==(e=r.fill)&&void 0!==e?e:o[p%o.length],g=null!==(i=r.stroke)&&void 0!==i?i:s[p%o.length],y=null!==(n=r.strokeWidth)&&void 0!==n?n:this.strokeWidth;let v=void 0;return u&&(v=h.call(u,{datum:t.datum,xKey:a,yKey:t.yKey,fill:f,stroke:g,strokeWidth:y,size:d,highlighted:!1,seriesId:c})),v}isLabelEnabled(){return this.label.enabled}}Es.className="AreaSeries",Es.type="area",ks([Dt($t)],Es.prototype,"fills",void 0),ks([Dt($t)],Es.prototype,"strokes",void 0),ks([Dt(Zt(0,1))],Es.prototype,"fillOpacity",void 0),ks([Dt(Zt(0,1))],Es.prototype,"strokeOpacity",void 0),ks([Dt(de)],Es.prototype,"lineDash",void 0),ks([Dt(Zt(0))],Es.prototype,"lineDashOffset",void 0),ks([Dt(zt)],Es.prototype,"xKey",void 0),ks([Dt(zt)],Es.prototype,"xName",void 0),ks([Dt(ie)],Es.prototype,"_yKeys",void 0),ks([Dt(re)],Es.prototype,"_visibles",void 0),ks([Dt(ie)],Es.prototype,"yNames",void 0),ks([Dt(Jt())],Es.prototype,"_normalizedTo",void 0),ks([Dt(Zt(0))],Es.prototype,"strokeWidth",void 0);var Ms=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Rs extends vi{constructor(){super(...arguments),this.borderPath=new fi,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=lt.defaultStyles.strokeWidth,this.effectiveStrokeWidth=lt.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:n,borderPath:r,crisp:o}=this;let{x:s,y:a,width:l,height:c,strokeWidth:h}=this;const d=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let u=1;if(n.clear({trackChanges:!0}),r.clear({trackChanges:!0}),o&&(l<=d&&(u*=l/d),c<=d&&(u*=c/d),l=this.align(s,l),c=this.align(a,c),s=this.align(s),a=this.align(a)),h)if(l<d){const t=s+d/2;r.moveTo(t,a),r.lineTo(t,a+c),h=d,this.borderClipPath=void 0}else if(c<d){const t=a+d/2;r.moveTo(s,t),r.lineTo(s+l,t),h=d,this.borderClipPath=void 0}else if(h<l&&h<c){const t=h/2;s+=t,a+=t,l-=h,c-=h,this.borderClipPath=void 0,n.rect(s,a,l,c),r.rect(s,a,l,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new fi,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,a,l,c),r.rect(s,a,l,c);else this.borderClipPath=void 0,n.rect(s,a,l,c);this.effectiveStrokeWidth=h,this.lastUpdatePathStrokeWidth=h,this.microPixelEffectOpacity=u}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new _(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:r}=t;t.globalAlpha=r*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:r,opacity:o,microPixelEffectOpacity:s}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:c,lineCap:h,lineJoin:d}=this;r&&(r.draw(t),t.clip()),n.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*o*a*s,t.lineWidth=i,l&&t.setLineDash(l),c&&(t.lineDashOffset=c),h&&(t.lineCap=h),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}}Rs.className="Rect",Ms([yi()],Rs.prototype,"x",void 0),Ms([yi()],Rs.prototype,"y",void 0),Ms([yi()],Rs.prototype,"width",void 0),Ms([yi()],Rs.prototype,"height",void 0),Ms([yi()],Rs.prototype,"radius",void 0),Ms([yi()],Rs.prototype,"crisp",void 0);var As=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};function _s({value:t,rect:e,placement:i,seriesId:n,padding:r=0,formatter:o,barAlongX:s,ctx:{callbackCache:a}}){let l;o&&(l=a.call(o,{value:wt(t)?t:void 0,seriesId:n})),void 0===l&&(l=wt(t)?t.toFixed(2):"");let c=e.x+e.width/2,h=e.y+e.height/2,d="center",u="middle";const p=t>=0;switch(i){case"start":s?(c=p?e.x-r:e.x+e.width+r,d=p?"start":"end"):(h=p?e.y+e.height+r:e.y-r,u=p?"top":"bottom");break;case"outside":case"end":s?(c=p?e.x+e.width+r:e.x-r,d=p?"start":"end"):(h=p?e.y-r:e.y+e.height+r,u=p?"bottom":"top");break;case"inside":default:u="middle"}return{text:l,textAlign:d,textBaseline:u,x:c,y:h}}var Ls=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ns=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Is=["inside","outside"];var Fs;!function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(Fs||(Fs={}));class js extends kn{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}Ls([Dt(Ft)],js.prototype,"formatter",void 0),Ls([Dt((t,e)=>Et(t,e,t=>Is.includes(t)))],js.prototype,"placement",void 0);class Bs extends Je{constructor(){super(...arguments),this.renderer=void 0}}Ls([Dt(Ft)],Bs.prototype,"renderer",void 0);class Gs extends mr{constructor(t){super({moduleCtx:t,pickModes:[Be.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:{[we.X]:["xKey"],[we.Y]:["yKeys"]},directionNames:{[we.X]:["xName"],[we.Y]:["yNames"]}}),this.label=new js,this.tooltip=new Bs,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.groupScale=new Di,this.xKey=void 0,this.xName=void 0,this.cumYKeyCount=[],this.flatYKeys=void 0,this.hideInLegend=[],this.yKeys=[],this.yKeysCache=[],this.visibles=[],this.grouped=!1,this.stackGroups={},this.yNames={},this.legendItemNames={},this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.label.enabled=!1}resolveKeyDirection(t){return this.getBarDirection()===we.X?t===we.X?we.Y:we.X:t}processYKeys(){let{yKeys:t}=this,e=void 0;var i;(i=t).length>0&&Array.isArray(i[0])||(e=t,t=this.grouped?e.map(t=>[t]):[e]);const n=Object.values(this.stackGroups);if(n.length>0){const e=t=>t.reduce((t,e)=>t.concat(e),[]),i=e(t),r=new Set(e(n)),o=i.filter(t=>!r.has(t));t=n.map(t=>t),o.length>0&&t.push(o);const s=(t=>t.reduce((t,e,i)=>t.set(e,i),new Map))(e(t)),a=t=>{const e=Array.from({length:t.length});return t.forEach((t,n)=>{const r=i[n],o=s.get(r);e[o]=t}),e};this.fills=a(this.fills),this.strokes=a(this.strokes),this.visibles=a(this.visibles)}if(!Bi(this.yKeysCache,t)){this.flatYKeys=e||void 0,this.yKeys=t;let i=0;this.cumYKeyCount=[];const n=[];t.forEach((t,e)=>{t.length>0&&n.push(String(e)),this.cumYKeyCount.push(i),i+=t.length}),this.processSeriesItemEnabled();const{groupScale:r}=this;r.domain=n}this.yKeysCache=t}processSeriesItemEnabled(){const{seriesItemEnabled:t}=this,e=this.visibles.reduce((t,e)=>t.concat(...Array.isArray(e)?e:[e]),[]);t.clear();let i=0;this.yKeys.forEach(n=>{n.forEach(n=>{var r;return t.set(n,null===(r=e[i++])||void 0===r||r)})})}getStackGroup(t){var e;const{stackGroups:i}=this;return null===(e=Object.entries(i).find(([e,i])=>i.includes(t)))||void 0===e?void 0:e[0]}processYNames(){const t=this.yNames;if(Array.isArray(t)&&this.flatYKeys){const e={};this.flatYKeys.forEach((i,n)=>{e[i]=t[n]}),this.yNames=e}}processData(){var t,e,i,n,r;return Ns(this,void 0,void 0,(function*(){this.processYKeys(),this.processYNames();const{xKey:o,seriesItemEnabled:s,normalizedTo:a,data:l=[]}=this,c=Math.abs(null!=a?a:NaN),h=(null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale)instanceof zi,d=(null===(e=this.getValueAxis())||void 0===e?void 0:e.scale)instanceof zi,u=[...s.entries()].filter(([,t])=>t).map(([t])=>t),p=this.yKeys.map(t=>t.filter(t=>s.get(t))).filter(t=>t.length>0),f=c&&isFinite(c)?c:void 0,g=[];f&&g.push(Vo(u,f,"sum")),this.dataModel=new Pe({props:[We(o,h),...u.map(t=>Ve(t,d,{invalidValue:null})),...p.map(t=>Fe(t)),...h?[Go]:[],zo,...g],groupByKeys:!0,dataVisible:this.visible&&u.length>0}),this.processedData=this.dataModel.processData(l),this.smallestDataInterval={x:null!==(r=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.reduced)||void 0===n?void 0:n[Go.property])&&void 0!==r?r:1/0,y:1/0}}))}getDomain(t){var e;const{processedData:i}=this;if(!i)return[];const{defs:{keys:[n]},domain:{keys:[r],values:[o]},reduced:{[Go.property]:s,[zo.property]:a}={}}=i;if(t===this.getCategoryDirection()){if("category"===n.valueType)return r;const i=null!==(e=wn(r))&&void 0!==e?e:[NaN,NaN];return t===we.Y?[i[0]+-s,i[1]]:[i[0],i[1]+s]}return this.getValueAxis()instanceof xs?this.fixNumericExtent(o):this.fixNumericExtent(a)}getNodeClickEvent(t,e){var i;return new gr(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new yr(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getCategoryAxis(){return this.getCategoryDirection()===we.Y?this.yAxis:this.xAxis}getValueAxis(){return this.getBarDirection()===we.Y?this.yAxis:this.xAxis}calculateStep(t){var e;const{smallestDataInterval:i}=this,n=this.getCategoryAxis();if(!n)return;const r=(n.dataDomain[1]-n.dataDomain[0])/(null!==(e=null==i?void 0:i.x)&&void 0!==e?e:1)+1,o=Math.floor(t),s=Math.min(r,o);return t/Math.max(1,s)}createNodeData(){return Ns(this,void 0,void 0,(function*(){const{data:t,visible:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(t&&e&&i&&n))return[];const r=i.scale,o=n.scale,{groupScale:s,yKeys:a,xKey:l="",cumYKeyCount:c,fills:h,strokes:d,strokeWidth:u,seriesItemEnabled:p,label:f,id:g,processedData:y,ctx:v}=this;let m=r.bandwidth;if(r instanceof zi){const t=Math.max(i.range[0],i.range[1]);m=this.calculateStep(t)}s.range=[0,m],s.padding=i instanceof Un?i.groupPaddingInner:i instanceof Ro?.1:0,0===s.padding?s.round=!1:s.round=!0;const b=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,x=[];return null==y||y.data.forEach(({keys:t,datum:e,values:n},m)=>{var C,S,w,O,k,T;const D=r.convert(t[0]);for(let t=0;t<(null!==(C=null==a?void 0:a.length)&&void 0!==C?C:0);t++){const r=null!==(S=null==a?void 0:a[t])&&void 0!==S?S:[];null!==(w=x[t])&&void 0!==w||(x[t]=[]);let C=0,P=0;for(let a=0;a<r.length;a++){const S=r[a],w=null!==(O=null==y?void 0:y.indices.values[S])&&void 0!==O?O:-1;if(null!==(k=(T=x[t])[a])&&void 0!==k||(T[a]={itemId:S,nodeData:[],labelData:[]}),void 0===w)continue;const E=n[0][w],M=+E,R=D+s.convert(String(t));if(!i.inRange(R,b))continue;if(isNaN(M))continue;const A=M<0?C:P,_=o.convert(A+M,{strict:!1}),L=o.convert(A,{strict:!1}),N=this.getBarDirection()===we.X,I={x:N?Math.min(_,L):R,y:N?R:Math.min(_,L),width:N?Math.abs(L-_):b,height:N?b:Math.abs(L-_)},F={x:I.x+I.width/2,y:I.y+I.height/2},{fontStyle:j,fontWeight:B,fontSize:G,fontFamily:z,color:W,formatter:V,placement:H}=f,{text:K,textAlign:Y,textBaseline:U,x:X,y:$}=_s({value:E,rect:I,formatter:V,placement:H,seriesId:g,barAlongX:N,ctx:v}),q=c[t]+a,Z={index:m,series:this,itemId:S,datum:e[0],cumulativeValue:A+M,yValue:E,yKey:S,xKey:l,x:I.x,y:I.y,width:I.width,height:I.height,nodeMidPoint:F,colorIndex:q,fill:h[q%h.length],stroke:d[q%d.length],strokeWidth:u,label:p.get(S)&&K?{text:K,fontStyle:j,fontWeight:B,fontSize:G,fontFamily:z,textAlign:Y,textBaseline:U,fill:W,x:X,y:$}:void 0};x[t][a].nodeData.push(Z),x[t][a].labelData.push(Z),M<0?C+=M:P+=M}}}),x.reduce((t,e)=>t.concat(...e),[])}))}nodeFactory(){return new Rs}updateDatumSelection(t){return Ns(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>t.tag=Fs.Bar)}))}updateDatumNodes(t){var e;return Ns(this,void 0,void 0,(function*(){const{datumSelection:i,isHighlight:n}=t,{fills:r,strokes:o,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,shadow:h,formatter:d,id:u,highlightStyle:{item:p},ctx:f}=this,g=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null===(e=this.xAxis)||void 0===e?void 0:e.visibleRange),y=this.getCategoryDirection()===we.X;i.each((t,e)=>{const{colorIndex:i}=e,v={fill:r[i%r.length],stroke:o[i%r.length],fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:h,strokeWidth:this.getStrokeWidth(this.strokeWidth,e)},m=y?e.width>0:e.height>0,b=function(t){var e,i,n,r,o,s,a,{datum:l,isHighlighted:c,style:h,highlightStyle:d,formatter:u,seriesId:p,stackGroup:f,ctx:{callbackCache:g}}=t,y=As(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const v=c&&null!==(e=d.fill)&&void 0!==e?e:h.fill,m=c&&null!==(i=d.stroke)&&void 0!==i?i:h.stroke,b=c&&null!==(n=d.strokeWidth)&&void 0!==n?n:h.strokeWidth,x=c&&null!==(r=d.fillOpacity)&&void 0!==r?r:h.fillOpacity,{strokeOpacity:C,fillShadow:S,lineDash:w,lineDashOffset:O}=h;let k=void 0;return u&&(k=g.call(u,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:v,stroke:m,strokeWidth:b,highlighted:c,seriesId:p,stackGroup:f},y))),{fill:null!==(o=null==k?void 0:k.fill)&&void 0!==o?o:v,stroke:null!==(s=null==k?void 0:k.stroke)&&void 0!==s?s:m,strokeWidth:null!==(a=null==k?void 0:k.strokeWidth)&&void 0!==a?a:b,fillOpacity:x,strokeOpacity:C,lineDash:w,lineDashOffset:O,fillShadow:S}}({datum:e,isHighlighted:n,style:v,highlightStyle:p,formatter:d,seriesId:u,stackGroup:this.getStackGroup(e.yKey),ctx:f});b.crisp=g,b.visible=m,function({rect:t,config:e}){const{crisp:i=!0,fill:n,stroke:r,strokeWidth:o,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:h,visible:d=!0}=e;t.crisp=i,t.fill=n,t.stroke=r,t.strokeWidth=o,t.fillOpacity=s,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=h,t.visible=d}({rect:t,config:b})})}))}updateLabelSelection(t){return Ns(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t,{enabled:n}=this.label,r=n?e:[];return i.update(r,t=>{t.tag=Fs.Label,t.pointerEvents=z.None})}))}updateLabelNodes(t){return Ns(this,void 0,void 0,(function*(){const{labelSelection:e}=t;e.each((t,e)=>{!function({labelNode:t,labelDatum:e,config:i,visible:n}){if(e&&i&&i.enabled){const{x:r,y:o,text:s,textAlign:a,textBaseline:l}=e,{fontStyle:c,fontWeight:h,fontSize:d,fontFamily:u,color:p}=i;t.fontStyle=c,t.fontWeight=h,t.fontSize=d,t.fontFamily=u,t.textAlign=a,t.textBaseline=l,t.text=s,t.x=r,t.y=o,t.fill=p,t.visible=n}else t.visible=!1}({labelNode:t,labelDatum:e.label,config:this.label,visible:!0})})}))}getTooltipHtml(t){var e;const{xKey:i,yKeys:n,processedData:r,ctx:{callbackCache:o}}=this,s=this.getCategoryAxis(),a=this.getValueAxis(),{yKey:l}=t;if(!(r&&i&&l&&s&&a))return"";let c=0,h=0,d=0;for(;d<n.length;d++){const t=n[d];if(h=t.indexOf(l),h>=0){c+=h;break}c+=t.length}const{xName:u,yNames:p,fills:f,strokes:g,tooltip:y,formatter:v,id:m}=this,{renderer:b}=y,x=t.datum,C=p[l],S=this.getStackGroup(l),w=f[c%f.length],O=g[c%f.length],k=this.getStrokeWidth(this.strokeWidth),T=x[i],D=x[l],P=ps(s.formatDatum(T)),E=ps(a.formatDatum(D)),M=ps(C),R=P+": "+E;let A=void 0;v&&(A=o.call(v,{datum:x,fill:w,stroke:O,strokeWidth:k,highlighted:!1,xKey:i,yKey:l,seriesId:m,stackGroup:S}));const _=null!==(e=null==A?void 0:A.fill)&&void 0!==e?e:w,L={title:M,backgroundColor:_,content:R};return b?Re(b({datum:x,xKey:i,xValue:T,xName:u,yKey:l,yValue:D,yName:C,color:_,title:M,seriesId:m,stackGroup:S}),L):Re(L)}getLegendData(){const{id:t,data:e,xKey:i,yKeys:n,yNames:r,legendItemNames:o,cumYKeyCount:s,seriesItemEnabled:a,hideInLegend:l,fills:c,strokes:h,fillOpacity:d,strokeOpacity:u}=this;if(!(null==e?void 0:e.length)||!i||!n.length)return[];const p=[];return this.validateLegendData(),this.yKeys.forEach((e,i)=>{var n,f,g;for(let y=0;y<e.length;y++){const v=e[y];if(l.indexOf(v)>=0)return;const m=s[i]+y;p.push({legendType:"category",id:t,itemId:v,seriesId:t,enabled:null!==(n=a.get(v))&&void 0!==n&&n,label:{text:null!==(g=null!==(f=o[v])&&void 0!==f?f:r[v])&&void 0!==g?g:v},marker:{fill:c[m%c.length],stroke:h[m%h.length],fillOpacity:d,strokeOpacity:u}})}}),p}validateLegendData(){const{hideInLegend:t,legendItemNames:e}=this;let i=!1;this.yKeys.forEach(n=>{n.forEach(n=>{if(t.indexOf(n)>=0)return;const r=void 0!==e[n];i&&!r&&$.warnOnce("a series is missing the legendItemName property, unexpected behaviour may occur."),i=r})})}onLegendItemClick(t){const{itemId:e,enabled:i,series:n}=t;n.id===this.id&&(super.toggleSeriesItem(e,i),Object.keys(this.legendItemNames).filter(t=>void 0!==this.legendItemNames[t]&&this.legendItemNames[t]===this.legendItemNames[e]).forEach(t=>{t!==e&&super.toggleSeriesItem(t,i)}),this.calculateVisibleDomain())}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,numVisibleItems:n}=t,r=Object.values(n).reduce((t,e)=>t+e,0),o=Object.values(n).filter(t=>1===t).length===Object.keys(n).length,s={};this.yKeys.forEach(t=>{t.forEach(t=>{var n;const a=t===i||1===r&&e||o&&e;s[t]=null!==(n=s[t])&&void 0!==n?n:a,Object.keys(this.legendItemNames).filter(e=>void 0!==this.legendItemNames[e]&&this.legendItemNames[e]===this.legendItemNames[t]).forEach(t=>{var e;s[t]=null!==(e=s[t])&&void 0!==e?e:a})})}),Object.keys(s).forEach(t=>{super.toggleSeriesItem(t,s[t])}),this.calculateVisibleDomain()}calculateVisibleDomain(){const t=this.yKeys.map(t=>t.slice());this.seriesItemEnabled.forEach((e,i)=>{e||t.forEach(t=>{const e=t.indexOf(i);e>=0&&t.splice(e,1)})});const e=[];t.forEach((t,i)=>{t.length>0&&e.push(String(i))}),this.groupScale.domain=e,this.nodeDataRefresh=!0}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=1/0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.min(i,e.x))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.x},{from:0,to:e.width}],{disableInteractions:!0,duration:1e3,ease:Mr,repeat:0,onUpdate([i,n]){t.x=i,t.width=n,t.y=e.y,t.height=e.height}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return we.X}getCategoryDirection(){return we.Y}}Gs.className="BarSeries",Gs.type="bar",Ls([Dt($t)],Gs.prototype,"fills",void 0),Ls([Dt($t)],Gs.prototype,"strokes",void 0),Ls([Dt(Zt(0,1))],Gs.prototype,"fillOpacity",void 0),Ls([Dt(Zt(0,1))],Gs.prototype,"strokeOpacity",void 0),Ls([Dt(de)],Gs.prototype,"lineDash",void 0),Ls([Dt(Zt(0))],Gs.prototype,"lineDashOffset",void 0),Ls([Dt(Ft)],Gs.prototype,"formatter",void 0),Ls([Dt(zt)],Gs.prototype,"xKey",void 0),Ls([Dt(zt)],Gs.prototype,"xName",void 0),Ls([Dt(ie)],Gs.prototype,"hideInLegend",void 0),Ls([Dt(re)],Gs.prototype,"visibles",void 0),Ls([Dt(jt)],Gs.prototype,"grouped",void 0),Ls([Dt(Jt())],Gs.prototype,"normalizedTo",void 0),Ls([Dt(Zt(0))],Gs.prototype,"strokeWidth",void 0);class zs extends Gs{getBarDirection(){return we.Y}getCategoryDirection(){return we.X}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.max(i,e.height+e.y))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:Mr,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}}zs.type="column",zs.className="ColumnSeries";var Ws=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Vs=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};const Hs=["count","sum","mean"],Ks=Pt(t=>Hs.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Ys;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(Ys||(Ys={}));class Us extends kn{constructor(){super(...arguments),this.formatter=void 0}}Ws([Dt(Ft)],Us.prototype,"formatter",void 0);class Xs extends Je{constructor(){super(...arguments),this.renderer=void 0}}Ws([Dt(Ft)],Xs.prototype,"renderer",void 0);class $s extends mr{constructor(t){super({moduleCtx:t,pickModes:[Be.EXACT_SHAPE_MATCH]}),this.label=new Us,this.tooltip=new Xs,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.label.enabled=!1}deriveBins(t){if(void 0===this.binCount){const e=Wi(t[0],t[1],10),i=Hi(t[0],t[1],10),n=e[0],r=t=>[t,t+i];return[[n-i,n],...e.map(r)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],r=e||1,{start:o,binSize:s}=this.calculateNiceStart(i,n,r);return this.getBins(o,n,s,r)}getBins(t,e,i,n){const r=[];for(let o=0;o<n;o++){const s=Math.round(10*(t+o*i))/10;let a=Math.round(10*(t+(o+1)*i))/10;o===n-1&&(a=Math.max(a,e)),r[o]=[s,a]}return r}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,r=Math.floor(Math.log10(n)),o=Math.pow(10,r);return{start:Math.floor(t/o)*o,binSize:n}}processData(){return Vs(this,void 0,void 0,(function*(){const{xKey:t,yKey:e,data:i,areaPlot:n,aggregation:r}=this,o=[We(t,!0),Wo];if(e){let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};"count"===r||("sum"===r?t=function(t){return{type:"aggregate",properties:t,aggregateFunction:t=>Ie(t),groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}([e]):"mean"===r&&(t=function(t){return{properties:t,type:"aggregate",aggregateFunction:t=>Ie(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}([e]))),n&&(t=je([e],t)),o.push(Ve(e,!0,{invalidValue:void 0}),t)}else{let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};n&&(t=je([],t)),o.push(t)}this.dataModel=new Pe({props:o,dataVisible:this.visible,groupByFn:t=>{var e;const i=Te(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),r=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let t=0;t<r;t++){const i=n[t];if(e>=i[0]&&e<i[1])return i;if(t===r-1&&e<=i[1])return i}return[]}}}),this.processedData=this.dataModel.processData(null!=i?i:[])}))}getDomain(t){var e,i,n,r;const{processedData:o}=this;if(!o)return[];const{domain:{aggValues:[s]=[]}}=o,a=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],l=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(r=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==r?r:0)-1][1];return t===we.X?Te([a,l]):Te(s)}getNodeClickEvent(t,e){var i,n;return new gr(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new yr(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t;return Vs(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,processedData:n,ctx:{callbackCache:r}}=this;if(!(this.seriesItemEnabled&&e&&i&&n&&"grouped"===n.type))return[];const{scale:o}=e,{scale:s}=i,{fill:a,stroke:l,strokeWidth:c,id:h,yKey:d="",xKey:u=""}=this,p=[],f=t=>String(t.value),{label:{formatter:g=f,fontStyle:y,fontWeight:v,fontSize:m,fontFamily:b,color:x}}=this;return n.data.forEach(t=>{var e;const{aggValues:[[i,n]]=[[0,0]],datum:f,datum:{length:C},keys:S,keys:[w,O]}=t,k=o.convert(w),T=o.convert(O),D=i+n,P=s.convert(0),E=s.convert(D),M=T-k,R=Math.abs(E-P),A=0!==D?{text:null!==(e=r.call(g,{value:D,seriesId:h}))&&void 0!==e?e:String(D),fontStyle:y,fontWeight:v,fontSize:m,fontFamily:b,fill:x,x:k+M/2,y:E+R/2}:void 0,_={x:k+M/2,y:E+R/2};p.push({series:this,datum:f,aggregatedValue:D,frequency:C,domain:S,yKey:d,xKey:u,x:k,y:E,width:M,height:R,nodeMidPoint:_,fill:a,stroke:l,strokeWidth:c,label:A})}),[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:p,labelData:p}]}))}nodeFactory(){return new Rs}updateDatumSelection(t){return Vs(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=Ys.Bin,t.crisp=!0})}))}updateDatumNodes(t){return Vs(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:r,shadow:o,highlightStyle:{item:{fill:s,fillOpacity:a=n,stroke:l,strokeWidth:c}}}=this;e.each((t,e,h)=>{var d,u;const p=i&&void 0!==c?c:e.strokeWidth,f=i?a:n;t.x=e.x,t.width=e.width,t.fill=null!==(d=i?s:void 0)&&void 0!==d?d:e.fill,t.stroke=null!==(u=i?l:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=f,t.strokeOpacity=r,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=o,t.zIndex=i?ti.highlightedZIndex:h,t.visible=e.height>0})}))}updateLabelSelection(t){return Vs(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=Ys.Label,t.pointerEvents=z.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return Vs(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const n=e.label;n&&i?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",xAxis:n,yAxis:r}=this;if(!e||!n||!r)return"";const{xName:o,yName:s,fill:a,tooltip:l,aggregation:c,id:h}=this,{renderer:d}=l,{aggregatedValue:u,frequency:p,domain:f,domain:[g,y]}=t,v=`${ps(null!=o?o:e)}: ${n.formatDatum(g)} - ${n.formatDatum(y)}`;let m=i?`<b>${ps(null!=s?s:i)} (${c})</b>: ${r.formatDatum(u)}<br>`:"";m+="<b>Frequency</b>: "+p;const b={title:v,backgroundColor:a,content:m};return d?Re(d({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:f,xName:o,yKey:i,yValue:u,yName:s,color:a,title:v,seriesId:h}),b):Re(b)}getLegendData(){var t;const{id:e,data:i,xKey:n,yName:r,visible:o,fill:s,stroke:a,fillOpacity:l,strokeOpacity:c}=this;if(!i||0===i.length)return[];return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:o,label:{text:null!==(t=null!=r?r:n)&&void 0!==t?t:"Frequency"},marker:{fill:null!=s?s:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:l,strokeOpacity:c}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{i=Math.max(i,e.height+e.y)})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:Mr,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}}$s.className="HistogramSeries",$s.type="histogram",Ws([Dt(Xt)],$s.prototype,"fill",void 0),Ws([Dt(Xt)],$s.prototype,"stroke",void 0),Ws([Dt(Zt(0,1))],$s.prototype,"fillOpacity",void 0),Ws([Dt(Zt(0,1))],$s.prototype,"strokeOpacity",void 0),Ws([Dt(de)],$s.prototype,"lineDash",void 0),Ws([Dt(Zt(0))],$s.prototype,"lineDashOffset",void 0),Ws([Dt(zt)],$s.prototype,"xKey",void 0),Ws([Dt(jt)],$s.prototype,"areaPlot",void 0),Ws([Dt(Rt())],$s.prototype,"bins",void 0),Ws([Dt(Ks)],$s.prototype,"aggregation",void 0),Ws([Dt(Jt(0))],$s.prototype,"binCount",void 0),Ws([Dt(zt)],$s.prototype,"xName",void 0),Ws([Dt(zt)],$s.prototype,"yKey",void 0),Ws([Dt(zt)],$s.prototype,"yName",void 0),Ws([Dt(Zt(0))],$s.prototype,"strokeWidth",void 0);var qs=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Zs=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class Js extends kn{constructor(){super(...arguments),this.formatter=void 0}}qs([Dt(Ft)],Js.prototype,"formatter",void 0);class Qs extends Je{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}qs([Dt(Ft)],Qs.prototype,"renderer",void 0),qs([Dt(zt)],Qs.prototype,"format",void 0);class ta extends mr{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[Be.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Be.NEAREST_NODE,Be.EXACT_SHAPE_MATCH]}),this.marker=new br,this.label=new Js,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new Qs,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:e,label:i}=this;e.fill="#c16068",e.stroke="#874349",i.enabled=!1}processData(){return Zs(this,void 0,void 0,(function*(){const{xAxis:t,yAxis:e,xKey:i="",yKey:n=""}=this,r=i&&n&&this.data?this.data:[],o=(null==t?void 0:t.scale)instanceof zi,s=(null==e?void 0:e.scale)instanceof zi;this.dataModel=new Pe({props:[Ve(i,o,{id:"xValue"}),Ve(n,s,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=r?r:[])}))}getDomain(t){const{xAxis:e,yAxis:i,dataModel:n,processedData:r}=this;if(!r||!n)return[];const o=n.resolveProcessedDataDefById("xValue");if(t===we.X){const t=n.getDomain("xValue",r);return"category"===(null==o?void 0:o.valueType)?t:this.fixNumericExtent(wn(t),e)}{const t=n.getDomain("yValue",r);return this.fixNumericExtent(t,i)}}createNodeData(){var t,e,i,n,r,o,s,a,l,c,h;return Zs(this,void 0,void 0,(function*(){const{processedData:d,dataModel:u,xAxis:p,yAxis:f,marker:{enabled:g,size:y,strokeWidth:v},ctx:{callbackCache:m}}=this;if(!(d&&u&&p&&f))return[];const{label:b,yKey:x="",xKey:C="",id:S}=this,w=p.scale,O=f.scale,k=(null!==(t=w.bandwidth)&&void 0!==t?t:0)/2,T=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,D=new Array(d.data.length),P=g?y:0,E=null!==(r=null===(n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("xValue"))||void 0===n?void 0:n.index)&&void 0!==r?r:-1,M=null!==(a=null===(s=null===(o=this.dataModel)||void 0===o?void 0:o.resolveProcessedDataIndexById("yValue"))||void 0===s?void 0:s.index)&&void 0!==a?a:-1;let R=!0,A=void 0,_=void 0,L=0;for(let t=0;t<d.data.length;t++){const{datum:e,values:i}=null!=_?_:d.data[t],n=i[E],r=i[M];if(void 0===r)A=void 0,R=!0;else{const i=w.convert(n)+k;if(isNaN(i)){A=void 0,R=!0;continue}const o=(null!==(l=w.bandwidth)&&void 0!==l?l:.5*y+(null!=v?v:0))+1;_=void 0===(null===(c=d.data[t+1])||void 0===c?void 0:c.values[M])?void 0:d.data[t+1];const s=null===(h=d.data[t+1])||void 0===h?void 0:h.values[E],a=p.inRangeEx(i,0,o),u=_&&p.inRangeEx(w.convert(s)+k,0,o);if(-1===a&&-1===u){R=!0;continue}if(1===a&&1===A){R=!0;continue}A=a;const f=O.convert(r)+T;let g;b.formatter&&(g=m.call(b.formatter,{value:r,seriesId:S})),void 0!==g||("number"==typeof r&&isFinite(r)?g=r.toFixed(2):r&&(g=String(r))),D[L++]={series:this,datum:e,yKey:x,xKey:C,point:{x:i,y:f,moveTo:R,size:P},nodeMidPoint:{x:i,y:f},label:g?{text:g,fontStyle:b.fontStyle,fontWeight:b.fontWeight,fontSize:b.fontSize,fontFamily:b.fontFamily,textAlign:"center",textBaseline:"bottom",fill:b.color}:void 0},R=!1}}return D.length=L,[{itemId:x,nodeData:D,labelData:D}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(lr(t))}updateMarkerSelection(t){return Zs(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:r}=this.marker;return e=n&&r?e:[],this.marker.isDirty()&&i.clear(),i.update(e)}))}updateMarkerNodes(t){var e;return Zs(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{marker:r,marker:{fillOpacity:o},xKey:s="",yKey:a="",stroke:l,strokeOpacity:c,highlightStyle:{item:{fill:h,fillOpacity:d=o,stroke:u,strokeWidth:p}},id:f,ctx:{callbackCache:g}}=this,{size:y,formatter:v}=r,m=null!==(e=r.strokeWidth)&&void 0!==e?e:this.strokeWidth,b="function"==typeof r.shape;i.each((t,e)=>{var i,x,C,S,w,O,k;const T=n&&void 0!==h?h:r.fill,D=n?d:o,P=n&&void 0!==u?u:null!==(i=r.stroke)&&void 0!==i?i:l,E=n&&void 0!==p?p:m;let M=void 0;v&&(M=g.call(v,{datum:e.datum,xKey:s,yKey:a,fill:T,stroke:P,strokeWidth:E,size:y,highlighted:n,seriesId:f})),t.fill=null!==(x=null==M?void 0:M.fill)&&void 0!==x?x:T,t.stroke=null!==(C=null==M?void 0:M.stroke)&&void 0!==C?C:P,t.strokeWidth=null!==(S=null==M?void 0:M.strokeWidth)&&void 0!==S?S:E,t.fillOpacity=null!=D?D:1,t.strokeOpacity=null!==(O=null!==(w=r.strokeOpacity)&&void 0!==w?w:c)&&void 0!==O?O:1,t.size=null!==(k=null==M?void 0:M.size)&&void 0!==k?k:y,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),b&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return Zs(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:r}=this.marker;return e=n&&r?e:[],i.update(e)}))}updateLabelNodes(t){return Zs(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:r,fontSize:o,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{point:l,label:c}=e;e&&c&&i?(t.fontStyle=n,t.fontWeight=r,t.fontSize=o,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i,n;return new gr(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new yr(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getTooltipHtml(t){var e,i;const{xKey:n,yKey:r,xAxis:o,yAxis:s}=this;if(!(n&&r&&o&&s))return"";const{xName:a,yName:l,tooltip:c,marker:h,id:d}=this,{renderer:u,format:p}=c,f=t.datum,g=f[n],y=f[r],v=o.formatDatum(g),m=s.formatDatum(y),b=ps(null!==(e=this.title)&&void 0!==e?e:l),x=ps(v+": "+m),{formatter:C,fill:S,stroke:w,strokeWidth:O,size:k}=h,T=null!=O?O:this.strokeWidth;let D=void 0;C&&(D=C({datum:f,xKey:n,yKey:r,fill:S,stroke:w,strokeWidth:T,size:k,highlighted:!1,seriesId:d}));const P=null!==(i=null==D?void 0:D.fill)&&void 0!==i?i:S,E={title:b,backgroundColor:P,content:x};if(p||u){const t={datum:f,xKey:n,xValue:g,xName:a,yKey:r,yValue:y,yName:l,title:b,color:P,seriesId:d};if(p)return Re({content:ds(p,t)},E);if(u)return Re(u(t),E)}return Re(E)}getLegendData(){var t,e,i,n,r,o,s;const{id:a,data:l,xKey:c,yKey:h,yName:d,visible:u,title:p,marker:f,stroke:g,strokeOpacity:y}=this;if(!((null==l?void 0:l.length)&&c&&h))return[];return[{legendType:"category",id:a,itemId:h,seriesId:a,enabled:u,label:{text:null!==(t=null!=p?p:d)&&void 0!==t?t:h},marker:{shape:f.shape,fill:null!==(e=f.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(i=f.stroke)&&void 0!==i?i:g)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=f.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(s=null!==(o=f.strokeOpacity)&&void 0!==o?o:y)&&void 0!==s?s:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:r}){i.forEach(({nodeData:i},o)=>{var s,a;const[l]=n[o],{path:c}=l;l.fill=void 0,l.lineJoin="round",l.pointerEvents=z.None,l.stroke=this.stroke,l.strokeWidth=this.getStrokeWidth(this.strokeWidth),l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset;const h={from:0,to:null!==(s=null==r?void 0:r.width)&&void 0!==s?s:0,disableInteractions:!0,ease:Er,repeat:0};null===(a=this.animationManager)||void 0===a||a.animate(this.id+"_empty-update-ready",Object.assign(Object.assign({},h),{duration:1e3,onUpdate(t){c.clear({trackChanges:!0}),i.forEach((e,n)=>{if(e.point.x<=t)e.point.moveTo?c.moveTo(e.point.x,e.point.y):c.lineTo(e.point.x,e.point.y);else if(n>0&&i[n-1].point.x<t){const r=i[n-1].point,o=e.point,s=t,a=r.y+(s-r.x)*(o.y-r.y)/(o.x-r.x);e.point.moveTo?c.moveTo(s,a):c.lineTo(s,a)}}),l.checkPathDirty()}})),t[o].each((t,e)=>{var i,n,o,s;const a=(null==r?void 0:r.width)?e.point.x/r.width*1e3:0,l=this.animateFormatter(e),c=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},h),{to:null!==(s=null==l?void 0:l.size)&&void 0!==s?s:c,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[o].each((t,e)=>{var i;const n=(null==r?void 0:r.width)?e.point.x/r.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate(t){this.resetMarkersAndPaths(t)}animateReadyResize(t){var e;null===(e=this.animationManager)||void 0===e||e.stop(),this.resetMarkersAndPaths(t)}resetMarkersAndPaths({markerSelections:t,contextData:e,paths:i}){e.forEach(({nodeData:e},n)=>{const[r]=i[n],{path:o}=r;r.stroke=this.stroke,r.strokeWidth=this.getStrokeWidth(this.strokeWidth),r.strokeOpacity=this.strokeOpacity,r.lineDash=this.lineDash,r.lineDashOffset=this.lineDashOffset,o.clear({trackChanges:!0}),e.forEach(t=>{t.point.moveTo?o.moveTo(t.point.x,t.point.y):o.lineTo(t.point.x,t.point.y)}),r.checkPathDirty(),t[n].each((t,e)=>{var i,n,r;const o=this.animateFormatter(e),s=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(r=null==o?void 0:o.size)&&void 0!==r?r:s})})}animateFormatter(t){var e,i;const{marker:n,xKey:r="",yKey:o="",stroke:s,id:a,ctx:{callbackCache:l}}=this,{size:c,formatter:h}=n,d=n.fill,u=null!==(e=n.stroke)&&void 0!==e?e:s,p=null!==(i=n.strokeWidth)&&void 0!==i?i:this.strokeWidth;let f=void 0;return h&&(f=l.call(h,{datum:t.datum,xKey:r,yKey:o,fill:d,stroke:u,strokeWidth:p,size:c,highlighted:!1,seriesId:a})),f}isLabelEnabled(){return this.label.enabled}}ta.className="LineSeries",ta.type="line",qs([Dt(zt)],ta.prototype,"title",void 0),qs([Dt(Xt)],ta.prototype,"stroke",void 0),qs([Dt(de)],ta.prototype,"lineDash",void 0),qs([Dt(Zt(0))],ta.prototype,"lineDashOffset",void 0),qs([Dt(Zt(0))],ta.prototype,"strokeWidth",void 0),qs([Dt(Zt(0,1))],ta.prototype,"strokeOpacity",void 0),qs([Dt(zt)],ta.prototype,"xKey",void 0),qs([Dt(zt)],ta.prototype,"xName",void 0),qs([Dt(zt)],ta.prototype,"yKey",void 0),qs([Dt(zt)],ta.prototype,"yName",void 0);class ea{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(t=>Ot.fromString(t))}update(){const{domain:t,range:e}=this;t.length<2&&($.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){$.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}const i=e.length<t.length;if(i||t.length>2&&e.length>t.length)if($.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let i=e.length;i<t.length;i++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map(t=>Ot.fromString(t))}convert(t){const{domain:e,range:i,parsedRange:n}=this,r=e[0],o=e[e.length-1],s=i[0],a=i[i.length-1];if(t<=r)return s;if(t>=o)return a;let l,c;if(2===e.length){const e=(t-r)/(o-r),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return Dr(n[l],n[l+1])(c)}}var ia=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},na=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class ra extends kn{constructor(){super(...arguments),this.formatter=void 0}}ia([Dt(Ft)],ra.prototype,"formatter",void 0);class oa extends fr{constructor(t,e,i,n,r,o){super(e,i,n,r,o),this.sizeKey=t}}class sa extends oa{constructor(){super(...arguments),this.type="nodeClick"}}class aa extends oa{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class la extends Je{constructor(){super(...arguments),this.renderer=void 0}}ia([Dt(Ft)],la.prototype,"renderer",void 0);class ca extends mr{constructor(t){super({moduleCtx:t,pickModes:[Be.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Be.NEAREST_NODE,Be.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Vn,this.marker=new br,this.label=new ra,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new ea,this.tooltip=new la;const{label:e}=this;e.enabled=!1}processData(){var t,e,i,n,r,o;return na(this,void 0,void 0,(function*(){const{xKey:s="",yKey:a="",sizeKey:l,xAxis:c,yAxis:h,marker:d,data:u}=this,p=(null==c?void 0:c.scale)instanceof zi,f=(null==h?void 0:h.scale)instanceof zi,{colorScale:g,colorDomain:y,colorRange:v,colorKey:m}=this;if(this.dataModel=new Pe({props:[Ve(s,p,{id:"xValue"}),Ve(a,f,{id:"yValue"}),...l?[Ve(l,!0,{id:"sizeValue"})]:[],...m?[Ve(m,!0,{id:"colorValue"})]:[]],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=u?u:[]),l){const r=null!==(e=null===(t=this.dataModel.resolveProcessedDataIndexById("sizeValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,o=null!==(n=null===(i=this.processedData)||void 0===i?void 0:i.domain.values[r])&&void 0!==n?n:[];this.sizeScale.domain=d.domain?d.domain:o}if(m){const t=null!==(o=null===(r=this.dataModel.resolveProcessedDataIndexById("colorValue"))||void 0===r?void 0:r.index)&&void 0!==o?o:-1;g.domain=null!=y?y:this.processedData.domain.values[t],g.range=v,g.update()}}))}getDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===we.X?"xValue":"yValue",r=e.resolveProcessedDataDefById(n),o=e.getDomain(n,i);if("category"===(null==r?void 0:r.valueType))return o;const s=t===we.X?this.xAxis:this.yAxis;return this.fixNumericExtent(wn(o),s)}getNodeClickEvent(t,e){var i,n;return new sa(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new aa(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t,e,i,n,r,o,s,a,l;return na(this,void 0,void 0,(function*(){const{visible:c,xAxis:h,yAxis:d,yKey:u="",xKey:p="",label:f,labelKey:g,ctx:{callbackCache:y}}=this,v=null===(t=this.dataModel)||void 0===t?void 0:t.resolveProcessedDataIndexById("xValue"),m=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue");if(!(v&&m&&c&&h&&d))return[];const{colorScale:b,sizeKey:x,colorKey:C,id:S}=this,w=h.scale,O=d.scale,k=(null!==(i=w.bandwidth)&&void 0!==i?i:0)/2,T=(null!==(n=O.bandwidth)&&void 0!==n?n:0)/2,{sizeScale:D,marker:P}=this,E=new Array(null!==(o=null===(r=this.processedData)||void 0===r?void 0:r.data.length)&&void 0!==o?o:0);D.range=[P.size,P.maxSize];const M=f.getFont();let R=0;for(const{values:t,datum:e}of null!==(a=null===(s=this.processedData)||void 0===s?void 0:s.data)&&void 0!==a?a:[]){const i=t[v.index],n=t[m.index],r=w.convert(i)+k,o=O.convert(n)+T;if(!this.checkRangeXY(r,o,h,d))continue;let s;f.formatter&&(s=y.call(f.formatter,{value:n,seriesId:S,datum:e})),void 0===s&&(s=g?String(e[g]):"");const a=A.getTextSize(s,M),l=x?D.convert(t[2]):P.size,c=x?3:2,_=C?b.convert(t[c]):void 0;E[R++]={series:this,itemId:u,yKey:u,xKey:p,datum:e,point:{x:r,y:o,size:l},nodeMidPoint:{x:r,y:o},fill:_,label:Object.assign({text:s},a)}}return E.length=R,[{itemId:null!==(l=this.yKey)&&void 0!==l?l:this.id,nodeData:E,labelData:E}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(lr(t))}updateMarkerSelection(t){return na(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;this.marker.isDirty()&&i.clear();const r=n?e:[];return i.update(r)}))}updateMarkerNodes(t){return na(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{marker:n,xKey:r="",yKey:o="",sizeScale:s,marker:{fillOpacity:a,strokeOpacity:l,strokeWidth:c},highlightStyle:{item:{fill:h,fillOpacity:d=a,stroke:u,strokeWidth:p}},id:f,ctx:{callbackCache:g}}=this,{formatter:y}=n;s.range=[n.size,n.maxSize];const v="function"==typeof n.shape;e.each((t,e)=>{var s,m,b,x,C,S,w,O,k,T;const D=i&&void 0!==h?h:null!==(s=e.fill)&&void 0!==s?s:n.fill,P=i?d:a,E=i&&void 0!==u?u:n.stroke,M=l,R=i&&void 0!==p?p:null!=c?c:1,A=null!==(b=null===(m=e.point)||void 0===m?void 0:m.size)&&void 0!==b?b:0;let _=void 0;y&&(_=g.call(y,{datum:e.datum,xKey:r,yKey:o,fill:D,stroke:E,strokeWidth:R,size:A,highlighted:i,seriesId:f})),t.fill=null!==(x=null==_?void 0:_.fill)&&void 0!==x?x:D,t.stroke=null!==(C=null==_?void 0:_.stroke)&&void 0!==C?C:E,t.strokeWidth=null!==(S=null==_?void 0:_.strokeWidth)&&void 0!==S?S:R,t.fillOpacity=null!=P?P:1,t.strokeOpacity=null!=M?M:1,t.translationX=null!==(O=null===(w=e.point)||void 0===w?void 0:w.x)&&void 0!==O?O:0,t.translationY=null!==(T=null===(k=e.point)||void 0===k?void 0:k.y)&&void 0!==T?T:0,t.visible=t.size>0,v&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return na(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:r}}=this,o=(r&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(o)}))}updateLabelNodes(t){return na(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,r,o,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(r=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==r?r:0,t.y=null!==(s=null===(o=e.point)||void 0===o?void 0:o.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e,i,n,r,o,s,a;const{xKey:l,yKey:c,xAxis:h,yAxis:d}=this;if(!(l&&c&&h&&d))return"";const{marker:u,tooltip:p,xName:f,yName:g,sizeKey:y,sizeName:v,labelKey:m,labelName:b,id:x,ctx:{callbackCache:C}}=this,{stroke:S}=u,w=null!==(e=t.fill)&&void 0!==e?e:u.fill,O=this.getStrokeWidth(null!==(i=u.strokeWidth)&&void 0!==i?i:1),{formatter:k}=this.marker;let T=void 0;k&&(T=C.call(k,{datum:t,xKey:l,yKey:c,fill:w,stroke:S,strokeWidth:O,size:null!==(r=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==r?r:0,highlighted:!1,seriesId:x}));const D=null!==(s=null!==(o=null==T?void 0:T.fill)&&void 0!==o?o:w)&&void 0!==s?s:"gray",P=null!==(a=this.title)&&void 0!==a?a:g,E=t.datum,M=E[l],R=E[c],A=ps(h.formatDatum(M)),_=ps(d.formatDatum(R));let L=`<b>${ps(null!=f?f:l)}</b>: ${A}<br><b>${ps(null!=g?g:c)}</b>: ${_}`;y&&(L+=`<br><b>${ps(null!=v?v:y)}</b>: ${ps(E[y])}`),m&&(L=`<b>${ps(null!=b?b:m)}</b>: ${ps(E[m])}<br>`+L);const N={title:P,backgroundColor:D,content:L},{renderer:I}=p;return I?Re(I({datum:E,xKey:l,xValue:M,xName:f,yKey:c,yValue:R,yName:g,sizeKey:y,sizeName:v,labelKey:m,labelName:b,title:P,color:D,seriesId:x}),N):Re(N)}getLegendData(){var t,e,i,n,r;const{id:o,data:s,xKey:a,yKey:l,yName:c,title:h,visible:d,marker:u}=this,{fill:p,stroke:f,fillOpacity:g,strokeOpacity:y}=u;if(!((null==s?void 0:s.length)&&a&&l))return[];return[{legendType:"category",id:o,itemId:l,seriesId:o,enabled:d,label:{text:null!==(t=null!=h?h:c)&&void 0!==t?t:l},marker:{shape:u.shape,fill:null!==(i=null!==(e=u.fill)&&void 0!==e?e:p)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(n=u.stroke)&&void 0!==n?n:f)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!=g?g:1,strokeOpacity:null!=y?y:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){t.forEach(t=>{t.each((t,e)=>{var i,n,r,o;const s=this.animateFormatter(t,e),a=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0,l=null!==(r=null==s?void 0:s.size)&&void 0!==r?r:a;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:l,disableInteractions:!0,duration:1e3,ease:Er,repeat:0,onUpdate(e){t.size=e}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Er,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({markerSelections:t}){t.forEach(t=>{this.resetMarkers(t)})}animateReadyHighlightMarkers(t){this.resetMarkers(t)}resetMarkers(t){t.each((t,e)=>{var i,n,r;const o=this.animateFormatter(t,e),s=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(r=null==o?void 0:o.size)&&void 0!==r?r:s})}animateFormatter(t,e){var i,n,r;const{xKey:o="",yKey:s="",marker:{strokeWidth:a},id:l,ctx:{callbackCache:c}}=this,{formatter:h}=this.marker,d=null!==(i=e.fill)&&void 0!==i?i:t.fill,u=t.stroke,p=null!=a?a:1,f=null!==(r=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==r?r:0;let g=void 0;return h&&(g=c.call(h,{datum:e.datum,xKey:o,yKey:s,fill:d,stroke:u,strokeWidth:p,size:f,highlighted:!1,seriesId:l})),g}isLabelEnabled(){return this.label.enabled}}ca.className="ScatterSeries",ca.type="scatter",ia([Dt(zt)],ca.prototype,"title",void 0),ia([Dt(zt)],ca.prototype,"labelKey",void 0),ia([Dt(zt)],ca.prototype,"xName",void 0),ia([Dt(zt)],ca.prototype,"yName",void 0),ia([Dt(zt)],ca.prototype,"sizeName",void 0),ia([Dt(zt)],ca.prototype,"labelName",void 0),ia([Dt(zt)],ca.prototype,"xKey",void 0),ia([Dt(zt)],ca.prototype,"yKey",void 0),ia([Dt(zt)],ca.prototype,"sizeKey",void 0),ia([Dt(zt)],ca.prototype,"colorKey",void 0),ia([Dt(zt)],ca.prototype,"colorName",void 0),ia([Dt(ee)],ca.prototype,"colorDomain",void 0),ia([Dt($t)],ca.prototype,"colorRange",void 0);class ha extends ti{constructor(t){super({moduleCtx:t,pickModes:[Be.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var da=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class ua extends G{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}da([Dt(jt),B({redraw:F.MAJOR})],ua.prototype,"enabled",void 0),da([Dt(Ut),B({redraw:F.MAJOR})],ua.prototype,"color",void 0),da([Dt(Zt()),B({redraw:F.MAJOR})],ua.prototype,"xOffset",void 0),da([Dt(Zt()),B({redraw:F.MAJOR})],ua.prototype,"yOffset",void 0),da([Dt(Zt(0)),B({redraw:F.MAJOR})],ua.prototype,"blur",void 0);var pa,fa=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ga=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};class ya extends Je{constructor(){super(...arguments),this.renderer=void 0}}fa([Dt(Ft)],ya.prototype,"renderer",void 0);class va extends Ke{constructor(t,e,i,n,r,o){super(n,r,o),this.labelKey=t,this.sizeKey=e,this.colorKey=i}}class ma extends va{constructor(){super(...arguments),this.type="nodeClick"}}class ba extends va{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class xa extends kn{constructor(){super(...arguments),this.padding=10}}fa([Dt(Zt(0))],xa.prototype,"padding",void 0);class Ca extends kn{constructor(){super(...arguments),this.wrapping="on-space"}}fa([Dt(Ce)],Ca.prototype,"wrapping",void 0);class Sa{constructor(){this.style=(()=>{const t=new kn;return t.color="white",t})()}}fa([Dt(zt)],Sa.prototype,"key",void 0),fa([Dt(zt)],Sa.prototype,"name",void 0),fa([Dt(Ft)],Sa.prototype,"formatter",void 0),function(t){t[t.Name=0]="Name",t[t.Value=1]="Value"}(pa||(pa={}));const wa=new dt;function Oa(t,e){const{fontStyle:i,fontWeight:n,fontSize:r,fontFamily:o}=e;wa.fontStyle=i,wa.fontWeight=n,wa.fontSize=r,wa.fontFamily=o,wa.text=t,wa.x=0,wa.y=0,wa.textAlign="left",wa.textBaseline="top";const{width:s,height:a}=wa.computeBBox();return{width:s,height:a}}function ka(t){if("string"==typeof t&&!Ot.validColorString(t)){const e="black";return $.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),"black"}return t}class Ta{constructor(){this.color="black"}}fa([Dt(Xt)],Ta.prototype,"color",void 0);class Da extends Ze{constructor(){super(...arguments),this.text=new Ta}}class Pa extends ha{constructor(){super(...arguments),this.groupSelection=ki.select(this.contentGroup,Z),this.highlightSelection=ki.select(this.highlightGroup,Z),this.title=(()=>{const t=new xa;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t})(),this.subtitle=(()=>{const t=new xa;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t})(),this.labels={large:(()=>{const t=new Ca;return t.color="white",t.fontWeight="bold",t.fontSize=18,t})(),medium:(()=>{const t=new Ca;return t.color="white",t.fontWeight="bold",t.fontSize=14,t})(),small:(()=>{const t=new Ca;return t.color="white",t.fontWeight="bold",t.fontSize=10,t})(),formatter:void 0,value:new Sa},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new ua,this.labelShadow=new ua,this.tooltip=new ya,this.highlightStyle=new Da}getNodePaddingTop(t,e){var i;const{title:n,subtitle:r,nodePadding:o}=this,s=t.label;if(t.isLeaf||!s||0===t.depth)return o;const a=t.depth>1?r:n,l=Oa(s,a);return a.fontSize>e.width/3||a.fontSize>e.height/3||l.height>=e.height?o:l.height+o+(null!==(i=a.padding)&&void 0!==i?i:0)}getNodePadding(t,e){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(t,e),right:i,bottom:i,left:i}}squarify(t,e,i=new Map){if(e.width<=0||e.height<=0)return i;i.set(t,e);const n=this.getNodePadding(t,e),r=e.width-n.left-n.right,o=e.height-n.top-n.bottom;if(r<=0||o<=0||t.value<=0)return i;let s=0,a=0,l=1/0,c=t.value;const h=t.children,d=new _(e.x+n.left,e.y+n.top,r,o),u=d.clone();for(let t=0;t<h.length;t++){const e=h[t].value,n=h[a].value,r=u.width<u.height;s+=e;const o=r?u.height:u.width,p=r?u.width:u.height,f=p*n/s;let g=o*s/c;const y=Math.max(f,g)/Math.min(f,g),v=Math.abs(1-y);if(v<l){l=v;continue}s-=e,g=o*s/c;let m=r?u.x:u.y;for(let e=a;e<t;e++){const t=h[e],n=r?m:u.x,o=r?u.y:m,a=p*t.value/s,l=new _(n,o,r?a:g,r?g:a);this.applyGap(d,l),this.squarify(t,l,i),c-=t.value,m+=a}r?(u.y+=g,u.height-=g):(u.x+=g,u.width-=g),a=t,s=0,l=1/0,t--}const p=u.width<u.height;let f=p?u.x:u.y;for(let t=a;t<h.length;t++){const e=p?f:u.x,n=p?u.y:f,r=h[t].value/c,o=u.width*(p?r:1),s=u.height*(p?1:r),a=new _(e,n,o,s);this.applyGap(d,a),this.squarify(h[t],a,i),f+=p?o:s}return i}applyGap(t,e){const i=this.nodeGap/2,n=t=>({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),r=n(t),o=n(e);Object.keys(r).forEach(t=>{Mi(r[t],o[t])||e.shrink(i,t)})}processData(){return ga(this,void 0,void 0,(function*(){if(!this.data)return;const{data:t,sizeKey:e,labelKey:i,colorKey:n,colorDomain:r,colorRange:o,groupFill:s}=this,a=this.labels.formatter,l=new ea;l.domain=r,l.range=o,l.update();const c=(t,r=0,o)=>{var h,d,u;let p;a&&(p=this.ctx.callbackCache.call(a,{datum:t})),void 0!==p||(p=i&&null!==(h=t[i])&&void 0!==h?h:"");let f=n&&null!==(d=t[n])&&void 0!==d?d:r;f=ka(f);const g=!t.children;let y=s;"string"==typeof f?y=f:!g&&s||(y=l.convert(f));const v={datum:t,depth:r,parent:o,value:0,label:p,fill:y,series:this,isLeaf:g,children:[]};return g?v.value=e&&null!==(u=t[e])&&void 0!==u?u:1:(t.children.forEach(t=>{const e=c(t,r+1,v),i=e.value;!isNaN(i)&&isFinite(i)&&0!==i&&(v.value+=i,v.children.push(e))}),v.children.sort((t,e)=>e.value-t.value)),v};this.dataRoot=c(t)}))}createNodeData(){return ga(this,void 0,void 0,(function*(){return[]}))}update(){return ga(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes()}))}updateSelections(){return ga(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t,dataRoot:e}=this;if(!t||!e)return;if(!t.getSeriesRect())return;const i=[],n=t=>{var e;i.push(t),null===(e=t.children)||void 0===e||e.forEach(n)};n(this.dataRoot);const{groupSelection:r,highlightSelection:o}=this,s=t=>t.update(i,t=>{const e=new Rs,i=new dt;i.tag=pa.Name;const n=new dt;n.tag=pa.Value,t.append([e,i,n])});this.groupSelection=s(r),this.highlightSelection=s(o)}))}isDatumHighlighted(t){var e;return t===(null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)}getTileFormat(t,e){var i;const{formatter:n,ctx:{callbackCache:r}}=this;if(!n)return{};const{gradient:o,colorKey:s,labelKey:a,sizeKey:l,tileStroke:c,tileStrokeWidth:h,groupStroke:d,groupStrokeWidth:u}=this,p=t.isLeaf?c:d,f=t.isLeaf?h:u,g=r.call(n,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(i=t.parent)||void 0===i?void 0:i.datum,colorKey:s,sizeKey:l,labelKey:a,fill:t.fill,stroke:p,strokeWidth:f,gradient:o,highlighted:e});return null!=g?g:{}}updateNodes(){return ga(this,void 0,void 0,(function*(){if(!this.chart)return;const{gradient:t,highlightStyle:{item:{fill:e,fillOpacity:i,stroke:n,strokeWidth:r},text:{color:o}},tileStroke:s,tileStrokeWidth:a,groupStroke:l,groupStrokeWidth:c,tileShadow:h,labelShadow:d}=this,u=this.chart.getSeriesRect(),p=this.squarify(this.dataRoot,new _(0,0,u.width,u.height)),f=this.buildLabelMeta(p),g=this.getHighlightedSubtree();this.updateNodeMidPoint(p);const y=(o,d,u)=>{var f,g,y,v,m,b;const x=p.get(d);if(!x)return void(o.visible=!1);const C=u&&void 0!==e?e:d.fill,S=null!==(f=u?i:1)&&void 0!==f?f:1;let w=l;u&&void 0!==n?w=n:d.isLeaf&&(w=s);let O=c;u&&void 0!==r?O=r:d.isLeaf&&(O=a);const k=this.getTileFormat(d,u),T=ka(null!==(g=null==k?void 0:k.fill)&&void 0!==g?g:C);if(null!==(y=null==k?void 0:k.gradient)&&void 0!==y?y:t){const t=Ot.tryParseFromString(C).brighter().toString(),e=Ot.tryParseFromString(C).darker().toString();o.fill=`linear-gradient(180deg, ${t}, ${e})`}else o.fill=T;o.fillOpacity=null!==(v=null==k?void 0:k.fillOpacity)&&void 0!==v?v:S,o.stroke=ka(null!==(m=null==k?void 0:k.stroke)&&void 0!==m?m:w),o.strokeWidth=null!==(b=null==k?void 0:k.strokeWidth)&&void 0!==b?b:O,o.fillShadow=h,o.crisp=!0,o.x=x.x,o.y=x.y,o.width=x.width,o.height=x.height,o.visible=!0};this.groupSelection.selectByClass(Rs).forEach(t=>y(t,t.datum,!1)),this.highlightSelection.selectByClass(Rs).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||g.has(t.datum),t.visible&&y(t,t.datum,e)});const v=(t,e,i,n)=>{const r=f.get(e),s=null==r?void 0:r[n];s?(t.text=s.text,t.fontFamily=s.style.fontFamily,t.fontSize=s.style.fontSize,t.fontWeight=s.style.fontWeight,t.fill=i&&null!=o?o:s.style.color,t.fillShadow=i?void 0:d,t.textAlign=s.hAlign,t.textBaseline=s.vAlign,t.x=s.x,t.y=s.y,t.visible=!0):t.visible=!1};this.groupSelection.selectByTag(pa.Name).forEach(t=>v(t,t.datum,!1,"label")),this.highlightSelection.selectByTag(pa.Name).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||g.has(t.datum),t.visible&&v(t,t.datum,e,"label")}),this.groupSelection.selectByTag(pa.Value).forEach(t=>v(t,t.datum,!1,"value")),this.highlightSelection.selectByTag(pa.Value).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||g.has(t.datum),t.visible&&v(t,t.datum,e,"value")})}))}updateNodeMidPoint(t){t.forEach((t,e)=>{e.nodeMidPoint={x:t.x+t.width/2,y:t.y}})}getHighlightedSubtree(){const t=new Set,e=i=>{var n;(this.isDatumHighlighted(i)||i.parent&&t.has(i.parent))&&t.add(i),null===(n=i.children)||void 0===n||n.forEach(e)};return e(this.dataRoot),t}buildLabelMeta(t){const{labels:e,title:i,subtitle:n,nodePadding:r,labelKey:o,ctx:{callbackCache:s}}=this,a=/-$/m,l=new Map;return t.forEach((t,c)=>{var h,d,u;if(!o||0===c.depth)return;const p=t.width-2*r,f=t.height-2*r,g=e=>e.fontSize>t.width/3||e.fontSize>t.height/3;let y=c.isLeaf?c.label:c.label.toUpperCase(),v="";const m=e.value,b=m.style,x=Math.ceil(2*b.fontSize*(dt.defaultLineHeightRatio-1));c.isLeaf&&(m.formatter?v=null!==(h=s.call(m.formatter,{datum:c.datum}))&&void 0!==h?h:"":m.key&&(v=c.datum[m.key]));let C,S=Oa(v,b);v&&S.width>p&&(v="");let w="";if(c.isLeaf){C=e.small;const t=()=>{const t=f-(v?b.fontSize+x:0),i=[e.large,e.medium,e.small];for(const n of i){const{width:i,height:r}=Oa(y,n);if(r>t||g(n))continue;if(i<=p)return{style:n,wrappedText:void 0};const o=dt.wrap(y,p,t,n,n.wrapping);if(o&&"\u2026"!==o&&(n===e.small||!a.exec(o)&&!o.endsWith("\u2026")))return{style:n,wrappedText:o}}return Oa(y,e.small).height<=t&&!g(e.small)?{style:e.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let i=t();!i.style&&v&&(v="",i=t()),C=null!==(d=i.style)&&void 0!==d?d:e.small,w=null!==(u=i.wrappedText)&&void 0!==u?u:""}else C=1===c.depth?i:n;const O=Oa(w||y,C);if(g(C))return;if(O.width>p){const t=Math.floor(y.length*p/O.width)-1;y=y.substring(0,t).trim()+"\u2026"}S=Oa(v,b);const k=v&&S.width<p&&S.height+O.height+x<f;l.set(c,{label:Object.assign({text:w||y,style:C},c.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(k?S.height/2+x/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+r,y:t.y+r}),value:k?{text:v,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+O.height/2+x/2}:void 0})}),l}getDomain(t){return[0,1]}getNodeClickEvent(t,e){return new ma(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new ba(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getTooltipHtml(t){var e,i,n,r;if(!this.highlightGroups&&!t.isLeaf)return"";const{tooltip:o,sizeKey:s,labelKey:a,colorKey:l,rootName:c,id:h,labels:d,ctx:{callbackCache:u}}=this,{datum:p}=t,{renderer:f}=o,g=t.depth?p[a]:null!==(e=p[a])&&void 0!==e?e:c;let y="";const v=this.getTileFormat(t,!1),m=null!==(n=null!==(i=null==v?void 0:v.fill)&&void 0!==i?i:t.fill)&&void 0!==n?n:"gray",b=d.value.key,x=d.value.formatter;if(b||x){let t="";if(x)t=u.call(x,{datum:p});else{const e=p[b];"number"==typeof e&&isFinite(e)&&(t=Ri(e))}t&&(d.value.name&&(y+=`<b>${d.value.name}:</b> `),y+=t)}const C={title:g,backgroundColor:m,content:y};return f?Re(f({datum:t.datum,parent:null===(r=t.parent)||void 0===r?void 0:r.datum,depth:t.depth,sizeKey:s,labelKey:a,colorKey:l,title:g,color:m,seriesId:h}),C):g||y?Re(C):""}getLegendData(){return[]}}Pa.className="TreemapSeries",Pa.type="treemap",fa([Dt(Zt(0))],Pa.prototype,"nodePadding",void 0),fa([Dt(Zt(0))],Pa.prototype,"nodeGap",void 0),fa([Dt(Gt)],Pa.prototype,"labelKey",void 0),fa([Dt(zt)],Pa.prototype,"sizeKey",void 0),fa([Dt(zt)],Pa.prototype,"colorKey",void 0),fa([Dt(te)],Pa.prototype,"colorDomain",void 0),fa([Dt($t)],Pa.prototype,"colorRange",void 0),fa([Dt(zt)],Pa.prototype,"groupFill",void 0),fa([Dt(Xt)],Pa.prototype,"groupStroke",void 0),fa([Dt(Jt(0))],Pa.prototype,"groupStrokeWidth",void 0),fa([Dt(Xt)],Pa.prototype,"tileStroke",void 0),fa([Dt(Jt(0))],Pa.prototype,"tileStrokeWidth",void 0),fa([Dt(jt)],Pa.prototype,"gradient",void 0),fa([Dt(Ft)],Pa.prototype,"formatter",void 0),fa([Dt(Gt)],Pa.prototype,"colorName",void 0),fa([Dt(Gt)],Pa.prototype,"rootName",void 0),fa([Dt(Bt)],Pa.prototype,"highlightGroups",void 0);const Ea={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},Ma={},Ra={has:t=>Object.prototype.hasOwnProperty.call(Ea,t),isCartesian:t=>"cartesian"===Ea[t],isPolar:t=>"polar"===Ea[t],isHierarchy:t=>"hierarchy"===Ea[t],get seriesTypes(){return Object.keys(Ea)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function Aa(t,e){var i;Ma[t]=Zn([null!==(i=Ma[t])&&void 0!==i?i:{},e])}function _a(t){var e;return null!==(e=Ma[t])&&void 0!==e?e:{}}const La={area:Es,bar:Gs,column:zs,histogram:$s,line:ta,pie:os,scatter:ca,treemap:Pa},Na={},Ia={},Fa={};function ja(t,e,i,n,r){Na[t]=i,Ia[t]=n,Fa[t]=r,function(t,e){Ea[t]=e}(t,e)}function Ba(t,e){var i;const n=null!==(i=Na[t])&&void 0!==i?i:La[t];if(n)return new n(e);throw new Error("AG Charts - unknown series type: "+t)}function Ga(t){return Ia[t]}function za(t){return Fa[t]}const Wa={axes:[{type:vs.type,position:"left"},{type:Un.type,position:"bottom"}]},Va={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},Ha={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function Ka(t,e){const i={};for(const n in t){const r=e[n]||(t=>t);i[n]=r(t[n],t)}return i}function Ya(t){return null!=t&&t instanceof Array&&t[0]instanceof Array}function Ua(t,e){if(null==t)return{};if(!(t instanceof Array))return t;const i=e.yKeys;if(null==i||Ya(i))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");const n={};return i.forEach((e,i)=>{n[e]=t[i]}),n}function Xa(t,e){return null==t?[[]]:Ya(t)?t:e.grouped?t.map(t=>[t]):[t]}function $a(t,e){if(null==t)return{};if(!(t instanceof Array))return t;const i=e.yKeys;if(null==i||Ya(i))throw new Error("AG Charts - legendItemNames and yKeys mismatching configuration.");const n={};return i.forEach((e,i)=>{n[e]=t[i]}),n}function qa(t){return t}const Za={area:qa,bar:function(t){const e=Object.assign({},t);return delete e.yKey,delete e.yName,Ka(e,{yNames:Ua,yKeys:Xa,legendItemNames:$a})},column:function(t){const e=Object.assign({},t);return delete e.yKey,delete e.yName,Ka(e,{yNames:Ua,yKeys:Xa,legendItemNames:$a})},histogram:qa,line:qa,pie:qa,scatter:qa,treemap:qa};function Ja(t,e){if(tl(t)&&tl(e)){const i={};return Object.keys(t).forEach(n=>{i[n]=n in e?Ja(t[n],e[n]):t[n]}),Object.keys(e).forEach(n=>{n in t||(i[n]=e[n])}),i}return Array.isArray(t)&&!Array.isArray(e)||Qa(t)&&!Qa(e)?t:e}function Qa(t){return t&&"object"==typeof t}function tl(t){return Qa(t)&&t.constructor===Object}const el={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"},il={},nl={has:t=>Object.prototype.hasOwnProperty.call(el,t),get axesTypes(){return Object.keys(el)}};function rl(t,e){il[t]=e}const ol={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},sl=Symbol("extends-series-defaults"),al=Symbol("override-series-label-defaults"),ll=Symbol("default-font");class cl{constructor(t){t=Ja({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t,cartesian:i,polar:r,hierarchy:o}=e,s=(t,e,i)=>{i&&(n[t]=Ja(n[t],i),e.forEach(t=>{const e=t;n[e]=Ja(n[e],i)}))};s("common",Object.keys(n),t),s("cartesian",Ra.cartesianTypes,i),s("polar",Ra.polarTypes,r),s("hierarchy",Ra.hierarchyTypes,o),Ra.seriesTypes.forEach(t=>{const i=t,r=e[i];r&&(r.series&&(r.series={[i]:r.series}),n[i]=Ja(n[i],r))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(n)}getPalette(){return ol}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:cl.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:cl.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:cl.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(t){const e={cartesian:Ra.cartesianTypes,polar:Ra.polarTypes,hierarchy:Ra.hierarchyTypes,groupedCategory:[]};return Object.entries(e).forEach(([e,i])=>{const n=e,r=this.templateTheme(_a(n));i.forEach(e=>{const i=e;t[i]||(t[i]=Ja({},t[n]),Ja(t[i],r))})}),t}getDefaults(){const t=Ja({},cl.defaults),e=(t,e)=>{const i=this.templateTheme(_a(t));return i.series=e.reduce((t,e)=>{const i=za(e);return i&&(t[e]=this.templateTheme(i)),t},{}),"cartesian"===t&&(i.axes=nl.axesTypes.reduce((t,e)=>{const i=function(t){var e;return null!==(e=il[t])&&void 0!==e?e:{}}(e);return i&&(t[e]=this.templateTheme(i)),t},{})),i};return Ja(t,{cartesian:e("cartesian",Ra.cartesianTypes),groupedCategory:e("cartesian",Ra.cartesianTypes),polar:e("polar",Ra.polarTypes),hierarchy:e("hierarchy",Ra.hierarchyTypes)})}templateTheme(t){const e=Zn([t]),{extensions:i,properties:n}=this.getTemplateParameters();return Qn(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n,e),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n),delete e.__overrides__}for(const[t,i]of Object.entries(e))n.has(i)&&(e[t]=n.get(i))},{}),e}getTemplateParameters(){const t=new Map;t.set(sl,cl.getSeriesDefaults()),t.set(al,{});const e=new Map;return e.set(ll,cl.fontFamily),{extensions:t,properties:e}}mergeWithParentDefaults(t,e){return Ja(t,e)}}cl.fontFamily="Verdana, sans-serif",cl.cartesianDefaults=Object.assign(Object.assign({},cl.getChartDefaults()),{axes:{number:Object.assign({},cl.getAxisDefaults()),log:Object.assign(Object.assign({},cl.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},cl.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},cl.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},cl.getAxisDefaults()),time:Object.assign({},cl.getAxisDefaults())},series:{column:Object.assign({},cl.getBarSeriesDefaults()),bar:Object.assign({},cl.getBarSeriesDefaults()),line:Object.assign(Object.assign({},cl.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},cl.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},cl.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},cl.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},cl.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},cl.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},cl.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),cl.polarDefaults=Object.assign(Object.assign({},cl.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},cl.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:cl.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),cl.hierarchyDefaults=Object.assign(Object.assign({},cl.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},cl.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),cl.defaults={cartesian:cl.cartesianDefaults,groupedCategory:cl.cartesianDefaults,polar:cl.polarDefaults,hierarchy:cl.hierarchyDefaults};class hl extends cl{constructor(t){super(t)}getDefaults(){const t=hl.fontColor,e=hl.mutedFontColor,i={title:{color:t},label:{color:t},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},n={label:{color:t}},r={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},o={background:{fill:"rgb(34, 38, 41)"},title:{color:t},subtitle:{color:e},legend:{item:{label:{color:t}},pagination:{activeStyle:{fill:t},inactiveStyle:{fill:e},highlightStyle:{fill:t},label:{color:t}}}},s=t=>t.reduce((t,e)=>{const i=za(e);return i&&(t[e]=this.templateTheme(i)),t},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},o),r),{series:Object.assign({line:Object.assign({},n),bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},s(Ra.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},o),r),{series:Object.assign({bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},s(Ra.cartesianTypes))}),polar:Object.assign(Object.assign({},o),{series:Object.assign({pie:{calloutLabel:{color:t},sectorLabel:{color:t},title:{color:t},innerLabels:{color:t}}},s(Ra.polarTypes))}),hierarchy:Object.assign(Object.assign({},o),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:t},subtitle:{color:e},labels:{large:{color:t},medium:{color:t},small:{color:t},value:{style:{color:t}}}}},s(Ra.hierarchyTypes))})})}getTemplateParameters(){const t=super.getTemplateParameters();return t.extensions.set(al,hl.seriesLabelDefaults.label),t}}hl.fontColor="rgb(200, 200, 200)",hl.mutedFontColor="rgb(150, 150, 150)",hl.seriesLabelDefaults={label:{color:hl.fontColor}};const dl={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class ul extends cl{getPalette(){return dl}}const pl={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class fl extends hl{getPalette(){return pl}}const gl={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class yl extends cl{getPalette(){return gl}}const vl={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class ml extends hl{getPalette(){return vl}}const bl={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class xl extends cl{getPalette(){return bl}}const Cl={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class Sl extends hl{getPalette(){return Cl}}const wl={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class Ol extends cl{getPalette(){return wl}}const kl={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class Tl extends hl{getPalette(){return kl}}const Dl=()=>new cl,Pl=()=>new hl,El={undefined:Dl,null:Dl,"ag-default":Dl,"ag-material":()=>new ul,"ag-pastel":()=>new yl,"ag-solar":()=>new xl,"ag-vivid":()=>new Ol},Ml={undefined:Pl,null:Pl,"ag-default-dark":Pl,"ag-material-dark":()=>new fl,"ag-pastel-dark":()=>new ml,"ag-solar-dark":()=>new Sl,"ag-vivid-dark":()=>new Tl},Rl=Object.assign(Object.assign({},Ml),El);function Al(t){var e;if(t instanceof cl)return t;const i=Rl[t];if(i)return i();t=t;const n=[];let r;for(;"object"==typeof t;)n.push(null!==(e=t.overrides)&&void 0!==e?e:{}),t.palette&&null==r&&(r=t.palette),t=t.baseTheme;n.reverse();const o=Object.assign({baseTheme:t,overrides:Zn(n)},r?{palette:r}:{});if(o.baseTheme||o.overrides){return new(Al(o.baseTheme).constructor)(o)}return Dl()}const _l=Symbol(),Ll=Symbol(),Nl=t=>(e,i)=>{var n;return e.concat(...null!==(n=i[t])&&void 0!==n?n:[])},Il=(t,e)=>(i,n,r,o)=>{var s;const a=e===Ll||e===_l,l=null!==(s=n[t])&&void 0!==s?s:e;if(l===_l)throw new Error(`AG Charts - missing value for property [${t}] on series config.`);if(l===Ll)return i;if(0===i.length&&!a)for(;i.length<o;)i=i.concat(e);return a?i.concat(l):(i[r]=l,i)},Fl={hideInChart:{outputProp:"hideInChart",reducer:Nl("hideInChart"),start:[]},hideInLegend:{outputProp:"hideInLegend",reducer:Nl("hideInLegend"),start:[]},yKey:{outputProp:"yKeys",reducer:Il("yKey",Ll),start:[]},fill:{outputProp:"fills",reducer:Il("fill",Ll),start:[]},stroke:{outputProp:"strokes",reducer:Il("stroke",Ll),start:[]},yName:{outputProp:"yNames",reducer:Il("yName",Ll),start:[]},visible:{outputProp:"visibles",reducer:Il("visible",!0),start:[]},legendItemName:{outputProp:"legendItemNames",reducer:Il("legendItemName",Ll),start:[]},grouped:{outputProp:"grouped",reducer:(jl="grouped",(t,e)=>"boolean"==typeof e[jl]?null!=t&&t||e[jl]:null!=t?t:Bl),seriesType:["bar","column"],start:void 0},showInLegend:{outputProp:"hideInLegend",reducer:((t,e)=>(i,n)=>n[t]===e?i.concat(...n.yKey?[n.yKey]:n.yKeys):i)("showInLegend",!1),seriesType:["bar","column"],start:[]},stackGroup:{outputProp:"stackGroups",reducer:(t,e)=>Object.assign(Object.assign({},t),{[e.stackGroup]:[...t[e.stackGroup]||[],e.yKey]}),seriesType:["bar","column"],start:{}}};var jl,Bl;function Gl(t){const e={};return t.forEach((i,n)=>{Object.keys(i).forEach(r=>{var o;const s=Fl[r],a=()=>{var t,n;e[r]=null!==(n=null!==(t=i[r])&&void 0!==t?t:e[r])&&void 0!==n?n:void 0};if(!s)return void a();const{outputProp:l,reducer:c,start:h,seriesType:d=[i.type]}=s;if(!d.includes(i.type))return void a();const u=c(null!==(o=e[l])&&void 0!==o?o:h,i,n,t.length);void 0!==u&&(e[l]=u)})}),e}function zl(t){var e,i,n,r;return null!==(r=null!==(e=t.type)&&void 0!==e?e:null===(n=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===n?void 0:n.type)&&void 0!==r?r:"line"}function Wl(t){const e=zl(t);return null==e||("cartesian"===e?($.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ra.isCartesian(e))}function Vl(t){const e=zl(t);return null!=e&&("hierarchy"===e?($.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ra.isHierarchy(e))}function Hl(t){const e=zl(t);return null!=e&&("polar"===e?($.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Ra.isPolar(e))}function Kl(t){return null!=t&&Ra.has(t)}function Yl(t,e,i){const n=[];for(let r=0;r<i;r++)n.push(e[(r+t.colourIndex)%e.length]);return n}const Ul={avoidDeepClone:["data"]};function Xl(t,e){var i,n,r,o,s,a;let l=Zn([e,t],Ul);!function(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var n;(null===(n=t.series)||void 0===n?void 0:n.some(t=>null!=t[e]))&&$.warnOnce(`property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(l);const c=l.type,h=zl(l),d=null!==(n=null===(i=l.tooltip)||void 0===i?void 0:i.position)&&void 0!==n?n:{},u=t=>{if(null!=t&&!Kl(t)&&!Ga(t))throw new Error(`AG Charts - unknown series type: ${t}; expected one of: ${Ra.seriesTypes}`)};u(h);for(const{type:t}of null!==(r=l.series)&&void 0!==r?r:[])null!=t&&u(t);l=Object.assign(Object.assign({},l),{type:h});let p="line";Wl(l)?p="line":Vl(l)?p="treemap":Hl(l)&&(p="pie");let f={};const g=Ga(h);g?f=g:"bar"===h?f=Va:"scatter"===h||"histogram"===h?f=Ha:Wl(l)&&(f=Wa),function(t){Qn(t,(t,e)=>{"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach(([t])=>{"enabled"!==t&&delete e[t]})},{skip:["data","theme"]})}(l);const{context:y,mergedOptions:v,axesThemes:m,seriesThemes:b}=function(t,e){const{theme:i,cleanedTheme:n,axesThemes:r,seriesThemes:o}=function(t){var e,i;const n=Al(t.theme),r=n.config[null!==(e=zl(t))&&void 0!==e?e:"cartesian"],o=Object.entries(n.config).reduce((t,[e,{series:i}])=>(t[e]=null==i?void 0:i[e],t),{});return{theme:n,axesThemes:null!==(i=r.axes)&&void 0!==i?i:{},seriesThemes:o,cleanedTheme:Zn([r,{axes:$n,series:$n}])}}(e),s={colourIndex:0,palette:i.palette},a=Zn([t,n,e],Ul);return{context:s,mergedOptions:a,axesThemes:r,seriesThemes:o}}(f,l);v.series=function(t){const e=[],i=t.map(t=>{var e;return"bar"!==t.type&&"column"!==t.type||null==t.yKey||t.stacked?t:Object.assign(Object.assign({},t),{grouped:null===(e=t.grouped)||void 0===e||e})});for(const t of function(t){var e;const i={},n=[];for(const r of t){if("column"!==r.type&&"bar"!==r.type&&("area"!==r.type||!0!==r.stacked)){n.push([r]);continue}const t=null!==(e=r.type)&&void 0!==e?e:"line",o=r.stacked?"stacked":"grouped",s=`${t}-${r.xKey}-${o}`;null==i[s]&&(i[s]=[],n.push(i[s])),i[s].push(r)}return n}(i))switch(t[0].type){case"column":case"bar":case"area":e.push(Gl(t));break;case"line":default:t.length>1&&$.warn("unexpected grouping of series type: "+t[0].type),e.push(t[0])}return e}((null!==(o=v.series)&&void 0!==o?o:[]).map(t=>{let e=p;t.type?e=t.type:Kl(c)&&(e=c);const i=function(t,e,i,n){var r,o;const s=Zn([Object.assign({},n),null===(r=t.tooltip)||void 0===r?void 0:r.position],Ul);return Zn([null!==(o=i[e])&&void 0!==o?o:{},Object.assign(Object.assign({},t),{type:e,tooltip:Object.assign(Object.assign({},t.tooltip),{position:s})})],Ul)}(t,e,b,d);return"pie"===e&&function(t,e,i){Array.isArray(e.innerLabels)?i.innerLabels=e.innerLabels.map(e=>Zn([t.innerLabels,e])):i.innerLabels=$n}(b.pie,t,i),i})).map(t=>function(t,e,...i){const n=function(t,e){var i;const n={},{palette:{fills:r,strokes:o}}=t;let s=function t(e){let i=0;for(const n of e)n instanceof Array&&(i+=t(n)),null!=n&&i++;return i}(null!==(i=e.yKeys)&&void 0!==i?i:[])||1;switch(e.type){case"pie":s=Math.max(r.length,o.length);case"area":case"bar":case"column":n.fills=Yl(t,r,s),n.strokes=Yl(t,o,s);break;case"histogram":n.fill=Yl(t,r,1)[0],n.stroke=Yl(t,o,1)[0];break;case"scatter":n.marker={stroke:Yl(t,o,1)[0],fill:Yl(t,r,1)[0]};break;case"line":n.stroke=Yl(t,r,1)[0],n.marker={stroke:Yl(t,o,1)[0],fill:Yl(t,r,1)[0]}}return t.colourIndex+=s,n}(t,e);return function(t){var e;const i=null!==(e=t.type)&&void 0!==e?e:"line",n=Za[i];return(null!=n?n:qa)(t)}(Zn([...i,n,e,{stacked:$n}],Ul))}(y,t));const x=t=>{const e=null!=(i=t)&&nl.has(i);var i;return e||$.warnOnce(`AG Charts - unknown axis type: ${t}; expected one of: ${nl.axesTypes}, ignoring.`),e};if(Wl(v)){let t=!0;for(const{type:e}of null!==(s=v.axes)&&void 0!==s?s:[])x(e)||(t=!1);v.axes=t?null===(a=v.axes)||void 0===a?void 0:a.map(t=>{var e,i;const n=t.type;return function(t,e){const i={top:$n,bottom:$n,left:$n,right:$n};if(t.crossLines){Array.isArray(t.crossLines)||($.warn("axis[].crossLines should be an array."),t.crossLines=[]);const{crossLines:i}=e;t.crossLines=t.crossLines.map(t=>Zn([i,t]))}return Zn([e,{crossLines:$n},t,i],Ul)}(t,Zn([m[n],null!==(i=m[n][null!==(e=t.position)&&void 0!==e?e:"unknown"])&&void 0!==i?i:{}]))}):f.axes,function(t,e){var i,n,r,o;if(void 0!==(null===(i=t.legend)||void 0===i?void 0:i.enabled)||void 0!==(null===(n=e.legend)||void 0===n?void 0:n.enabled))return;if(null!==(r=e.legend)&&void 0!==r||(e.legend={}),(null!==(o=t.series)&&void 0!==o?o:[]).length>1)return void(e.legend.enabled=!0);e.legend.enabled=!1}(l,v)}return function(t,e){Qn(t,(t,e,i)=>{if(!i)return;const{_enabledFromTheme:n}=i;null!=n&&delete i._enabledFromTheme,"enabled"in i&&(n||null==e.enabled&&(i.enabled=!0))},{skip:["data","theme"]},e),Qn(e,(t,e)=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme},{skip:["data","theme"]})}(l,v),v}const $l={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},ql={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};const Zl=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e/2,y:i}:{x:e,y:isNaN(n)?i:(i+n)/2},Jl=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:r})=>t?{x:e,y:isNaN(r)?n:(n+r)/2}:{x:i/2,y:n},Ql=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:isNaN(n)?i:n},tc=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:r})=>t?{x:i/2,y:isNaN(r)?n:r}:{x:e,y:isNaN(r)?n:(n+r)/2},ec=({yDirection:t,xStart:e,xEnd:i,yStart:n})=>t?{x:e/2,y:n}:{x:i,y:n},ic=({yDirection:t,xStart:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:n}:{x:e,y:i},nc=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:i}:{x:e,y:isNaN(n)?i:n},rc=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:r})=>t?{x:i,y:isNaN(r)?n:r}:{x:e,y:isNaN(r)?n:r},oc={top:{c:Zl},bottom:{c:tc},left:{c:Jl},right:{c:Ql},topLeft:{c:ec},topRight:{c:nc},bottomLeft:{c:ic},bottomRight:{c:rc},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:Jl},insideRight:{c:Ql},insideTop:{c:Zl},insideBottom:{c:tc},insideTopLeft:{c:ec},insideBottomLeft:{c:ic},insideTopRight:{c:nc},insideBottomRight:{c:rc}};var sc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class ac extends lt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new _(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:r}=t;if(this.dirty===F.NONE&&!n)return void(r&&(r.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:s,x2:a,y2:l}=this;o=this.align(o),s=this.align(s),a=this.align(a),l=this.align(l);const{fill:c,opacity:h,isRange:d}=this;if(!(!d||!c)){const{fillOpacity:t}=this;i.fillStyle=c,i.globalAlpha=h*t,i.beginPath(),i.moveTo(o,s),i.lineTo(a,s),i.lineTo(a,l),i.lineTo(o,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:f,endLine:g}=this;if(!(!f&&!g||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:r,lineJoin:c}=this;i.strokeStyle=u,i.globalAlpha=h*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),r&&(i.lineCap=r),c&&(i.lineJoin=c),i.beginPath(),f&&(i.moveTo(o,s),i.lineTo(a,s)),g&&(i.moveTo(a,l),i.lineTo(o,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}ac.className="Range",ac.defaultStyles=Object.assign(Object.assign({},lt.defaultStyles),{strokeWidth:1}),sc([B({redraw:F.MINOR})],ac.prototype,"x1",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"y1",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"x2",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"y2",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"startLine",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"endLine",void 0),sc([B({redraw:F.MINOR})],ac.prototype,"isRange",void 0);var lc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};const cc=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],hc=Pt((t,e)=>Et(t,e,t=>cc.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),dc=Pt((t,e)=>Et(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class uc{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}lc([Dt(Bt)],uc.prototype,"enabled",void 0),lc([Dt(zt)],uc.prototype,"text",void 0),lc([Dt(ae)],uc.prototype,"fontStyle",void 0),lc([Dt(ce)],uc.prototype,"fontWeight",void 0),lc([Dt(Zt(0))],uc.prototype,"fontSize",void 0),lc([Dt(Gt)],uc.prototype,"fontFamily",void 0),lc([Dt(Zt(0))],uc.prototype,"padding",void 0),lc([Dt(Xt)],uc.prototype,"color",void 0),lc([Dt(hc)],uc.prototype,"position",void 0),lc([Dt(Jt(-360,360))],uc.prototype,"rotation",void 0),lc([Dt(Bt)],uc.prototype,"parallel",void 0);class pc{constructor(){this.id=I(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new uc,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=we.X,this.group=new Z({name:""+this.id,layer:!0,zIndex:pc.LINE_LAYER_ZINDEX}),this.crossLineRange=new ac,this.crossLineLabel=new dt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=z.None}update(t){if(!this.enabled)return;if(this.group.visible=t,!t)return;this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:r,direction:o,label:{position:s="top"},clippedRange:a,strokeWidth:l=0}=this;if(!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,h=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[d,u]=[0,r*n];let[p,f]=this.getRange(),[g,y]=[Number(i.convert(p,{strict:!1})),i.convert(f,{strict:!1})+c];g=h(g),y=h(y),[p,f]=[Number(i.convert(p)),i.convert(f)+c];const v=!isNaN(g)&&!isNaN(y)&&(p===g||f===y||g!==y)&&Math.abs(y-g)>0;if(v){g!==Math.min(g,y)&&([g,y]=[Math.min(g,y),Math.max(g,y)],[p,f]=[f,p])}if(this.isRange=v,this.startLine=!isNaN(p)&&l>0&&p===g,this.endLine=!isNaN(f)&&l>0&&f===y,!v&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,y],this.label.enabled){const t=o===we.Y,{c:i=Zl}=null!==(e=oc[s])&&void 0!==e?e:{},{x:n,y:r}=i({yDirection:t,xStart:d,xEnd:u,yStart:g,yEnd:y});this.labelPoint={x:n,y:r}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:r,startLine:o,endLine:s,isRange:a,fill:l,fillOpacity:c,stroke:h,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*n,e.y1=r[0],e.y2=r[1],e.startLine=o,e.endLine=s,e.isRange=a,e.fill=l,e.fillOpacity=null!=c?c:1,e.stroke=h,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:r,position:o="top",padding:s=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:h,configuredRotation:d}=Tn({rotation:r,parallel:n,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=h+d,t.textBaseline="middle",t.textAlign="center";const u=this.computeLabelBBox();if(!u)return;const p=a===we.Y,{xTranslation:f,yTranslation:g}=function({yDirection:t,padding:e=0,position:i="top",bbox:n}){const r=t?$l:ql,{xTranslationDirection:o,yTranslationDirection:s}=r[i];return{xTranslation:o*(e+(t?n.width:n.height)/2),yTranslation:s*(e+(t?n.height:n.width)/2)}}({yDirection:p,padding:s,position:o,bbox:u});t.translationX=e+f,t.translationY=i+g}getZIndex(t=!1){return t?pc.RANGE_LAYER_ZINDEX:pc.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=i instanceof zi;let[r,o]=null!=e?e:[t,void 0];return n||void 0!==o||(o=r),r=null!=St(r,n)?r:void 0,o=null!=St(o,n)?o:void 0,n&&r===o&&(o=void 0),void 0===r&&void 0!==o&&(r=o,o=void 0),[r,o]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(t){var e,i,n,r,o,s,a,l;const{isRange:c,startLine:h,endLine:d,direction:u,label:{padding:p=0,position:f="top"}}=this;if(!c&&!h&&!d)return;const g=this.computeLabelBBox(),y=null==g?void 0:g.x,v=null==g?void 0:g.y;if(!g||null==y||null==v)return;const m=function({yDirection:t,bbox:e,padding:i=0,position:n="top"}){const r={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?r.left=i+e.width:"right"===n&&t&&(r.right=i+e.width):r.bottom=i+e.height:r.top=i+e.height),r}({yDirection:u===we.Y,padding:p,position:f,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=m.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(r=m.right)&&void 0!==r?r:0),t.top=Math.max(null!==(o=t.top)&&void 0!==o?o:0,null!==(s=m.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=m.bottom)&&void 0!==l?l:0)}}pc.LINE_LAYER_ZINDEX=Se.SERIES_CROSSLINE_LINE_ZINDEX,pc.RANGE_LAYER_ZINDEX=Se.SERIES_CROSSLINE_RANGE_ZINDEX,pc.className="CrossLine",lc([Dt(Bt)],pc.prototype,"enabled",void 0),lc([Dt(dc)],pc.prototype,"type",void 0),lc([Dt(Rt(2))],pc.prototype,"range",void 0),lc([Dt(Xt)],pc.prototype,"fill",void 0),lc([Dt(Jt(0,1))],pc.prototype,"fillOpacity",void 0),lc([Dt(Xt)],pc.prototype,"stroke",void 0),lc([Dt(Jt())],pc.prototype,"strokeWidth",void 0),lc([Dt(Jt(0,1))],pc.prototype,"strokeOpacity",void 0),lc([Dt(de)],pc.prototype,"lineDash",void 0);const fc={},gc={constructors:{title:ji,subtitle:ji,footnote:ji,shadow:ua,innerCircle:ns,"axes[].crossLines[]":pc,"axes[].title":zn,"series[].innerLabels[]":is},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function yc(){return{constructors:Object.assign(Object.assign({},gc.constructors),fc),allowedTypes:Object.assign({},gc.allowedTypes)}}class vc{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const mc=[];function bc(t){const e=mc.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=mc.indexOf(e);mc.splice(i,1,t)}}else mc.push(t)}var xc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Cc extends vi{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new _(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:r}=this;t.clear();const o=e-n/2,s=i-r/2,a=this.align(o),l=this.align(s),c=a+this.align(o,n),h=l+this.align(s,r);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,h),t.lineTo(a,h),t.lineTo(a,l);const d=this.gripLineGap/2,u=this.gripLineLength/2;t.moveTo(this.align(e-d),this.align(i-u)),t.lineTo(this.align(e-d),this.align(i+u)),t.moveTo(this.align(e+d),this.align(i-u)),t.lineTo(this.align(e+d),this.align(i+u))}}Cc.className="RangeHandle",xc([Dt(Ut)],Cc.prototype,"_fill",void 0),xc([Dt(Ut)],Cc.prototype,"_stroke",void 0),xc([Dt(Zt(0))],Cc.prototype,"_strokeWidth",void 0),xc([Dt(pe)],Cc.prototype,"_lineCap",void 0),xc([Dt(Zt(0))],Cc.prototype,"_width",void 0),xc([Dt(Zt(0))],Cc.prototype,"_gripLineGap",void 0),xc([Dt(Zt(0))],Cc.prototype,"_gripLineLength",void 0),xc([Dt(Zt(0))],Cc.prototype,"_height",void 0);var Sc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class wc extends vi{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)}get x(){return this._x}set y(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)}get y(){return this._y}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}set min(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new _(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:r,max:o}=this,s=t+i*r;return new _(s,e,t+i*o-s,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:r,min:o,max:s}=this;t.clear();const a=this.align(e),l=this.align(i),c=a+this.align(e,n),h=l+this.align(i,r);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,h),t.lineTo(a,h),t.lineTo(a,l);const d=this.align(e+n*o),u=this.align(e+n*s);t.moveTo(d,l),t.lineTo(d,h),t.lineTo(u,h),t.lineTo(u,l),t.lineTo(d,l)}}wc.className="RangeMask",Sc([Dt(Ut)],wc.prototype,"_stroke",void 0),Sc([Dt(Zt(0))],wc.prototype,"_strokeWidth",void 0),Sc([Dt(Ut)],wc.prototype,"_fill",void 0),Sc([Dt(Zt(0,1))],wc.prototype,"_fillOpacity",void 0),Sc([Dt(pe)],wc.prototype,"_lineCap",void 0),Sc([Dt(Zt(0))],wc.prototype,"_width",void 0),Sc([Dt(Zt(0))],wc.prototype,"_height",void 0),Sc([Dt(Zt())],wc.prototype,"_min",void 0),Sc([Dt(Zt())],wc.prototype,"_max",void 0);class Oc extends Z{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Cc,this.maxHandle=new Cc,this.mask=(()=>{const{x:t,y:e,width:i,height:n,min:r,max:o}=Oc.defaults,s=new wc;s.x=t,s.y=e,s.width=i,s.height=n,s.min=r,s.max=o;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+n/2,this.append([s,a,l]),s.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},s})(),this._x=Oc.defaults.x,this._y=Oc.defaults.y,this._width=Oc.defaults.width,this._height=Oc.defaults.height,this._min=Oc.defaults.min,this._max=Oc.defaults.max,this.isContainerNode=!0}set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:n,width:r,height:o,mask:s}=this;t.centerX=i+r*s.min,e.centerX=i+r*s.max,t.centerY=e.centerY=n+o/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===F.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:r,minHandle:o,maxHandle:s}=this;[r,o,s].forEach(n=>{n.visible&&(i||n.dirty>F.NONE)&&(e.save(),n.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}}Oc.className="Range",Oc.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class kc{constructor(t){this.rm=t}set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}}class Tc{constructor(t){this.rh=t}set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}}var Dc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Pc extends vc{constructor(t){super(),this.ctx=t,this.rs=new Oc,this.mask=new kc(this.rs.mask),this.minHandle=new Tc(this.rs.minHandle),this.maxHandle=new Tc(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[t.interactionManager.addListener("drag-start",t=>this.onDragStart(t)),t.interactionManager.addListener("drag",t=>this.onDrag(t)),t.interactionManager.addListener("hover",t=>this.onDrag(t)),t.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(e=>this.destroyFns.push(()=>t.interactionManager.removeListener(e))),[t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t))].forEach(e=>this.destroyFns.push(()=>t.layoutService.removeListener(e))),t.scene.root.appendChild(this.rs),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:r,maxHandle:o,x:s,width:a,min:l}=n,c=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(r.containsPoint(e,i)?this.minHandleDragging=!0:o.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-s)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:r,width:o,height:s,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:h}=t,d=n+o*e.min,u=n+o*e.max,p=new _(d,r,u-d,s),f=()=>Math.min(Math.max((c-n)/o,0),1);if(a.containsPoint(c,h)||l.containsPoint(c,h)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,h)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(i)){const t=e.max-e.min,n=Math.min(f()-i,1-t);n<=e.min?(e.min=n,e.max=e.min+t):(e.max=n+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}Dc([Dt(jt)],Pc.prototype,"_enabled",void 0),Dc([Dt(Zt(0))],Pc.prototype,"margin",void 0);bc({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Pc,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var Ec=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Mc extends vc{constructor(t){var e;super(),this.onLayoutComplete=t=>{const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i},this.node=new Z({name:"background"}),this.node.zIndex=Se.SERIES_BACKGROUND_ZINDEX,this.rectNode=new Rs,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)});const i=t.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>t.layoutService.removeListener(i))}}Ec([Dt(jt),Ni("node","visible")],Mc.prototype,"visible",void 0),Ec([Dt(Xt),Ni("rectNode","fill")],Mc.prototype,"fill",void 0);bc({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Mc});var Rc=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))};function Ac(t){if(Wl(t))return"cartesian";if(Hl(t))return"polar";if(Vl(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}class _c{static create(t){return Nc.createOrUpdate(t)}static update(t,e){if(!Lc.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");Nc.createOrUpdate(e,t)}static updateDelta(t,e){if(!Lc.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return Nc.updateUserDelta(t,e)}static download(t,e){if(!(t instanceof Lc))throw new Error("AG Charts - invalid chart reference passed");return Nc.download(t,e)}static getImageDataURL(t,e){if(!(t instanceof Lc))throw new Error("AG Charts - invalid chart reference passed");return Nc.getImageDataURL(t,e)}}class Lc{constructor(t){this.chart=t}static isInstance(t){var e,i;if(t instanceof Lc)return!0;if("AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart)return!0;const n=Object.keys(null===(i=t.constructor)||void 0===i?void 0:i.prototype);return!(!Object.keys(Lc.prototype).every(t=>n.includes(t))||null==t.chart)}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class Nc{static initialiseModules(){Nc.initialised||(!function(){for(const t of mc){if(null!=t.optionConstructors&&Object.assign(fc,t.optionConstructors),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)Aa(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+t.identifier);ja(t.identifier,t.chartTypes[0],t.instanceConstructor,t.seriesDefaults,t.themeTemplate)}if("axis"===t.type&&t.themeTemplate)for(const e of t.axisTypes)rl(e,t.themeTemplate);"legend"===t.type&&yo(t.identifier,t.instanceConstructor)}}(),Nc.initialised=!0)}static createOrUpdate(t,e){Nc.initialiseModules(),Ic(">>> createOrUpdate() user options",t);const i={};!0===Nc.DEBUG()&&(i.debug=!0);const{overrideDevicePixelRatio:n}=t;delete t.overrideDevicePixelRatio;const r=Xl(t,i);let o=null==e?void 0:e.chart;null!=o&&Ac(t)===Ac(o.processedOptions)||(o=Nc.createChartInstance(r,n,o)),null==e?e=new Lc(o):e.chart=o;const s=o;s.queuedUserOptions.push(t);const a=()=>{const e=s.queuedUserOptions.indexOf(t);s.queuedUserOptions.splice(0,e)};return s.requestFactoryUpdate(()=>Rc(this,void 0,void 0,(function*(){if(s.destroyed)return;const e=Xn(s.processedOptions,r);null!=e?(yield Nc.updateDelta(s,e,t),a()):a()}))),e}static updateUserDelta(t,e){var i;const{chart:n,chart:{queuedUserOptions:r}}=t,o=null!==(i=r[r.length-1])&&void 0!==i?i:n.userOptions,s=Zn([o,e]);Ic(">>> updateUserDelta() user delta",e),Ic("base options",o),Nc.createOrUpdate(s,t)}static download(t,e){(()=>Rc(this,void 0,void 0,(function*(){const i=yield Nc.prepareResizedChart(t,e),{chart:n}=i;n.scene.download(null==e?void 0:e.fileName,null==e?void 0:e.fileFormat),i!==t&&i.destroy()})))().catch(t=>$.errorOnce(t))}static getImageDataURL(t,e){return Rc(this,void 0,void 0,(function*(){const i=yield Nc.prepareResizedChart(t,e),{chart:n}=i,r=n.scene.canvas.getDataURL(null==e?void 0:e.fileFormat);return i!==t&&i.destroy(),r}))}static prepareResizedChart(t,e){return Rc(this,void 0,void 0,(function*(){const{chart:i}=t;let{width:n,height:r}=null!=e?e:{};const o=i.width,s=i.height;if(void 0===n&&void 0===r||1===i.scene.canvas.pixelRatio&&o===n&&s===r)return t;n=null!=n?n:o,r=null!=r?r:s;const a=Object.assign(Object.assign({},i.userOptions),{container:document.createElement("div"),width:n,height:r,autoSize:!1,overrideDevicePixelRatio:1}),l=Nc.createOrUpdate(a);return yield l.chart.waitForUpdate(),l}))}static createChartInstance(t,e,i){const n=null==i?void 0:i.destroy({keepTransferableResources:!0});if(Wl(t))return new Lo(document,e,n);if(Vl(t))return new cs(document,e,n);if(Hl(t))return new as(document,e,n);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t.type)}static updateDelta(t,e,i){var n;return Rc(this,void 0,void 0,(function*(){null==e.type&&(e=Object.assign(Object.assign({},e),{type:null!==(n=t.processedOptions.type)&&void 0!==n?n:zl(e)})),yield t.awaitUpdateCompletion(),t.destroyed||(Ic("applying delta",e),function(t,e,i){var n,r,o,s;const a=Zn([null!==(n=t.processedOptions)&&void 0!==n?n:{},e],Ul),l=function(t,e){let i=!1;const n=mc.filter(t=>"root"===t.type);for(const o of n){const n=(r=o,(t instanceof Lo&&r.chartTypes.includes("cartesian")||t instanceof as&&r.chartTypes.includes("polar")||t instanceof cs&&r.chartTypes.includes("hierarchy"))&&null!=e[o.optionsKey]),s=t.isModuleEnabled(o);n!==s&&(i=!0,n?t.addModule(o):t.removeModule(o))}var r;return i}(t,a),c=["type","data","series","listeners","theme","legend"];if(Wl(e))c.push("axes");else if(!Hl(e)&&!Vl(e))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+e.type);e.listeners&&jc(t,e.listeners);Bc(t,e,{skip:c});let h=!1;e.series&&e.series.length>0&&(!function(t,e){const i=e.series;if(!i)return;if(t.series.length===i.length&&t.series.every((t,e)=>{var n;return t.type===(null===(n=i[e])||void 0===n?void 0:n.type)}))return void t.series.forEach((e,n)=>{var r,o,s,a;const l=Xn(null!==(s=null===(o=null===(r=t.processedOptions)||void 0===r?void 0:r.series)||void 0===o?void 0:o[n])&&void 0!==s?s:{},null!==(a=i[n])&&void 0!==a?a:{});l&&(Ic("applying series diff idx "+n,l),Gc(e,l,{path:`series[${n}]`,index:n}),e.markNodeDataDirty())});t.series=function(t,e){const i=[],n=t.getModuleContext();let r=0;for(const t of null!=e?e:[]){const e=`series[${r++}]`,o=Ba(t.type,n);Gc(o,t,{path:e,index:r}),i.push(o)}return i}(t,i)}(t,e),h=!0);if(Wl(e)&&e.axes){(function(t,e){const i=e.axes;if(!i)return!1;if(t.axes.length===i.length&&t.axes.every((t,e)=>t.type===i[e].type)){const e=t.processedOptions;if(Wl(e))return t.axes.forEach((t,n)=>{var r,o;const s=Xn(null!==(o=null===(r=e.axes)||void 0===r?void 0:r[n])&&void 0!==o?o:{},i[n]);Ic("applying axis diff idx "+n,s);Bc(t,s,{path:`axes[${n}]`,skip:["axes[].type"]})}),!0}return t.axes=function(t,e){const i=[],n=["axes[].type"],r=t.getModuleContext();let o=0;for(const t of null!=e?e:[]){let e;switch(t.type){case"number":e=new vs(r);break;case xs.type:e=new xs(r);break;case Un.type:e=new Un(r);break;case Ro.type:e=new Ro(r);break;case ws.type:e=new ws(r);break;default:throw new Error("AG Charts - unknown axis type: "+t.type)}const s=`axes[${o++}]`;Fc(e,t),Bc(e,t,{path:s,skip:n}),i.push(e)}return i}(t,i),!0})(t,e)&&(h=!0)}!function(t,e){const i=["listeners"];t.setLegendInit(n=>{var r,o,s;Bc(n,null!==(r=e.legend)&&void 0!==r?r:{},{skip:i}),(null===(o=e.legend)||void 0===o?void 0:o.listeners)&&Object.assign(t.legend.listeners,null!==(s=e.legend.listeners)&&void 0!==s?s:{})})}(t,e);const d=e.series,u=!!e.data||(null==d?void 0:d.some(t=>null!=t.data)),p=null!==(o=null!==(r=e.legend)&&void 0!==r?r:e.title)&&void 0!==o?o:e.subtitle;h=h||u||!!p,e.data&&(t.data=e.data);e.listeners&&t.updateAllSeriesListeners();t.processedOptions=a,t.userOptions=Zn([null!==(s=t.userOptions)&&void 0!==s?s:{},i],Ul);const f=h||l?Yr.PROCESS_DATA:Yr.PERFORM_LAYOUT;Ic("chart update type",{updateType:Yr[f]}),t.update(f,{forceNodeDataRefresh:h})}(t,e,i))}))}}function Ic(t,...e){[!0,"opts"].includes(Nc.DEBUG())&&$.debug(t,...e)}function Fc(t,e){let i=!1;const n=mc.filter(t=>"axis"===t.type);for(const r of n){const n=null!=e[r.optionsKey];n!==t.isModuleEnabled(r)&&(i=!0,n?t.addModule(r):t.removeModule(r))}return i}function jc(t,e){t.clearEventListeners();for(const i in e){const n=e[i];"function"==typeof n&&t.addEventListener(i,n)}}function Bc(t,e,{skip:i,path:n}={}){return Jn(t,e,Object.assign(Object.assign(Object.assign({},yc()),{skip:i}),n?{path:n}:{}))}function Gc(t,e,{path:i,index:n}={}){var r;const o=["series[].listeners"],s=yc(),a=null!==(r=s.constructors)&&void 0!==r?r:{},l={constructors:Object.assign(Object.assign({},a),{title:"pie"===t.type?es:a.title})},c=Jn(t,e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s),l),{skip:["series[].type",...null!=o?o:[]]}),i?{path:i}:{}),{idx:null!=n?n:-1})),h=null==e?void 0:e.listeners;return null!=h&&jc(t,h),c}Nc.DEBUG=()=>{var t;return null!==(t=Q("agChartsDebug"))&&void 0!==t&&t},Nc.initialised=!1;var zc=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};class Wc extends H{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===F.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const r=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(r,0,0,r.width,r.height,this.x,this.y,this.width,this.height),super.render(t)}}zc([B({redraw:F.MAJOR})],Wc.prototype,"x",void 0),zc([B({redraw:F.MAJOR})],Wc.prototype,"y",void 0),zc([B({redraw:F.MAJOR})],Wc.prototype,"width",void 0),zc([B({redraw:F.MAJOR})],Wc.prototype,"height",void 0),zc([B({redraw:F.MAJOR})],Wc.prototype,"opacity",void 0);const Vc=Object.entries(Rl).reduce((t,[e,i])=>(t[e]=i(),t),{});var Hc=["area","bar","column","histogram","line","pie","scatter"];function Kc(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var Yc=["number","category","groupedCategory","log","time"];var Uc=function(){return(Uc=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Xc(e,i){var n,r,o,s,a,l,c,h=e.chartOptionsToRestore,d=e.chartPaletteToRestore,u=e.chartThemeToRestore,p=function(e){var i=e.getChartThemeName(),n=e.getChartThemes();t._.includes(n,i)||(i=n[0]);return i}(e),f=$c(p),g=f?{baseTheme:p}:null!==(n=Zc(e,p))&&void 0!==n?n:{},y=e.getGridOptionsChartThemeOverrides(),v=e.apiChartThemeOverrides,m="pie"===Kc(e.chartType)?"polar":"cartesian",b=e.crossFiltering?function(t,e,i){var n,r={listeners:{legendItemClick:function(e){t.getChart().series.forEach((function(t){t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem(e.itemId+"-filtered-out",e.enabled)}))}}},o={};"polar"===i&&(o.pie={tooltip:{renderer:function(t){var e=t.angleName,i=t.datum,n=t.calloutLabelKey,r=t.radiusKey,o=t.angleValue;return{title:e,content:i[n]+": "+o*i[r]}}}});return(n={})[i]={tooltip:{delay:500},legend:r,listeners:{click:function(t){return e.crossFilterCallback(t,!0)}},series:o},n}(i,e,m):void 0,x=Uc({},null!=h?h:{}),C=[f?(r=e,o=function(){var e=function(e){return!!e&&Object.keys(e).some((function(i){return t._.get(e[i],"title.enabled",!1)}))};return e(y)||e(v)}(),s=r.getExtraPaddingDirections(),{common:{axes:qc,padding:{top:!o&&s.includes("top")?40:20,right:s.includes("right")?30:20,bottom:s.includes("bottom")?40:20,left:s.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}):void 0,b,y,v,x].filter((function(t){return!!t})).reduce((function(t,e){return{baseTheme:t,overrides:e}}),g);if(d&&p===u){var S=Al(g).palette;l=S,(c=function(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))})((a=d).fills,l.fills)&&c(a.strokes,l.strokes)||(C.palette=d)}return C}function $c(e){return t._.includes(Object.keys(Vc),e)}var qc=Yc.reduce((function(t,e){var i;return Uc(Uc({},t),((i={})[e]={title:{_enabledFromTheme:!0}},i))}),{});function Zc(t,e){var i=t.customChartThemes,n=i&&i[e];return n||console.warn("AG Grid: no stock theme exists with the name '"+e+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),n}var Jc,Qc=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},th=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},eh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ih=function(t){return function(e){return void 0===e||t(e)}},nh=function(t){return"string"==typeof t},rh=function(t){return"boolean"==typeof t},oh=function(t){return"object"==typeof t},sh=function(t,e){return function(i){return"AG Grid - unable to update chart as invalid params supplied:  `"+t+": "+i+"`, expected "+e+"."}},ah=function(){function t(){}return t.validateChartParams=function(e){switch(e.type){case"rangeChartUpdate":return t.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return t.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return t.validateUpdateCrossFilterChartParams(e);default:return console.warn("AG Grid - Invalid value supplied for 'type': "+e.type+". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1}},t.validateUpdateRangeChartParams=function(e){var i=th(th(th([],Qc(t.commonValidations)),Qc(t.cellRangeValidations)),[{property:"seriesChartTypes",validationFn:function(t){return void 0===t||Array.isArray(t)&&t.every(oh)},warnMessage:sh("seriesChartTypes","Array of SeriesChartType")}]);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},t.validateUpdatePivotChartParams=function(e){var i=th([],Qc(t.commonValidations));return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},t.validateUpdateCrossFilterChartParams=function(e){var i=th(th([],Qc(t.commonValidations)),Qc(t.cellRangeValidations));return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},t.validateProperties=function(t,e,i,n){var r,o;try{for(var s=eh(e),a=s.next();!a.done;a=s.next()){var l=a.value,c=l.property,h=l.validationFn,d=l.warnMessage;if(c in t){var u=t[c];if(!h(u))return console.warn(d(u)),!1}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}for(var c in t)if(!i.includes(c))return console.warn("AG Grid - Unexpected property supplied. "+n+" does not contain: `"+c+"`."),!1;return!0},t.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],t.validateChartType=ih((function(e){return t.validChartTypes.includes(e)})),t.validateAgChartThemeOverrides=ih((function(t){return"object"==typeof t})),t.validateChartParamsCellRange=ih((function(t){return"object"==typeof t})),t.validateAggFunc=ih((function(t){return"string"==typeof t||"function"==typeof t})),t.commonValidations=[{property:"chartId",validationFn:nh,warnMessage:sh("chartId","string")},{property:"chartType",validationFn:t.validateChartType,warnMessage:sh("chartType",t.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:nh,warnMessage:sh("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:t.validateAgChartThemeOverrides,warnMessage:sh("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:rh,warnMessage:sh("unlinkChart","boolean")}],t.cellRangeValidations=[{property:"cellRange",validationFn:t.validateChartParamsCellRange,warnMessage:sh("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:rh,warnMessage:sh("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:t.validateAggFunc,warnMessage:sh("aggFunc","string or IAggFunc")}],t}(),lh=(Jc=function(t,e){return(Jc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Jc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ch=function(){return(ch=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},dh=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"],uh=function(e){function i(t){var i=e.call(this)||this;return i.model=t,i}return lh(i,e),i.prototype.init=function(){var e=this;this.setChartRange(),this.addManagedListener(this.eventService,t.Events.EVENT_RANGE_SELECTION_CHANGED,(function(t){t.id&&t.id===e.model.chartId&&e.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,t.Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,t.Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,t.Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,t.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,t.Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,t.Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},i.prototype.update=function(t){var e,i,n,r,o,s,a;if(!this.validUpdateType(t)||!ah.validateChartParams(t))return!1;var l=t.chartId,c=t.chartType,h=t.chartThemeName,d=t.unlinkChart,u={chartId:l,pivotChart:this.model.pivotChart,chartType:null!=c?c:this.model.chartType,chartThemeName:null!=h?h:this.model.chartThemeName,unlinkChart:null!=d?d:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},p=ch({},u);switch(t.type){case"rangeChartUpdate":p.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,p.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,p.seriesChartTypes=t.seriesChartTypes,p.suppressChartRanges=null!==(n=t.suppressChartRanges)&&void 0!==n?n:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":p.cellRange=null!==(r=this.createCellRange(t))&&void 0!==r?r:this.model.suppliedCellRange,p.aggFunc=null!==(o=t.aggFunc)&&void 0!==o?o:this.model.aggFunc,p.crossFiltering=!0,p.suppressChartRanges=null!==(s=t.suppressChartRanges)&&void 0!==s?s:this.model.suppressChartRanges}return this.model.updateModel(p),p.unlinkChart||p.suppressChartRanges?null===(a=this.rangeService)||void 0===a||a.setCellRanges([]):this.setChartRange(),!0},i.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},i.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},i.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},i.prototype.updateForPanelChange=function(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},i.prototype.getChartUpdateParams=function(t){var e=this.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),i=this.getChartData(),n=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:n.colId,name:n.displayName,chartDataType:this.model.getChartDataType(n.colId)},fields:e,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}},i.prototype.getChartModel=function(){var t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}},i.prototype.getChartId=function(){return this.model.chartId},i.prototype.getChartData=function(){return this.model.chartData},i.prototype.getChartType=function(){return this.model.chartType},i.prototype.setChartType=function(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},i.prototype.setChartThemeName=function(t){this.model.chartThemeName=t,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},i.prototype.getChartThemeName=function(){return this.model.chartThemeName},i.prototype.isPivotChart=function(){return this.model.pivotChart},i.prototype.isPivotMode=function(){return this.model.isPivotMode()},i.prototype.isGrouping=function(){return this.model.isGrouping()},i.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},i.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||dh},i.prototype.getPalettes=function(){var t=this;return this.getThemes().map((function(e){return Al($c(e)?e:t.chartProxy.lookupCustomChartTheme(e)).palette}))},i.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},i.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(t){return t.selected}))},i.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},i.prototype.displayNameMapper=function(t){var e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t},i.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},i.prototype.setChartRange=function(t){void 0===t&&(t=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()},i.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},i.prototype.setChartProxy=function(t){this.chartProxy=t},i.prototype.getChartProxy=function(){return this.chartProxy},i.prototype.isActiveXYChart=function(){return t._.includes(["scatter","bubble"],this.getChartType())},i.prototype.isChartLinked=function(){return!this.model.unlinked},i.prototype.customComboExists=function(){var t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0},i.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},i.prototype.isComboChart=function(){return this.model.isComboChart()},i.prototype.updateSeriesChartType=function(t,e,n){var r=this.model.comboChartModel.seriesChartTypes.find((function(e){return e.colId===t}));if(r){var o="customCombo"!==this.model.chartType;o&&(this.model.chartType="customCombo");var s=r.chartType;null!=e&&(r.chartType=e),null!=n&&(r.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),o&&this.dispatchEvent({type:i.EVENT_CHART_TYPE_CHANGED}),s!==e&&this.dispatchEvent({type:i.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},i.prototype.getActiveSeriesChartTypes=function(){var t=this.getSelectedValueColState().map((function(t){return t.colId}));return this.getSeriesChartTypes().filter((function(e){return t.includes(e.colId)}))},i.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[Kc(this.getChartType())]},i.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(t){return t}))},i.prototype.createCellRange=function(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))},i.prototype.validUpdateType=function(t){var e,i=this;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var n={"Range Chart":function(){return!i.isPivotChart()&&!i.isCrossFilterChart()},"Pivot Chart":function(){return i.isPivotChart()},"Cross Filter Chart":function(){return i.isCrossFilterChart()}},r=null!==(e=Object.keys(n).find((function(t){return n[t]()})))&&void 0!==e?e:"Range Chart",o=t.type===""+r[0].toLowerCase()+r.slice(1).replace(/ /g,"")+"Update";return o||console.warn("AG Grid - Unable to update chart as a '"+t.type+"' update type is not permitted on a "+r+"."),o},i.prototype.getCellRangeParams=function(){var t=this.getCellRanges(),e=t[0],i=e&&e.startRow||null,n=e&&e.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:t.reduce((function(t,e){return t.concat(e.columns.map((function(t){return t.getId()})))}),[])}},i.prototype.raiseChartModelUpdateEvent=function(){var t={type:i.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)},i.prototype.raiseChartUpdatedEvent=function(){var t={type:i.EVENT_CHART_UPDATED};this.dispatchEvent(t)},i.prototype.raiseChartApiUpdateEvent=function(){var t={type:i.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)},i.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),i=e.chartId,n=e.chartType,r={type:t.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:i,chartType:n,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(r)},i.prototype.raiseChartRangeSelectionChangedEvent=function(){var e={type:t.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},i.EVENT_CHART_UPDATED="chartUpdated",i.EVENT_CHART_API_UPDATE="chartApiUpdate",i.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",i.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",i.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",hh([t.Autowired("rangeService")],i.prototype,"rangeService",void 0),hh([t.PostConstruct],i.prototype,"init",null),i}(t.BeanStub),ph=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},gh=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},yh=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},vh=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mh={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},bh=function(e){function i(t,n){var r=e.call(this,i.TEMPLATE)||this;return r.chartController=t,r.chartOptionsService=n,r.columnComps=new Map,r}return ph(i,e),i.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,uh.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,uh.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},i.prototype.destroy=function(){this.clearComponents(),e.prototype.destroy.call(this)},i.prototype.updatePanels=function(){var e,i,n=this,r=this.chartType,o=this.chartController.getColStateForMenu(),s=o.dimensionCols,a=o.valueCols,l=s.map((function(t){return t.colId})).concat(a.map((function(t){return t.colId})));this.chartType=this.chartController.getChartType();var c=this.getGroupExpandedState();if(t._.areEqual(t._.keys(this.columnComps),l)&&this.chartType===r){if(yh(yh([],gh(s)),gh(a)).forEach((function(t){n.columnComps.get(t.colId).setValue(t.selected,!0)})),this.chartController.isActiveXYChart()){var h=this.generateGetSeriesLabel();a.forEach((function(t){n.columnComps.get(t.colId).setLabel(h(t))}))}t._.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var d=null===(e=this.getDataPanelDef().groups)||void 0===e?void 0:e.reduce((function(t,e,i){return"seriesChartType"===e.type?i:t}),-1);-1!==d&&this.createSeriesChartTypeGroup(a,d)}else this.clearComponents(),null===(i=this.getDataPanelDef().groups)||void 0===i||i.forEach((function(t){var e=t.type;"categories"===e?n.createCategoriesGroup(s):"series"===e?n.createSeriesGroup(a):"seriesChartType"===e?n.createSeriesChartTypeGroup(a):console.warn("AG Grid: invalid charts data panel group name supplied: '"+e+"'")}));this.restoreGroupExpandedState(c)},i.prototype.getGroupExpandedState=function(){var t=this;return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map((function(e){var i,n,r=e.groupType,o=e.comp,s=Boolean(null===(n=null===(i=t.getDataPanelDef().groups)||void 0===i?void 0:i.find((function(t){return t.type===r})))||void 0===n?void 0:n.isOpen);return o?o.isExpanded():s}))},i.prototype.restoreGroupExpandedState=function(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(e,i){e&&e.toggleGroupExpand(t[i])}))},i.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new t.AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})},i.prototype.createComponent=function(t,e){var i=document.createElement("div");return i.id=e,i.className="ag-chart-data-section",i.appendChild(t.getGui()),i},i.prototype.addComponent=function(t,e,i){var n=this.createComponent(e,i);t.appendChild(n)},i.prototype.addComponentAtIndex=function(t,e,i,n){var r=this.createComponent(e,i);t.insertBefore(r,t.children[n])},i.prototype.addChangeListener=function(e,i){var n=this;this.addManagedListener(e,t.AgAbstractField.EVENT_CHANGED,(function(){i.selected=e.getValue(),n.chartController.updateForPanelChange(i)}))},i.prototype.createCategoriesGroup=function(e){var i=this;this.categoriesGroupComp=this.createBean(new t.AgGroupComponent({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n="chartDimension"+this.getCompId();e.forEach((function(e){var r=i.categoriesGroupComp.createManagedBean(new t.AgRadioButton);r.setLabel(t._.escapeString(e.displayName)),r.setValue(e.selected),r.setInputName(n),i.addChangeListener(r,e),i.categoriesGroupComp.addItem(r),i.columnComps.set(e.colId,r)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},i.prototype.createSeriesGroup=function(e){var i=this;if(this.seriesGroupComp=this.createManagedBean(new t.AgGroupComponent({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var n=this.seriesGroupComp.createManagedBean(new t.AgToggleButton);n.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(t){i.chartOptionsService.setPairedMode(!!t),i.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(n)}var r=this.generateGetSeriesLabel();e.forEach((function(e){var n=i.seriesGroupComp.createManagedBean(new t.AgCheckbox);n.addCssClass("ag-data-select-checkbox");var o=r(e);n.setLabel(o),n.setValue(e.selected),i.addChangeListener(n,e),i.seriesGroupComp.addItem(n),i.columnComps.set(e.colId,n),i.addDragHandle(n,e)}));var o=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(o,this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return t.DragAndDropService.ICON_MOVE},getContainer:function(){return s},onDragging:function(t){return i.onDragging(t)},onDragLeave:function(){return i.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a),this.addDestroyFunc((function(){return i.dragAndDropService.removeDropTarget(a)}))},i.prototype.createSeriesChartTypeGroup=function(e,i){var n=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new t.AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var r=this.chartController.getSeriesChartTypes();e.forEach((function(e){if(e.selected){var i=r.filter((function(t){return t.colId===e.colId}))[0];if(i){var o=n.seriesChartTypeGroupComp.createManagedBean(new t.AgGroupComponent({title:e.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),s=n.seriesChartTypeGroupComp.createManagedBean(new t.AgCheckbox).setLabel(n.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(i.chartType)).setValue(!!i.secondaryAxis).onValueChange((function(t){return n.chartController.updateSeriesChartType(e.colId,void 0,t)}));o.addItem(s);var a=function(t,e){return n.chartTranslationService.translate(t,e)},l=[{value:"line",text:a("line","Line")},{value:"area",text:a("area","Area")},{value:"stackedArea",text:a("stackedArea","StackedArea")},{value:"groupedColumn",text:a("groupedColumn","Grouped Column")},{value:"stackedColumn",text:a("stackedColumn","Stacked Column")}],c=o.createManagedBean(new t.AgSelect);c.setLabelAlignment("left").setLabelWidth("flex").addOptions(l).setValue(i.chartType).onValueChange((function(t){return n.chartController.updateSeriesChartType(e.colId,t)})),o.addItem(c),n.seriesChartTypeGroupComp.addItem(o)}}})),void 0===i?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",i)}},i.prototype.addDragHandle=function(e,i){var n=this,r=t._.createIconNoSpan("columnDrag",this.gridOptionsService);r.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",r);var o={type:t.DragSourceType.ChartPanel,eElement:r,dragItemName:i.displayName,getDragItem:function(){return{columns:[i.column]}},onDragStopped:function(){return n.onDragStop()}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc((function(){return n.dragAndDropService.removeDragSource(o)}))},i.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(e){return t._.escapeString(e.displayName)};var e="bubble"===this.chartType,i=this.isInPairedMode(),n=0,r=new Map;return r.set(0,"X"),r.set(1,"Y"),r.set(2,"size"),function(o){var s,a=t._.escapeString(o.displayName);return o.selected?(s=i?r.get(n%(e?3:2)):0===n?"X":e&&n%2==0?"size":"Y",n++,a+" ("+s+")"):a}},i.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},i.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},i.prototype.getDataPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||mh},i.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},i.prototype.clearComponents=function(){t._.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},i.prototype.onDragging=function(t){var e=this.checkHoveredItem(t);if(e){this.lastDraggedColumn=t.dragItem.columns[0];var i=e.comp,n=e.position,r=this.lastHoveredItem||{},o=r.comp,s=r.position;if(i!==o||n!==s)this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:n},i.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+n)}},i.prototype.checkHoveredItem=function(e){var i,n;if(t._.missing(e.vDirection))return null;var r=e.event;try{for(var o=vh(this.columnComps.values()),s=o.next();!s.done;s=o.next()){var a=s.value,l=a.getGui();if(l.querySelector(".ag-chart-data-column-drag-handle")){var c=l.getBoundingClientRect();if(r.clientY>=c.top&&r.clientY<=c.bottom){var h=l.clientHeight;return{comp:a,position:r.clientY>c.top+h/2?"bottom":"top"}}}}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return null},i.prototype.onDragLeave=function(){this.clearHoveredItems()},i.prototype.onDragStop=function(){var t=this;if(this.lastHoveredItem){var e=this.chartController.getColStateForMenu(),i=e.dimensionCols,n=e.valueCols,r=yh(yh([],gh(i)),gh(n)).find((function(e){return e.column===t.lastDraggedColumn}));if(r){var o=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&o++,r.order=o,this.chartController.updateForPanelChange(r)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},i.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(t){t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},i.prototype.isInterestedIn=function(e){return e===t.DragSourceType.ChartPanel},i.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',fh([t.Autowired("dragAndDropService")],i.prototype,"dragAndDropService",void 0),fh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),fh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),xh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ch=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Sh=function(e){function i(t){var i=e.call(this)||this;return i.activeComps=[],i.params=t,i}return xh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},i.prototype.addCompToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},i.prototype.setEnabled=function(t){this.fontGroup.setEnabled(t)},i.prototype.initGroup=function(){var t=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(e){t.params.setEnabled&&t.params.setEnabled(e)}))},i.prototype.initFontFamilySelect=function(){var e=this,i=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.params.initialFont.family,r=i[0];if(n){var o=i.map((function(t){return t.toLowerCase()})).indexOf(n.toLowerCase());if(o>=0)r=i[o];else{var s=t._.capitalise(n);i.push(s),r=s}}var a=i.sort().map((function(t){return{value:t,text:t}}));this.familySelect.addOptions(a).setInputWidth("flex").setValue(""+r).onValueChange((function(t){return e.params.setFont({family:t})}))},i.prototype.initFontSizeSelect=function(){var e=this,i=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.params.initialFont.size;t._.includes(i,n)||i.push(n);var r=i.sort((function(t,e){return t-e})).map((function(t){return{value:""+t,text:""+t}}));this.sizeSelect.addOptions(r).setInputWidth("flex").setValue(""+n).onValueChange((function(t){return e.params.setFont({size:parseInt(t,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},i.prototype.initFontWeightStyleSelect=function(){var t=this,e=this.params.initialFont,i=e.weight,n=void 0===i?"normal":i,r=e.style,o=void 0===r?"normal":r,s=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],a=s.find((function(t){return t.weight===n&&t.style===o}));a||(a={name:"predefined",weight:n,style:o},s.unshift(a));var l=s.map((function(e){return{value:e.name,text:t.chartTranslationService.translate(e.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(a.name).onValueChange((function(e){var i=s.find((function(t){return t.name===e}));t.params.setFont({weight:i.weight,style:i.style})}))},i.prototype.initFontColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange((function(e){return t.params.setFont({color:e})}))},i.prototype.addItemToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},i.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActiveComps(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',Ch([t.RefSelector("fontGroup")],i.prototype,"fontGroup",void 0),Ch([t.RefSelector("familySelect")],i.prototype,"familySelect",void 0),Ch([t.RefSelector("weightStyleSelect")],i.prototype,"weightStyleSelect",void 0),Ch([t.RefSelector("sizeSelect")],i.prototype,"sizeSelect",void 0),Ch([t.RefSelector("colorPicker")],i.prototype,"colorPicker",void 0),Ch([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Ch([t.PostConstruct],i.prototype,"init",null),i}(t.Component),wh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},kh=function(e){function i(t){var i=t.chartOptionsService,n=t.isExpandedOnInit,r=void 0!==n&&n,o=e.call(this)||this;return o.activePanels=[],o.chartOptionsService=i,o.isExpandedOnInit=r,o}return wh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},i.prototype.initLegendGroup=function(){var t=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(e){t.chartOptionsService.setChartOption("legend.enabled",e),t.legendGroup.toggleGroupExpand(!0)}))},i.prototype.initLegendPosition=function(){var t=this;this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(["top","right","bottom","left"].map((function(e){return{value:e,text:t.chartTranslationService.translate(e)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.position",e)}))},i.prototype.initLegendPadding=function(){var t=this,e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(dd(e,200)).setValue(""+e).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.spacing",e)}))},i.prototype.initLegendItems=function(){var t=this,e=function(e,i,n,r){var o=t.chartOptionsService.getChartOption("legend."+e);n.setLabel(t.chartTranslationService.translate(i)).setMaxValue(dd(o,r)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(i){t.chartOptionsService.setChartOption("legend."+e,i)}))};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},i.prototype.initLabelPanel=function(){var t=this,e=this.chartOptionsService,i={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},setFont:function(e){var i=t.chartOptionsService;e.family&&i.setChartOption("legend.item.label.fontFamily",e.family),e.weight&&i.setChartOption("legend.item.label.fontWeight",e.weight),e.style&&i.setChartOption("legend.item.label.fontStyle",e.style),e.size&&i.setChartOption("legend.item.label.fontSize",e.size),e.color&&i.setChartOption("legend.item.label.color",e.color)}},n=this.createBean(new Sh(i));this.legendGroup.addItem(n),this.activePanels.push(n)},i.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActivePanels(),e.prototype.destroy.call(this)},i.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Oh([t.RefSelector("legendGroup")],i.prototype,"legendGroup",void 0),Oh([t.RefSelector("legendPositionSelect")],i.prototype,"legendPositionSelect",void 0),Oh([t.RefSelector("legendPaddingSlider")],i.prototype,"legendPaddingSlider",void 0),Oh([t.RefSelector("markerSizeSlider")],i.prototype,"markerSizeSlider",void 0),Oh([t.RefSelector("markerStrokeSlider")],i.prototype,"markerStrokeSlider",void 0),Oh([t.RefSelector("markerPaddingSlider")],i.prototype,"markerPaddingSlider",void 0),Oh([t.RefSelector("itemPaddingXSlider")],i.prototype,"itemPaddingXSlider",void 0),Oh([t.RefSelector("itemPaddingYSlider")],i.prototype,"itemPaddingYSlider",void 0),Oh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Oh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Th=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ph=function(e){function i(t){var i=e.call(this)||this;return i.chartOptionsService=t,i}return Th(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},i.prototype.initAxisTicks=function(){var t=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("tick.color",e)}));var e=function(e,i,n,r){var o=t.chartOptionsService.getAxisProperty(e);i.setLabel(n).setMaxValue(dd(o,r)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setAxisProperty(e,i)}))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},i.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Dh([t.RefSelector("axisTicksGroup")],i.prototype,"axisTicksGroup",void 0),Dh([t.RefSelector("axisTicksColorPicker")],i.prototype,"axisTicksColorPicker",void 0),Dh([t.RefSelector("axisTicksWidthSlider")],i.prototype,"axisTicksWidthSlider",void 0),Dh([t.RefSelector("axisTicksSizeSlider")],i.prototype,"axisTicksSizeSlider",void 0),Dh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Dh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Eh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Rh=function(e){function i(t){var n=e.call(this,t,i.TEMPLATE)||this;return n.radius=0,n.offsetX=0,n.offsetY=0,n}return Eh(i,e),i.prototype.postConstruct=function(){var i=this;e.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(t){i.parentCircleRect=i.eParentCircle.getBoundingClientRect()},onDragging:function(t){return i.calculateAngleDrag(t)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange((function(t){null!=t&&""!==t||(t="0"),t=i.eAngleValue.normalizeValue(t);var e=parseFloat(t);e>180&&(e-=360),i.setValue(e)})),this.updateNumberInput(),t._.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,t.AgAbstractField.EVENT_CHANGED,(function(){var t=i.gridOptionsService.getDocument();i.eAngleValue.getInputElement().contains(t.activeElement)||i.updateNumberInput()}))},i.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},i.prototype.positionChildCircle=function(t){var e=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,n=e.width/2,r=e.height/2;i.style.left=n+8*Math.cos(t)+"px",i.style.top=r+8*Math.sin(t)+"px"},i.prototype.calculatePolar=function(){var t=this.offsetX,e=this.offsetY,i=Math.atan2(e,t);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(i)},i.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)},i.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},i.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},i.prototype.calculateAngleDrag=function(t){var e=this.parentCircleRect,i=e.width/2,n=e.height/2,r=t.clientX-e.left-i,o=t.clientY-e.top-n,s=Math.atan2(o,r);this.setValue(s,!0)},i.prototype.toDegrees=function(t){return t/Math.PI*180},i.prototype.toRadians=function(t){return t/180*Math.PI},i.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},i.prototype.normalizeAngle180=function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},i.prototype.getRadius=function(){return this.radius},i.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},i.prototype.onValueChange=function(e){var i=this;return this.addManagedListener(this,t.AgAbstractField.EVENT_CHANGED,(function(){e(i.degrees)})),this},i.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},i.prototype.setValue=function(e,i){var n;return n=i?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(n),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(n),this.dispatchEvent({type:t.AgAbstractField.EVENT_CHANGED})),this},i.prototype.setWidth=function(e){return t._.setFixedWidth(this.getGui(),e),this},i.prototype.setDisabled=function(t){return e.prototype.setDisabled.call(this,t),this.eAngleValue.setDisabled(t),this},i.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Mh([t.RefSelector("eLabel")],i.prototype,"eLabel",void 0),Mh([t.RefSelector("eParentCircle")],i.prototype,"eParentCircle",void 0),Mh([t.RefSelector("eChildCircle")],i.prototype,"eChildCircle",void 0),Mh([t.RefSelector("eAngleValue")],i.prototype,"eAngleValue",void 0),Mh([t.Autowired("dragService")],i.prototype,"dragService",void 0),i}(t.AgAbstractLabel),Ah=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_h=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Lh=function(e){function i(t){var i=t.chartController,n=t.chartOptionsService,r=t.isExpandedOnInit,o=void 0!==r&&r,s=e.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=i,s.chartOptionsService=n,s.isExpandedOnInit=o,s}return Ah(i,e),i.prototype.init=function(){var t=this;this.setTemplate(i.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,uh.EVENT_CHART_UPDATED,(function(){return t.axisLabelUpdateFuncs.forEach((function(t){return t()}))}))},i.prototype.initAxis=function(){var t=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.color",e)}));var e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(dd(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.width",e)}))},i.prototype.initAxisTicks=function(){var t=this.createBean(new Ph(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)},i.prototype.initAxisLabels=function(){var t=this,e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:function(e){e.family&&t.chartOptionsService.setAxisProperty("label.fontFamily",e.family),e.weight&&t.chartOptionsService.setAxisProperty("label.fontWeight",e.weight),e.style&&t.chartOptionsService.setAxisProperty("label.fontStyle",e.style),e.size&&t.chartOptionsService.setAxisProperty("label.fontSize",e.size),e.color&&t.chartOptionsService.setAxisProperty("label.color",e.color)}},n=this.createBean(new Sh(i));this.axisGroup.addItem(n),this.activePanels.push(n),this.addAdditionalLabelComps(n)},i.prototype.addAdditionalLabelComps=function(t){this.addLabelPadding(t);var e=this.createRotationWidgets(),i=e.xRotationComp,n=e.yRotationComp,r=this.initLabelRotations(i,n);t.addCompToPanel(r),t.addCompToPanel(i),t.addCompToPanel(n)},i.prototype.initLabelRotations=function(e,i){var n,r,o=this,s=function(t){return o.chartOptionsService.getLabelRotation(t)},a=function(t,e){o.chartOptionsService.setLabelRotation(t,e)},l=(n=s("xAxis"),r=s("yAxis"),null==n&&null==r&&o.chartOptionsService.getAxisProperty("label.autoRotate")),c=this.createBean(new t.AgCheckbox).setLabel(this.translate("autoRotate")).setValue(l).onValueChange((function(t){o.chartOptionsService.setAxisProperty("label.autoRotate",t),t?(o.prevXRotation=s("xAxis"),o.prevYRotation=s("yAxis"),a("xAxis",void 0),a("yAxis",void 0)):(a("xAxis",o.prevXRotation),a("yAxis",o.prevYRotation)),e.setDisabled(t),i.setDisabled(t)}));return e.setDisabled(l),i.setDisabled(l),c},i.prototype.createRotationWidgets=function(){var t=this,e=String.fromCharCode(176),i=function(i,n){var r=t.chartTranslationService.translate(i)+" "+e,o=t.chartOptionsService.getLabelRotation(n),s=(new Rh).setLabel(r).setLabelWidth("flex").setValue(o||0).onValueChange((function(e){return t.chartOptionsService.setLabelRotation(n,e)}));return t.axisLabelUpdateFuncs.push((function(){var e=t.chartOptionsService.getLabelRotation(n);s.setValue(e||0)})),t.createBean(s)};return{xRotationComp:i("xRotation","xAxis"),yRotationComp:i("yRotation","yAxis")}},i.prototype.addLabelPadding=function(e){var i=this,n=this.createBean(new t.AgSlider),r=this.chartOptionsService.getAxisProperty("label.padding");n.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(dd(r,30)).setValue(""+r).setTextFieldWidth(45).onValueChange((function(t){return i.chartOptionsService.setAxisProperty("label.padding",t)})),e.addCompToPanel(n)},i.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},i.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActivePanels(),e.prototype.destroy.call(this)},i.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',_h([t.RefSelector("axisGroup")],i.prototype,"axisGroup",void 0),_h([t.RefSelector("axisColorInput")],i.prototype,"axisColorInput",void 0),_h([t.RefSelector("axisLineWidthSlider")],i.prototype,"axisLineWidthSlider",void 0),_h([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),_h([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Nh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ih=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Fh=function(e){function i(t){var i=t.chartOptionsService,n=t.isExpandedOnInit,r=void 0!==n&&n,o=e.call(this)||this;return o.chartOptionsService=i,o.isExpandedOnInit=r,o}return Nh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},i.prototype.initNavigator=function(){var t=this,e=this.chartTranslationService;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(e){t.chartOptionsService.setChartOption("navigator.enabled",e),t.navigatorGroup.toggleGroupExpand(!0)})).toggleGroupExpand(this.isExpandedOnInit);var i=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(dd(i,60)).setTextFieldWidth(45).setValue(""+(i||30)).onValueChange((function(e){return t.chartOptionsService.setChartOption("navigator.height",e)}))},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Ih([t.RefSelector("navigatorGroup")],i.prototype,"navigatorGroup",void 0),Ih([t.RefSelector("navigatorHeightSlider")],i.prototype,"navigatorHeightSlider",void 0),Ih([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Ih([t.PostConstruct],i.prototype,"init",null),i}(t.Component),jh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Gh=function(e){function i(t,i){var n=e.call(this)||this;return n.chartOptionsService=t,n.chartController=i,n}return jh(i,e),i.prototype.init=function(){var e=this;this.setTemplate(i.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,t.Events.EVENT_CHART_OPTIONS_CHANGED,(function(t){e.updateTopPadding(t.chartOptions)})),this.initGroup(),this.initChartPaddingItems()},i.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},i.prototype.initChartPaddingItems=function(){var t=this,e=function(e,i){var n=t.chartOptionsService.getChartOption("padding."+e);i.setLabel(t.chartTranslationService.translate(e)).setMaxValue(dd(n,200)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setChartOption("padding."+e,i)}))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)},i.prototype.updateTopPadding=function(t){var e,i,n=null===(i=null===(e=t[this.chartController.getChartSeriesTypes()[0]])||void 0===e?void 0:e.padding)||void 0===i?void 0:i.top;null!=n&&this.paddingTopSlider.setValue(n)},i.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',Bh([t.RefSelector("chartPaddingGroup")],i.prototype,"chartPaddingGroup",void 0),Bh([t.RefSelector("paddingTopSlider")],i.prototype,"paddingTopSlider",void 0),Bh([t.RefSelector("paddingRightSlider")],i.prototype,"paddingRightSlider",void 0),Bh([t.RefSelector("paddingBottomSlider")],i.prototype,"paddingBottomSlider",void 0),Bh([t.RefSelector("paddingLeftSlider")],i.prototype,"paddingLeftSlider",void 0),Bh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Bh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),zh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Vh=function(e){function i(t){var i=e.call(this)||this;return i.chartOptionsService=t,i}return zh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},i.prototype.initGroup=function(){var t=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setChartOption("background.visible",e)}))},i.prototype.initColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(e){return t.chartOptionsService.setChartOption("background.fill",e)}))},i.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',Wh([t.RefSelector("chartBackgroundGroup")],i.prototype,"group",void 0),Wh([t.RefSelector("colorPicker")],i.prototype,"colorPicker",void 0),Wh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Wh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Hh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Yh=function(e){function i(t){var n=e.call(this,i.TEMPLATE)||this;return n.chartOptionsService=t,n.activePanels=[],n}return Hh(i,e),i.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},i.prototype.hasTitle=function(){var t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0},i.prototype.initFontPanel=function(){var t=this,e=this.hasTitle(),i=function(e,i){e.family&&t.setOption("title.fontFamily",e.family,i),e.weight&&t.setOption("title.fontWeight",e.weight,i),e.style&&t.setOption("title.fontStyle",e.style,i),e.size&&t.setOption("title.fontSize",e.size,i),e.color&&t.setOption("title.color",e.color,i)},n={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||i(n,!0);var r={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:n,setFont:i,setEnabled:function(e){if(t.toolbarExists()){var i=t.getOption("padding.top");t.setOption("padding.top",e?i-20:i+20)}t.setOption("title.enabled",e);var n=t.getOption("title.text"),r="Title"===n||0===(null==n?void 0:n.trim().length);e&&r&&t.setOption("title.text",t.titlePlaceholder)}},o=this.createBean(new Sh(r));o.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(o.getGui()),this.activePanels.push(o),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){o.setEnabled(t.hasTitle())}))},i.prototype.createSpacingSlicer=function(){var e=this,i=this.createBean(new t.AgSlider),n=this.chartOptionsService.getChartOption("title.spacing");return i.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(n,100)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setChartOption("title.spacing",t)})),i},i.prototype.toolbarExists=function(){var t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;var e={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some((function(i){var n;return null===(n=t&&t(e))||void 0===n?void 0:n.includes(i)}))},i.prototype.getOption=function(t){return this.chartOptionsService.getChartOption(t)},i.prototype.setOption=function(t,e,i){this.chartOptionsService.setChartOption(t,e,i)},i.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActivePanels(),e.prototype.destroy.call(this)},i.TEMPLATE="<div></div>",Kh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Kh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Uh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},$h=function(e){function i(t){var i=t.chartController,n=t.chartOptionsService,r=t.isExpandedOnInit,o=void 0!==r&&r,s=e.call(this)||this;return s.activePanels=[],s.chartController=i,s.chartOptionsService=n,s.isExpandedOnInit=o,s}return Uh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},i.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},i.prototype.initTitles=function(){var t=this.createBean(new Yh(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},i.prototype.initPaddingPanel=function(){var t=this.createBean(new Gh(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)},i.prototype.initBackgroundPanel=function(){var t=this.createBean(new Vh(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},i.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActivePanels(),e.prototype.destroy.call(this)},i.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',Xh([t.RefSelector("chartGroup")],i.prototype,"chartGroup",void 0),Xh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Xh([t.PostConstruct],i.prototype,"init",null),i}(t.Component),qh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zh=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Jh=function(e){function i(t,i){var n=e.call(this)||this;return n.chartOptionsService=t,n.getSelectedSeries=i,n}return qh(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},i.prototype.initSeriesShadow=function(){var t=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.enabled",e,t.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.color",e,t.getSelectedSeries())}));var e=function(e,i,n,r){var o=t.chartOptionsService.getSeriesOption("shadow."+i,t.getSelectedSeries());e.setLabel(t.chartTranslationService.translate(i)).setMinValue(n).setMaxValue(dd(o,r)).setValue(""+o).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow."+i,e,t.getSelectedSeries())}))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)},i.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Zh([t.RefSelector("shadowGroup")],i.prototype,"shadowGroup",void 0),Zh([t.RefSelector("shadowColorPicker")],i.prototype,"shadowColorPicker",void 0),Zh([t.RefSelector("shadowBlurSlider")],i.prototype,"shadowBlurSlider",void 0),Zh([t.RefSelector("shadowXOffsetSlider")],i.prototype,"shadowXOffsetSlider",void 0),Zh([t.RefSelector("shadowYOffsetSlider")],i.prototype,"shadowYOffsetSlider",void 0),Zh([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Zh([t.PostConstruct],i.prototype,"init",null),i}(t.Component);function Qh(t){var e=t.labelName,i=t.chartOptionsService,n=t.getSelectedSeries,r=t.seriesOptionLabelProperty,o=function(t){return r+"."+t},s=function(t){var e=o(t);return i.getSeriesOption(e,n())},a=function(t,e){var r=o(t);i.setSeriesOption(r,e,n())},l={family:s("fontFamily"),style:s("fontStyle"),weight:s("fontWeight"),size:s("fontSize"),color:s("color")};return{name:e,enabled:s("enabled")||!1,setEnabled:function(t){return a("enabled",t)},suppressEnabledCheckbox:!1,initialFont:l,setFont:function(t){t.family&&a("fontFamily",t.family),t.weight&&a("fontWeight",t.weight),t.style&&a("fontStyle",t.style),t.size&&a("fontSize",t.size),t.color&&a("color",t.color)}}}var td=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ed=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},id=function(e){function i(t,i){var n=e.call(this)||this;return n.chartOptionsService=t,n.getSelectedSeries=i,n}return td(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},i.prototype.initMarkers=function(){var e=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(t){return e.setSeriesOption("marker.shape",t)}));var i=this.chartOptionsService.getChartType(),n=t._.includes(["scatter","bubble"],i);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(n).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(t){return e.setSeriesOption("marker.enabled",t)}));var r=function(t,i,n,r){var o=e.getSeriesOption(t);i.setLabel(e.chartTranslationService.translate(n)).setMaxValue(dd(o,r)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(i){return e.setSeriesOption(t,i)}))};"bubble"===i?(r("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),r("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),r("marker.size",this.seriesMarkerSizeSlider,"size",60)),r("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},i.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())},i.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())},i.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ed([t.RefSelector("seriesMarkersGroup")],i.prototype,"seriesMarkersGroup",void 0),ed([t.RefSelector("seriesMarkerShapeSelect")],i.prototype,"seriesMarkerShapeSelect",void 0),ed([t.RefSelector("seriesMarkerSizeSlider")],i.prototype,"seriesMarkerSizeSlider",void 0),ed([t.RefSelector("seriesMarkerMinSizeSlider")],i.prototype,"seriesMarkerMinSizeSlider",void 0),ed([t.RefSelector("seriesMarkerStrokeWidthSlider")],i.prototype,"seriesMarkerStrokeWidthSlider",void 0),ed([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),ed([t.PostConstruct],i.prototype,"init",null),i}(t.Component),nd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rd=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},od=function(e){function i(t,i){var n=e.call(this)||this;return n.chartOptionsService=t,n.getSelectedSeries=i,n}return nd(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},i.prototype.initCalloutOptions=function(){var t=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var e=function(e,i,n,r){var o=t.chartOptionsService.getSeriesOption(e,t.getSelectedSeries());i.setLabel(t.chartTranslationService.translate(n)).setMaxValue(dd(o,r)).setValue(""+o).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setSeriesOption(e,i,t.getSelectedSeries())}))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},i.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',rd([t.RefSelector("calloutGroup")],i.prototype,"calloutGroup",void 0),rd([t.RefSelector("calloutLengthSlider")],i.prototype,"calloutLengthSlider",void 0),rd([t.RefSelector("calloutStrokeWidthSlider")],i.prototype,"calloutStrokeWidthSlider",void 0),rd([t.RefSelector("labelOffsetSlider")],i.prototype,"labelOffsetSlider",void 0),rd([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),rd([t.PostConstruct],i.prototype,"init",null),i}(t.Component),sd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ad=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ld=function(e){function i(t){var i=t.chartController,n=t.chartOptionsService,r=t.seriesType,o=t.isExpandedOnInit,s=void 0!==o&&o,a=e.call(this)||this;return a.activePanels=[],a.widgetFuncs={lineWidth:function(){return a.initLineWidth()},strokeWidth:function(){return a.initStrokeWidth()},lineDash:function(){return a.initLineDash()},lineOpacity:function(){return a.initLineOpacity()},fillOpacity:function(){return a.initFillOpacity()},markers:function(){return a.initMarkers()},labels:function(){return a.initLabels()},shadow:function(){return a.initShadow()},tooltips:function(){return a.initTooltips()},bins:function(){return a.initBins()}},a.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},a.chartController=i,a.chartOptionsService=n,a.seriesType=r||a.getChartSeriesType(),a.isExpandedOnInit=s,a}return sd(i,e),i.prototype.init=function(){this.setTemplate(i.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,uh.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},i.prototype.refreshWidgets=function(){var t=this;this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){t.chartController.isComboChart()&&(t.updateSeriesType(),t.initSeriesSelect()),t.seriesWidgetMappings[t.seriesType].forEach((function(e){return t.widgetFuncs[e]()}))})).catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},i.prototype.initSeriesSelect=function(){var e=this,i=this.seriesGroup.createManagedBean(new t.AgSelect);i.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange((function(t){e.seriesType=t,e.refreshWidgets()})),this.seriesGroup.addItem(i),this.activePanels.push(i)},i.prototype.initTooltips=function(){var e=this,i=this.createBean(new t.AgToggleButton);i.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(t){return e.setSeriesOption("tooltip.enabled",t)})),this.addWidget(i)},i.prototype.initStrokeWidth=function(){var e=this,i=this.getSeriesOption("strokeWidth"),n=this.createBean(new t.AgSlider);n.setLabel(this.translate("strokeWidth")).setMaxValue(dd(i,10)).setTextFieldWidth(45).setValue(""+i).onValueChange((function(t){return e.setSeriesOption("strokeWidth",t)})),this.addWidget(n)},i.prototype.initLineWidth=function(){var e=this,i=this.getSeriesOption("strokeWidth"),n=this.createBean(new t.AgSlider);n.setLabel(this.translate("lineWidth")).setMaxValue(dd(i,10)).setTextFieldWidth(45).setValue(""+i).onValueChange((function(t){return e.setSeriesOption("strokeWidth",t)})),this.addWidget(n)},i.prototype.initLineDash=function(){var e=this,i=this.getSeriesOption("lineDash"),n=i?i[0]:0,r=this.createBean(new t.AgSlider);r.setLabel(this.translate("lineDash")).setMaxValue(dd(n,30)).setTextFieldWidth(45).setValue(""+n).onValueChange((function(t){return e.setSeriesOption("lineDash",[t])})),this.addWidget(r)},i.prototype.initLineOpacity=function(){var e=this,i=this.getSeriesOption("strokeOpacity"),n=this.createBean(new t.AgSlider);n.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(dd(i,1)).setTextFieldWidth(45).setValue(""+i).onValueChange((function(t){return e.setSeriesOption("strokeOpacity",t)})),this.addWidget(n)},i.prototype.initFillOpacity=function(){var e=this,i=this.getSeriesOption("fillOpacity"),n=this.createBean(new t.AgSlider);n.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(dd(i,1)).setTextFieldWidth(45).setValue(""+i).onValueChange((function(t){return e.setSeriesOption("fillOpacity",t)})),this.addWidget(n)},i.prototype.initLabels=function(){var t=this,e="pie"===this.seriesType?"calloutLabel":"label",i=Qh({labelName:"pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:e}),n=this.createBean(new Sh(i));if("pie"===this.seriesType){var r=this.createBean(new od(this.chartOptionsService,(function(){return t.seriesType})));n.addCompToPanel(r),this.activePanels.push(r)}if(this.addWidget(n),"pie"===this.seriesType){var o=Qh({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:"sectorLabel"}),s=this.createBean(new Sh(o)),a=this.getSectorLabelPositionRatio();s.addCompToPanel(a),this.addWidget(s)}},i.prototype.getSectorLabelPositionRatio=function(){var e=this,i=this.chartOptionsService.getSeriesOption("sectorLabel.positionRatio",this.seriesType);return this.createBean(new t.AgSlider).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(dd(i,1)).setTextFieldWidth(45).setValue(""+i).onValueChange((function(t){return e.chartOptionsService.setSeriesOption("sectorLabel.positionRatio",t,e.seriesType)}))},i.prototype.initShadow=function(){var t=this,e=this.createBean(new Jh(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},i.prototype.initMarkers=function(){var t=this,e=this.createBean(new id(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},i.prototype.initBins=function(){var e,i=this,n=(null!==(e=this.getSeriesOption("bins"))&&void 0!==e?e:this.getSeriesOption("calculatedBins")).length,r=this.createBean(new t.AgSlider);r.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(dd(n,20)).setTextFieldWidth(45).setValue(""+n).onValueChange((function(t){return i.setSeriesOption("binCount",t)})),this.addWidget(r)},i.prototype.addWidget=function(t){this.seriesGroup.addItem(t),this.activePanels.push(t)},i.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)},i.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)},i.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":Kc(t)},i.prototype.getSeriesSelectOptions=function(){var t=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(i){var n=Kc(i.chartType);e.add(t.seriesSelectOptions.get(n))})),Array.from(e)},i.prototype.updateSeriesType=function(){var t=this.chartController.getActiveSeriesChartTypes().map((function(t){return Kc(t.chartType)}));!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])},i.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},i.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyActivePanels(),e.prototype.destroy.call(this)},i.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',ad([t.RefSelector("seriesGroup")],i.prototype,"seriesGroup",void 0),ad([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),ad([t.PostConstruct],i.prototype,"init",null),i}(t.Component),cd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hd=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};function dd(t,e){return Math.max(t,e)}var ud={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},pd=function(e){function i(t,n){var r=e.call(this,i.TEMPLATE)||this;return r.chartController=t,r.chartOptionsService=n,r.panels=[],r.isGroupPanelShownInSeries=function(t,e){if(["chart","legend","series"].includes(t))return!0;return!(!["axis","navigator"].includes(t)||!["bar","column","line","area","scatter","histogram","cartesian"].includes(e))},r}return cd(i,e),i.prototype.init=function(){var t=this;this.createPanels(),this.addManagedListener(this.chartController,uh.EVENT_CHART_UPDATED,(function(){return t.createPanels(!0)})),this.addManagedListener(this.chartController,uh.EVENT_CHART_API_UPDATE,(function(){return t.createPanels(!1)}))},i.prototype.createPanels=function(t){var e,i=this,n=this.chartController.getChartType(),r=this.chartController.isGrouping(),o=Kc(n);t&&n===this.chartType&&r===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;if(i.isGroupPanelShownInSeries(e,o)){var n={chartController:i.chartController,chartOptionsService:i.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:o};"chart"===e?i.addComponent(new $h(n)):"legend"===e?i.addComponent(new kh(n)):"axis"===e?i.addComponent(new Lh(n)):"series"===e?i.addComponent(new ld(n)):"navigator"===e?i.addComponent(new Fh(n)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+t.type+"'")}})),this.chartType=n,this.isGrouping=r)},i.prototype.getFormatPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||ud},i.prototype.addComponent=function(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())},i.prototype.destroyPanels=function(){var e=this;this.panels.forEach((function(i){t._.removeFromParent(i.getGui()),e.destroyBean(i)}))},i.prototype.destroy=function(){this.destroyPanels(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',hd([t.PostConstruct],i.prototype,"init",null),i}(t.Component),fd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gd=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},yd=function(e){function i(t,i){var n=e.call(this)||this;n.size=58,n.padding=5,n.root=new Z;var r=new et({document:window.document,width:n.size,height:n.size});return r.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),r.root=n.root,r.container=t,n.scene=r,n.tooltipName=i,n}return fd(i,e),i.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch((function(t){return console.error("AG Grid - chart update failed",t)}))},gd([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),gd([t.PostConstruct],i.prototype,"init",null),i}(t.Component),vd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),md=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},bd=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.stroke="gray",n.axisOvershoot=3,n}return vd(i,e),i.prototype.addAxes=function(){var t=this.size,e=this.padding,i=new Ei;i.x1=e,i.y1=e,i.x2=e,i.y2=t-e+this.axisOvershoot,i.stroke=this.stroke;var n=new Ei;n.x1=e-this.axisOvershoot+1,n.y1=t-e,n.x2=t-e+1,n.y2=t-e,n.stroke=this.stroke;var r=this.root;r.append(i),r.append(n)},md([t.PostConstruct],i.prototype,"addAxes",null),i}(yd);function xd(t){var e=t.stacked,i=t.size,n=t.padding,r=t.xScalePadding,o=t.xScaleDomain,s=t.yScaleDomain,a=new Di;a.domain=o,a.range=[n,i-n],a.paddingInner=r,a.paddingOuter=r;var l=new Vn;l.domain=s,l.range=[i-n,n];var c=function(t,e,i){return t.map((function(t,n){var r=i.convert(t),o=new Rs;return o.x=e.convert(n),o.y=r,o.width=e.bandwidth,o.height=i.convert(0)-r,o.strokeWidth=1,o.crisp=!0,o}))};return e?t.data.map((function(t){return c(t,a,l)})):c(t.data,a,l)}function Cd(t,e,i,n){var r=new Vn;r.domain=[0,4],r.range=[n,i-n];var o=new Vn;o.domain=[0,10],o.range=[i-n,n];var s=e.map((function(t){var e=new vi;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((function(t,i){e.path[i>0?"lineTo":"moveTo"](r.convert(i),o.convert(t))})),e})),a=new Z;return a.setClipRectInGroupCoordinateSpace(new _(n,n,i-2*n,i-2*n)),a.append(s),t.append(a),s}var Sd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wd=function(t){function e(e,i,n){var r=t.call(this,e,"groupedColumnTooltip")||this;r.columnData=[2,3,4];var o=r,s=o.root,a=o.columnData,l=o.size,c=o.padding;return r.columns=xd({stacked:!1,root:s,data:a,size:l,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(r.columns),r.updateColors(i,n),r}return Sd(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="groupedColumn",e}(bd),Od=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kd=function(t){function e(i,n,r,o,s,a){void 0===o&&(o=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedColumnTooltip");var l=t.call(this,i,a)||this,c=l,h=c.root,d=c.size,u=c.padding;return l.stackedColumns=xd({stacked:!0,root:h,data:o,size:d,padding:u,xScaleDomain:[0,1,2],yScaleDomain:s,xScalePadding:.3}),h.append([].concat.apply([],l.stackedColumns)),l.updateColors(n,r),l}return Od(e,t),e.prototype.updateColors=function(t,e){this.stackedColumns.forEach((function(i,n){return i.forEach((function(i){i.fill=t[n],i.stroke=e[n]}))}))},e.chartType="stackedColumn",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(bd),Td=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dd=function(t){function e(i,n,r){return t.call(this,i,n,r,e.data,[0,10],"normalizedColumnTooltip")||this}return Td(e,t),e.chartType="normalizedColumn",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(kd),Pd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ed=function(t){function e(e,i,n){var r=t.call(this,e,"groupedBarTooltip")||this,o=r.padding,s=r.size,a=new Di;a.domain=[0,1,2],a.range=[o,s-o],a.paddingInner=.3,a.paddingOuter=.3;var l=new Vn;l.domain=[0,4],l.range=[s-o,o];var c=l.convert(0),h=a.bandwidth;return r.bars=[2,3,4].map((function(t,e){var i=new Rs;return i.x=o,i.y=a.convert(e),i.width=c-l.convert(t),i.height=h,i.strokeWidth=1,i.crisp=!0,i})),r.updateColors(i,n),r.root.append(r.bars),r}return Pd(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="groupedBar",e}(bd),Md=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rd=function(t){function e(i,n,r,o,s,a){void 0===o&&(o=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedBarTooltip");var l=t.call(this,i,a)||this,c=l.size,h=l.padding,d=new Di;d.domain=[0,1,2],d.range=[h,c-h],d.paddingInner=.3,d.paddingOuter=.3;var u=new Vn;u.domain=s,u.range=[c-h,h];var p=u.convert(0),f=d.bandwidth;return l.bars=o.map((function(t){return t.map((function(t,e){var i=new Rs;return i.x=h,i.y=d.convert(e),i.width=p-u.convert(t),i.height=f,i.strokeWidth=1,i.crisp=!0,i}))})),l.updateColors(n,r),l.root.append([].concat.apply([],l.bars)),l}return Md(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,n){return i.forEach((function(i){i.fill=t[n],i.stroke=e[n]}))}))},e.chartType="stackedBar",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(bd),Ad=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_d=function(t){function e(i,n,r){return t.call(this,i,n,r,e.data,[0,10],"normalizedBarTooltip")||this}return Ad(e,t),e.chartType="normalizedBar",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(Rd),Ld=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nd=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Id=rt,Fd=function(t){function e(e,i,n,r,o){void 0===r&&(r=.6),void 0===o&&(o="doughnutTooltip");var s=t.call(this,e,o)||this,a=(s.size-2*s.padding)/2,l=a+s.padding,c=[[Id(-90),Id(30)],[Id(30),Id(120)],[Id(120),Id(180)],[Id(180),Id(210)],[Id(210),Id(240)],[Id(240),Id(270)]];return s.sectors=c.map((function(t){var e=Nd(t,2),i=e[0],n=e[1],o=new Bo;return o.centerX=l,o.centerY=l,o.innerRadius=a*r,o.outerRadius=a,o.startAngle=i,o.endAngle=n,o.stroke=void 0,o.strokeWidth=1,o})),s.updateColors(i,n),s.root.append(s.sectors),s}return Ld(e,t),e.prototype.updateColors=function(t,e){this.sectors.forEach((function(i,n){i.fill=t[n%t.length],i.stroke=e[n%e.length]}))},e.chartType="doughnut",e}(yd),jd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bd=function(t){function e(e,i,n){return t.call(this,e,i,n,0,"pieTooltip")||this}return jd(e,t),e.chartType="pie",e}(Fd),Gd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zd=function(t){function e(e,i,n){var r=t.call(this,e,"lineTooltip")||this;return r.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],r.lines=Cd(r.root,r.data,r.size,r.padding),r.updateColors(i,n),r}return Gd(e,t),e.prototype.updateColors=function(t,e){this.lines.forEach((function(e,i){e.stroke=t[i]}))},e.chartType="line",e}(bd),Wd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vd=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Hd=function(t){function e(e,i,n){var r=t.call(this,e,"scatterTooltip")||this,o=r.size,s=r.padding,a=new Vn;a.domain=[-.5,4],a.range=[2*s,o-s];var l=new Vn;l.domain=[-.5,3.5],l.range=[o-s,s];var c=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((function(t){t.forEach((function(t){var e=Vd(t,2),i=e[0],n=e[1],r=new Li;r.strokeWidth=1,r.centerX=a.convert(i),r.centerY=l.convert(n),r.radius=2.5,c.push(r)}))})),r.points=c,r.updateColors(i,n);var h=new Z;return h.setClipRectInGroupCoordinateSpace(new _(s,s,o-2*s,o-2*s)),h.append(r.points),r.root.append(h),r}return Wd(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,n){i.stroke=e[n%e.length],i.fill=t[n%t.length]}))},e.chartType="scatter",e}(bd),Kd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yd=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Ud=function(t){function e(e,i,n){var r=t.call(this,e,"bubbleTooltip")||this,o=r.size,s=r.padding,a=new Vn;a.domain=[0,1],a.range=[2*s,o-s];var l=new Vn;l.domain=[0,1],l.range=[o-s,s];var c=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((function(t){t.forEach((function(t){var e=Yd(t,3),i=e[0],n=e[1],r=e[2],o=new Li;o.strokeWidth=1,o.centerX=a.convert(i),o.centerY=l.convert(n),o.radius=r,o.fillOpacity=.7,c.push(o)}))})),r.points=c,r.updateColors(i,n);var h=new Z;return h.setClipRectInGroupCoordinateSpace(new _(s,s,o-2*s,o-2*s)),h.append(r.points),r.root.append(h),r}return Kd(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,n){i.stroke=e[n%e.length],i.fill=t[n%t.length]}))},e.chartType="bubble",e}(bd),Xd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$d=function(t){function e(i,n,r,o){void 0===o&&(o=e.data);var s=t.call(this,i,"groupedAreaTooltip")||this,a=s.size,l=s.padding,c=new Di;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,a-l-.5];var h=new Vn;h.domain=[0,6],h.range=[a-l+.5,l];var d=2*o.length-1,u=[],p=h.convert(0);return o.forEach((function(t,e){var i=c.convert(e);t.forEach((function(t,n){var r=h.convert(t),o=u[n]||(u[n]=[]);o[e]={x:i,y:r},o[d-e]={x:i,y:p}}))})),s.areas=u.reverse().map((function(t){var e=new vi;e.strokeWidth=1,e.fillOpacity=.7;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),s.updateColors(n,r),s.root.append(s.areas),s}return Xd(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="area",e.data=[[1,3,5],[2,6,4],[5,3,1]],e}(bd),qd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zd=function(t){function e(i,n,r,o,s){void 0===o&&(o=e.data),void 0===s&&(s="stackedAreaTooltip");var a=t.call(this,i,s)||this,l=a.size,c=a.padding,h=new Di;h.domain=[0,1,2],h.paddingInner=1,h.paddingOuter=0,h.range=[c+.5,l-c-.5];var d=new Vn;d.domain=[0,16],d.range=[l-c+.5,c+.5];var u=2*o.length-1,p=[];return o.forEach((function(t,e){var i=h.convert(e),n=0;t.forEach((function(t,r){var o=d.convert(n+t),s=p[r]||(p[r]=[]);s[e]={x:i,y:o},s[u-e]={x:i,y:d.convert(n)},n+=t}))})),a.areas=p.map((function(t){var e=new vi;e.strokeWidth=1;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),a.updateColors(n,r),a.root.append(a.areas),a}return qd(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="stackedArea",e.data=[[2,3,2],[3,6,5],[6,2,2]],e}(bd),Jd=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qd=function(t){function e(i,n,r,o){return void 0===o&&(o=e.data),t.call(this,i,n,r,o,"normalizedAreaTooltip")||this}return Jd(e,t),e.chartType="normalizedArea",e.data=Zd.data.map((function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*16}))})),e}(Zd),tu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eu=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},iu=function(t){function e(e,i,n){var r=t.call(this,e,"histogramTooltip")||this,o=r.padding,s=r.size,a=[2,5,11,13,10,6,1],l=new Vn;l.domain=[0,a.length],l.range=[o,s-o];var c=new Vn;c.domain=[0,a.reduce((function(t,e){return Math.max(t,e)}),0)],c.range=[s-o,o];var h=c.convert(0);return r.bars=a.map((function(t,e){var i=c.convert(t),n=l.convert(e),r=l.convert(e+1),o=new Rs;return o.x=n,o.y=i,o.width=r-n,o.height=h-i,o.strokeWidth=1,o.crisp=!0,o})),r.updateColors(i,n),r.root.append(r.bars),r}return tu(e,t),e.prototype.updateColors=function(t,e){var i=eu(t,1)[0],n=eu(e,1)[0];this.bars.forEach((function(t){t.fill=i,t.stroke=n}))},e.chartType="histogram",e}(bd),nu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ru=function(t){function e(e,i,n){var r=t.call(this,e,"columnLineComboTooltip")||this;r.columnData=[3,4],r.lineData=[[5,4,6,5,4]];var o=r,s=o.root,a=o.columnData,l=o.lineData,c=o.size,h=o.padding;return r.columns=xd({stacked:!1,root:s,data:a,size:c,padding:h,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(r.columns),r.lines=Cd(s,l,c,h),r.updateColors(i,n),r}return nu(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.chartType="columnLineCombo",e}(bd),ou=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),su=function(t){function e(e,i,n){var r=t.call(this,e,"areaColumnComboTooltip")||this;r.columnData=[3,4.5],r.areaData=[[5,4,6,5,4]];var o=r,s=o.root,a=o.columnData,l=o.areaData,c=o.size,h=o.padding;r.columns=xd({stacked:!1,root:s,data:a,size:c,padding:h,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var d=new Di;d.range=[h,c-h],d.domain=[0,1,2,3,4],d.paddingInner=1,d.paddingOuter=0;var u=new Vn;u.range=[c-h,h],u.domain=[0,6];var p=[],f=u.convert(0),g=d.convert(0);return l.forEach((function(t,e){var i=p[e]||(p[e]=[]);t.forEach((function(t,e){var n=t,r=e,o=d.convert(r),s=u.convert(n);i[e]={x:o,y:s}}));var n=d.convert(t.length-1);p[e].push({x:n,y:f},{x:g,y:f})})),r.areas=p.map((function(t){var e=new vi;e.strokeWidth=1,e.fillOpacity=.8;var i=e.path;return t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),e})),s.append(r.areas),s.append([].concat.apply([],r.columns)),r.updateColors(i,n),r}return ou(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.columns.forEach((function(i,n){i.fill=t[n+1],i.stroke=e[n+1]}))},e.chartType="areaColumnCombo",e}(bd),au=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lu=function(t){function e(e,i,n){var r=t.call(this,e,"customComboTooltip")||this;r.columnData=[3,4],r.lineData=[[5,4,6,5,4]];var o=r,s=o.root,a=o.columnData,l=o.lineData,c=o.size,h=o.padding;r.columns=xd({stacked:!1,root:s,data:a,size:c,padding:h,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(r.columns),r.lines=Cd(s,l,c,h);var d=new Ei;d.x1=h,d.y1=h,d.x2=h,d.y2=c-h+3,d.stroke="grey";var u=new Ei;u.x1=h-3+1,u.y1=c-h,u.x2=c-h+1,u.y2=c-h,u.stroke="grey";var p=new vi;return r.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,s.append([u,d,p]),r.updateColors(i,n),r}return au(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.prototype.buildPenIconPath=function(t){var e=t.path;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)},e.chartType="customCombo",e}(yd),cu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hu=function(){return(hu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},du=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},uu={columnGroup:{column:wd,stackedColumn:kd,normalizedColumn:Dd},barGroup:{bar:Ed,stackedBar:Rd,normalizedBar:_d},pieGroup:{pie:Bd,doughnut:Fd},lineGroup:{line:zd},scatterGroup:{scatter:Hd,bubble:Ud},areaGroup:{area:$d,stackedArea:Zd,normalizedArea:Qd},histogramGroup:{histogram:iu},combinationGroup:{columnLineCombo:ru,areaColumnCombo:su,customCombo:lu}},pu=function(e){function i(n,r,o,s){void 0===s&&(s=t.DEFAULT_CHART_GROUPS);var a=e.call(this,i.TEMPLATE)||this;return a.wrappers={},a.chartController=n,a.fills=r,a.strokes=o,a.chartGroups=hu({},s),a}return cu(i,e),i.prototype.init=function(){var e=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(t){return"customCombo"!==t})));var i=this.getGui();Object.keys(this.chartGroups).forEach((function(n){var r=e.chartGroups[n],o=e.createBean(new t.AgGroupComponent({title:e.chartTranslationService.translate(n),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));r.forEach((function(i){var r,s=null===(r=uu[n])||void 0===r?void 0:r[i];if(s){var a=document.createElement("div");a.classList.add("ag-chart-mini-thumbnail");var l=s.chartType;e.addManagedListener(a,"click",(function(){e.chartController.setChartType(l),e.updateSelectedMiniChart()})),e.wrappers[l]=a,e.createBean(new s(a,e.fills,e.strokes)),o.addItem(a)}else uu[n]?t._.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"."+i+"'")}),"invalid_chartGroupsDef"+i+"_"+n):t._.doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+n+"'")}),"invalid_chartGroupsDef"+n)})),i.appendChild(o.getGui())})),this.updateSelectedMiniChart()},i.prototype.updateSelectedMiniChart=function(){var t=this.chartController.getChartType();for(var e in this.wrappers){var i=e===t;this.wrappers[e].classList.toggle("ag-selected",i)}},i.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',du([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),du([t.PostConstruct],i.prototype,"init",null),i}(t.Component),fu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},yu=function(e){function i(t){var n=e.call(this,i.TEMPLATE)||this;return n.miniChartsContainers=[],n.cardItems=[],n.activePaletteIndex=0,n.palettes=[],n.themes=[],n.chartController=t,n}return fu(i,e),i.prototype.postConstruct=function(){var e=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",t._.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",t._.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",(function(){return e.setActivePalette(e.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return e.setActivePalette(e.getNext(),"right")})),this.addManagedListener(this.chartController,uh.EVENT_CHART_TYPE_CHANGED,(function(){return e.resetPalettes(!0)})),this.addManagedListener(this.chartController,uh.EVENT_CHART_API_UPDATE,(function(){return e.resetPalettes(!0)})),this.scrollSelectedIntoView()},i.prototype.scrollSelectedIntoView=function(){var t=this;setTimeout((function(){var e=t.miniChartsContainers.find((function(t){return!t.getGui().classList.contains("ag-hidden")})).getGui().querySelector(".ag-selected");if(e){var i=e.offsetParent;i&&t.eMiniChartsContainer.scrollTo(0,i.offsetTop)}}),250)},i.prototype.resetPalettes=function(e){var i,n,r=this,o=this.chartController.getPalettes(),s=null===(n=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.settingsPanel)||void 0===n?void 0:n.chartGroupsDef;t._.shallowCompare(o,this.palettes)&&!e||this.isAnimating||(this.palettes=o,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(t){return t===r.chartController.getChartThemeName()})),this.cardItems=[],t._.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(t,e){var i=r.activePaletteIndex===e,n=t.fills,o=t.strokes,a=r.createBean(new pu(r.chartController,n,o,s));r.miniChartsContainers.push(a),r.eMiniChartsContainer.appendChild(a.getGui()),r.addCardLink(e),i?a.updateSelectedMiniChart():a.setDisplayed(!1)})),t._.setDisplayed(this.eNavBar,this.palettes.length>1),t._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},i.prototype.addCardLink=function(t){var e=this,i=document.createElement("div");i.classList.add("ag-chart-settings-card-item"),this.addManagedListener(i,"click",(function(){e.setActivePalette(t,t<e.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(i),this.cardItems.push(i)},i.prototype.getPrev=function(){var t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t},i.prototype.getNext=function(){var t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t},i.prototype.setActivePalette=function(e,i){var n=this;if(!this.isAnimating&&this.activePaletteIndex!==e){t._.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var r=this.miniChartsContainers[this.activePaletteIndex],o=r.getGui(),s=this.miniChartsContainers[e],a=s.getGui();r.updateSelectedMiniChart(),s.updateSelectedMiniChart();var l="left"===i?-1:1,c=a.style.left=t._.getAbsoluteWidth(this.getGui())*l+"px";this.activePaletteIndex=e,this.isAnimating=!0;s.setDisplayed(!0),r.addCssClass("ag-animating"),s.addCssClass("ag-animating"),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout((function(){o.style.left=-parseFloat(c)+"px",a.style.left="0px"}),0),window.setTimeout((function(){n.isAnimating=!1,r.removeCssClass("ag-animating"),s.removeCssClass("ag-animating"),r.setDisplayed(!1)}),300)}},i.prototype.destroyMiniCharts=function(){t._.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},i.prototype.destroy=function(){this.destroyMiniCharts(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',gu([t.Autowired("resizeObserverService")],i.prototype,"resizeObserverService",void 0),gu([t.RefSelector("eMiniChartsContainer")],i.prototype,"eMiniChartsContainer",void 0),gu([t.RefSelector("eNavBar")],i.prototype,"eNavBar",void 0),gu([t.RefSelector("eCardSelector")],i.prototype,"eCardSelector",void 0),gu([t.RefSelector("ePrevBtn")],i.prototype,"ePrevBtn",void 0),gu([t.RefSelector("eNextBtn")],i.prototype,"eNextBtn",void 0),gu([t.PostConstruct],i.prototype,"postConstruct",null),i}(t.Component),vu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},bu=function(e){function i(t){var i=e.call(this)||this;i.tabs=[];var n=t.controller,r=t.panels,o=t.chartOptionsService;return i.chartController=n,i.chartOptionsService=o,i.panels=r,i}return vu(i,e),i.prototype.init=function(){var e=this;this.panels.forEach((function(t){var i=t.replace("chart","").toLowerCase(),n=e.createTab(t,i,e.getPanelClass(i)),r=n.comp,o=n.tab;e.tabs.push(o),e.addDestroyFunc((function(){return e.destroyBean(r)}))})),this.tabbedLayout=new t.TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},i.prototype.createTab=function(e,i,n){var r=document.createElement("div");r.classList.add("ag-chart-tab","ag-chart-"+i);var o=new n(this.chartController,this.chartOptionsService);this.getContext().createBean(o),r.appendChild(o.getGui());var s=document.createElement("div"),a=this.chartTranslationService.translate(i);return s.innerText=a,{comp:o,tab:{title:s,titleLabel:a,bodyPromise:t.AgPromise.resolve(r),getScrollableContainer:function(){return r.querySelector(".ag-scrollable-container")||r},name:e}}},i.prototype.showTab=function(t){var e=this.tabs[t];this.tabbedLayout.showItem(e)},i.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},i.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),e.prototype.destroy.call(this)},i.prototype.getPanelClass=function(t){switch(t){case i.TAB_DATA:return bh;case i.TAB_FORMAT:return pd;default:return yu}},i.TAB_DATA="data",i.TAB_FORMAT="format",mu([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),mu([t.PostConstruct],i.prototype,"init",null),i}(t.Component),xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Su=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},wu=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},Ou=function(e){function i(t,n,r,o){var s=e.call(this,i.TEMPLATE)||this;return s.eChartContainer=t,s.eMenuPanelContainer=n,s.chartController=r,s.chartOptionsService=o,s.buttons={chartSettings:["menu",function(){return s.showMenu(s.defaultPanel)}],chartData:["menu",function(){return s.showMenu("chartData")}],chartFormat:["menu",function(){return s.showMenu("chartFormat")}],chartLink:["linked",function(t){return s.toggleDetached(t)}],chartUnlink:["unlinked",function(t){return s.toggleDetached(t)}],chartDownload:["save",function(){return s.saveChart()}]},s.panels=[],s.buttonListenersDestroyFuncs=[],s.menuVisible=!1,s}return xu(i,e),i.prototype.postConstruct=function(){var e=this;this.createButtons(),this.addManagedListener(this.eventService,t.Events.EVENT_CHART_CREATED,(function(t){var i;t.chartId===e.chartController.getChartId()&&(Boolean(null===(i=e.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel)&&e.showMenu(e.defaultPanel,!1))})),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,uh.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},i.prototype.isVisible=function(){return this.menuVisible},i.prototype.getExtraPaddingDirections=function(){var t=this,e=[];return["chartLink","chartUnlink","chartDownload"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push("top"),["chartSettings","chartData","chartFormat"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push(this.gridOptionsService.is("enableRtl")?"left":"right"),e},i.prototype.getToolbarOptions=function(){var e,i,n,r=this;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){var o=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],s={defaultItems:o},a=(h=this.gridOptionsService.getCallback("getChartToolbarItems"))?h(s).filter((function(e){if(!t.CHART_TOOLBAR_ALLOW_LIST.includes(e)){var i=t.CHART_TOOL_PANEL_ALLOW_LIST.includes(e)?"AG Grid: '"+e+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+e+"' is not a valid Chart Toolbar Option";return console.warn(i),!1}return!0})):o,l=null===(i=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.panels)||void 0===i?void 0:i.map((function(e){var i=t.CHART_TOOL_PANEL_MENU_OPTIONS[e];return i||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+e+"'"),i})).filter((function(t){return Boolean(t)}));this.panels=l||Object.values(t.CHART_TOOL_PANEL_MENU_OPTIONS),this.chartController.isPivotChart()&&(this.panels=this.panels.filter((function(t){return"chartData"!==t})));var c=null===(n=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===n?void 0:n.defaultToolPanel;return this.defaultPanel=c&&t.CHART_TOOL_PANEL_MENU_OPTIONS[c]||this.panels[0],this.panels.length>0?wu([this.panels[0]],Su(a)):a}var h,d=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];if(h=this.gridOptionsService.getCallback("getChartToolbarItems")){var u=this.gridOptionsService.is("suppressChartToolPanelsButton");d=h(s={defaultItems:u?d:t.CHART_TOOLBAR_ALLOW_LIST}).filter((function(e){if(!r.buttons[e])return console.warn("AG Grid: '"+e+"' is not a valid Chart Toolbar Option"),!1;if(!u&&t.CHART_TOOL_PANEL_ALLOW_LIST.includes(e)){var i="AG Grid: '"+e+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead";return console.warn(i),!1}return!0})),u||(d=d.concat(t.CHART_TOOL_PANEL_ALLOW_LIST))}this.chartController.isPivotChart()&&(d=d.filter((function(t){return"chartData"!==t})));var p=["chartUnlink","chartLink","chartDownload"];return this.panels=d.filter((function(t){return-1===p.indexOf(t)})),this.defaultPanel=this.panels[0],d.filter((function(t){return-1!==p.indexOf(t)||r.panels.length&&t===r.panels[0]}))},i.prototype.toggleDetached=function(t){var e=t.target,i=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!i),e.classList.toggle("ag-icon-unlinked",i);var n=i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",r=this.chartTranslationService.translate(n);r&&(e.title=r),this.chartController.detachChartRange()},i.prototype.createButtons=function(){var e=this;this.buttonListenersDestroyFuncs.forEach((function(t){return t()})),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var i=this.eMenu;t._.clearElement(i),this.chartToolbarOptions.forEach((function(n){var r=e.buttons[n],o=Su(r,2),s=o[0],a=o[1],l=t._.createIconNoSpan(s,e.gridOptionsService,void 0,!0);l.classList.add("ag-chart-menu-icon");var c=e.chartTranslationService.translate(n+"ToolbarTooltip");c&&l instanceof HTMLElement&&(l.title=c),e.buttonListenersDestroyFuncs.push(e.addManagedListener(l,"click",a)),i.appendChild(l)}))},i.prototype.saveChart=function(){var t={type:i.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)},i.prototype.createMenuPanel=function(e){var i=this,n=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new t.AgPanel({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new bu({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(r,t.Component.EVENT_DESTROYED,(function(){return i.destroyBean(i.tabbedMenu)})),new t.AgPromise((function(t){window.setTimeout((function(){r.setBodyComponent(i.tabbedMenu),i.tabbedMenu.showTab(e),t(r),i.addManagedListener(i.eChartContainer,"click",(function(t){i.getGui().contains(t.target)||i.menuVisible&&i.hideMenu()}))}),100)}))},i.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},i.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},i.prototype.showMenu=function(t,e){var i=this;if(void 0===e&&(e=!0),e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{var n=t||this.defaultPanel,r=this.panels.indexOf(n);r<0&&(console.warn("AG Grid: '"+t+"' is not a valid Chart Tool Panel name"),r=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(r),this.showContainer()):this.createMenuPanel(r).then(this.showContainer.bind(this))}e||setTimeout((function(){i.isAlive()&&i.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)},i.prototype.hideMenu=function(){var t=this;this.hideParent(),window.setTimeout((function(){t.menuVisible=!1,t.refreshMenuClasses()}),500)},i.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},i.prototype.showParent=function(t){this.eMenuPanelContainer.style.minWidth=t+"px"},i.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},i.EVENT_DOWNLOAD_CHART="downloadChart",i.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',Cu([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Cu([t.RefSelector("eMenu")],i.prototype,"eMenu",void 0),Cu([t.RefSelector("eHideButton")],i.prototype,"eHideButton",void 0),Cu([t.RefSelector("eHideButtonIcon")],i.prototype,"eHideButtonIcon",void 0),Cu([t.PostConstruct],i.prototype,"postConstruct",null),i}(t.Component),ku=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tu=function(){return(Tu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Du=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Pu=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eu=function(e){function i(t){var n=e.call(this,i.TEMPLATE)||this;return n.chartMenu=t,n.destroyableChartListeners=[],n.editing=!1,n}return ku(i,e),i.prototype.init=function(){var t=this;this.addManagedListener(this.getGui(),"keydown",(function(e){t.editing&&"Enter"===e.key&&!e.shiftKey&&(t.handleEndEditing(),e.preventDefault())})),this.addManagedListener(this.getGui(),"input",(function(){t.editing&&t.updateHeight()})),this.addManagedListener(this.getGui(),"blur",(function(){return t.endEditing()}))},i.prototype.refreshTitle=function(t,e){var i,n,r=this;this.chartController=t,this.chartOptionsService=e;try{for(var o=Pu(this.destroyableChartListeners),s=o.next();!s.done;s=o.next()){(0,s.value)()}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}this.destroyableChartListeners=[];var a=this.chartController.getChartProxy().getChart(),l=a.scene.canvas.element,c=this.addManagedListener(l,"dblclick",(function(t){var e=a.title;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){var i=e.node.computeBBox(),n=e.node.inverseTransformPoint(i.x,i.y);r.startEditing(Tu(Tu({},i),n),l.width)}})),h=!1,d=this.addManagedListener(l,"mousemove",(function(t){var e=a.title,i=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));h!==i&&(l.style.cursor=i?"pointer":""),h=i}));this.destroyableChartListeners=[c,d]},i.prototype.startEditing=function(t,e){if(!(this.chartMenu&&this.chartMenu.isVisible()||this.editing)){this.editing=!0;var i=Math.max(Math.min(t.width+20,e),300),n=this.getGui();n.classList.add("currently-editing");var r=n.style;r.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),r.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),r.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),r.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",r.color=this.chartOptionsService.getChartOption("title.color");var o=this.chartOptionsService.getChartOption("title.text"),s=o===this.chartTranslationService.translate("titlePlaceholder");n.value=s?"":o;var a=o.split(/\r?\n/g).length;r.left=Math.round(t.x+t.width/2-i/2-1)+"px",r.top=Math.round(t.y+t.height/2-a*this.getLineHeight()/2-2)+"px",r.width=Math.round(i)+"px",r.lineHeight=this.getLineHeight()+"px",this.updateHeight(),n.focus()}},i.prototype.updateHeight=function(){var t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,i)*this.getLineHeight())+4+"px"},i.prototype.getLineHeight=function(){var t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},i.prototype.handleEndEditing=function(){var t=this,e=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate((function(){return t.endEditing()})),this.chartOptionsService.awaitChartOptionUpdate((function(){t.chartOptionsService.setChartOption("title.color",e)}))},i.prototype.endEditing=function(){var t=this;if(this.editing){this.editing=!1;var e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate((function(){t.eventService.dispatchEvent({type:"chartTitleEdit"})}))}},i.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',Du([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Du([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Mu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ru=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Au=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Mu(i,e),i.prototype.getData=function(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&t.pivoting&&this.updatePivotKeysForSSRM();var e=this.extractRowsFromGridRowModel(t);return e.chartData=this.aggregateRowsByDimension(t,e.chartData),e},i.prototype.extractRowsFromGridRowModel=function(e){var n,r=this,o=[],s={},a={},l={},c={},h=[];if(e.crossFiltering)c=this.getFilteredRowNodes(),n=(h=this.getAllRowNodes()).length;else{var d=this.gridRowModel.getRowCount()-1;n=(e.endRow>=0?Math.min(e.endRow,d):d)-e.startRow+1}for(var u=function(t){var n={},d=e.crossFiltering?h[t]:p.gridRowModel.getRow(t+e.startRow);e.dimensionCols.forEach((function(o){var s=o.colId,c=r.columnModel.getGridColumn(s);if(c){var h=r.valueService.getValue(c,d);if(e.grouping){var u=h&&h.toString?String(h.toString()):"",p=i.getGroupLabels(d,u);n[s]={labels:p,toString:function(){return this.labels.filter((function(t){return!!t})).reverse().join(" - ")}},d.group&&(a[p.toString()]=t);var f=p.slice(1,p.length).toString();f&&(l[f]=a[f])}else n[s]=h}else n[Hu.DEFAULT_CATEGORY]=t+1})),e.valueCols.forEach((function(t){var i=[],o=t.getColDef().pivotKeys;o&&(i=o.slice());var a=t.getColDef().headerName;a&&i.push(a),i.length>0&&(s[t.getId()]=i);var l=t.getColId();if(e.crossFiltering){var h=l+"-filtered-out",u=null!=(p=r.valueService.getValue(t,d))&&"function"==typeof p.toNumber?p.toNumber():p;c[d.id]?(n[l]=u,n[h]=e.aggFunc||e.isScatter?void 0:0):(n[l]=e.aggFunc||e.isScatter?void 0:0,n[h]=u)}else{var p;(p=r.valueService.getValue(t,d))&&p.hasOwnProperty("toString")&&(p=parseFloat(p.toString())),n[l]=null!=p&&"function"==typeof p.toNumber?p.toNumber():p}})),d.footer&&(n.footer=!0),o.push(n)},p=this,f=0;f<n;f++)u(f);if(e.grouping){var g=t._.values(l);o=o.filter((function(e,i){return!e.footer&&!t._.includes(g,i)}))}return{chartData:o,columnNames:s}},i.prototype.aggregateRowsByDimension=function(e,i){var n=this,r=e.dimensionCols;if(!e.aggFunc||0===r.length)return i;var o=t._.last(r),s=o&&o.colId,a={},l=[];return i.forEach((function(t){var e=a;r.forEach((function(i){var n=i.colId,o=t[n];if(n===s){var a=e[o];a||(a={__children:[]},r.forEach((function(e){var i=e.colId;a[i]=t[i]})),e[o]=a,l.push(a)),a.__children.push(t)}else e[o]||(e[o]={}),e=e[o]}))})),t.ModuleRegistry.assertRegistered(t.ModuleNames.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&l.forEach((function(i){return e.valueCols.forEach((function(r){if(e.crossFiltering)e.valueCols.forEach((function(t){var r=t.getColId(),o=i.__children.filter((function(t){return void 0!==t[r]})).map((function(t){return t[r]})),s=n.aggregationStage.aggregateValues(o,e.aggFunc);i[t.getId()]=s&&void 0!==s.value?s.value:s;var a=r+"-filtered-out",l=i.__children.filter((function(t){return void 0!==t[a]})).map((function(t){return t[a]})),c=n.aggregationStage.aggregateValues(l,e.aggFunc);i[a]=c&&void 0!==c.value?c.value:c}));else{var o=i.__children.map((function(t){return t[r.getId()]})),s=0;t.ModuleRegistry.assertRegistered(t.ModuleNames.RowGroupingModule,"Charting Aggregation",n.context.getGridId())&&(s=n.aggregationStage.aggregateValues(o,e.aggFunc)),i[r.getId()]=s&&void 0!==s.value?s.value:s}}))})),l},i.prototype.updatePivotKeysForSSRM=function(){var t=this.columnModel.getSecondaryColumns();if(t){var e=this.extractPivotKeySeparator(t);t.forEach((function(t){if(""===e)t.getColDef().pivotKeys=[];else{var i=t.getColId().split(e);t.getColDef().pivotKeys=i.slice(0,i.length-1)}}))}},i.prototype.extractPivotKeySeparator=function(t){if(0===t.length)return"";var e=function(t,i){var n=t.getGroupId();return t.getParent()?e(t.getParent(),n):i.split(n)[1][0]},i=t[0];return null==i.getParent()?"":e(i.getParent(),i.getColId())},i.getGroupLabels=function(t,e){for(var i=[e];t&&0!==t.level;)(t=t.parent)&&i.push(t.key);return i},i.prototype.getFilteredRowNodes=function(){var t={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(e){t[e.id]=e})),t},i.prototype.getAllRowNodes=function(){var t=[];return this.gridRowModel.forEachNode((function(e){t.push(e)})),this.sortRowNodes(t)},i.prototype.sortRowNodes=function(t){var e=this.sortController.getSortOptions();return!e||0==e.length?t:this.rowNodeSorter.doFullSort(t,e)},Ru([t.Autowired("rowModel")],i.prototype,"gridRowModel",void 0),Ru([t.Autowired("valueService")],i.prototype,"valueService",void 0),Ru([t.Autowired("columnModel")],i.prototype,"columnModel",void 0),Ru([t.Autowired("rowNodeSorter")],i.prototype,"rowNodeSorter",void 0),Ru([t.Autowired("sortController")],i.prototype,"sortController",void 0),Ru([t.Optional("aggregationStage")],i.prototype,"aggregationStage",void 0),i}(t.BeanStub),_u=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Nu=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return _u(i,e),i.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},i.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},i.prototype.getColDisplayName=function(t){return this.columnModel.getDisplayNameForColumn(t,"chart")},i.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},i.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},i.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},i.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},i.prototype.getChartColumns=function(){var t=this,e=this.columnModel.getAllDisplayedColumns(),i=new Set,n=new Set;return e.forEach((function(e){var r=e.getColDef(),o=r.chartDataType;if(o)switch(o){case"category":case"time":return void i.add(e);case"series":return void n.add(e);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+o+"' supplied, instead use 'category', 'series' or 'excluded'")}"ag-Grid-AutoColumn"!==r.colId?e.isPrimary()?(t.isNumberCol(e)?n:i).add(e):n.add(e):i.add(e)})),{dimensionCols:i,valueCols:n}},i.prototype.isNumberCol=function(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;var e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;var i=this.valueService.getValue(t,e);return null==i&&(i=this.extractLeafData(e,t)),null!=i&&"function"==typeof i.toNumber&&(i=i.toNumber()),"number"==typeof i},i.prototype.extractLeafData=function(t,e){if(!t.allLeafChildren)return null;for(var i=0;i<t.allLeafChildren.length;i++){var n=t.allLeafChildren[i],r=this.valueService.getValue(e,n);if(null!=r)return r}return null},Lu([t.Autowired("columnModel")],i.prototype,"columnModel",void 0),Lu([t.Autowired("valueService")],i.prototype,"valueService",void 0),Lu([t.Autowired("rowRenderer")],i.prototype,"rowRenderer",void 0),i=Lu([t.Bean("chartColumnService")],i)}(t.BeanStub),Iu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},ju=function(e){function i(t){var i,n=e.call(this)||this;return n.suppressComboChartWarnings=!1,n.chartDataModel=t,n.seriesChartTypes=null!==(i=t.params.seriesChartTypes)&&void 0!==i?i:[],n}return Iu(i,e),i.prototype.init=function(){this.initComboCharts()},i.prototype.update=function(t){this.seriesChartTypes=null!=t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},i.prototype.initComboCharts=function(){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},i.prototype.updateSeriesChartTypes=function(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(t){var e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},i.prototype.updateSeriesChartTypesForCustomCombo=function(){var t=this;this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(t){return i.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn("AG Grid: invalid chartType '"+t.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),t.chartType="line"),t}));var e=this.chartDataModel.valueColState.map((function(e){t.savedCustomSeriesChartTypes&&0!==t.savedCustomSeriesChartTypes.length||(t.savedCustomSeriesChartTypes=t.seriesChartTypes);var i=t.savedCustomSeriesChartTypes.find((function(t){return t.colId===e.colId}));return i||(e.selected&&!t.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+e.colId+"', defaulting to 'line'."),{colId:e.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=e,this.savedCustomSeriesChartTypes=e,this.suppressComboChartWarnings=!0},i.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var t=this.chartDataModel,e=t.chartType,i=t.valueColState,n="columnLineCombo"===e?"groupedColumn":"stackedArea",r="columnLineCombo"===e?"line":"groupedColumn",o=i.filter((function(t){return t.selected})),s=Math.ceil(o.length/2);this.seriesChartTypes=o.map((function(t,e){var i=e>=s?r:n;return{colId:t.colId,chartType:i,secondaryAxis:!1}}))},i.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],Fu([t.PostConstruct],i.prototype,"init",null),i}(t.BeanStub),Bu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gu=function(){return(Gu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},zu=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Wu=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Vu=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},Hu=function(e){function i(t){var i=e.call(this)||this;return i.unlinked=!1,i.chartData=[],i.valueColState=[],i.dimensionColState=[],i.columnNames={},i.crossFiltering=!1,i.grouping=!1,i.params=t,i.chartId=t.chartId,i.chartType=t.chartType,i.pivotChart=t.pivotChart,i.chartThemeName=t.chartThemeName,i.aggFunc=t.aggFunc,i.referenceCellRange=t.cellRange,i.suppliedCellRange=t.cellRange,i.suppressChartRanges=t.suppressChartRanges,i.unlinked=!!t.unlinkChart,i.crossFiltering=!!t.crossFiltering,i}return Bu(i,e),i.prototype.init=function(){this.datasource=this.createManagedBean(new Au),this.chartColumnService=this.createManagedBean(new Nu),this.comboChartModel=this.createManagedBean(new ju(this)),this.updateCellRanges(),this.updateData()},i.prototype.updateModel=function(t){var e=t.cellRange,i=t.chartType,n=t.pivotChart,r=t.chartThemeName,o=t.aggFunc,s=t.suppressChartRanges,a=t.unlinkChart,l=t.crossFiltering,c=t.seriesChartTypes;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=n,this.chartThemeName=r,this.aggFunc=o,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=s,this.unlinked=!!a,this.crossFiltering=!!l,this.updateSelectedDimension(null==e?void 0:e.columns),this.updateCellRanges(),(this.isComboChart()||c)&&this.comboChartModel.update(c),this.unlinked||this.updateData()},i.prototype.updateCellRanges=function(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var e=this.chartColumnService.getChartColumns(),i=e.dimensionCols,n=e.valueCols,r=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(i,r,t),this.setValueCellRange(n,r,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},i.prototype.updateData=function(){var e=this.getRowIndexes(),i=e.startRow,n=e.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var r={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:i,endRow:n,isScatter:t._.includes(["scatter","bubble"],this.chartType)},o=this.datasource.getData(r),s=o.chartData,a=o.columnNames;this.chartData=s,this.columnNames=a},i.prototype.isGrouping=function(){var t=this.gridOptionsService.isTreeData(),e=t?null:this.chartColumnService.getRowGroupColumns(),i=t||e&&e.length>0,n=this.getSelectedDimension().colId,r=this.chartColumnService.getGroupDisplayColumns().map((function(t){return t.getColId()})).some((function(t){return t===n}));return!!i&&r},i.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(t){return t.selected})).map((function(t){return t.column}))},i.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(t){return t.selected}))[0]},i.prototype.getColDisplayName=function(t){return this.chartColumnService.getColDisplayName(t)},i.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},i.prototype.getChartDataType=function(t){var e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0},i.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},i.prototype.createCellRange=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:i,startColumn:e===t.CellRangeType.DIMENSION?i[0]:this.referenceCellRange.startColumn,type:e}},i.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return t._.convertToSet(this.chartColumnService.getAllDisplayedColumns());var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push.apply(e,Vu([],Wu(this.dimensionCellRange.columns))),this.valueCellRange&&e.push.apply(e,Vu([],Wu(this.valueCellRange.columns))),t._.convertToSet(e)},i.prototype.getRowIndexes=function(){var t=0,e=0,i=this.rangeService,n=this.valueCellRange;if(i&&n){t=i.getRangeStartRow(n).rowIndex;var r=i.getRangeEndRow(n);e="bottom"===r.rowPinned?-1:r.rowIndex}return{startRow:t,endRow:e}},i.prototype.resetColumnState=function(){var e=this,n=this.chartColumnService.getChartColumns(),r=n.dimensionCols,o=n.valueCols,s=this.getAllColumnsFromRanges(),a=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,c=1,h=this.suppliedCellRange.columns[0];r.forEach((function(t){var i="ag-Grid-AutoColumn"===t.getColId(),n=!1;e.crossFiltering&&e.aggFunc?h.getColId()===t.getColId()&&(n=!0):n=!!i||!l&&s.has(t),e.dimensionColState.push({column:t,colId:t.getColId(),displayName:e.getColDisplayName(t),selected:n,order:c++}),n&&(l=!0)}));var d={colId:i.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(d);var u=this.referenceCellRange.columns.filter((function(t){return o.has(t)}));o.forEach((function(i){a&&t._.includes(e.referenceCellRange.columns,i)&&(i=u.shift()),e.valueColState.push({column:i,colId:i.getColId(),displayName:e.getColDisplayName(i),selected:s.has(i),order:c++})}))},i.prototype.updateColumnState=function(t){var e=function(e){return e.colId===t.colId},i=this.dimensionColState,n=this.valueColState;i.filter(e).length>0?i.forEach((function(t){return t.selected=e(t)})):n.filter(e).forEach((function(e){return e.selected=t.selected}));var r=Vu(Vu([],Wu(i)),Wu(n)),o=[];r.forEach((function(e,i){i===t.order&&o.push(t.colId),e.colId!==t.colId&&o.push(e.colId)})),r.forEach((function(t){var e=o.indexOf(t.colId);t.order=e>=0?o.indexOf(t.colId):r.length-1})),this.reorderColState()},i.prototype.reorderColState=function(){var t=function(t,e){return t.order-e.order};this.dimensionColState.sort(t),this.valueColState.sort(t)},i.prototype.setDimensionCellRange=function(e,n,r){var o=this;if(this.dimensionCellRange=void 0,r||this.dimensionColState.length){var s=r;if(this.crossFiltering&&this.aggFunc){var a=this.suppliedCellRange.columns[0];s=this.dimensionColState.filter((function(t){return t.colId===a.getColId()}))[0]}else s&&e.has(s.column)||(s=this.dimensionColState.filter((function(t){return t.selected}))[0]);s&&s.colId!==i.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(t.CellRangeType.DIMENSION,s.column))}else e.forEach((function(e){!o.dimensionCellRange&&n.has(e)&&(o.dimensionCellRange=o.createCellRange(t.CellRangeType.DIMENSION,e))}))},i.prototype.setValueCellRange=function(e,i,n){this.valueCellRange=void 0;var r=[];if(e.forEach((function(t){n&&n.colId===t.getColId()?n.selected&&r.push(n.column):i.has(t)&&r.push(t)})),r.length>0){var o=[];this.valueColState.length>0?o=this.valueColState.map((function(t){return t.colId})):i.forEach((function(t){return o.push(t.getColId())})),r.sort((function(t,e){return o.indexOf(t.getColId())-o.indexOf(e.getColId())})),this.valueCellRange=this.createCellRange.apply(this,Vu([t.CellRangeType.VALUE],Wu(r)))}},i.prototype.updateSelectedDimension=function(t){var e=new Set(t.map((function(t){return t.getColId()}))),i=this.dimensionColState.find((function(t){return e.has(t.colId)}))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map((function(t){return Gu(Gu({},t),{selected:t.colId===i.colId})}))},i.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(t.CellRangeType.DIMENSION,e.column))},i.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},i.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",zu([t.Autowired("rangeService")],i.prototype,"rangeService",void 0),zu([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),zu([t.PostConstruct],i.prototype,"init",null),i}(t.BeanStub);function Ku(t){return null!=t.chart?t.chart:t}var Yu=function(){return(Yu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Uu=function(){function e(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=Kc(this.chartType),null==this.chart?this.chart=_c.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return e.prototype.getChart=function(){return Ku(this.chart)},e.prototype.getChartRef=function(){return this.chart},e.prototype.downloadChart=function(t,e,i){var n=this.chart,r=Ku(n),o=e||(r.title?r.title.text:"chart"),s=t||{},a=s.width,l=s.height;_c.download(n,{width:a,height:l,fileName:o,fileFormat:i})},e.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},e.prototype.getChartOptions=function(){return this.chart.getOptions()},e.prototype.getChartThemeOverrides=function(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}},e.prototype.getChartPalette=function(){return Al(this.getChartOptions().theme).palette},e.prototype.setPaired=function(t){var e,i=Kc(this.chartProxyParams.chartType);_c.updateDelta(this.chart,{theme:{overrides:(e={},e[i]={paired:t},e)}})},e.prototype.isPaired=function(){var e=Kc(this.chartProxyParams.chartType);return t._.get(this.getChartThemeOverrides(),e+".paired",!0)},e.prototype.lookupCustomChartTheme=function(t){return Zc(this.chartProxyParams,t)},e.prototype.transformData=function(t,e,i){return i?t.map((function(t,i){var n=t[e],r=n&&n.toString?n.toString():"",o=Yu({},t);return o[e]={id:i,value:n,toString:function(){return r}},o})):t},e.prototype.getCommonChartOptions=function(t){var e,i,n=this.clearThemeOverrides?{}:null!==(i=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==i?i:{},r=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,Yu(Yu({},n),{theme:Yu(Yu({},Xc(this.chartProxyParams,this)),t?{overrides:t}:r),container:this.chartProxyParams.parentElement,mode:"integrated"})},e.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var i=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null==i?void 0:i.overrides)&&void 0!==e?e:{}},e.prototype.destroy=function(t){var e=(void 0===t?{}:t).keepChartInstance;if(void 0!==e&&e)return this.chart;this.destroyChart()},e.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},e}(),Xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$u=function(){return($u=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},qu=function(t){function e(e){var i=t.call(this,e)||this;return i.crossFilteringAllPoints=new Set,i.crossFilteringSelectedPoints=[],i}return Xu(e,t),e.prototype.update=function(t){var e=this.getAxes(t),i=$u($u({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});_c.update(this.getChartRef(),i)},e.prototype.getData=function(t,e){var i,n=["area","line"].includes(this.standaloneChartType),r="bar"===this.standaloneChartType?"left":"bottom",o="category"===(null===(i=e.find((function(t){return t.position===r})))||void 0===i?void 0:i.type);return this.crossFiltering&&n?this.getCrossFilterData(t):this.getDataTransformedData(t,o)},e.prototype.getDataTransformedData=function(t,e){return this.transformData(t.data,t.category.id,e)},e.prototype.getXAxisType=function(t){return t.grouping?"groupedCategory":e.isTimeAxis(t)?"time":"category"},e.isTimeAxis=function(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;var e=t.data[0];return(e&&e[t.category.id])instanceof Date},e.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},e.prototype.crossFilteringPointSelected=function(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)},e.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},e.prototype.extractLineAreaCrossFilterSeries=function(t,e){var i=this;return t.map((function(t){var n;return t.yKey=(n=t.yKey,"area"===i.standaloneChartType?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?n+"-total":n:n+"-total"),t.listeners={nodeClick:function(e){var n=e.datum[t.xKey],r=e.event.metaKey||e.event.ctrlKey;i.crossFilteringAddSelectedPoint(r,n),i.crossFilterCallback(e)}},t.marker={formatter:function(t){var n=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:i.crossFilteringPointSelected(n)?8:0}}},"area"===i.standaloneChartType&&(t.fillOpacity=i.crossFilteringDeselectedPoints()?.3:1),"line"===i.standaloneChartType&&(t.strokeOpacity=i.crossFilteringDeselectedPoints()?.3:1),t}))},e.prototype.getCrossFilterData=function(t){var e=this;this.crossFilteringAllPoints.clear();var i=t.fields[0].colId,n=i+"-filtered-out",r=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map((function(o){var s=o[t.category.id];e.crossFilteringAllPoints.add(s);var a=e.crossFilteringPointSelected(s);return"area"===e.standaloneChartType&&r===t.chartId&&(o[i+"-total"]=a?o[i]:o[i]+o[n]),"line"===e.standaloneChartType&&(o[i+"-total"]=a?o[i]:o[i]+o[n]),o}))},e.prototype.crossFilteringAddSelectedPoint=function(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]},e}(Uu);function Zu(t,e){return!1!==e.clone&&e.isMergeableObject(t)?np(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function Ju(t,e,i){return t.concat(e).map((function(t){return Zu(t,i)}))}function Qu(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function tp(t,e){try{return e in t}catch(t){return!1}}function ep(t,e,i){void 0===t&&(t={}),void 0===e&&(e={});var n={};return i.isMergeableObject(t)&&Qu(t).forEach((function(e){n[e]=Zu(t[e],i)})),Qu(e).forEach((function(r){(function(t,e){return tp(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(tp(t,r)&&i.isMergeableObject(e[r])?n[r]=function(t,e){if(!e.customMerge)return np;var i=e.customMerge(t);return"function"==typeof i?i:np}(r,i)(t[r],e[r],i):n[r]=Zu(e[r],i))})),n}function ip(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}(t)}function np(t,e,i){(i=i||{}).arrayMerge=i.arrayMerge||Ju,i.isMergeableObject=i.isMergeableObject||ip,i.cloneUnlessOtherwiseSpecified=Zu;var n=Array.isArray(e);return n===Array.isArray(t)?n?i.arrayMerge(t,e,i):ep(t,e,i):Zu(e,i)}function rp(t,e){var i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return e?"rgba("+i+", "+n+", "+r+", "+e+")":"rgba("+i+", "+n+", "+r+")"}function op(t,e){return t.map((function(t){var i=Ot.fromString(t);return new Ot(i.r,i.g,i.b,e).toHexString()}))}var sp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ap=function(){return(ap=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},lp=function(e){function i(t){return e.call(this,t)||this}return sp(i,e),i.prototype.getAxes=function(t){var e="bar"===this.standaloneChartType,i=[{type:this.getXAxisType(t),position:e?"left":"bottom"},{type:"number",position:e?"bottom":"left"}];if(this.isNormalised()){var n=i[1];n.label=ap(ap({},n.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return i},i.prototype.getSeries=function(e){var i=this,n=!this.crossFiltering&&t._.includes(["groupedColumn","groupedBar"],this.chartType),r=e.fields.map((function(t){return{type:i.standaloneChartType,grouped:n,normalizedTo:i.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:t.colId,yName:t.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(r):r},i.prototype.extractCrossFilterSeries=function(t){for(var e,i,n=this,r=this.getChartPalette(),o=function(t){var e=t.yKey+"-filtered-out";return ap(ap({},np({},t)),{yKey:e,fill:rp(t.fill,"0.3"),stroke:rp(t.stroke,"0.3"),hideInLegend:[e]})},s=[],a=0;a<t.length;a++){var l=(e=t[a],i=a,ap(ap({},e),{highlightStyle:{item:{fill:void 0}},fill:null==r?void 0:r.fills[i],stroke:null==r?void 0:r.strokes[i],listeners:{nodeClick:n.crossFilterCallback}}));s.push(l),s.push(o(l))}return s},i.prototype.isNormalised=function(){return!this.crossFiltering&&t._.includes(["normalizedColumn","normalizedBar"],this.chartType)},i}(qu),cp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hp=function(){return(hp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},dp=function(t){function e(e){return t.call(this,e)||this}return cp(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var i=e[1];i.label=hp(hp({},i.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:"normalizedArea"===e.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(e.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},e}(qu),up=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pp=function(t){function e(e){return t.call(this,e)||this}return up(e,t),e.prototype.getAxes=function(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e}(qu),fp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gp=function(){return(gp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},yp=function(t){function e(e){return t.call(this,e)||this}return fp(e,t),e.prototype.update=function(t){var e=t.data,i=t.category,n=gp(gp({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,i.id),series:this.getSeries(t)});_c.update(this.getChartRef(),n)},e.prototype.getSeries=function(t){var i=this,n=t.fields.length,r={currentOffset:0,offsetAmount:n>1?20:40},o=this.getFields(t).map((function(o){var s,a={type:i.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelKey:t.category.id,calloutLabelName:t.category.name};if("doughnut"===i.chartType){var l=e.calculateOffsets(r),c=l.outerRadiusOffset,h=l.innerRadiusOffset,d=o.displayName?{title:{text:o.displayName,showInLegend:n>1}}:void 0;return gp(gp(gp(gp({},a),{outerRadiusOffset:c,innerRadiusOffset:h}),d),{calloutLine:{colors:null===(s=i.getChartPalette())||void 0===s?void 0:s.strokes}})}return a}));return this.crossFiltering?this.extractCrossFilterSeries(o):o},e.prototype.getCrossFilterData=function(t){var e=t.fields[0].colId,i=e+"-filtered-out";return t.data.map((function(t){var n=t[e]+t[i];return t[e+"-total"]=n,t[i]=1,t[e]=t[e]/n,t}))},e.prototype.extractCrossFilterSeries=function(t){var e,i=this,n=this.getChartPalette(),r=t[0],o=r.angleKey,s=gp(gp({},e=r),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:i.crossFilterCallback}});return[function(t,e){var i,r;return gp(gp({},np({},s)),{radiusKey:e+"-filtered-out",fills:op(null!==(i=t.fills)&&void 0!==i?i:n.fills,.3),strokes:op(null!==(r=t.strokes)&&void 0!==r?r:n.strokes,.3),showInLegend:!1})}(r,o),s]},e.calculateOffsets=function(t){var e=t.currentOffset;t.currentOffset-=t.offsetAmount;var i=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:i}},e.prototype.getFields=function(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields},e.prototype.crossFilteringReset=function(){},e}(Uu),vp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mp=function(){return(mp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},bp=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xp=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Cp=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},Sp=function(t){function e(e){return t.call(this,e)||this}return vp(e,t),e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,i=this.isPaired(),n=this.getSeriesDefinitions(t.fields,i),r=t.category.id===Hu.DEFAULT_CATEGORY?void 0:t.category,o=n.map((function(t){return{type:e.standaloneChartType,xKey:t.xField.colId,xName:t.xField.displayName,yKey:t.yField.colId,yName:t.yField.displayName,title:t.yField.displayName+" vs "+t.xField.displayName,sizeKey:t.sizeField?t.sizeField.colId:void 0,sizeName:t.sizeField?t.sizeField.displayName:void 0,labelKey:r?r.id:t.yField.colId,labelName:r?r.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(o,t):o},e.prototype.extractCrossFilterSeries=function(t,e){var i=this,n=e.data,r=this.getChartPalette(),o=function(t){return t+"-filtered-out"},s=t.map((function(t,e){var s=t.sizeKey,a=null==r?void 0:r.fills[e],l=null==r?void 0:r.strokes[e],c=function(t,e){var i,n,r,s=[1/0,-1/0];if(null!=e)try{for(var a=bp(t),l=a.next();!l.done;l=a.next()){var c=l.value,h=null!==(r=c[e])&&void 0!==r?r:c[o(e)];h<s[0]&&(s[0]=h),h>s[1]&&(s[1]=h)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}if(s[0]<=s[1])return s}(n,s),h=mp(mp({},t.marker),{fill:a,stroke:l,domain:c});return mp(mp({},t),{marker:h,highlightStyle:{item:{fill:"yellow"}},listeners:mp(mp({},t.listeners),{nodeClick:i.crossFilterCallback})})}));return Cp(Cp([],xp(s)),xp(s.map((function(t){var e=t.sizeKey,n=t.yKey,r=t.xKey;return null!=e&&(e=o(e)),mp(mp({},t),{yKey:o(n),xKey:o(r),marker:mp(mp({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:e,showInLegend:!1,listeners:mp(mp({},t.listeners),{nodeClick:function(t){var e,n=t.datum[o(r)],s=mp(mp({},t),{xKey:r,datum:mp(mp({},t.datum),(e={},e[r]=n,e))});i.crossFilterCallback(s)}})})}))))},e.prototype.getSeriesDefinitions=function(t,e){if(t.length<2)return[];var i="bubble"===this.chartType;if(e)return i?t.map((function(e,i){return i%3==0?{xField:e,yField:t[i+1],sizeField:t[i+2]}:null})).filter((function(t){return t&&t.yField&&t.sizeField})):t.map((function(e,i){return i%2==0?{xField:e,yField:t[i+1]}:null})).filter((function(t){return t&&t.yField}));var n=t[0];return i?t.map((function(e,i){return i%2==1?{xField:n,yField:e,sizeField:t[i+1]}:null})).filter((function(t){return t&&t.sizeField})):t.filter((function(t,e){return e>0})).map((function(t){return{xField:n,yField:t}}))},e}(qu),wp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Op=function(t){function e(e){return t.call(this,e)||this}return wp(e,t),e.prototype.getSeries=function(t){var e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e}(qu),kp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tp=function(e){function i(t){var i=e.call(this)||this;return i.chartController=t,i}return kp(i,e),i.prototype.getChartOption=function(e){return t._.get(this.getChart(),e,void 0)},i.prototype.setChartOption=function(t,e,i){var n=this,r=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&r.push("cartesian");var o={};r.forEach((function(i){o=np(o,n.createChartOptions({seriesType:i,expression:t,value:e}))})),this.updateChart(o),i||this.raiseChartOptionsChangedEvent()},i.prototype.awaitChartOptionUpdate=function(t){this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){return t()})).catch((function(t){return console.error("AG Grid - chart update failed",t)}))},i.prototype.getAxisProperty=function(e){var i;return t._.get(null===(i=this.getChart().axes)||void 0===i?void 0:i[0],e,void 0)},i.prototype.setAxisProperty=function(t,e){var i,n=this,r=this.getChart(),o={};null===(i=r.axes)||void 0===i||i.forEach((function(i){o=np(o,n.getUpdateAxisOptions(i,t,e))})),this.updateChart(o),this.raiseChartOptionsChangedEvent()},i.prototype.getLabelRotation=function(e){var i=this.getAxis(e);return t._.get(i,"label.rotation",void 0)},i.prototype.setLabelRotation=function(t,e){var i=this.getAxis(t);if(i){var n=this.getUpdateAxisOptions(i,"label.rotation",e);this.updateChart(n),this.raiseChartOptionsChangedEvent()}},i.prototype.getSeriesOption=function(e,n){var r=this.getChart().series.find((function(t){return i.isMatchingSeries(n,t)}));return t._.get(r,e,void 0)},i.prototype.setSeriesOption=function(t,e,i){var n=this.createChartOptions({seriesType:i,expression:"series."+t,value:e});this.updateChart(n),this.raiseChartOptionsChangedEvent()},i.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},i.prototype.setPairedMode=function(t){this.chartController.getChartProxy().setPaired(t)},i.prototype.getAxis=function(t){var e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]},i.prototype.getUpdateAxisOptions=function(t,e,i){var n=Kc(this.getChartType());return["number","category","time","groupedCategory"].includes(t.type)?this.createChartOptions({seriesType:n,expression:"axes."+t.type+"."+e,value:i}):{}},i.prototype.getChartType=function(){return this.chartController.getChartType()},i.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},i.prototype.updateChart=function(t){var e=this.chartController.getChartProxy().getChartRef();_c.updateDelta(e,t)},i.prototype.createChartOptions=function(e){var i=e.seriesType,n=e.expression,r=e.value,o={},s={theme:{overrides:o}};return t._.set(o,i+"."+n,r),s},i.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel(),i={type:t.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(i)},i.isMatchingSeries=function(t,e){return Hc.includes(t)&&e.type===t},i.prototype.destroy=function(){e.prototype.destroy.call(this)},i}(t.BeanStub),Dp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pp=function(){return(Pp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ep=function(t){function e(e){return t.call(this,e)||this}return Dp(e,t),e.prototype.getAxes=function(t){var e=t?t.fields:[],i=new Map(e.map((function(t){return[t.colId,t]}))),n=this.getYKeys(e,t.seriesChartTypes),r=n.primaryYKeys,o=n.secondaryYKeys,s=[{type:this.getXAxisType(t),position:"bottom",gridStyle:[{stroke:void 0}]}];return r.length>0&&s.push({type:"number",keys:r,position:"left"}),o.length>0&&o.forEach((function(t,e){var n=i.get(t);if(n&&n.colId===t){var a={type:"number",keys:[t],position:"right"},l=r.some((function(t){return!!i.get(t)})),c=e===o.length-1;!l&&c||(a.gridStyle=[{stroke:void 0}]),s.push(a)}})),s},e.prototype.getSeries=function(t){var e=t.fields,i=t.category,n=t.seriesChartTypes;return e.map((function(t){var e=n.find((function(e){return e.colId===t.colId}));if(e){var r=e.chartType,o=["groupedColumn","groupedBar"].includes(r)?{grouped:!0}:{};return Pp({type:Kc(r),xKey:i.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(r)},o)}}))},e.prototype.getYKeys=function(t,e){var i=[],n=[];return t.forEach((function(t){var r=t.colId,o=e.find((function(t){return t.colId===r}));o&&(o.secondaryAxis?n.push(r):i.push(r))})),{primaryYKeys:i,secondaryYKeys:n}},e}(qu),Mp=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rp=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Ap=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},_p=function(e){function i(t){var n=e.call(this,i.TEMPLATE)||this;return n.params=t,n}return Mp(i,e),i.prototype.init=function(){var e=this,i=this.gridOptionsService.get("chartThemes")||dh;if(i.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var n=this.params.chartThemeName;t._.includes(i,n)||(n=i[0]);var r={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:n,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},o=this.gridOptionsService.is("enableRtl");this.addCssClass(o?"ag-rtl":"ag-ltr");var s=this.createBean(new Hu(r));this.chartController=this.createManagedBean(new uh(s)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,uh.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,Ou.EVENT_DOWNLOAD_CHART,(function(){return e.downloadChart()})),this.update(),this.raiseChartCreatedEvent()},i.prototype.validateCustomThemes=function(){var e=this.getChartThemes(),i=this.gridOptionsService.get("customChartThemes");i&&t._.getAllKeysInObjects([i]).forEach((function(i){t._.includes(e,i)||console.warn("AG Grid: a custom chart theme with the name '"+i+"' has been supplied but not added to the 'chartThemes' list")}))},i.prototype.createChart=function(){var t=this,e=void 0;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));var n=this.chartController.getChartType(),r={chartType:n,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return t.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var e,i;return null!==(i=null===(e=t.chartMenu)||void 0===e?void 0:e.getExtraPaddingDirections())&&void 0!==i?i:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(e,i){t.params.crossFilteringContext.lastSelectedChartId=i?"":t.chartController.getChartId(),i&&t.params.crossFilteringResetCallback(),t.crossFilterService.filter(e,i)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(e,i){return t.chartTranslationService.translate(e,i)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=i.createChartProxy(r),this.chartProxy){var o=this.eChart.querySelector("canvas");o&&o.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new Tp(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",r.chartType)},i.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},i.prototype.getChartThemes=function(){return this.chartController.getThemes()},i.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},i.createChartProxy=function(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new lp(t);case"pie":case"doughnut":return new yp(t);case"area":case"stackedArea":case"normalizedArea":return new dp(t);case"line":return new pp(t);case"scatter":case"bubble":return new Sp(t);case"histogram":return new Op(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new Ep(t);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+t.chartType+"' was supplied."}},i.prototype.addDialog=function(){var e=this,i=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),n=this.getBestDialogSize(),r=n.width,o=n.height;this.chartDialog=new t.AgDialog({resizable:!0,movable:!0,maximizable:!0,title:i,width:r,height:o,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(t.AgDialog.EVENT_DESTROYED,(function(){return e.destroy()}))},i.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent(),i=.75*t._.getAbsoluteWidth(e),n=.75*t._.getAbsoluteHeight(e),r=this.chartProxy.getChart(),o=this.params.insideDialog?850:r.width,s=this.params.insideDialog?470:r.height;return(o>i||s>n)&&(o=Math.min(o,i),(s=Math.round(.553*o))>n&&(s=n,o=Math.min(o,Math.round(s/.553)))),{width:o,height:s}},i.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Ou(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},i.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new Eu(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},i.prototype.update=function(t){var e=this;if((null==t?void 0:t.chartId)&&!this.chartController.update(t))return;this.chartTypeChanged(t)&&this.createChart(),this.updateChart(null==t?void 0:t.chartThemeOverrides),(null==t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartApiUpdateEvent()}))},i.prototype.updateChart=function(t){var e=this,i=this.chartProxy,n=this.chartController.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),r=this.chartController.getChartData();if(!this.handleEmptyChart(r,n)){var o=this.chartController.getChartUpdateParams(t);i.update(o),this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()})),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},i.prototype.chartTypeChanged=function(t){var e=Ap([this.chartController.getChartType(),null==t?void 0:t.chartType],2),i=e[0],n=e[1];return this.chartType!==i||!!n&&this.chartType!==n},i.prototype.getChartModel=function(){return this.chartController.getChartModel()},i.prototype.getChartImageDataURL=function(t){return this.chartProxy.getChartImageDataURL(t)},i.prototype.handleEmptyChart=function(e,i){var n=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),r=1;this.chartController.isActiveXYChart()&&(r="bubble"===this.chartController.getChartType()?3:2);var o=i.length<r||0===e.length;if(this.eChart){var s=n||o;t._.setDisplayed(this.eChart,!s),t._.setDisplayed(this.eEmpty,s)}return n?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!o&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},i.prototype.downloadChart=function(t,e,i){this.chartProxy.downloadChart(t,e,i)},i.prototype.openChartToolPanel=function(e){var i=e?t.CHART_TOOL_PANEL_MENU_OPTIONS[e]:e;this.chartMenu.showMenu(i)},i.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},i.prototype.getChartId=function(){return this.chartController.getChartId()},i.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},i.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},i.prototype.setActiveChartCellRange=function(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},i.prototype.raiseChartCreatedEvent=function(){var e=this,i={type:t.Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){e.eventService.dispatchEvent(i)}))},i.prototype.raiseChartDestroyedEvent=function(){var e={type:t.Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var i=this.getGui();t._.clearElement(i),t._.removeFromParent(i),this.raiseChartDestroyedEvent()},i.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',Rp([t.RefSelector("eChart")],i.prototype,"eChart",void 0),Rp([t.RefSelector("eChartContainer")],i.prototype,"eChartContainer",void 0),Rp([t.RefSelector("eMenuContainer")],i.prototype,"eMenuContainer",void 0),Rp([t.RefSelector("eEmpty")],i.prototype,"eEmpty",void 0),Rp([t.RefSelector("eTitleEditContainer")],i.prototype,"eTitleEditContainer",void 0),Rp([t.Autowired("chartCrossFilterService")],i.prototype,"crossFilterService",void 0),Rp([t.Autowired("chartTranslationService")],i.prototype,"chartTranslationService",void 0),Rp([t.Autowired("gridApi")],i.prototype,"gridApi",void 0),Rp([t.Autowired("popupService")],i.prototype,"popupService",void 0),Rp([t.PostConstruct],i.prototype,"init",null),i}(t.Component),Lp=function(){return(Lp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Np=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i},Ip=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},Fp=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function jp(t){return t.version,null==t.version&&(t.version=function(t){var e,i,n=t;if(null!=t.version)return t.version;var r=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return Object.keys(t||{}).some((function(t){return e.includes(t)}))},o=n.chartOptions,s=r(o,"seriesDefaults")?null==o?void 0:o.seriesDefaults:null==o?void 0:o[Object.keys(o)[0]],a={"27.0.0":r(n,"seriesChartTypes"),"26.2.0":!r(o,"seriesDefaults"),"26.1.0":r(null==s?void 0:s.highlightStyle,"item"),"26.0.0":r(null==s?void 0:s.highlightStyle,"series"),"25.1.0":r(null==s?void 0:s.label,"minAngle"),"25.0.0":r(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||r(s,"lineDash","lineDashOffset"),"24.0.0":r(n,"chartThemeName","chart")||r(o,"series"),"23.2.0":r(o,"navigator"),"23.0.0":r(null===(i=null===(e=null==o?void 0:o.legend)||void 0===e?void 0:e.item)||void 0===i?void 0:i.marker,"shape"),"22.1.0":r(n,"chartPalette","chartType")},l=Object.entries(a).filter((function(t){var e=Ip(t,2);return e[0],e[1]})),c=Ip(l[0],1)[0];return void 0===c?"27.1.0":c}(t)),t=Zp("23.0.0",t,Bp),t=Zp("24.0.0",t,Gp),t=Zp("25.1.0",t,zp),t=Zp("26.0.0",t,Wp),t=Zp("26.1.0",t,Vp),t=Zp("26.2.0",t,Hp),t=Zp("28.0.0",t,Kp),t=Zp("28.2.0",t,Yp),t=Zp("29.0.0",t,Up),t=Zp("29.1.0",t,Xp),t=Zp("29.2.0",t,$p),t=Zp("30.0.0",t,qp),t=Zp("30.0.2",t=function(t){return t=of("chartOptions.*.width",t),t=tf("chartOptions.*.axes.category.label.autoRotate",!0,t=of("chartOptions.*.height",t))}(t),(function(t){return t}))}function Bp(t){return t=rf("chartOptions.legend.item.marker.type","shape",t),t=rf("chartOptions.seriesDefaults.marker.type","shape",t),t=rf("chartOptions.legend.padding","spacing",t)}function Gp(t){var e,i=t=of("chartOptions.seriesDefaults.marker.minSize",t),n=i.chartType,r=i.chartPalette,o=i.chartOptions,s=o.xAxis,a=o.yAxis,l=Np(o,["xAxis","yAxis"]),c=Np(i,["chartType","chartPalette","chartOptions"]),h=function(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}(n),d=null==h?void 0:h.map((function(t,e){return Lp({type:t},0===e?s:a)}));return Lp({chartType:n,chartThemeName:null!==(e=cf[r])&&void 0!==e?e:"ag-default",chartOptions:Lp(Lp({},l),{axes:d,xAxis:s,yAxis:a})},c)}function zp(t){return t=rf("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t)}function Wp(t){return t=of("chart",t=af("chartOptions.seriesDefaults.highlightStyle",t,(function(t){var e=t.dimOpacity,i=Np(t,["dimOpacity"]);return Lp(Lp({},i),null!=e?{series:{dimOpacity:e}}:{})}))),t=of("chartOptions.seriesDefaults.tooltipClass",t),t=Qp("chartOptions.axes[].label.rotation",0,t=of("chartOptions.seriesDefaults.tooltipTracking",t)),t=Qp("chartOptions.axes[].label.rotation",335,t)}function Vp(t){var e=function(t){var e=t.item,i=t.series,n=Np(t,["item","series"]);return Lp({item:Lp(Lp({},n),e)},i?{series:i}:{})};return t=af("chartOptions.seriesDefaults.highlightStyle",t,e),t=af("chartOptions.series[].highlightStyle",t,e)}function Hp(t){t=ef("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=ef("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=of("chartOptions.seriesDefaults.fill",t=ef("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t)),t=of("chartOptions.seriesDefaults.stroke",t),t=of("chartOptions.seriesDefaults.callout.colors",t),t=of("chartOptions.xAxis",t);var e=t=of("chartOptions.yAxis",t),i=e.chartType,n=e.chartOptions,r=n.axes;n.series;var o=n.seriesDefaults,s=Np(n,["axes","series","seriesDefaults"]),a=Np(e,["chartType","chartOptions"]),l=[Kc(i)],c={};if(!l.includes("pie")){var h={top:{},bottom:{},left:{},right:{}},d=r.map((function(t){var e,i=t.type,n=Np(t,["type"]);return(e={})[i]=Lp(Lp({},h),n),e})).reduce(lf,{});Yc.filter((function(t){return null==d[t]})).forEach((function(t){d[t]=Lp({},h)})),c.axes=d}var u=l.map((function(t){var e;return(e={})[t]=Lp(Lp(Lp({},c),{series:o}),s),e})).reduce(lf,{});return t=Lp(Lp({},a),{chartType:i,chartOptions:u})}function Kp(t){return t=of("chartOptions.*.title.padding",t),t=of("chartOptions.*.subtitle.padding",t),t=tf("chartOptions.*.axes.*.title.enabled",!1,t=of("chartOptions.*.axes.*.title.padding",t))}function Yp(t){return t=rf("chartOptions.pie.series.callout","calloutLine",t),t=rf("chartOptions.pie.series.label","calloutLabel",t),t=rf("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=rf("chartOptions.pie.series.labelName","sectorLabelName",t)}function Up(t){return t=nf("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=nf("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=nf("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=nf("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=ef("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t=nf("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t))}function Xp(t){return t=of("chartOptions.axes[].tick.count",t)}function $p(t){return t=af("chartOptions.*.tooltip",t,(function(t){var e,i,n,r,o=t.tracking,s=Np(t,["tracking"]),a=Lp({},s);return!1===o?(null!==(e=a.position)&&void 0!==e||(a.position={type:"pointer"}),null!==(i=a.range)&&void 0!==i||(a.range="nearest")):!0===o&&(null!==(n=a.position)&&void 0!==n||(a.position={type:"node"}),null!==(r=a.range)&&void 0!==r||(a.range="nearest")),a}))}function qp(t){return t=rf("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=tf("chartOptions.common.legend.position","right",t=function t(e,i,n){var r;"string"==typeof e&&(e=e.split("."));var o=e[0];e.length>1&&(n[o]=t(e.slice(1),i,null!==(r=n[o])&&void 0!==r?r:{}));Object.keys(n).includes(o)||(n[o]=i);return n}("chartOptions.common.legend.enabled",!0,t=of("chartOptions.*.series.flipXY",t=$p(t=Xp(t=rf("chartOptions.pie.series.labelName","sectorLabelName",t))))))}function Zp(t,e,i){if(Jp(t)>Jp(e.version)){var n=i(e);return n.version=t,n}return e}function Jp(t){var e=function(t){var e="string"==typeof t?t.split(".").map((function(t){return Number(t)})):[];if(3!==e.length||e.some((function(t){return isNaN(t)})))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}(t);return 1e4*e.major+100*e.minor+e.patch}function Qp(t,e,i){return sf(t,!0,i,(function(t,i){t[i]===e&&delete t[i]}))}function tf(t,e,i){return sf(t,!1,i,(function(t,i){null==t[i]&&(t[i]=e)}))}function ef(t,e,i){var n=void 0,r=!1;return i=sf(t,!0,i,(function(t,e){r=!0,n=t[e],delete t[e]})),r?sf(e,!1,i,(function(t,e){t[e]=n})):i}function nf(t,e,i){var n=void 0,r=!1;return i=sf(t,!0,i,(function(t,e){r=!0,n=t[e],delete t[e]})),r?sf(e,!1,i,(function(t,e){void 0===t[e]&&(t[e]=n)})):i}function rf(t,e,i){return sf(t,!0,i,(function(t,i){t[e]=t[i],delete t[i]}))}function of(t,e){return sf(t,!0,e,(function(t,e){return delete t[e]}))}function sf(t,e,i,n){var r=t instanceof Array?t:t.split("."),o=r.slice(0,r.length-1),s=r[r.length-1];return af(o,i,(function(t){var i=Object.keys(t).includes(s);if(e&&!i)return t;var r=Lp({},t);return n(r,s),r}))}function af(t,e,i){var n,r,o=t instanceof Array?t:t.split(".");if(e=Lp({},e),0===o.length)return i(e);if(o[0].startsWith("{")){var s=o[0].substring(1,o[0].lastIndexOf("}")).split(",");try{for(var a=Fp(s),l=a.next();!l.done;l=a.next()){var c=l.value;null!=e[c]&&(e[c]=af(o.slice(1),e[c],i))}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}else if(o[0].endsWith("[]")){var h=o[0].substring(0,t[0].indexOf("["));e[h]instanceof Array&&(e[h]=e[h].map((function(t){return af(o.slice(1),t,i)})))}else if("*"===o[0])for(var d in e)e[d]=af(o.slice(1),e[d],i);else null!=e[o[0]]&&(e[o[0]]=af(o.slice(1),e[o[0]],i));return e}var lf=function(t,e){return Lp(Lp({},t),e)},cf={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},hf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),df=function(){return(df=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},uf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},pf=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},ff=function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t},gf=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeCharts=new Set,t.activeChartComps=new Set,t.crossFilteringContext={lastSelectedChartId:""},t}return hf(i,e),i.prototype.updateChart=function(t){if(0!==this.activeChartComps.size){var e=ff([],pf(this.activeChartComps)).find((function(e){return e.getChartId()===t.chartId}));e?e.update(t):console.warn("AG Grid - Unable to update chart. No active chart found with ID: "+t.chartId+".")}else console.warn("AG Grid - No active charts to update.")},i.prototype.getChartModels=function(){var t=[];return this.activeChartComps.forEach((function(e){return t.push(function(t){return df(df({},t),{version:"30.0.2"})}(e.getChartModel()))})),t},i.prototype.getChartRef=function(t){var e;return this.activeCharts.forEach((function(i){i.chartId===t&&(e=i)})),e},i.prototype.getChartComp=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t&&(e=i)})),e},i.prototype.getChartImageDataURL=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t.chartId&&(e=i.getChartImageDataURL(t.fileFormat))})),e},i.prototype.downloadChart=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)},i.prototype.openChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.openChartToolPanel(t.panel)},i.prototype.closeChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t}));null==e||e.closeChartToolPanel()},i.prototype.createChartFromCurrentRange=function(t){void 0===t&&(t="groupedColumn");var e=this.getSelectedRange();return this.createChart(e,t)},i.prototype.restoreChart=function(t,e){var i=this;if(t){"30.0.2"!==t.version&&(t=jp(t));var n={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},r=function(t){return i.rangeService?i.rangeService.createCellRangeFromCellRangeParams(t):void 0};if("pivot"===t.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var o=r({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))});return o?this.createChart(o,n.chartType,n.chartThemeName,!0,!0,n.chartContainer,void 0,void 0,n.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var s=r(n.cellRange);if(s)return this.createChart(s,n.chartType,n.chartThemeName,!1,n.suppressChartRanges,n.chartContainer,n.aggFunc,void 0,n.unlinkChart,!1,t.chartOptions,t.chartPalette,n.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},i.prototype.createRangeChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i)return this.createChart(i,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},i.prototype.createPivotChart=function(t){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(i)return this.createChart(i,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},i.prototype.createCrossFilterChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i){var n=!(void 0!==t.suppressChartRanges&&null!==t.suppressChartRanges)||t.suppressChartRanges;return this.createChart(i,t.chartType,t.chartThemeName,!1,n,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,!0)}console.warn("AG Grid - unable to create chart as no range is selected")},i.prototype.createChart=function(t,e,i,n,r,o,s,a,l,c,h,d,u){var p=this;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===l&&(l=!1),void 0===c&&(c=!1);var f=this.gridOptionsService.getCallback("createChartContainer"),g={chartId:this.generateId(),pivotChart:n,cellRange:t,chartType:e,chartThemeName:i,insideDialog:!(o||f),suppressChartRanges:r,aggFunc:s,chartThemeOverrides:a,unlinkChart:l,crossFiltering:c,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:h,chartPaletteToRestore:d,seriesChartTypes:u,crossFilteringResetCallback:function(){return p.activeChartComps.forEach((function(t){return t.crossFilteringReset()}))}},y=new _p(g);this.context.createBean(y);var v=this.createChartRef(y);if(o){o.appendChild(y.getGui());var m=this.environment.getTheme();m.el&&!m.el.contains(o)&&o.classList.add(m.theme)}else f?f(v):y.addEventListener(_p.EVENT_DESTROYED,(function(){p.activeChartComps.delete(y),p.activeCharts.delete(v)}));return v},i.prototype.createChartRef=function(t){var e=this,i={destroyChart:function(){e.activeCharts.has(i)&&(e.context.destroyBean(t),e.activeChartComps.delete(t),e.activeCharts.delete(i))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(i),this.activeChartComps.add(t),i},i.prototype.getSelectedRange=function(){var t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}},i.prototype.generateId=function(){return"id-"+Math.random().toString(36).substring(2,18)},i.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(t){return t.destroyChart()}))},i.CHARTS_VERSION="8.0.0",uf([t.Optional("rangeService")],i.prototype,"rangeService",void 0),uf([t.Autowired("columnModel")],i.prototype,"columnModel",void 0),uf([t.PreDestroy],i.prototype,"destroyAllActiveCharts",null),i=uf([t.Bean("chartService")],i)}(t.BeanStub),yf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},mf=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}var n;return yf(i,e),n=i,i.prototype.translate=function(t,e){return this.localeService.getLocaleTextFunc()(t,n.DEFAULT_TRANSLATIONS[t]||e)},i.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},i=n=vf([t.Bean("chartTranslationService")],i)}(t.BeanStub),bf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Cf=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}var n;return bf(i,e),n=i,i.prototype.filter=function(t,e){void 0===e&&(e=!1);var i=this.gridApi.getFilterModel();if(e)this.resetFilters(i);else{var r=n.extractFilterColId(t);this.isValidColumnFilter(r)?this.updateFilters(i,t,r):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+r+"'")}},i.prototype.resetFilters=function(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},i.prototype.updateFilters=function(e,i,r){var o,s=n.extractFilterColId(i),a=i.datum[s];if(void 0!==a){var l=a.toString();if(i.event.metaKey||i.event.ctrlKey){var c=this.getCurrentGridValuesForCategory(r),h=void 0;t._.includes(c,l)?h=c.filter((function(t){return t!==l})):(h=c).push(l),e[r]=this.getUpdatedFilterModel(r,h)}else{h=[l];(o={})[r]=this.getUpdatedFilterModel(r,h),e=o}this.gridApi.setFilterModel(e)}},i.prototype.getUpdatedFilterModel=function(t,e){return"agMultiColumnFilter"===this.getColumnFilterType(t)?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}},i.prototype.getCurrentGridValuesForCategory=function(t){var e=this,i=[],n=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter((function(t){if(n&&!t.group){var r=e.valueService.getValue(n,t)+"";i.includes(r)||i.push(r)}})),i},i.extractFilterColId=function(t){return t.xKey||t.calloutLabelKey},i.prototype.isValidColumnFilter=function(e){e.indexOf("-filtered-out")&&(e=e.replace("-filtered-out",""));var i=this.getColumnFilterType(e);return"boolean"==typeof i?i:t._.includes(["agSetColumnFilter","agMultiColumnFilter"],i)},i.prototype.getColumnFilterType=function(t){var e=this.getColumnById(t);if(e)return e.getColDef().filter},i.prototype.getColumnById=function(t){return this.columnModel.getGridColumn(t)},xf([t.Autowired("gridApi")],i.prototype,"gridApi",void 0),xf([t.Autowired("columnModel")],i.prototype,"columnModel",void 0),xf([t.Autowired("valueService")],i.prototype,"valueService",void 0),i=n=xf([t.Bean("chartCrossFilterService")],i)}(t.BeanStub),Sf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wf=function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},Of=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},kf=function(e){function i(t){var n=e.call(this,i.TEMPLATE)||this;return n.H=1,n.S=1,n.B=1,n.A=1,n.isSpectrumDragging=!1,n.isSpectrumHueDragging=!1,n.isSpectrumAlphaDragging=!1,n.colorChanged=!1,n.picker=t.picker,n}return Sf(i,e),i.prototype.postConstruct=function(){var t=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))},i.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},i.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},i.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},i.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},i.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},i.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},i.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},i.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},i.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},i.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},i.prototype.moveDragger=function(t){var e=this.spectrumValRect;if(e){var i=t.clientX-e.left,n=t.clientY-e.top;i=Math.max(i,0),i=Math.min(i,e.width),n=Math.max(n,0),n=Math.min(n,e.height),this.setSpectrumValue(i/e.width,1-n/e.height)}},i.prototype.moveHueSlider=function(t){var e=this.spectrumHueRect;if(e){var i=this.spectrumHueSlider,n=i.getBoundingClientRect(),r=t.clientX-e.left;r=Math.max(r,0),r=Math.min(r,e.width),this.H=1-r/e.width,i.style.left=r+n.width/2+"px",this.update()}},i.prototype.moveAlphaSlider=function(t){var e=this.spectrumAlphaRect;if(e){var i=this.spectrumAlphaSlider,n=i.getBoundingClientRect(),r=t.clientX-e.left;r=Math.max(r,0),r=Math.min(r,e.width),this.A=r/e.width,i.style.left=r+n.width/2+"px",this.update()}},i.prototype.update=function(){var t=Ot.fromHSB(360*this.H,this.S,this.B,this.A),e=Ot.fromHSB(360*this.H,1,1),i=t.toRgbaString(),n=this.picker;Ot.fromString(n.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),n.setValue(i),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=i},i.prototype.setSpectrumValue=function(t,e){var i=this.spectrumValRect||this.refreshSpectrumRect();if(i){var n=this.spectrumDragger,r=n.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,n.style.left=t*i.width-r.width/2+"px",n.style.top=(1-e)*i.height-r.height/2+"px",this.update()}},i.prototype.initRecentColors=function(){var t=i.recentColors.map((function(t,e){return'<div class="ag-recent-color" id='+e+' style="background-color: '+t+'; width: 15px; height: 15px;" recent-color="'+t+'"></div>'}));this.recentColors.innerHTML=t.join("")},i.prototype.setValue=function(t){var e=Ot.fromString(t),i=Of(e.toHSB(),3),n=i[0],r=i[1],o=i[2];this.H=(isNaN(n)?0:n)/360,this.A=e.a;var s=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-s.width+"px",this.spectrumAlphaSlider.style.left=this.A*a.width+"px",this.setSpectrumValue(r,o)},i.prototype.onRecentColorClick=function(e){var n=e.target;if(t._.exists(n.id)){var r=parseInt(n.id,10);this.setValue(i.recentColors[r]),this.destroy()}},i.prototype.addRecentColor=function(){var t=Ot.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),e=i.recentColors;this.colorChanged&&e[0]!==t&&(e=e.filter((function(e){return e!=t})),(e=[t].concat(e)).length>i.maxRecentColors&&(e=e.slice(0,i.maxRecentColors)),i.recentColors=e)},i.prototype.destroy=function(){this.addRecentColor(),e.prototype.destroy.call(this)},i.maxRecentColors=8,i.recentColors=[],i.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',wf([t.RefSelector("spectrumColor")],i.prototype,"spectrumColor",void 0),wf([t.RefSelector("spectrumVal")],i.prototype,"spectrumVal",void 0),wf([t.RefSelector("spectrumDragger")],i.prototype,"spectrumDragger",void 0),wf([t.RefSelector("spectrumHue")],i.prototype,"spectrumHue",void 0),wf([t.RefSelector("spectrumHueSlider")],i.prototype,"spectrumHueSlider",void 0),wf([t.RefSelector("spectrumAlpha")],i.prototype,"spectrumAlpha",void 0),wf([t.RefSelector("spectrumAlphaSlider")],i.prototype,"spectrumAlphaSlider",void 0),wf([t.RefSelector("recentColors")],i.prototype,"recentColors",void 0),wf([t.PostConstruct],i.prototype,"postConstruct",null),i}(t.Component),Tf=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Df=function(e){function i(t){var i=e.call(this,t,"ag-color-picker","colorPicker")||this;return t&&t.color&&(i.value=t.color),i}return Tf(i,e),i.prototype.postConstruct=function(){e.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},i.prototype.showPicker=function(){var e=this,i=this.getGui().getBoundingClientRect(),n=this.createBean(new t.AgDialog({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:i.right-190,y:i.top-250}));this.isPickerDisplayed=!0,n.addCssClass("ag-color-dialog"),t._.setAriaExpanded(this.eWrapper,!0);var r=this.createBean(new kf({picker:this}));return r.addDestroyFunc((function(){n.isAlive()&&e.destroyBean(n)})),n.setParentComponent(this),n.setBodyComponent(r),r.setValue(this.getValue()),n.addDestroyFunc((function(){e.isDestroyingPicker?e.isDestroyingPicker=!1:(e.isDestroyingPicker=!0,r.isAlive()&&e.destroyBean(r)),e.isAlive()&&(t._.setAriaExpanded(e.eWrapper,!1),e.getFocusableElement().focus()),e.isPickerDisplayed=!1})),n},i.prototype.setValue=function(t){return this.value===t?this:(this.eDisplayField.style.backgroundColor=t,e.prototype.setValue.call(this,t))},i.prototype.getValue=function(){return this.value},i}(t.AgPickerField),Pf=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s};function Ef(t){return t&&t.match(/\d+\.\d+\.\d+/)}function Mf(t){var e=t.type,i=t.gridVersion,n=t.chartsVersion,r="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!i)return r;var o=function(t){if(t&&Ef(t)){var e=Pf(t.split(".")||[],2),i=e[0],n=e[1],r=i+"."+n+".x",o=parseInt(i,10)-28+6;if(!(o<0))return{gridMajorMinor:r,chartsMajorMinor:o+"."+n+".x"}}}(i);if(!o)return r;var s=o.gridMajorMinor,a=o.chartsMajorMinor;return"incompatible"===e?"AG Grid version "+i+" and AG Charts version "+n+" is not supported. AG Grid version "+s+" should be used with AG Chart "+a+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":"invalidCharts"===e?"AG Grid version "+s+" should be used with AG Chart "+a+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":r}function Rf(t){var e=t.gridVersion,i=t.chartsVersion;if(!Ef(i))return{isValid:!1,message:Mf({type:"invalidCharts",gridVersion:e,chartsVersion:i})};if(!Ef(e))return{isValid:!1,message:Mf({type:"invalidGrid",gridVersion:e,chartsVersion:i})};var n=Pf(e.split(".")||[],2),r=n[0],o=n[1],s=Pf(i.split(".")||[],2),a=s[0],l=s[1],c=function(t){var e=t.gridMajorVersion,i=t.chartsMajorVersion,n=parseInt(e,10)-28;return n===parseInt(i,10)-6&&n>=0}({gridMajorVersion:r,chartsMajorVersion:a});return c&&o===l?{isValid:!0}:c&&o===l?{isValid:!1,message:Mf({type:"invalid",gridVersion:e,chartsVersion:i})}:{isValid:!1,message:Mf({type:"incompatible",gridVersion:e,chartsVersion:i})}}var Af={version:"30.0.2",validate:function(){return Rf({gridVersion:"30.0.2",chartsVersion:gf.CHARTS_VERSION})},moduleName:t.ModuleNames.GridChartsModule,beans:[gf,mf,Cf],agStackComponents:[{componentName:"AgColorPicker",componentClass:Df},{componentName:"AgAngleSelect",componentClass:Rh}],dependantModules:[i.RangeSelectionModule,e.EnterpriseCoreModule]},_f={time:E,AgChart:_c};exports.GridChartsModule=Af,exports.__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT=0,exports.agCharts=_f;