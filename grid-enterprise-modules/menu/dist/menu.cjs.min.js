/**
          * @ag-grid-enterprise/menu - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/menu - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@ag-grid-community/core"),o=require("@ag-grid-enterprise/core"),n=require("@ag-grid-enterprise/column-tool-panel"),r=(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),i=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return r(o,e),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.showMenuAfterMouseEvent=function(e,t,o,n){var r=this,i=n?"filterMenuTab":void 0;this.showMenu(e,(function(n){var a,u=n.getGui();r.popupService.positionPopupUnderMouseEvent({type:o,column:e,mouseEvent:t,ePopup:u}),i&&(null===(a=n.showTab)||void 0===a||a.call(n,i)),r.dispatchVisibleChangedEvent(!0,!1,e,i)}),o,i,void 0,t.target)},o.prototype.showMenuAfterButtonClick=function(e,t,o,n){var r=this,i=-1,a="left";this.gridOptionsService.get("enableRtl")&&(i=1,a="right");var u=n?"filterMenuTab":void 0,l=u?[u]:void 0,c=this.menuService.isLegacyMenuEnabled(),s=(c?9:4)*i,p=c?-23:4;this.showMenu(e,(function(n){var i,l=n.getGui();r.popupService.positionPopupByComponent({type:o,column:e,eventSource:t,ePopup:l,alignSide:a,nudgeX:s,nudgeY:p,position:"under",keepWithinBounds:!0}),u&&(null===(i=n.showTab)||void 0===i||i.call(n,u)),r.dispatchVisibleChangedEvent(!0,!1,e,u)}),o,u,l,t)},o.prototype.showMenu=function(e,o,n,r,i,a){var l,c=this,s=this.getMenuParams(e,i,a),p=s.menu,d=s.eMenuGui,m=s.anchorToElement,h=s.restoreFocusParams,v=[];e&&v.push((function(t){var o=p.getGui();c.destroyBean(p),null==e||e.setMenuVisible(!1,"contextMenu"),c.menuUtils.restoreFocusOnClose(h,o,t)}));var g=this.localeService.getLocaleTextFunc();if(this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(t){v.forEach((function(e){return e(t)})),c.dispatchVisibleChangedEvent(!1,!1,e,r)},afterGuiAttached:function(e){return p.afterGuiAttached(Object.assign({},{container:n},e))},positionCallback:r?function(){return o(p)}:void 0,ariaLabel:g("ariaLabelColumnMenu","Column Menu")}),r||(null===(l=p.showTabBasedOnPreviousSelection)||void 0===l||l.call(p),o(p)),this.menuService.isColumnMenuAnchoringEnabled()){var f=this.popupService.setPopupPositionRelatedToElement(d,m);f&&e&&this.addStopAnchoring(f,e,v)}p.addEventListener(u.EVENT_TAB_SELECTED,(function(t){c.dispatchVisibleChangedEvent(!1,!0,e),c.lastSelectedTab=t.key,c.dispatchVisibleChangedEvent(!0,!0,e)})),null==e||e.setMenuVisible(!0,"contextMenu"),this.activeMenu=p,p.addEventListener(t.BeanStub.EVENT_DESTROYED,(function(){c.activeMenu===p&&(c.activeMenu=null)}))},o.prototype.addStopAnchoring=function(e,t,o){e.then((function(e){t.addEventListener("leftChanged",e),t.addEventListener("visibleChanged",e),o.push((function(){t.removeEventListener("leftChanged",e),t.removeEventListener("visibleChanged",e)}))}))},o.prototype.getMenuParams=function(e,t,o){var n={column:e,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),eventSource:o},r=this.createMenu(e,n,t,o);return{menu:r,eMenuGui:r.getGui(),anchorToElement:o||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:n}},o.prototype.createMenu=function(e,t,o,n){return this.menuService.isLegacyMenuEnabled()?this.createBean(new u(e,t,this.lastSelectedTab,o,n)):this.createBean(new l(e,t,n))},o.prototype.dispatchVisibleChangedEvent=function(e,o,n,r){var i,a,l={type:t.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:o,key:null!==(a=null!==(i=this.lastSelectedTab)&&void 0!==i?i:r)&&void 0!==a?a:this.menuService.isLegacyMenuEnabled()?u.TAB_GENERAL:"columnMenu",column:null!=n?n:null};this.eventService.dispatchEvent(l)},o.prototype.isMenuEnabled=function(e){var t;if(!this.menuService.isLegacyMenuEnabled())return!0;var o=!this.filterManager.isFilterAllowed(e),n=null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:u.TABS_DEFAULT;return(o&&n.includes(u.TAB_FILTER)?n.length-1:n.length)>0},o.prototype.showMenuAfterContextMenuEvent=function(e,t,o){var n=this;this.menuUtils.onContextMenu(t,o,(function(t){return n.showMenuAfterMouseEvent(e,t,"columnMenu"),!0}))},i([t.Autowired("popupService")],o.prototype,"popupService",void 0),i([t.Autowired("focusService")],o.prototype,"focusService",void 0),i([t.Autowired("ctrlsService")],o.prototype,"ctrlsService",void 0),i([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),i([t.Autowired("filterManager")],o.prototype,"filterManager",void 0),i([t.Autowired("menuUtils")],o.prototype,"menuUtils",void 0),i([t.Autowired("menuService")],o.prototype,"menuService",void 0),o=i([t.Bean("enterpriseMenuFactory")],o)}(t.BeanStub),u=function(e){function o(t,n,r,i,a){var u=e.call(this)||this;return u.column=t,u.restoreFocusParams=n,u.initialSelection=r,u.restrictTo=i,u.sourceElement=a,u.tabFactories={},u.includeChecks={},u.tabFactories[o.TAB_GENERAL]=u.createMainPanel.bind(u),u.tabFactories[o.TAB_FILTER]=u.createFilterPanel.bind(u),u.tabFactories[o.TAB_COLUMNS]=u.createColumnsPanel.bind(u),u.includeChecks[o.TAB_GENERAL]=function(){return!0},u.includeChecks[o.TAB_FILTER]=function(){return!!t&&u.filterManager.isFilterAllowed(t)},u.includeChecks[o.TAB_COLUMNS]=function(){return!0},u}return r(o,e),o.prototype.init=function(){var e=this,o=this.getTabsToCreate().map((function(t){return e.createTab(t)}));this.tabbedLayout=new t.TabbedLayout({items:o,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((function(){return e.destroyBean(e.tabbedLayout)}))},o.prototype.getTabsToCreate=function(){var e,t,n=this;return this.restrictTo?this.restrictTo:(null!==(t=null===(e=this.column)||void 0===e?void 0:e.getColDef().menuTabs)&&void 0!==t?t:o.TABS_DEFAULT).filter((function(e){return n.isValidMenuTabItem(e)})).filter((function(e){return n.isNotSuppressed(e)})).filter((function(e){return n.isModuleLoaded(e)}))},o.prototype.isModuleLoaded=function(e){return e!==o.TAB_COLUMNS||t.ModuleRegistry.__isRegistered(t.ModuleNames.ColumnsToolPanelModule,this.context.getGridId())},o.prototype.isValidMenuTabItem=function(e){var t=!0,n=o.TABS_DEFAULT;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),(t=t&&o.TABS_DEFAULT.indexOf(e)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '".concat(e,"'. Check that your 'menuTabs' contains one of [").concat(n,"]")),t},o.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},o.prototype.createTab=function(e){return this.tabFactories[e]()},o.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},o.prototype.showTab=function(e){this.tabItemColumns&&e===o.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===o.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===o.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},o.prototype.onTabItemClicked=function(e){var t=null;switch(e.item){case this.tabItemColumns:t=o.TAB_COLUMNS;break;case this.tabItemFilter:t=o.TAB_FILTER;break;case this.tabItemGeneral:t=o.TAB_GENERAL}t&&this.activateTab(t)},o.prototype.activateTab=function(e){var t={type:o.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(t)},o.prototype.createMainPanel=function(){var e=this;return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,(function(){var t;return null!==(t=e.sourceElement)&&void 0!==t?t:e.getGui()})),this.mainMenuList.addEventListener(t.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:t._.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:o.TAB_GENERAL.replace("MenuTab",""),bodyPromise:t.AgPromise.resolve(this.mainMenuList.getGui()),name:o.TAB_GENERAL},this.tabItemGeneral},o.prototype.onHidePopup=function(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)},o.prototype.createFilterPanel=function(){var e=this.column?this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU"):null;if(!e)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:t._.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:o.TAB_FILTER.replace("MenuTab",""),bodyPromise:null==e?void 0:e.guiPromise,afterAttachedCallback:function(t){(null==e?void 0:e.filterPromise)&&e.filterPromise.then((function(e){e&&e.afterGuiAttached&&e.afterGuiAttached(t)}))},afterDetachedCallback:function(){var t;return null===(t=null==e?void 0:e.filterPromise)||void 0===t?void 0:t.then((function(e){var t;return null===(t=null==e?void 0:e.afterGuiDetached)||void 0===t?void 0:t.call(e)}))},name:o.TAB_FILTER},this.tabItemFilter},o.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");var n=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return n.classList.add("ag-menu-column-select"),e.appendChild(n),this.tabItemColumns={title:t._.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:o.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:t.AgPromise.resolve(e),name:o.TAB_COLUMNS},this.tabItemColumns},o.prototype.afterGuiAttached=function(e){var t=e.container,o=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:o}),o&&(this.hidePopupFunc=o,this.addDestroyFunc(o))},o.prototype.getGui=function(){return this.tabbedLayout.getGui()},o.EVENT_TAB_SELECTED="tabSelected",o.TAB_FILTER="filterMenuTab",o.TAB_GENERAL="generalMenuTab",o.TAB_COLUMNS="columnsMenuTab",o.TABS_DEFAULT=[o.TAB_GENERAL,o.TAB_FILTER,o.TAB_COLUMNS],i([t.Autowired("filterManager")],o.prototype,"filterManager",void 0),i([t.Autowired("columnChooserFactory")],o.prototype,"columnChooserFactory",void 0),i([t.Autowired("columnMenuFactory")],o.prototype,"columnMenuFactory",void 0),i([t.Autowired("menuUtils")],o.prototype,"menuUtils",void 0),i([t.PostConstruct],o.prototype,"init",null),o}(t.BeanStub),l=function(e){function o(t,o,n){var r=e.call(this,'\n            <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>\n        ')||this;return r.column=t,r.restoreFocusParams=o,r.sourceElement=n,r}return r(o,e),o.prototype.init=function(){var e=this;this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,(function(){var t;return null!==(t=e.sourceElement)&&void 0!==t?t:e.getGui()})),this.mainMenuList.addEventListener(t.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())},o.prototype.onHidePopup=function(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)},o.prototype.afterGuiAttached=function(e){var t=e.hidePopup;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())},i([t.Autowired("columnMenuFactory")],o.prototype,"columnMenuFactory",void 0),i([t.Autowired("menuUtils")],o.prototype,"menuUtils",void 0),i([t.Autowired("focusService")],o.prototype,"focusService",void 0),i([t.RefSelector("eColumnMenu")],o.prototype,"eColumnMenu",void 0),i([t.PostConstruct],o.prototype,"init",null),o}(t.Component),c=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),s=function(){return(s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},d=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return c(o,e),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.getMenuItems=function(e,o,n){var r=[];if(t._.exists(e)&&t.ModuleRegistry.__isRegistered(t.ModuleNames.ClipboardModule,this.context.getGridId())&&o&&(this.gridOptionsService.get("suppressCutToClipboard")||r.push("cut"),r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.get("enableCharts")&&t.ModuleRegistry.__isRegistered(t.ModuleNames.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&r.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&r.push("chartRange")),t._.exists(e)){var i=!t.ModuleRegistry.__isRegistered(t.ModuleNames.CsvExportModule,this.context.getGridId()),a=!t.ModuleRegistry.__isRegistered(t.ModuleNames.ExcelExportModule,this.context.getGridId()),u=this.gridOptionsService.get("suppressExcelExport")||a,l=this.gridOptionsService.get("suppressCsvExport")||i;!(t._.isIOSUserAgent()||u&&l)&&r.push("export")}var c=r.length?r:void 0,s=null==o?void 0:o.getColDef().contextMenuItems;if(Array.isArray(s))return s;if("function"==typeof s)return s(this.gridOptionsService.addGridCommonParams({column:o,node:e,value:n,defaultItems:c}));var p=this.gridOptionsService.getCallback("getContextMenuItems");return p?p({column:o,node:e,value:n,defaultItems:c}):r},o.prototype.onContextMenu=function(e,t,o,n,r,i){var a=this;this.menuUtils.onContextMenu(e,t,(function(e){return a.showMenu(o,n,r,e,i)}))},o.prototype.showMenu=function(e,o,n,r,i){var a=this,u=this.getMenuItems(e,o,n),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===u||t._.missingOrEmpty(u))return!1;var c=new m(u,o,e,n);this.createBean(c);var p=c.getGui(),d={column:o,rowNode:e,type:"contextMenu",mouseEvent:r,ePopup:p,nudgeY:1},h=this.localeService.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:function(){l.classList.remove("ag-context-menu-open"),a.destroyBean(c)},click:r,positionCallback:function(){var e=a.gridOptionsService.get("enableRtl");a.popupService.positionPopupUnderMouseEvent(s(s({},d),{nudgeX:e?-1*(p.offsetWidth+1):1}))},anchorToElement:i,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return v&&(l.classList.add("ag-context-menu-open"),c.afterGuiAttached({container:"contextMenu",hidePopup:v.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(t.BeanStub.EVENT_DESTROYED,(function(){a.activeMenu===c&&(a.activeMenu=null)})),v&&c.addEventListener(t.AgMenuItemComponent.EVENT_CLOSE_MENU,v.hideFunc),!0},p([t.Autowired("popupService")],o.prototype,"popupService",void 0),p([t.Optional("rangeService")],o.prototype,"rangeService",void 0),p([t.Autowired("ctrlsService")],o.prototype,"ctrlsService",void 0),p([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),p([t.Autowired("menuUtils")],o.prototype,"menuUtils",void 0),o=p([t.Bean("contextMenuFactory")],o)}(t.BeanStub),m=function(e){function o(t,o,n,r){var i=e.call(this,'<div class="'.concat("ag-menu",'" role="presentation"></div>'))||this;return i.menuItems=t,i.column=o,i.node=n,i.value=r,i.menuList=null,i.focusedCell=null,i}return c(o,e),o.prototype.addMenuItems=function(){var e=this,o=this.createManagedBean(new t.AgMenuList(0,{column:this.column,node:this.node,value:this.value})),n=this.menuItemMapper.mapWithStockItems(this.menuItems,null,(function(){return e.getGui()}));o.addMenuItems(n),this.appendChild(o),this.menuList=o,o.addEventListener(t.AgMenuItemComponent.EVENT_CLOSE_MENU,(function(t){return e.dispatchEvent(t)}))},o.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},o.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var t=this.focusedCell,o=t.rowIndex,n=t.rowPinned,r=t.column,i=this.gridOptionsService.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:o,column:r,rowPinned:n,forceBrowserFocus:!0})}},o.prototype.destroy=function(){this.restoreFocusedCell(),e.prototype.destroy.call(this)},p([t.Autowired("menuItemMapper")],o.prototype,"menuItemMapper",void 0),p([t.Autowired("focusService")],o.prototype,"focusService",void 0),p([t.Autowired("cellPositionUtils")],o.prototype,"cellPositionUtils",void 0),p([t.PostConstruct],o.prototype,"addMenuItems",null),o}(t.Component),h=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),v=function(){return(v=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},g=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},f=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return h(o,e),o.prototype.mapWithStockItems=function(e,t,o){var n=this;if(!e)return[];var r=[];return e.forEach((function(e){var i;if(i="string"==typeof e?n.getStockMenuItem(e,t,o):v({},e)){var a=i,u=a.subMenu;u&&u instanceof Array&&(a.subMenu=n.mapWithStockItems(u,t,o)),null!=i&&r.push(i)}})),r},o.prototype.getStockMenuItem=function(e,o,n){var r,i=this,a=this.localeService.getLocaleTextFunc(),u=this.gridOptionsService.get("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:a("pinColumn","Pin Column"),icon:t._.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:a("pinLeft","Pin Left"),action:function(){return i.columnModel.setColumnsPinned([o],"left","contextMenu")},checked:!!o&&o.isPinnedLeft()};case"pinRight":return{name:a("pinRight","Pin Right"),action:function(){return i.columnModel.setColumnsPinned([o],"right","contextMenu")},checked:!!o&&o.isPinnedRight()};case"clearPinned":return{name:a("noPin","No Pin"),action:function(){return i.columnModel.setColumnsPinned([o],null,"contextMenu")},checked:!!o&&!o.isPinned()};case"valueAggSubMenu":return t.ModuleRegistry.__assertRegistered(t.ModuleNames.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null==o?void 0:o.isPrimary())||(null==o?void 0:o.getColDef().pivotValueColumn))?{name:a("valueAggregation","Value Aggregation"),icon:t._.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(o)}:null;case"autoSizeThis":return{name:a("autosizeThiscolumn","Autosize This Column"),action:function(){return i.columnModel.autoSizeColumn(o,"contextMenu",u)}};case"autoSizeAll":return{name:a("autosizeAllColumns","Autosize All Columns"),action:function(){return i.columnModel.autoSizeAllColumns("contextMenu",u)}};case"rowGroup":return{name:a("groupBy","Group by")+" "+t._.escapeString(this.columnModel.getDisplayNameForColumn(o,"header")),disabled:(null==o?void 0:o.isRowGroupActive())||!(null==o?void 0:o.getColDef().enableRowGroup),action:function(){return i.columnModel.addRowGroupColumns([o],"contextMenu")},icon:t._.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var l=t._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),c=null==o?void 0:o.getColDef().showRowGroup,s=this.gridOptionsService.get("groupLockGroupColumns");if(!0===c)return{name:a("ungroupAll","Un-Group All"),disabled:-1===s||s>=this.columnModel.getRowGroupColumns().length,action:function(){return i.columnModel.setRowGroupColumns(i.columnModel.getRowGroupColumns().slice(0,s),"contextMenu")},icon:l};if("string"==typeof c){var p=this.columnModel.getPrimaryColumn(c),d=null!=p?t._.escapeString(this.columnModel.getDisplayNameForColumn(p,"header")):c;return{name:a("ungroupBy","Un-Group by")+" "+d,disabled:null!=p&&this.columnModel.isColumnGroupingLocked(p),action:function(){return i.columnModel.removeRowGroupColumns([c],"contextMenu")},icon:l}}return{name:a("ungroupBy","Un-Group by")+" "+t._.escapeString(this.columnModel.getDisplayNameForColumn(o,"header")),disabled:!(null==o?void 0:o.isRowGroupActive())||!(null==o?void 0:o.getColDef().enableRowGroup)||this.columnModel.isColumnGroupingLocked(o),action:function(){return i.columnModel.removeRowGroupColumns([o],"contextMenu")},icon:l};case"resetColumns":return{name:a("resetColumns","Reset Columns"),action:function(){return i.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:a("expandAll","Expand All Row Groups"),action:function(){return i.gridApi.expandAll()}};case"contractAll":return{name:a("collapseAll","Collapse All Row Groups"),action:function(){return i.gridApi.collapseAll()}};case"copy":return t.ModuleRegistry.__assertRegistered(t.ModuleNames.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:a("copy","Copy"),shortcut:a("ctrlC","Ctrl+C"),icon:t._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return i.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return t.ModuleRegistry.__assertRegistered(t.ModuleNames.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:a("copyWithHeaders","Copy with Headers"),icon:t._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return i.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return t.ModuleRegistry.__assertRegistered(t.ModuleNames.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:a("copyWithGroupHeaders","Copy with Group Headers"),icon:t._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return i.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(t.ModuleRegistry.__assertRegistered(t.ModuleNames.ClipboardModule,"Cut from Menu",this.context.getGridId())){var m=this.focusService.getFocusedCell(),h=m?this.rowPositionUtils.getRowNode(m):null,v=!!h&&(null==m?void 0:m.column.isCellEditable(h));return{name:a("cut","Cut"),shortcut:a("ctrlX","Ctrl+X"),icon:t._.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!v||this.gridOptionsService.get("suppressCutToClipboard"),action:function(){return i.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return t.ModuleRegistry.__assertRegistered(t.ModuleNames.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:a("paste","Paste"),shortcut:a("ctrlV","Ctrl+V"),disabled:!0,icon:t._.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return i.clipboardService.pasteFromClipboard()}}:null;case"export":var g=[],f=t.ModuleRegistry.__isRegistered(t.ModuleNames.CsvExportModule,this.context.getGridId()),C=t.ModuleRegistry.__isRegistered(t.ModuleNames.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.get("suppressCsvExport")&&f&&g.push("csvExport"),!this.gridOptionsService.get("suppressExcelExport")&&C&&g.push("excelExport"),{name:a("export","Export"),subMenu:g,icon:t._.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:a("csvExport","CSV Export"),icon:t._.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return i.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:a("excelExport","Excel Export"),icon:t._.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return i.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(r=this.chartMenuItemMapper.getChartItems(e))&&void 0!==r?r:null;case"columnFilter":return o?{name:a("columnFilter","Column Filter"),icon:t._.createIconNoSpan("filter",this.gridOptionsService,null),action:function(){return i.menuService.showFilterMenu({column:o,buttonElement:n(),containerType:"columnFilter",positionBy:"button"})}}:null;case"columnChooser":return t.ModuleRegistry.__isRegistered(t.ModuleNames.ColumnsToolPanelModule,this.context.getGridId())?{name:a("columnChooser","Choose Columns"),icon:t._.createIconNoSpan("columns",this.gridOptionsService,null),action:function(){return i.menuService.showColumnChooser({column:o,eventSource:n()})}}:null;case"sortAscending":return{name:a("sortAscending","Sort Ascending"),icon:t._.createIconNoSpan("sortAscending",this.gridOptionsService,null),action:function(){return i.sortController.setSortForColumn(o,"asc",!1,"columnMenu")}};case"sortDescending":return{name:a("sortDescending","Sort Descending"),icon:t._.createIconNoSpan("sortDescending",this.gridOptionsService,null),action:function(){return i.sortController.setSortForColumn(o,"desc",!1,"columnMenu")}};case"sortUnSort":return{name:a("sortUnSort","Clear Sort"),icon:t._.createIconNoSpan("sortUnSort",this.gridOptionsService,null),action:function(){return i.sortController.setSortForColumn(o,null,!1,"columnMenu")}};default:return console.warn("AG Grid: unknown menu item type ".concat(e)),null}},o.prototype.createAggregationSubMenu=function(e){var o,n=this,r=this.localeService.getLocaleTextFunc();if(e.isPrimary())o=e;else{var i=e.getColDef().pivotValueColumn;o=t._.exists(i)?i:void 0}var a=[];if(o){var u=o.isValueActive(),l=this.aggFuncService.getFuncNames(o);a.push({name:r("noAggregation","None"),action:function(){n.columnModel.removeValueColumns([o],"contextMenu"),n.columnModel.setColumnAggFunc(o,void 0,"contextMenu")},checked:!u}),l.forEach((function(e){a.push({name:r(e,n.aggFuncService.getDefaultFuncLabel(e)),action:function(){n.columnModel.setColumnAggFunc(o,e,"contextMenu"),n.columnModel.addValueColumns([o],"contextMenu")},checked:u&&o.getAggFunc()===e})}))}return a},g([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),g([t.Autowired("gridApi")],o.prototype,"gridApi",void 0),g([t.Optional("clipboardService")],o.prototype,"clipboardService",void 0),g([t.Optional("aggFuncService")],o.prototype,"aggFuncService",void 0),g([t.Autowired("focusService")],o.prototype,"focusService",void 0),g([t.Autowired("rowPositionUtils")],o.prototype,"rowPositionUtils",void 0),g([t.Autowired("chartMenuItemMapper")],o.prototype,"chartMenuItemMapper",void 0),g([t.Autowired("menuService")],o.prototype,"menuService",void 0),g([t.Autowired("sortController")],o.prototype,"sortController",void 0),o=g([t.Bean("menuItemMapper")],o)}(t.BeanStub),C=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),y=function(){return(y=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},b=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},M=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},S=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}var n;return C(o,e),n=o,o.prototype.getChartItems=function(e){var o,r;if(this.chartService){var i="pivotChart"===e?new A(this.gridOptionsService,this.chartService,this.localeService):new _(this.gridOptionsService,this.chartService,this.localeService),a=this.chartService.isEnterprise(),u=i.getMenuItem();if(u&&u.subMenu&&!a){var l=function(e){var t;return y(y({},e),{subMenu:null===(t=e.subMenu)||void 0===t?void 0:t.filter((function(e){return!e._enterprise})).map((function(e){return l(e)}))})};u=l(u)}var c=null===(r=null===(o=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===o?void 0:o.settingsPanel)||void 0===r?void 0:r.chartGroupsDef;return c&&(u=n.filterAndOrderChartMenu(u,c,i.getConfigLookup())),this.cleanInternals(u)}t.ModuleRegistry.__assertRegistered(t.ModuleNames.GridChartsModule,'the Context Menu key "'.concat(e,'"'),this.context.getGridId())},o.prototype.cleanInternals=function(e){if(!e)return e;var t=function(e){var o;return null==e||delete e._key,null==e||delete e._enterprise,null===(o=null==e?void 0:e.subMenu)||void 0===o||o.forEach((function(e){return t(e)})),e};return t(e)},o.buildLookup=function(e){var t={},o=function(e){t[e._key]=e,e.subMenu&&e.subMenu.forEach((function(e){return o(e)}))};return o(e),t},o.filterAndOrderChartMenu=function(e,o,n){var r,i=this.buildLookup(e),a=y(y({},e),{subMenu:[]});if(Object.entries(o).forEach((function(e){var o,r,u=M(e,2),l=u[0],c=u[1],s=n[l];if(null!==s)if(null!=s){var p=i[s._key];if(p)if(p.subMenu){var d=c.map((function(e){var o=s[e];if(null!=o)return i[o];t._.warnOnce("invalid chartGroupsDef config '".concat(l,".").concat(e,"'"))})).filter((function(e){return void 0!==e}));d.length>0&&(p.subMenu=d,null===(o=a.subMenu)||void 0===o||o.push(p))}else null===(r=a.subMenu)||void 0===r||r.push(p)}else t._.warnOnce("invalid chartGroupsDef config '".concat(l,"'"))})),0!=(null===(r=a.subMenu)||void 0===r?void 0:r.length))return a},b([t.Optional("chartService")],o.prototype,"chartService",void 0),o=n=b([t.Bean("chartMenuItemMapper")],o)}(t.BeanStub),A=function(){function e(e,t,o){this.gridOptionsService=e,this.chartService=t,this.localeService=o}return e.prototype.getMenuItem=function(){var e=this,o=this.localeService.getLocaleTextFunc(),n=function(t,n,r,i,a){return void 0===a&&(a=!1),{name:o(t,n),action:function(){return e.chartService.createPivotChart({chartType:r})},_key:i,_enterprise:a}};return{name:o("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:o("columnChart","Column"),subMenu:[n("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),n("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),n("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:o("barChart","Bar"),subMenu:[n("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),n("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),n("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:o("pieChart","Pie"),subMenu:[n("pie","Pie&lrm;","pie","pivotPie"),n("donut","Donut&lrm;","donut","pivotDonut")]},n("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:o("xyChart","X Y (Scatter)"),subMenu:[n("scatter","Scatter&lrm;","scatter","pivotScatter"),n("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:o("areaChart","Area"),subMenu:[n("area","Area&lrm;","area","pivotArea"),n("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),n("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:o("statisticalChart","Statistical"),subMenu:[n("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:o("hierarchicalChart","Hierarchical"),subMenu:[n("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),n("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:o("combinationChart","Combination"),subMenu:[n("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),n("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:t._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},e.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}},e}(),_=function(){function e(e,t,o){this.gridOptionsService=e,this.chartService=t,this.localeService=o}return e.prototype.getMenuItem=function(){var e=this,o=this.localeService.getLocaleTextFunc(),n=function(t,n,r,i,a){return void 0===a&&(a=!1),{name:o(t,n),action:function(){return e.chartService.createChartFromCurrentRange(r)},_key:i,_enterprise:a}};return{name:o("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:o("columnChart","Column"),subMenu:[n("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),n("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),n("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:o("barChart","Bar"),subMenu:[n("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),n("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),n("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:o("pieChart","Pie"),subMenu:[n("pie","Pie&lrm;","pie","rangePie"),n("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},n("line","Line&lrm;","line","rangeLineChart"),{name:o("xyChart","X Y (Scatter)"),subMenu:[n("scatter","Scatter&lrm;","scatter","rangeScatter"),n("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:o("areaChart","Area"),subMenu:[n("area","Area&lrm;","area","rangeArea"),n("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),n("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:o("polarChart","Polar"),subMenu:[n("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),n("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),n("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),n("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),n("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:o("statisticalChart","Statistical"),subMenu:[n("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),n("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),n("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),n("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:o("hierarchicalChart","Hierarchical"),subMenu:[n("treemap","Treemap&lrm;","treemap","rangeTreemap"),n("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:o("specializedChart","Specialized"),subMenu:[n("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),n("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:o("combinationChart","Combination"),subMenu:[n("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),n("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:t._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},e.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}},e}(),E=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),w=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},P=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return E(o,e),o.prototype.createColumnSelectPanel=function(e,t,o,r){var i,a,u=e.createManagedBean(new n.PrimaryColsPanel),l=null!==(a=null!==(i=null!=r?r:null==t?void 0:t.getColDef().columnChooserParams)&&void 0!==i?i:null==t?void 0:t.getColDef().columnsMenuParams)&&void 0!==a?a:{},c=l.contractColumnSelection,s=l.suppressColumnExpandAll,p=l.suppressColumnFilter,d=l.suppressColumnSelectAll,m=l.suppressSyncLayoutWithGrid,h=l.columnLayout;return u.init(!!o,this.gridOptionsService.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!c,suppressColumnExpandAll:!!s,suppressColumnFilter:!!p,suppressColumnSelectAll:!!d,suppressSyncLayoutWithGrid:!!h||!!m,onStateUpdated:function(){}}),"columnMenu"),h&&u.setColumnLayout(h),u},o.prototype.showColumnChooser=function(e){var o=this,n=e.column,r=e.chooserParams,i=e.eventSource;this.hideActiveColumnChooser();var a=this.createColumnSelectPanel(this,n,!0,r),u=this.localeService.getLocaleTextFunc(),l=this.columnModel.getAllDisplayedColumns().indexOf(n),c=n?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new t.AgDialog({title:u("chooseColumns","Choose Columns"),component:a,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:function(){var e;null===(e=o.focusService.findNextFocusableElement(a.getGui()))||void 0===e||e.focus(),o.dispatchVisibleChangedEvent(!0,n)},closedCallback:function(e){var t=o.activeColumnChooser.getGui();o.destroyBean(o.activeColumnChooser),o.activeColumnChooser=void 0,o.activeColumnChooserDialog=void 0,o.dispatchVisibleChangedEvent(!1,n),n&&o.menuUtils.restoreFocusOnClose({column:n,headerPosition:c,columnIndex:l,eventSource:i},t,e,!0)}})),this.activeColumnChooser=a},o.prototype.hideActiveColumnChooser=function(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)},o.prototype.dispatchVisibleChangedEvent=function(e,o){var n={type:t.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:"columnChooser",column:null!=o?o:null};this.eventService.dispatchEvent(n)},w([t.Autowired("focusService")],o.prototype,"focusService",void 0),w([t.Autowired("menuUtils")],o.prototype,"menuUtils",void 0),w([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),o=w([t.Bean("columnChooserFactory")],o)}(t.BeanStub),O=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),T=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},G=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}var n;return O(o,e),n=o,o.prototype.createMenu=function(e,o,n){var r=e.createManagedBean(new t.AgMenuList(0,{column:null!=o?o:null,node:null,value:null})),i=this.getMenuItems(o),a=this.menuItemMapper.mapWithStockItems(i,null!=o?o:null,n);return r.addMenuItems(a),r},o.prototype.getMenuItems=function(e){var o,r=this.getDefaultMenuOptions(e),i=null==e?void 0:e.getColDef().mainMenuItems;if(Array.isArray(i))o=i;else if("function"==typeof i)o=i(this.gridOptionsService.addGridCommonParams({column:e,defaultItems:r}));else{var a=this.gridOptionsService.getCallback("getMainMenuItems");o=a&&e?a({column:e,defaultItems:r}):r}return t._.removeRepeatsFromArray(o,n.MENU_ITEM_SEPARATOR),o},o.prototype.getDefaultMenuOptions=function(e){var t=[],o=this.menuService.isLegacyMenuEnabled();if(!e)return o||t.push("columnChooser"),t.push("resetColumns"),t;var r=!e.getColDef().lockPinned,i=this.columnModel.getRowGroupColumns().length,a=i>0,u=e.isAllowValue(),l=e.isAllowRowGroup(),c=e.isPrimary(),s=this.columnModel.isPivotMode(),p="clientSide"===this.rowModel.getType(),d=this.gridOptionsService.get("treeData"),m=c&&a&&u||!c;if(!o&&e.isSortable()){var h=e.getSort();"asc"!==h&&t.push("sortAscending"),"desc"!==h&&t.push("sortDescending"),h&&t.push("sortUnSort"),t.push(n.MENU_ITEM_SEPARATOR)}if(this.menuService.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(n.MENU_ITEM_SEPARATOR)),r&&t.push("pinSubMenu"),m&&t.push("valueAggSubMenu"),(r||m)&&t.push(n.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(n.MENU_ITEM_SEPARATOR),e.getColDef().showRowGroup)t.push("rowUnGroup");else if(l&&e.isPrimary()){if(e.isRowGroupActive())this.columnModel.isColumnGroupingLocked(e)||t.push("rowUnGroup");else t.push("rowGroup")}return t.push(n.MENU_ITEM_SEPARATOR),o||t.push("columnChooser"),t.push("resetColumns"),p&&(d||i>(s?1:0))&&(t.push("expandAll"),t.push("contractAll")),t},o.MENU_ITEM_SEPARATOR="separator",T([t.Autowired("menuItemMapper")],o.prototype,"menuItemMapper",void 0),T([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),T([t.Autowired("rowModel")],o.prototype,"rowModel",void 0),T([t.Autowired("filterManager")],o.prototype,"filterManager",void 0),T([t.Autowired("menuService")],o.prototype,"menuService",void 0),o=n=T([t.Bean("columnMenuFactory")],o)}(t.BeanStub),L=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),R=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},k=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return L(o,e),o.prototype.restoreFocusOnClose=function(e,t,o,n){var r=e.eventSource,i=o instanceof KeyboardEvent;if((n||i)&&r){var a=this.gridOptionsService.getDocument();(t.contains(a.activeElement)||a.activeElement===a.body)&&this.focusHeaderCell(e)}},o.prototype.closePopupAndRestoreFocusOnSelect=function(e,t,o){var n;o&&o.event&&o.event instanceof KeyboardEvent&&(n=o.event),e(n&&{keyboardEvent:n});var r=this.focusService.getFocusedCell(),i=this.gridOptionsService.getDocument();if(i.activeElement===i.body)if(r){var a=r.rowIndex,u=r.rowPinned,l=r.column;this.focusService.setFocusedCell({rowIndex:a,column:l,rowPinned:u,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)},o.prototype.onContextMenu=function(e,t,o){!this.gridOptionsService.get("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsService.get("suppressContextMenu")||o(null!=e?e:t.touches[0])&&(null!=e?e:t).preventDefault())},o.prototype.focusHeaderCell=function(e){var o=e.column,n=e.columnIndex,r=e.headerPosition,i=e.eventSource;if(this.columnModel.getAllDisplayedColumns().some((function(e){return e===o}))&&i&&t._.isVisible(i)){var a=this.focusService.findTabbableParent(i);a&&(o&&this.headerNavigationService.scrollToColumn(o),a.focus())}else if(r&&-1!==n){var u=this.columnModel.getAllDisplayedColumns(),l=u[n]||t._.last(u);l&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:l}})}},o.prototype.blockMiddleClickScrollsIfNeeded=function(e){var t=this.gridOptionsService,o=e.which;t.get("suppressMiddleClickScrolls")&&2===o&&e.preventDefault()},R([t.Autowired("focusService")],o.prototype,"focusService",void 0),R([t.Autowired("headerNavigationService")],o.prototype,"headerNavigationService",void 0),R([t.Autowired("columnModel")],o.prototype,"columnModel",void 0),o=R([t.Bean("menuUtils")],o)}(t.BeanStub),I={version:"31.1.0",moduleName:t.ModuleNames.MenuModule,beans:[a,d,f,S,P,G,k],dependantModules:[o.EnterpriseCoreModule]};exports.MenuModule=I;