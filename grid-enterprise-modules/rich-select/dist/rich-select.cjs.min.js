/**
          * @ag-grid-enterprise/rich-select - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/rich-select - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.2.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@ag-grid-community/core"),r=require("@ag-grid-enterprise/core"),i=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),a=function(e){function r(){return e.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return i(r,e),r.prototype.init=function(e){var r=this;this.params=e;var i=e.cellStartedEdit,a=e.cellHeight,o=e.values;if(t._.missing(o))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var c=this.buildRichSelectParams(),n=c.params,l=c.valuesPromise;this.richSelect=this.createManagedBean(new t.AgRichSelect(n)),this.appendChild(this.richSelect),l&&l.then((function(e){r.richSelect.setValueList({valueList:e,refresh:!0});var t=r.getSearchStringCallback(e);t&&r.richSelect.setSearchStringCreator(t)})),this.addManagedListener(this.richSelect,t.Events.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=i,t._.exists(a)&&this.richSelect.setRowHeight(a)}},r.prototype.onEditorPickerValueSelected=function(e){this.params.stopEditing(!e.fromEnterKey)},r.prototype.onEditorFocusOut=function(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)},r.prototype.buildRichSelectParams=function(){var e,t,r=this.params,i=r.cellRenderer,a=r.value,o=r.values,c=r.formatValue,n=r.searchDebounceDelay,l=r.valueListGap,s=r.valueListMaxHeight,u=r.valueListMaxWidth,h={value:a,cellRenderer:i,searchDebounceDelay:n,valueFormatter:c,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:r.allowTyping,filterList:r.filterList,searchType:r.searchType,highlightMatch:r.highlightMatch,maxPickerHeight:s,maxPickerWidth:u,placeholder:r.valuePlaceholder};return e="function"==typeof o?o(this.params):o,Array.isArray(e)?(h.valueList=e,h.searchStringCreator=this.getSearchStringCallback(e)):t=e,{params:h,valuesPromise:t}},r.prototype.getSearchStringCallback=function(e){var t=this,r=this.params.colDef;if("object"==typeof e[0]&&r.keyCreator)return function(e){return e.map((function(e){var i={value:e,colDef:t.params.colDef,column:t.params.column,node:t.params.node,data:t.params.data,api:t.gridOptionsService.api,columnApi:t.gridOptionsService.columnApi,context:t.gridOptionsService.context};return r.keyCreator(i)}))}},r.prototype.afterGuiAttached=function(){var e=this,t=this.focusAfterAttached,r=this.params;setTimeout((function(){if(e.isAlive()){t&&e.richSelect.getFocusableElement().focus(),e.richSelect.showPicker();var i=r.eventKey;i&&1===(null==i?void 0:i.length)&&e.richSelect.searchTextFromString(i)}}))},r.prototype.getValue=function(){return this.richSelect.getValue()},r.prototype.isPopup=function(){return!1},r}(t.PopupComponent),o={version:"30.2.1",moduleName:t.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:a},{componentName:"agRichSelectCellEditor",componentClass:a}],dependantModules:[r.EnterpriseCoreModule]};exports.RichSelectModule=o;