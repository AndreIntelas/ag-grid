var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,r)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,__spreadValues=(t,e)=>{for(var r in e||(e={}))__hasOwnProp.call(e,r)&&__defNormalProp(t,r,e[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(e))__propIsEnum.call(e,r)&&__defNormalProp(t,r,e[r]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__export=(t,e)=>{for(var r in e)__defProp(t,r,{get:e[r],enumerable:!0})},__copyProps=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of __getOwnPropNames(e))!__hasOwnProp.call(t,i)&&i!==r&&__defProp(t,i,{get:()=>e[i],enumerable:!(o=__getOwnPropDesc(e,i))||o.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,r,o)=>{for(var i=o>1?void 0:o?__getOwnPropDesc(e,r):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(i=(o?a(e,r,i):a(i))||i);return o&&i&&__defProp(e,r,i),i},main_exports={};__export(main_exports,{MenuModule:()=>MenuModule}),module.exports=__toCommonJS(main_exports);var import_core8=require("@ag-grid-community/core"),import_core9=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),EnterpriseMenuFactory=class extends import_core.BeanStub{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(t,e,r,o){const i=o?"filterMenuTab":void 0;this.showMenu(t,n=>{var a;const s=n.getGui();this.popupService.positionPopupUnderMouseEvent({type:r,column:t,mouseEvent:e,ePopup:s}),i&&((a=n.showTab)==null||a.call(n,i)),this.dispatchVisibleChangedEvent(!0,!1,t,i)},r,i,void 0,e.target)}showMenuAfterButtonClick(t,e,r,o){let i=-1,n="left";this.gridOptionsService.get("enableRtl")&&(i=1,n="right");const a=o?"filterMenuTab":void 0,s=a?[a]:void 0,u=this.menuService.isLegacyMenuEnabled();let p=(u?9:4)*i,h=u?-23:4;this.showMenu(t,l=>{var c;const m=l.getGui();this.popupService.positionPopupByComponent({type:r,column:t,eventSource:e,ePopup:m,alignSide:n,nudgeX:p,nudgeY:h,position:"under",keepWithinBounds:!0}),a&&((c=l.showTab)==null||c.call(l,a)),this.dispatchVisibleChangedEvent(!0,!1,t,a)},r,a,s,e)}showMenu(t,e,r,o,i,n){var a;const{menu:s,eMenuGui:u,anchorToElement:p,restoreFocusParams:h}=this.getMenuParams(t,i,n),l=[];l.push(g=>{const C=s.getGui();this.destroyBean(s),t&&(t.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(h,C,g))});const c=this.localeService.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:g=>{l.forEach(C=>C(g)),this.dispatchVisibleChangedEvent(!1,!1,t,o)},afterGuiAttached:g=>s.afterGuiAttached(Object.assign({},{container:r},g)),positionCallback:o?()=>e(s):void 0,ariaLabel:c("ariaLabelColumnMenu","Column Menu")});if(o||((a=s.showTabBasedOnPreviousSelection)==null||a.call(s),e(s)),this.menuService.isColumnMenuAnchoringEnabled()){const g=this.popupService.setPopupPositionRelatedToElement(u,p);g&&t&&this.addStopAnchoring(g,t,l)}s.addEventListener(TabbedColumnMenu.EVENT_TAB_SELECTED,g=>{this.dispatchVisibleChangedEvent(!1,!0,t),this.lastSelectedTab=g.key,this.dispatchVisibleChangedEvent(!0,!0,t)}),t?.setMenuVisible(!0,"contextMenu"),this.activeMenu=s,s.addEventListener(import_core.BeanStub.EVENT_DESTROYED,()=>{this.activeMenu===s&&(this.activeMenu=null)})}addStopAnchoring(t,e,r){t.then(o=>{e.addEventListener("leftChanged",o),e.addEventListener("visibleChanged",o),r.push(()=>{e.removeEventListener("leftChanged",o),e.removeEventListener("visibleChanged",o)})})}getMenuParams(t,e,r){const o={column:t,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),eventSource:r},i=this.createMenu(t,o,e,r);return{menu:i,eMenuGui:i.getGui(),anchorToElement:r||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:o}}createMenu(t,e,r,o){return this.menuService.isLegacyMenuEnabled()?this.createBean(new TabbedColumnMenu(t,e,this.lastSelectedTab,r,o)):this.createBean(new ColumnContextMenu(t,e,o))}dispatchVisibleChangedEvent(t,e,r,o){var i,n;const a={type:import_core.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:e,key:(n=(i=this.lastSelectedTab)!=null?i:o)!=null?n:this.menuService.isLegacyMenuEnabled()?TabbedColumnMenu.TAB_GENERAL:"columnMenu",column:r??null};this.eventService.dispatchEvent(a)}isMenuEnabled(t){var e;if(!this.menuService.isLegacyMenuEnabled())return!0;const r=!this.filterManager.isFilterAllowed(t),o=(e=t.getColDef().menuTabs)!=null?e:TabbedColumnMenu.TABS_DEFAULT;return(r&&o.includes(TabbedColumnMenu.TAB_FILTER)?o.length-1:o.length)>0}showMenuAfterContextMenuEvent(t,e,r){this.menuUtils.onContextMenu(e,r,o=>(this.showMenuAfterMouseEvent(t,o,"columnMenu"),!0))}};__decorateClass([(0,import_core.Autowired)("popupService")],EnterpriseMenuFactory.prototype,"popupService",2),__decorateClass([(0,import_core.Autowired)("focusService")],EnterpriseMenuFactory.prototype,"focusService",2),__decorateClass([(0,import_core.Autowired)("ctrlsService")],EnterpriseMenuFactory.prototype,"ctrlsService",2),__decorateClass([(0,import_core.Autowired)("columnModel")],EnterpriseMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("filterManager")],EnterpriseMenuFactory.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],EnterpriseMenuFactory.prototype,"menuUtils",2),__decorateClass([(0,import_core.Autowired)("menuService")],EnterpriseMenuFactory.prototype,"menuService",2),EnterpriseMenuFactory=__decorateClass([(0,import_core.Bean)("enterpriseMenuFactory")],EnterpriseMenuFactory);var _TabbedColumnMenu=class d extends import_core.BeanStub{constructor(e,r,o,i,n){super(),this.column=e,this.restoreFocusParams=r,this.initialSelection=o,this.restrictTo=i,this.sourceElement=n,this.tabFactories={},this.includeChecks={},this.tabFactories[d.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[d.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[d.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[d.TAB_GENERAL]=()=>!0,this.includeChecks[d.TAB_FILTER]=()=>e?this.filterManager.isFilterAllowed(e):!1,this.includeChecks[d.TAB_COLUMNS]=()=>!0}init(){const e=this.getTabsToCreate().map(r=>this.createTab(r));this.tabbedLayout=new import_core.TabbedLayout({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){var e,r;return this.restrictTo?this.restrictTo:((r=(e=this.column)==null?void 0:e.getColDef().menuTabs)!=null?r:d.TABS_DEFAULT).filter(o=>this.isValidMenuTabItem(o)).filter(o=>this.isNotSuppressed(o)).filter(o=>this.isModuleLoaded(o))}isModuleLoaded(e){return e===d.TAB_COLUMNS?import_core.ModuleRegistry.__isRegistered(import_core.ModuleNames.ColumnsToolPanelModule,this.context.getGridId()):!0}isValidMenuTabItem(e){let r=!0,o=d.TABS_DEFAULT;return this.restrictTo!=null&&(r=this.restrictTo.indexOf(e)>-1,o=this.restrictTo),r=r&&d.TABS_DEFAULT.indexOf(e)>-1,r||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${o}]`),r}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===d.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===d.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===d.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let r=null;switch(e.item){case this.tabItemColumns:r=d.TAB_COLUMNS;break;case this.tabItemFilter:r=d.TAB_FILTER;break;case this.tabItemGeneral:r=d.TAB_GENERAL;break}r&&this.activateTab(r)}activateTab(e){const r={type:d.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(r)}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return(e=this.sourceElement)!=null?e:this.getGui()}),this.mainMenuList.addEventListener(import_core.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:import_core._.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:d.TAB_GENERAL.replace("MenuTab",""),bodyPromise:import_core.AgPromise.resolve(this.mainMenuList.getGui()),name:d.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU"):null;if(!e)throw new Error("AG Grid - Unable to instantiate filter");const r=i=>{e?.filterPromise&&e.filterPromise.then(n=>{n&&n.afterGuiAttached&&n.afterGuiAttached(i)})},o=()=>{var i;return(i=e?.filterPromise)==null?void 0:i.then(n=>{var a;return(a=n?.afterGuiDetached)==null?void 0:a.call(n)})};return this.tabItemFilter={title:import_core._.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:d.TAB_FILTER.replace("MenuTab",""),bodyPromise:e?.guiPromise,afterAttachedCallback:r,afterDetachedCallback:o,name:d.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const o=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return o.classList.add("ag-menu-column-select"),e.appendChild(o),this.tabItemColumns={title:import_core._.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:d.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:import_core.AgPromise.resolve(e),name:d.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:r,hidePopup:o}=e;this.tabbedLayout.setAfterAttachedParams({container:r,hidePopup:o}),o&&(this.hidePopupFunc=o,this.addDestroyFunc(o))}getGui(){return this.tabbedLayout.getGui()}};_TabbedColumnMenu.EVENT_TAB_SELECTED="tabSelected",_TabbedColumnMenu.TAB_FILTER="filterMenuTab",_TabbedColumnMenu.TAB_GENERAL="generalMenuTab",_TabbedColumnMenu.TAB_COLUMNS="columnsMenuTab",_TabbedColumnMenu.TABS_DEFAULT=[_TabbedColumnMenu.TAB_GENERAL,_TabbedColumnMenu.TAB_FILTER,_TabbedColumnMenu.TAB_COLUMNS],__decorateClass([(0,import_core.Autowired)("filterManager")],_TabbedColumnMenu.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("columnChooserFactory")],_TabbedColumnMenu.prototype,"columnChooserFactory",2),__decorateClass([(0,import_core.Autowired)("columnMenuFactory")],_TabbedColumnMenu.prototype,"columnMenuFactory",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],_TabbedColumnMenu.prototype,"menuUtils",2),__decorateClass([import_core.PostConstruct],_TabbedColumnMenu.prototype,"init",1);var TabbedColumnMenu=_TabbedColumnMenu,ColumnContextMenu=class extends import_core.Component{constructor(t,e,r){super(`
            <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>
        `),this.column=t,this.restoreFocusParams=e,this.sourceElement=r}init(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var t;return(t=this.sourceElement)!=null?t:this.getGui()}),this.mainMenuList.addEventListener(import_core.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(t){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,t)}afterGuiAttached({hidePopup:t}){t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())}};__decorateClass([(0,import_core.Autowired)("columnMenuFactory")],ColumnContextMenu.prototype,"columnMenuFactory",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],ColumnContextMenu.prototype,"menuUtils",2),__decorateClass([(0,import_core.Autowired)("focusService")],ColumnContextMenu.prototype,"focusService",2),__decorateClass([(0,import_core.RefSelector)("eColumnMenu")],ColumnContextMenu.prototype,"eColumnMenu",2),__decorateClass([import_core.PostConstruct],ColumnContextMenu.prototype,"init",1);var import_core2=require("@ag-grid-community/core"),CSS_MENU="ag-menu",CSS_CONTEXT_MENU_OPEN="ag-context-menu-open",ContextMenuFactory=class extends import_core2.BeanStub{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(t,e,r){const o=[];if(import_core2._.exists(t)&&import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.ClipboardModule,this.context.getGridId())&&e&&(this.gridOptionsService.get("suppressCutToClipboard")||o.push("cut"),o.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.get("enableCharts")&&import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&o.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&o.push("chartRange")),import_core2._.exists(t)){const a=!import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.CsvExportModule,this.context.getGridId()),s=!import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.ExcelExportModule,this.context.getGridId()),u=this.gridOptionsService.get("suppressExcelExport")||s,p=this.gridOptionsService.get("suppressCsvExport")||a;!import_core2._.isIOSUserAgent()&&(!u||!p)&&o.push("export")}const i=o.length?o:void 0,n=e?.getColDef().contextMenuItems;if(Array.isArray(n))return n;if(typeof n=="function")return n(this.gridOptionsService.addGridCommonParams({column:e,node:t,value:r,defaultItems:i}));{const a=this.gridOptionsService.getCallback("getContextMenuItems");return a?a({column:e,node:t,value:r,defaultItems:i}):o}}onContextMenu(t,e,r,o,i,n){this.menuUtils.onContextMenu(t,e,a=>this.showMenu(r,o,i,a,n))}showMenu(t,e,r,o,i){const n=this.getMenuItems(t,e,r),a=this.ctrlsService.getGridBodyCtrl().getGui();if(n===void 0||import_core2._.missingOrEmpty(n))return!1;const s=new ContextMenu(n,e,t,r);this.createBean(s);const u=s.getGui(),p={column:e,rowNode:t,type:"contextMenu",mouseEvent:o,ePopup:u,nudgeY:1},h=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:()=>{a.classList.remove(CSS_CONTEXT_MENU_OPEN),this.destroyBean(s)},click:o,positionCallback:()=>{const c=this.gridOptionsService.get("enableRtl");this.popupService.positionPopupUnderMouseEvent(__spreadProps(__spreadValues({},p),{nudgeX:c?(u.offsetWidth+1)*-1:1}))},anchorToElement:i,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return l&&(a.classList.add(CSS_CONTEXT_MENU_OPEN),s.afterGuiAttached({container:"contextMenu",hidePopup:l.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=s,s.addEventListener(import_core2.BeanStub.EVENT_DESTROYED,()=>{this.activeMenu===s&&(this.activeMenu=null)}),l&&s.addEventListener(import_core2.AgMenuItemComponent.EVENT_CLOSE_MENU,l.hideFunc),!0}};__decorateClass([(0,import_core2.Autowired)("popupService")],ContextMenuFactory.prototype,"popupService",2),__decorateClass([(0,import_core2.Optional)("rangeService")],ContextMenuFactory.prototype,"rangeService",2),__decorateClass([(0,import_core2.Autowired)("ctrlsService")],ContextMenuFactory.prototype,"ctrlsService",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],ContextMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("menuUtils")],ContextMenuFactory.prototype,"menuUtils",2),ContextMenuFactory=__decorateClass([(0,import_core2.Bean)("contextMenuFactory")],ContextMenuFactory);var ContextMenu=class extends import_core2.Component{constructor(t,e,r,o){super(`<div class="${CSS_MENU}" role="presentation"></div>`),this.menuItems=t,this.column=e,this.node=r,this.value=o,this.menuList=null,this.focusedCell=null}addMenuItems(){const t=this.createManagedBean(new import_core2.AgMenuList(0,{column:this.column,node:this.node,value:this.value})),e=this.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui());t.addMenuItems(e),this.appendChild(t),this.menuList=t,t.addEventListener(import_core2.AgMenuItemComponent.EVENT_CLOSE_MENU,r=>this.dispatchEvent(r))}afterGuiAttached(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){const{rowIndex:e,rowPinned:r,column:o}=this.focusedCell,i=this.gridOptionsService.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:e,column:o,rowPinned:r,forceBrowserFocus:!0})}}destroy(){this.restoreFocusedCell(),super.destroy()}};__decorateClass([(0,import_core2.Autowired)("menuItemMapper")],ContextMenu.prototype,"menuItemMapper",2),__decorateClass([(0,import_core2.Autowired)("focusService")],ContextMenu.prototype,"focusService",2),__decorateClass([(0,import_core2.Autowired)("cellPositionUtils")],ContextMenu.prototype,"cellPositionUtils",2),__decorateClass([import_core2.PostConstruct],ContextMenu.prototype,"addMenuItems",1);var import_core3=require("@ag-grid-community/core"),MenuItemMapper=class extends import_core3.BeanStub{mapWithStockItems(t,e,r){if(!t)return[];const o=[];return t.forEach(i=>{let n;if(typeof i=="string"?n=this.getStockMenuItem(i,e,r):n=__spreadValues({},i),!n)return;const a=n,{subMenu:s}=a;s&&s instanceof Array&&(a.subMenu=this.mapWithStockItems(s,e,r)),n!=null&&o.push(n)}),o}getStockMenuItem(t,e,r){var o;const i=this.localeService.getLocaleTextFunc(),n=this.gridOptionsService.get("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:import_core3._.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnsPinned([e],"left","contextMenu"),checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:()=>this.columnModel.setColumnsPinned([e],"right","contextMenu"),checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:()=>this.columnModel.setColumnsPinned([e],null,"contextMenu"),checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!e?.isPrimary()&&!e?.getColDef().pivotValueColumn?null:{name:i("valueAggregation","Value Aggregation"),icon:import_core3._.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(e)}:null;case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(e,"contextMenu",n)};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns("contextMenu",n)};case"rowGroup":return{name:i("groupBy","Group by")+" "+import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:e?.isRowGroupActive()||!e?.getColDef().enableRowGroup,action:()=>this.columnModel.addRowGroupColumns([e],"contextMenu"),icon:import_core3._.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":const a=import_core3._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),s=e?.getColDef().showRowGroup,u=this.gridOptionsService.get("groupLockGroupColumns");if(s===!0)return{name:i("ungroupAll","Un-Group All"),disabled:u===-1||u>=this.columnModel.getRowGroupColumns().length,action:()=>this.columnModel.setRowGroupColumns(this.columnModel.getRowGroupColumns().slice(0,u),"contextMenu"),icon:a};if(typeof s=="string"){const c=this.columnModel.getPrimaryColumn(s),m=c!=null?import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(c,"header")):s;return{name:i("ungroupBy","Un-Group by")+" "+m,disabled:c!=null&&this.columnModel.isColumnGroupingLocked(c),action:()=>this.columnModel.removeRowGroupColumns([s],"contextMenu"),icon:a}}return{name:i("ungroupBy","Un-Group by")+" "+import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!e?.isRowGroupActive()||!e?.getColDef().enableRowGroup||this.columnModel.isColumnGroupingLocked(e),action:()=>this.columnModel.removeRowGroupColumns([e],"contextMenu"),icon:a};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:i("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:i("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:i("copyWithHeaders","Copy with Headers"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Cut from Menu",this.context.getGridId())){const c=this.focusService.getFocusedCell(),m=c?this.rowPositionUtils.getRowNode(c):null,g=m?c?.column.isCellEditable(m):!1;return{name:i("cut","Cut"),shortcut:i("ctrlX","Ctrl+X"),icon:import_core3._.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!g||this.gridOptionsService.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:!0,icon:import_core3._.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const p=[],h=import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.CsvExportModule,this.context.getGridId()),l=import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.get("suppressCsvExport")&&h&&p.push("csvExport"),!this.gridOptionsService.get("suppressExcelExport")&&l&&p.push("excelExport"),{name:i("export","Export"),subMenu:p,icon:import_core3._.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:import_core3._.createIconNoSpan("csvExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:i("excelExport","Excel Export"),icon:import_core3._.createIconNoSpan("excelExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return(o=this.chartMenuItemMapper.getChartItems(t))!=null?o:null;case"columnFilter":return e?{name:i("columnFilter","Column Filter"),icon:import_core3._.createIconNoSpan("filter",this.gridOptionsService,null),action:()=>this.menuService.showFilterMenu({column:e,buttonElement:r(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.ColumnsToolPanelModule,this.context.getGridId())?{name:i("columnChooser","Choose Columns"),icon:import_core3._.createIconNoSpan("columns",this.gridOptionsService,null),action:()=>this.menuService.showColumnChooser({column:e,eventSource:r()})}:null;case"sortAscending":return{name:i("sortAscending","Sort Ascending"),icon:import_core3._.createIconNoSpan("sortAscending",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(e,"asc",!1,"columnMenu")};case"sortDescending":return{name:i("sortDescending","Sort Descending"),icon:import_core3._.createIconNoSpan("sortDescending",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(e,"desc",!1,"columnMenu")};case"sortUnSort":return{name:i("sortUnSort","Clear Sort"),icon:import_core3._.createIconNoSpan("sortUnSort",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(e,null,!1,"columnMenu")};default:return console.warn(`AG Grid: unknown menu item type ${t}`),null}}createAggregationSubMenu(t){const e=this.localeService.getLocaleTextFunc();let r;if(t.isPrimary())r=t;else{const i=t.getColDef().pivotValueColumn;r=import_core3._.exists(i)?i:void 0}const o=[];if(r){const i=r.isValueActive(),n=this.aggFuncService.getFuncNames(r);o.push({name:e("noAggregation","None"),action:()=>{this.columnModel.removeValueColumns([r],"contextMenu"),this.columnModel.setColumnAggFunc(r,void 0,"contextMenu")},checked:!i}),n.forEach(a=>{o.push({name:e(a,this.aggFuncService.getDefaultFuncLabel(a)),action:()=>{this.columnModel.setColumnAggFunc(r,a,"contextMenu"),this.columnModel.addValueColumns([r],"contextMenu")},checked:i&&r.getAggFunc()===a})})}return o}};__decorateClass([(0,import_core3.Autowired)("columnModel")],MenuItemMapper.prototype,"columnModel",2),__decorateClass([(0,import_core3.Autowired)("gridApi")],MenuItemMapper.prototype,"gridApi",2),__decorateClass([(0,import_core3.Optional)("clipboardService")],MenuItemMapper.prototype,"clipboardService",2),__decorateClass([(0,import_core3.Optional)("aggFuncService")],MenuItemMapper.prototype,"aggFuncService",2),__decorateClass([(0,import_core3.Autowired)("focusService")],MenuItemMapper.prototype,"focusService",2),__decorateClass([(0,import_core3.Autowired)("rowPositionUtils")],MenuItemMapper.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core3.Autowired)("chartMenuItemMapper")],MenuItemMapper.prototype,"chartMenuItemMapper",2),__decorateClass([(0,import_core3.Autowired)("menuService")],MenuItemMapper.prototype,"menuService",2),__decorateClass([(0,import_core3.Autowired)("sortController")],MenuItemMapper.prototype,"sortController",2),MenuItemMapper=__decorateClass([(0,import_core3.Bean)("menuItemMapper")],MenuItemMapper);var VERSION="31.2.1",import_core4=require("@ag-grid-community/core"),ChartMenuItemMapper=class extends import_core4.BeanStub{getChartItems(t){var e,r;if(!this.chartService){import_core4.ModuleRegistry.__assertRegistered(import_core4.ModuleNames.GridChartsModule,`the Context Menu key "${t}"`,this.context.getGridId());return}const o=t==="pivotChart"?new PivotMenuItemMapper(this.gridOptionsService,this.chartService,this.localeService):new RangeMenuItemMapper(this.gridOptionsService,this.chartService,this.localeService),i=this.chartService.isEnterprise();let n=o.getMenuItem();if(n&&n.subMenu&&!i){const s=u=>{var p;return __spreadProps(__spreadValues({},u),{subMenu:(p=u.subMenu)==null?void 0:p.filter(h=>!h._enterprise).map(h=>s(h))})};n=s(n)}const a=(r=(e=this.gridOptionsService.get("chartToolPanelsDef"))==null?void 0:e.settingsPanel)==null?void 0:r.chartGroupsDef;return a&&(n=ChartMenuItemMapper.filterAndOrderChartMenu(n,a,o.getConfigLookup())),this.cleanInternals(n)}cleanInternals(t){if(!t)return t;const e=r=>{var o;return r==null||delete r._key,r==null||delete r._enterprise,(o=r?.subMenu)==null||o.forEach(i=>e(i)),r};return e(t)}static buildLookup(t){let e={};const r=o=>{e[o._key]=o,o.subMenu&&o.subMenu.forEach(i=>r(i))};return r(t),e}static filterAndOrderChartMenu(t,e,r){var o;const i=this.buildLookup(t);let n=__spreadProps(__spreadValues({},t),{subMenu:[]});if(Object.entries(e).forEach(([a,s])=>{var u,p;const h=r[a];if(h===null)return;if(h==null){import_core4._.warnOnce(`invalid chartGroupsDef config '${a}'`);return}const l=i[h._key];if(l)if(l.subMenu){const c=s.map(m=>{const g=h[m];if(g==null){import_core4._.warnOnce(`invalid chartGroupsDef config '${a}.${m}'`);return}return i[g]}).filter(m=>m!==void 0);c.length>0&&(l.subMenu=c,(u=n.subMenu)==null||u.push(l))}else(p=n.subMenu)==null||p.push(l)}),((o=n.subMenu)==null?void 0:o.length)!=0)return n}};__decorateClass([(0,import_core4.Optional)("chartService")],ChartMenuItemMapper.prototype,"chartService",2),ChartMenuItemMapper=__decorateClass([(0,import_core4.Bean)("chartMenuItemMapper")],ChartMenuItemMapper);var PivotMenuItemMapper=class{constructor(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(r,o,i,n,a=!1)=>({name:t(r,o),action:()=>this.chartService.createPivotChart({chartType:i}),_key:n,_enterprise:a});return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","pivotPie"),e("donut","Donut&lrm;","donut","pivotDonut")]},e("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","pivotScatter"),e("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","pivotArea"),e("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[e("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),e("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:import_core4._.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},RangeMenuItemMapper=class{constructor(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(r,o,i,n,a=!1)=>({name:t(r,o),action:()=>this.chartService.createChartFromCurrentRange(i),_key:n,_enterprise:a});return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","rangePie"),e("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},e("line","Line&lrm;","line","rangeLineChart"),{name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","rangeScatter"),e("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","rangeArea"),e("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("polarChart","Polar"),subMenu:[e("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),e("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),e("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),e("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),e("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[e("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),e("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),e("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),e("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemap","Treemap&lrm;","treemap","rangeTreemap"),e("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[e("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),e("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:import_core4._.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},import_core5=require("@ag-grid-community/core"),import_column_tool_panel=require("@ag-grid-enterprise/column-tool-panel"),ColumnChooserFactory=class extends import_core5.BeanStub{createColumnSelectPanel(t,e,r,o){var i,n;const a=t.createManagedBean(new import_column_tool_panel.PrimaryColsPanel),s=(n=(i=o??e?.getColDef().columnChooserParams)!=null?i:e?.getColDef().columnsMenuParams)!=null?n:{},{contractColumnSelection:u,suppressColumnExpandAll:p,suppressColumnFilter:h,suppressColumnSelectAll:l,suppressSyncLayoutWithGrid:c,columnLayout:m}=s;return a.init(!!r,this.gridOptionsService.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!u,suppressColumnExpandAll:!!p,suppressColumnFilter:!!h,suppressColumnSelectAll:!!l,suppressSyncLayoutWithGrid:!!m||!!c,onStateUpdated:()=>{}}),"columnMenu"),m&&a.setColumnLayout(m),a}showColumnChooser({column:t,chooserParams:e,eventSource:r}){this.hideActiveColumnChooser();const o=this.createColumnSelectPanel(this,t,!0,e),i=this.localeService.getLocaleTextFunc(),n=this.columnModel.getAllDisplayedColumns().indexOf(t),a=t?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new import_core5.AgDialog({title:i("chooseColumns","Choose Columns"),component:o,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var s;(s=this.focusService.findNextFocusableElement(o.getGui()))==null||s.focus(),this.dispatchVisibleChangedEvent(!0,t)},closedCallback:s=>{const u=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,t),t&&this.menuUtils.restoreFocusOnClose({column:t,headerPosition:a,columnIndex:n,eventSource:r},u,s,!0)}})),this.activeColumnChooser=o}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(t,e){const r={type:import_core5.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:"columnChooser",column:e??null};this.eventService.dispatchEvent(r)}};__decorateClass([(0,import_core5.Autowired)("focusService")],ColumnChooserFactory.prototype,"focusService",2),__decorateClass([(0,import_core5.Autowired)("menuUtils")],ColumnChooserFactory.prototype,"menuUtils",2),__decorateClass([(0,import_core5.Autowired)("columnModel")],ColumnChooserFactory.prototype,"columnModel",2),ColumnChooserFactory=__decorateClass([(0,import_core5.Bean)("columnChooserFactory")],ColumnChooserFactory);var import_core6=require("@ag-grid-community/core"),ColumnMenuFactory=class extends import_core6.BeanStub{createMenu(t,e,r){const o=t.createManagedBean(new import_core6.AgMenuList(0,{column:e??null,node:null,value:null})),i=this.getMenuItems(e),n=this.menuItemMapper.mapWithStockItems(i,e??null,r);return o.addMenuItems(n),o}getMenuItems(t){const e=this.getDefaultMenuOptions(t);let r;const o=t?.getColDef().mainMenuItems;if(Array.isArray(o))r=o;else if(typeof o=="function")r=o(this.gridOptionsService.addGridCommonParams({column:t,defaultItems:e}));else{const i=this.gridOptionsService.getCallback("getMainMenuItems");i&&t?r=i({column:t,defaultItems:e}):r=e}return import_core6._.removeRepeatsFromArray(r,ColumnMenuFactory.MENU_ITEM_SEPARATOR),r}getDefaultMenuOptions(t){const e=[],r=this.menuService.isLegacyMenuEnabled();if(!t)return r||e.push("columnChooser"),e.push("resetColumns"),e;const o=!t.getColDef().lockPinned,i=this.columnModel.getRowGroupColumns().length,n=i>0,a=t.isAllowValue(),s=t.isAllowRowGroup(),u=t.isPrimary(),p=this.columnModel.isPivotMode(),h=this.rowModel.getType()==="clientSide",l=this.gridOptionsService.get("treeData"),c=u&&n&&a||!u;if(!r&&t.isSortable()){const C=t.getSort();C!=="asc"&&e.push("sortAscending"),C!=="desc"&&e.push("sortDescending"),C&&e.push("sortUnSort"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR)}return this.menuService.isFilterMenuItemEnabled(t)&&(e.push("columnFilter"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR)),o&&e.push("pinSubMenu"),c&&e.push("valueAggSubMenu"),(o||c)&&e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),t.getColDef().showRowGroup?e.push("rowUnGroup"):s&&t.isPrimary()&&(t.isRowGroupActive()?this.columnModel.isColumnGroupingLocked(t)||e.push("rowUnGroup"):e.push("rowGroup")),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),r||e.push("columnChooser"),e.push("resetColumns"),h&&(l||i>(p?1:0))&&(e.push("expandAll"),e.push("contractAll")),e}};ColumnMenuFactory.MENU_ITEM_SEPARATOR="separator",__decorateClass([(0,import_core6.Autowired)("menuItemMapper")],ColumnMenuFactory.prototype,"menuItemMapper",2),__decorateClass([(0,import_core6.Autowired)("columnModel")],ColumnMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core6.Autowired)("rowModel")],ColumnMenuFactory.prototype,"rowModel",2),__decorateClass([(0,import_core6.Autowired)("filterManager")],ColumnMenuFactory.prototype,"filterManager",2),__decorateClass([(0,import_core6.Autowired)("menuService")],ColumnMenuFactory.prototype,"menuService",2),ColumnMenuFactory=__decorateClass([(0,import_core6.Bean)("columnMenuFactory")],ColumnMenuFactory);var import_core7=require("@ag-grid-community/core"),MenuUtils=class extends import_core7.BeanStub{restoreFocusOnClose(t,e,r,o){const{eventSource:i}=t,n=r instanceof KeyboardEvent;if(!o&&!n||!i)return;const a=this.gridOptionsService.getDocument();!e.contains(a.activeElement)&&a.activeElement!==a.body||this.focusHeaderCell(t)}closePopupAndRestoreFocusOnSelect(t,e,r){let o;r&&r.event&&r.event instanceof KeyboardEvent&&(o=r.event),t(o&&{keyboardEvent:o});const i=this.focusService.getFocusedCell(),n=this.gridOptionsService.getDocument();if(n.activeElement===n.body)if(i){const{rowIndex:a,rowPinned:s,column:u}=i;this.focusService.setFocusedCell({rowIndex:a,column:u,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(e)}onContextMenu(t,e,r){if(!this.gridOptionsService.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),this.gridOptionsService.get("suppressContextMenu")))return;const o=t??e.touches[0];r(o)&&(t??e).preventDefault()}focusHeaderCell(t){const{column:e,columnIndex:r,headerPosition:o,eventSource:i}=t;if(this.columnModel.getAllDisplayedColumns().some(a=>a===e)&&i&&import_core7._.isVisible(i)){const a=this.focusService.findTabbableParent(i);a&&(e&&this.headerNavigationService.scrollToColumn(e),a.focus())}else if(o&&r!==-1){const a=this.columnModel.getAllDisplayedColumns(),s=a[r]||import_core7._.last(a);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:o.headerRowIndex,column:s}})}}blockMiddleClickScrollsIfNeeded(t){const{gridOptionsService:e}=this,{which:r}=t;e.get("suppressMiddleClickScrolls")&&r===2&&t.preventDefault()}};__decorateClass([(0,import_core7.Autowired)("focusService")],MenuUtils.prototype,"focusService",2),__decorateClass([(0,import_core7.Autowired)("headerNavigationService")],MenuUtils.prototype,"headerNavigationService",2),__decorateClass([(0,import_core7.Autowired)("columnModel")],MenuUtils.prototype,"columnModel",2),MenuUtils=__decorateClass([(0,import_core7.Bean)("menuUtils")],MenuUtils);var MenuModule={version:VERSION,moduleName:import_core8.ModuleNames.MenuModule,beans:[EnterpriseMenuFactory,ContextMenuFactory,MenuItemMapper,ChartMenuItemMapper,ColumnChooserFactory,ColumnMenuFactory,MenuUtils],dependantModules:[import_core9.EnterpriseCoreModule]};
