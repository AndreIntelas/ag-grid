{"version":3,"sources":["reactUi/header/headerRowContainerComp.tsx"],"names":[],"mappings":"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","file":"headerRowContainerComp.mjs","sourcesContent":["import React, { memo, useCallback, useContext, useMemo, useRef, useState } from 'react';\nimport { BeansContext } from '../beansContext';\nimport {\n    IHeaderRowContainerComp, HeaderRowCtrl, HeaderRowContainerCtrl, ColumnPinnedType\n} from '@ag-grid-community/core';\nimport { CssClasses } from '../utils';\nimport HeaderRowComp from './headerRowComp';\n\n\nconst HeaderRowContainerComp = (props: { pinned: ColumnPinnedType }) => {\n\n    const [cssClasses, setCssClasses] = useState<CssClasses>(() => new CssClasses());\n    const [ariaHidden, setAriaHidden] = useState<true | false>(false);\n    const [headerRowCtrls, setHeaderRowCtrls] = useState<HeaderRowCtrl[]>([]);\n\n    const {context} = useContext(BeansContext);\n    const eGui = useRef<HTMLDivElement | null>(null);\n    const eCenterContainer = useRef<HTMLDivElement>(null);\n    const headerRowCtrlRef = useRef<HeaderRowContainerCtrl | null>(null);\n\n    const pinnedLeft = props.pinned === 'left';\n    const pinnedRight = props.pinned === 'right';\n    const centre = !pinnedLeft && !pinnedRight;\n\n    const setRef = useCallback((e: HTMLDivElement) => {\n        eGui.current = e;\n        if (!eGui.current) {\n            context.destroyBean(headerRowCtrlRef.current);\n            headerRowCtrlRef.current = null;\n            return;\n        }\n\n        const compProxy: IHeaderRowContainerComp = {\n            setDisplayed: displayed => {\n                setCssClasses(prev => prev.setClass('ag-hidden', !displayed));\n                setAriaHidden(!displayed);\n            },\n            setCtrls: ctrls => setHeaderRowCtrls(ctrls),\n\n            // centre only\n            setCenterWidth: width => {\n                if (eCenterContainer.current) {\n                    eCenterContainer.current.style.width = width;\n                }\n            },\n            setViewportScrollLeft: left => {\n                if (eGui.current) {\n                    eGui.current.scrollLeft = left;\n                }\n            },\n\n            // pinned only\n            setPinnedContainerWidth: width => {\n                if (eGui.current) {\n                    eGui.current.style.width = width;\n                    eGui.current.style.minWidth = width;\n                    eGui.current.style.maxWidth = width;\n                }\n            }\n        };\n\n        headerRowCtrlRef.current = context.createBean(new HeaderRowContainerCtrl(props.pinned));\n        headerRowCtrlRef.current.setComp(compProxy, eGui.current);\n\n    }, []);\n\n    const className = useMemo(() => cssClasses.toString(), [cssClasses]);\n\n    const insertRowsJsx = () => headerRowCtrls.map( ctrl => <HeaderRowComp ctrl={ctrl} key={ctrl.getInstanceId()} /> );\n\n    return (\n        <>\n            {\n                pinnedLeft && \n                <div ref={setRef} className={\"ag-pinned-left-header \" + className} aria-hidden={ariaHidden} role=\"presentation\">\n                    { insertRowsJsx() }\n                </div>\n            }\n            { \n                pinnedRight && \n                <div ref={setRef} className={\"ag-pinned-right-header \" + className} aria-hidden={ariaHidden} role=\"presentation\">\n                { insertRowsJsx() }\n            </div>\n            }\n            { \n                centre && \n                <div ref={setRef} className={\"ag-header-viewport \" + className} role=\"presentation\">\n                        <div ref={eCenterContainer} className={\"ag-header-container\"} role=\"rowgroup\">\n                        { insertRowsJsx() }\n                    </div>\n                </div>\n            }\n        </>\n    );\n};\n\nexport default memo(HeaderRowContainerComp);\n"]}